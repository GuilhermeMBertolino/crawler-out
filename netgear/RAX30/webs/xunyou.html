<!DOCTYPE html>
<? include_once 'php/commonCfg.php';?>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>网件</title>
        <style>
            * {
                margin: 0;
                padding: 0;
            }

            img,
            button,
            input,
            a {
                border: 0;
                background: transparent;
                outline: none;
                -webkit-tap-highlight-color: transparent;
            }

            html,
            body {
                height: 100%;
                background-color: #e4e4e4;
                text-align: left;
            }

            p {
                font-family: "Microsoft YaHei";
                font-size: 0.18rem;
                color: #666;
            }

            .top {
                width: 100vw;
                height: 1.3rem;
                background: #ffffff;
                border-radius: 0.12rem;
                display: flex;
                align-items: center;
                justify-content: space-between;
            }
            .btn {
                margin-right: 0.39rem;
                background: #0ad198;
                padding: 0.15rem 0.45rem;
                border-radius: 0.05rem;
            }
            .text {
                margin-left: 0.45rem;
            }
            .content {
                margin-top: 0.26rem;
            }
            .title {
                font-size: 30px;
                font-weight: bold;
                color: #0ad198;
                margin-bottom: 0.12rem;
            }
            .flexSty {
                display: flex;
                justify-content: flex-start;
                margin-top: 0.12rem;
            }
            .boldBlack {
                font-weight: bold;
                color: #000000;
            }
            .boldGreen {
                font-weight: bold;
                color: #0ad198;
            }
            .boldWhite {
                font-weight: bold;
                color: #ffffff;
            }
            .margin-code {
                margin-bottom: 0.18rem;
            }
            .content-top {
                display: flex;
                align-items: flex-start;
                justify-content: space-between;
                margin-left: 0.12rem;
            }
            .left {
                margin-right: 0.5rem;
            }
            .right {
                display: flex;
            }
            .right img {
                width: 2.04rem;
            }
            .icon {
                height: 0.16rem;
                width: 0.16rem;
                background: #0ad198;
                color: #ffffff;
                font-size: 0.1rem;
                text-align: center;
                line-height: 0.16rem;
                border-radius: 0.1rem;
                margin-right: 0.04rem;
                font-weight: bold;
            }
            .publicity {
                margin-top: 0.24rem;
                width: 100vw;
                border-radius: 0.1rem;
            }
            .vertical-center {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
        </style>
        <script src="js/jquery.min.js"></script>
        <script src="js/utils.js<? getVer(); ?>"></script>
        <script>
            var docEle = document.documentElement;
            var deviceWidth = docEle.clientWidth;
            if (deviceWidth > 750) deviceWidth = 750;
            docEle.style.fontSize = deviceWidth / 7.5 + "px";
        </script>
    </head>
    <body>
        <div class="app" lanmac="">
            <div class="top">
                <p class="text">
                    <!-- 迅游加速器插件当前状态： -->
                    <!-- <span class="boldBlack" id="status"></span> -->
                </p>
                <p class="btn boldWhite" id="setUp">进入加速设置</p>
            </div>

            <div class="content">
                <div class="content-top" id="content-top">
                    <div class="left">
                        <p class="title">迅游加速器</p>
                        <p>迅游路由器插件，支持PC电脑和三大主机PS、Xbox、Switch等上千款热门联机游戏加速。</p>
                        <p>独有的AI智能加速、军工级专线等黑科技为流畅游戏提供稳定保障。</p>
                        <p style="margin-bottom: 0.06rem">一键加速即可畅享，Ping更低，无Loss，NAT类型全Open。</p>
                        <div class="flexSty">
                            <p class="icon">1</p>
                            <div>
                                <p class="boldBlack">使用加速功能方法1 :</p>
                                <p class="boldGreen">点击上方【进入加速设置】按钮,可立即进行加速操作</p>
                            </div>
                        </div>
                        <div class="flexSty">
                            <p class="icon">2</p>
                            <div>
                                <p class="boldBlack">使用加速功能方法2 :</p>
                                <p class="boldGreen">手机扫一扫右侧二维码,下载安装迅游加速移动端管理APP,即可在手机上操作加速</p>
                            </div>
                        </div>
                    </div>
                    <div class="right" id="right">
                        <div class="vertical-center" style="margin-right: 0.52rem">
                            <p class="boldBlack margin-code">扫一扫下载<span class="boldGreen">IOS</span>端管理APP</p>
                            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEAAQMAAABmvDolAAAABlBMVEX///8AAABVwtN+AAABi0lEQVRo3u3YsZGFMAwE0GV+8ENKcCkujSvNpbgEhwQMe5bW8Jm7Cy6XN+VFGlsywswIlZJJ1kS2lTvwpucMBGDZSi5IFVjb2tDBgZ4lFCD5tRV0ISLwIs8J/gL9M6tVktwDg1wE2Nb9vUcElg5Gg+nEAXpCAaUXKtdUU1tVKHomuMAnmeowAhiJA+xeYWPpIJHV+qzqdGDhGQqYyQVXndqbXRwIBoBNlfIOQwO7nmrnMsENJPiF3AXVYUjur+N1AIgFMAqFxAasj5EUB3iHsQjQbxapmxUIgNj0VDOBq9P6eVkmeACMSiJX68V2ooAuYIkDiOupBh/NbLi/L2cc8Oi01UYzeY3mFxkIUJ3WSqXJa2YH0G/OMsEN9PUzmk14JXWm4gCOTovnaKblWM5A4PmvN0Yz7F9PS5I4gErBWB1So9cn7wQCP7ZJRQR2s9RgGApcW9bMazlAzxEUaDnA5utF3ayAwA5MosW/68BM8PtmaS2f9KK1DuOzORBQOsg+mu+r5Z02Dpj5V74BAF4qZVIHiQ4AAAAASUVORK5CYII=" alt=""/>
                        </div>
                        <div class="vertical-center">
                            <p class="boldBlack margin-code">扫一扫下载<span class="boldGreen">Android</span>端管理APP</p>
                            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEAAQMAAABmvDolAAAABlBMVEX///8AAABVwtN+AAABlklEQVRo3u2YsY3uMAyD9ZAiZUbwKBntz2gexSOkdBGEj5R8Ce5wxfUyiwCBvoqQZNo2NYRQ3VH1u+HcgL7CdScCTPqwKhWc/K59vfT3LxUA4PjUvbIKENi6gAW4J/AbgFqa99S5dssMAC2QFT0jMCZLHdMK+4XkmKxUQIiDszcB2+mDA9cEHuDVXlmPA8ke5QFAHaZNO04kEmJisvIAhkAUUSQCIc5WNuD4QEZRJRpm7ctFq26bwAPAWA8jiycURRQ3Uk4mA2LVljYaqpstl/uUCIBO5mMnoYiynR7t5ZN2TCZADeN3nDeiiJjAT4BG4jAHICcpHy0NVh6AIgBmWqCNM6mb+unKBcA3rRFobhStWrtvGGQCEE5RlfWvReuDc9sEBvBaubOlWnFgPA5cyQAYFy2GRkfBlQsYUmQt8DtOX5VRHMkDIFRJsB5hjcgVm3YCD/A+R++qWoQ5s3wAgON5VQMwJotWZQRUB4FQXyKrJQTGa7MaZtz97wl8AyQCRNr7rMa6JisRECKgu94AOsvJgKk/6T81LHg+4/8ypgAAAABJRU5ErkJggg==" alt=""/>
                        </div>
                    </div>
                </div>
                <a href="https://router.xunyou.com/j.php?a=7" target="_blank">
                    <img src="https://image.xunyou.com/images/router/publicity.png" class="publicity" alt=""/>
                </a>
            </div>
        </div>

        <script type="text/javascript" src="https://act.xunyou.com/javascript/lib/xunyouweb.js" ></script>
        <!-- <script type="application/javascript" src="../lib/javascript/game-data.js"></script> -->
        <script>
            var url =
                "https://router.xunyou.com/dist/login.html?partner=netgear&salesid=312469972&eid=10697&regfrom=router_web";
            const minWidth = 1320;

            function loadingLanMacAddr()
            {
                fetchData('target', 'xunyou', '', 'post_fillout_init');
            }

            function post_fillout_init()
            {
                var lanmac = document.getElementsByName('lanMacAddr')[0].value;
                document.querySelector('.app').setAttribute('lanmac', lanmac);

                getLanmac();
                setBtnClickEvent();
            }

            main();

            function main() {
                // todo 适配小屏幕、移动端
                if (docEle.clientWidth < minWidth) {
                    let dom = document.getElementById("content-top");
                    dom.style.display = "block";

                    let right = document.getElementById("right");
                    right.style.marginTop = ".12rem";
                }

                loadingLanMacAddr();
                //getLanmac();
                //setBtnClickEvent();
                // getAccInfo();
                // setInterval(getAccInfo, 5000);
            }

            function getLanmac() {
                var lanmac = document.querySelector('.app').getAttribute('lanmac');
                if (lanmac) {
                    url += ('&lanmac=' + lanmac);
                }
            }

            function setBtnClickEvent() {
                let dom = document.getElementById("setUp");

                dom.addEventListener("click", function () {
                    window.open(url);
                });
            }

            function getAccInfo() {
                _xyweb.use(["jquery"], function () {
                    let data = {
                        ifVers: 1,
                    };
                    let url =
                        "https://plugin.xunyou.com:2390/route/AccInfo?app_type=3&app_version=&source=1&device_id=";

                    $.post(url, JSON.stringify(data), function (data) {
                        const { accInfo, status } = data;
                        let text = "未加速";
                        if (accInfo && accInfo.length > 0 && accInfo[0].accStatus === 8) {
                            // let res = getStatus(
                            //     accInfo[0].gameId,
                            //     accInfo[0].serverid,
                            //     accInfo[0].gameArea
                            // );
                            // text = "已加速  " + "(" + res.join("/") + ")";
                            text = "已加速 " + "(" + accInfo[0].gameName + '/' + accInfo[0].gameAreaName + ')';
                        }

                        changeStatus(text);
                    }).fail(function (response) {
                        console.error("Error: " + response.responseText);
                        changeStatus("加速插件无响应");
                    });
                });
            }

            function changeStatus(text) {
                let s = document.getElementById("status");

                s.innerHTML = text;
            }

            function getStatus(gameId, serverId, areaId) {
                let gameName, serverName, gameAreaName;
                let o = gameData[gameId];
                gameName = o.gameName;
                let index = o.gameZone.findIndex(function (item) {
                    return item.areaId === areaId;
                });
                let zoneObj = o.gameZone[index];
                gameAreaName = zoneObj.areaName;

                if (
                    Array.isArray(zoneObj.serverid) &&
                    Array.isArray(zoneObj.serverName)
                ) {
                    index = zoneObj.serverid.indexOf(serverId);
                    serverName = zoneObj.serverName[index];
                } else {
                    serverName = zoneObj.serverName;
                }
                let tempArr = [
                    gameName || "",
                    gameAreaName || "",
                    serverName || "",
                ];

                return tempArr.filter(function (item) {
                    return item;
                });
            }
        </script>
        <form id="target" name="formname">
            <input class="target" name="lanMacAddr" type=hidden disabled>
        </form>
    </body>
</html>
