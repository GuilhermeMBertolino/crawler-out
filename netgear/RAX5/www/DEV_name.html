<!DOCTYPE HTML>
<% 
      local commonCfg = require "webGetFunc.commonCfg"
%>
<html>
<head>
  <META name="description" content="RAX60"/>
  <META http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <META http-equiv="Content-Style-Type" content="text/css"/>
  <META http-equiv="Pragma" content="no-cache"/>
  <META HTTP-equiv="Cache-Control" content="no-cache"/>
  <META HTTP-EQUIV="Expires" CONTENT="Mon, 06 Jan 1990 00:00:01 GMT"/>

 <title>NETGEAR Router <? commonCfg.getModelNameStr()?></title>
 
  <script src="js/jquery.min.js"></script>
  <script src="js/jquery.mousewheel.js"></script>
  <script src="js/jquery.jscrollpane.min.js"></script>
  <script src="js/utils.js<? commonCfg.getVer(); ?>"></script>

  <link rel="stylesheet" href="css/form.css">
  <link rel="stylesheet" href="css/button.css">
	<link rel="stylesheet" href="css/custom.css"  type="text/css">
  <link rel="stylesheet" href="css/settings.css">
  <!--
  <style TYPE="text/javascript">
    classes.num.all.fontFamily = "Courier";
    classes.num.all.fontSize = "10pt" ;
  </style>
  -->
  <script>
  CSRF_TOKEN = <?= commonCfg.genCsrfTokenFile('tokenNumber')?>;

  function init_func()  
  {
      $("#cancel_bt2").on("click",function(){
           window.location.reload();
      });
  
      $("#apply_bt2").on("click",function(){
          if($("input[name='device_name_change']:checked").val() == "change")
          {
              $("input[name='syncNetworkName']").prop("disabled", false); 
          }
          $.postForm('deviceName', $('#target'), 'cgi-bin/netgear.plua');
      }); 
  }

  function post_fillout_init()
  {
      $("[name=name]").val(decodeHtml($("[name=name]").val()));
  }

  function setMsgDiv()
  {
      var readyshareName = "readyshare"; //TODO: should get from usb.lua
      var radio1Str = window.top.mlang["DNC4"]  + " " + readyshareName + " " + window.top.mlang["CBE010"] + " \\\\" + $("input[name='name']").val(); 
      var radio2Str = window.top.mlang["DNC5"]  + " " + readyshareName;
      $("#readyshare_radio1").text(radio1Str);
      $("#readyshare_radio2").text(radio2Str);
  }

  function validation(cf) {
      $("#devn_error").hide();
    var msg = "";

    if (cf.name.value == "")
      {
          $("#devn_error").text(window.top.mlang["ALSE02"]);//Device name can not be null.
          $("#devn_error").show();
          return false;
      }

      if (cf.name.value.match( /[^\x20-\x7E]/ ))
      {
          $("#devn_error").text(window.top.mlang["AAWE04"]);//Invalid device name.
          $("#devn_error").show();
          return false;
    }

      if (cf.name.value.length > 32)
      {
          $("#devn_error").text(window.top.mlang["PCVP_001"]);//Please use alpha numericals up to 32 characters
          $("#devn_error").show();
      return false;
    }

    return true;
  }

  function formSubmit(btn) {
     //$("#apply").prop("disabled",true);
    if (validation(document.forms[0])) {
          //setMsgDiv();
          //$("#msgDiv").show();
          $.postForm('deviceName', $('#target'), 'cgi-bin/netgear.plua');
    }
  }
  </script>
</head>

<? commonCfg.bodyBegin('deviceName', 'DEV_name', 'MAD001', 'Device Name', 'init_func', 'post_fillout_init') ?>
      <div id="main">
        <div class="form-group">
      
  <div class="form-row">
     <a><span mlang="DNC1" >Device Name identifies this router. It is used by many different features on the router.</span></a>
  </div>
        
  <div class="form-row">
     <!-- a><span mlang="UBS160">Note: when you change this name the ReadySHARE storage folder access path will be also change to the device name.</span></a -->
  </div>
        
  <div class="form-row">
     <a href="javascript:loadhelp('DEV_name','name_tag')" tabindex="-1" mlang="MAD001" >Device Name:</a>
  </div>
        
          <div class="form-row" style="display:none; color: red;" id="devn_error">
        
          </div>
        
  <div class="form-row">
            <input type="text" name="name" class="input1" id="device_name" MAXLENGTH="32" SIZE="24" />
  </div>
        
  <div class="form-row">
    <a mlang="PCVP_001">Please use alpha numericals up to 32 characters</a>
  </div>
          <div class="space-divider">&nbsp;</div>
          <div class="space-divider">&nbsp;</div>
          <div class="space-divider">&nbsp;</div>
          <div class="space-divider">&nbsp;</div>
        </div>
        <input type="hidden" name="syncNetworkName" value="true" disabled>
      </div>
    <!-- btns -->
      <div class="form-btn-row" id="form_btn_div">
        <button type="button" value="BUTTON"  onClick="location.href=\'%s\';" name="Cancel" id="cancel" class="button-cancel cancel_bt" mlang="UAS021">Cancel</button>
        <button type="button" value="apply"  onClick="formSubmit($(this))" name="apply" id="apply" class="button-apply apply_bt" mlang="LUP004" >Apply</button>
      </div>
    </form>
    <div id="msgDiv" align="center" class=" pop_box" style="display: none; position: absolute; left: 40%; top: 20%; margin-left: -225px; width: 634px; max-height: 280px; z-index: 10001;">
      <div id="msgTitle" align="left" style="margin-left: 30px; margin-right: 30px; margin-bottom: 20px; padding: 0px; opacity: 0.75; font: 12px Verdana, Geneva, Arial, Helvetica, sans-serif; cursor: pointer;">
        <table cellpadding="0" cellspacing="2" border="0">
          <tbody>
            <tr>
              <td colspan="3">
                <h3>Do you want to apply the Device Name change to the readyshare storage access path readyshare?</h3>
              </td>
            </tr>
            <tr>
              <td colspan="3">
                <input type="radio" name="device_name_change" id="device_name_change_ra" checked="" value="change">
                <label id="readyshare_radio1" for="device_name_change_ra" style="font-size: 1rem;">change ReadyShare storage folder access path readyshare To \\RAX1201</label>
              </td>
            </tr>
            <tr>
              <td colspan="3">
                <input type="radio" name="device_name_change" id="device_name_change_keep" value="keep">
                <label id="readyshare_radio2" for="device_name_change_keep" style="font-size: 1rem;">keep ReadyShare storage folder access path as readyshare</label>
              </td>
            </tr>
            <tr>
              <td colspan="3" height="20px">
              </td>
           </tr>
          </tbody>
        </table>
      </div>
      <input type="button" value="Cancel" id="cancel_bt2" class="button-cancel cancel_bt">
      <input type="button" value="Apply" id="apply_bt2" class="button-apply apply_bt">
    </div><!--msgDiv-->

    <div class="help-section">
      <div class="help-frame-div" >
          <iframe id="helpframe" class="help-iframe" scrolling="no" name="helpframe" frameborder="0">
          </iframe>
      </div>
      <div class="help-btns">
        <div class="subhead2-bottom" >
          <span style="float:left;padding-left:10px;padding-top:5px">
            <img src="images/help-icon.png" onmouseover="changeCursorPointer();" onclick="showHelpIframe();" onmouseout="changeCursorDefault();">
          </span>
              <span class="subhead2-text" style="float:left;padding-left:3px;" onclick="showHelpIframe();" onmouseover="changeCursorPointer();" onmouseout="changeCursorDefault();" mlang="genie_51" >
            Help Center
          </span>
          <span class="button-help-arrow">
            <img src="images/helparrowup-icon.png" id="help-button" onclick="showHelpIframe();" onmouseover="changeCursorPointer();" onmouseout="changeCursorDefault();" >
          </span>
          <span class="subhead2-text" style="text-decoration:underline;float:right;padding-right:10px" onclick="showHelpIframe();" onmouseover="changeCursorPointer();" onmouseout="changeCursorDefault();" mlang="genie_51" >
            Help Center
          </span>
        </div>
      </div>
    </div><!--help-section-->
  </body>
</html>
