<% 
      local commonCfg = require "webGetFunc.commonCfg"
      local dashboard = require "webGetFunc.dashboard"
      local attachedDev = require "webGetFunc.attachedDev"
%>

<html style="width:550px">
<head>
  <META name="description" content="<? commonCfg.getModelNameStr()?>">
  <META http-equiv="Content-Type" content="text/html; charset=utf-8">
  <META http-equiv="Content-Style-Type" content="text/css">
  <META http-equiv="Pragma" content="no-cache">
  <META HTTP-equiv="Cache-Control" content="no-cache">
  <META HTTP-EQUIV="Expires" CONTENT="Mon, 06 Jan 1990 00:00:01 GMT">

  <script language="javascript" type="text/javascript" src="js/dashboard.js"></script>
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript">
    var adjustPageHeight;
    var page_contain_width;
    var page_contain_height;
    var operationMode = "<?= commonCfg.getOperationMode() ?>";

    $(document).ready(function(){
      var form=document.forms[0];
      var gui_region = form.curlang.value;
      adjustPageHeight = parent.adjustPageHeight;
      page_contain_width = parent.document.body.clientWidth-270 > 735 ? parent.document.body.clientWidth-270 : 735;
      page_contain_height = parent.document.documentElement.clientHeight-160 > 470+adjustPageHeight ? parent.document.documentElement.clientHeight-160 : 470+adjustPageHeight;

      setInternetState();
      setWirelessState();
      setAttachedDevicesState();
      //setParentalControlsState();
      //setReadyShareState();
      setGuestNetworkState();
      setArmorState();
      
      run_marquee();

      if(operationMode == "router")
      {
          $("#security").show();
          $("#qos_status").show();
      }
      else
      {
          $("#qos_status").hide();
      }

      $('.subtext').each(function(){
        if(gui_region=="Chinese"){
          $(this).addClass("subtext_pr");
        }else{
          $(this).removeClass("subtext_pr");
        }
        if(gui_region=="Japanese"){
          $(this).addClass("font-family_jp");
        }else{
          $(this).removeClass("font-family_jp");
        }
        if(gui_region=="Japanese"){
          if($(this).text().length >= 9){
            $(this).css("font-size","17");
            $(this).css("position","relative");
            $(this).css("top","6px");
          }else{
            $(this).css("font-size","20");
          }
        }else{
          if($(this).text().length >= 16){
            $(this).css("font-size","15");
            $(this).css("position","relative");
            $(this).css("top","6px");
          }else{
            $(this).css("font-size","20");
          }
        }

      });

      $('.Status-normal').each(function(){
        if(gui_region=="Japanese"){
          $(this).addClass("font-family_jp");
        }else{
          $(this).removeClass("font-family_jp");
        }
      });
      $('.Status-unnormal').each(function(){
        if(gui_region=="Japanese"){
          $(this).addClass("font-family_jp");
        }else{
          $(this).removeClass("font-family_jp");
        }
      });
      $('.Condition-normal').each(function(){
        if(gui_region=="Japanese"){
          $(this).addClass("font-family_jp");
        }else{
          $(this).removeClass("font-family_jp");
        }
      });
      $('.Condition-unnormal').each(function(){
        if(gui_region=="Japanese"){
          $(this).addClass("font-family_jp");
        }else{
          $(this).removeClass("font-family_jp");
        }
      });
      $('.Status-wireless-normal  ').each(function(){
        if(gui_region=="Japanese"){
          $(this).addClass("font-family_jp");
        }else{
          $(this).removeClass("font-family_jp");
        }
      });
      $('.Status-wireless-unnormal').each(function(){
        if(gui_region=="Japanese"){
          $(this).addClass("font-family_jp");
        }else{
          $(this).removeClass("font-family_jp");
        }
      });

      function setInternetState()
      {
        var Internet_Result = <? commonCfg.getInternetResult() ?>
        if(Internet_Result == 0){

        }else{
          $('#Internet_head').addClass('error-head');
          $('#Internet_bottom').addClass('error-bottom');
          $('#wait_ping').addClass('Status-unnormal');
        }
         
        if(operationMode == "router")
        {
        if(Internet_Result == 0){
          $('#internet').click(function(ev){
            location.href = "BAS_wan.html";

            parent.$('#page').width(parseInt(page_contain_width));
            parent.$('#page').height(parseInt(page_contain_height));
            $('#page').css("margin-top","0");
            $('#page').css("margin-left","30");

            parent.$('.menuActive').removeClass('menuActive');
            parent.$('#basic-int').addClass('menuActive');
          });
          parent.$('#INT_menu').attr("href","BAS_wan.html");
        }else if(Internet_Result == 1){
          $('#internet').click(function(ev){
            location.href = "<?= dashboard.getWANPendingPage() ?>";

            parent.$('#page').width(parseInt(page_contain_width));
            parent.$('#page').height(parseInt(page_contain_height));
            parent.$('#page').css("margin-top","0");
            parent.$('#page').css("margin-left","30");

            parent.$('.menuActive').removeClass('menuActive');
            parent.$('#basic-int').addClass('menuActive');
          });
          parent.$('#INT_menu').attr("href","<?= dashboard.getWANPendingPage() ?>");
        }else{
          $('#internet').click(function(ev){
            location.href = "BAS_wan.html";

            parent.$('#page').width(parseInt(page_contain_width));
            parent.$('#page').height(parseInt(page_contain_height));
            parent.$('#page').css("margin-top","0");
            parent.$('#page').css("margin-left","30");

            parent.$('.menuActive').removeClass('menuActive');
            parent.$('#basic-int').addClass('menuActive');
          });
          parent.$('#INT_menu').attr("href","BAS_wan.html");
        }
        }//router mode
      }

      function setWirelessState()
      {
        var Wireless_Radio_Result = "<? commonCfg.getWirelessRadioResult() ?>"
        var Wireless_Security_Result = "<? commonCfg.getWirelessSecurityResult() ?>"
        var Wireless_Result=0;
        var Wireless_Link_Result=0;

        if(Wireless_Radio_Result == "none"){
          Wireless_Result = 1;
          Wireless_Link_Result=1;
        }else if(Wireless_Security_Result == "none"){
          Wireless_Result = 1;
        }else if(Wireless_Radio_Result=="both" && Wireless_Security_Result!="both"){
          Wireless_Result = 1;
        }else if(Wireless_Radio_Result=="2g" && Wireless_Security_Result=="5g"){
          Wireless_Result = 1;
        }else if(Wireless_Radio_Result=="5g" && Wireless_Security_Result=="2g"){
          Wireless_Result = 1;
        }

        if(Wireless_Result == 0 || operationMode == "bridge"){

        }else{
          $('#Wireless_head').addClass('warning-head');
          $('#Wireless_bottom').addClass('warning-bottom');
          $('#Wireless-status').addClass('Status-wireless-unnormal');
        }

        if(operationMode != "bridge")
        {
          if(document.forms[0].sta_mode.value!=1){
            if(Wireless_Link_Result == 0){
              $('#wireless').click(function(ev){
                location.href = "WLG_wireless.html";

                parent.$('#page').width(parseInt(page_contain_width));
                parent.$('#page').height(parseInt(page_contain_height));
                parent.$('#page').css("margin-top","0");
                parent.$('#page').css("margin-left","30");

                parent.$('.menuActive').removeClass('menuActive');
                parent.$('#basic-wls').addClass('menuActive');
              });
              parent.$('#WLS_menu').attr("href","WLG_wireless.html");
            }else if(Wireless_Link_Result == 1){
              $('#wireless').click(function(ev){
                location.href = "WLG_wireless_adv.html";

                parent.$('#page').width(parseInt(page_contain_width));
                parent.$('#page').height(parseInt(page_contain_height));
                parent.$('#page').css("margin-top","0");
                parent.$('#page').css("margin-left","30");

                parent.$('.menuActive').removeClass('menuActive');
                parent.$('#basic-wls').addClass('menuActive');
              });
              parent.$('#WLS_menu').attr("href","WLG_wireless_adv.html");
            }
          }

          if($("#wlan_stat").attr("mlang") == "genie_169")
          {
            $("#icon_warning").show();  
          }
        }
      }

      function setAttachedDevicesState()
      {
        var AttachedDevices_Result = "";
        var iqos_clicked=0;
       var qosState = 0; //getQosState()

        if (qosState == true)
       {
			$('#qos-condition').text(window.top.mlang["ANM003"]);
       }
       else if (qosState == false)
       {
		   $('#qos-condition').text(window.top.mlang["ANM004"]);
       }

        $('#attached').click(function(ev){
          if(!iqos_clicked){
            location.href = "DEV_device.html";
            parent.$('#page').width(parseInt(page_contain_width));
            parent.$('#page').height(parseInt(page_contain_height));
            parent.$('#page').css("margin-top","0");
            parent.$('#page').css("margin-left","30");

            parent.$('.menuActive').removeClass('menuActive');
            parent.$('#basic-atd').addClass('menuActive');
          }
        });
        if(document.forms[0].ap_mode.value!=1){
          $('#qos_status').click(function(ev){
            iqos_clicked=1;
            location.href = "QOS_down_streaming_iqos_basic.html";

            parent.$('#page').width(parseInt(page_contain_width));
            parent.$('#page').height(parseInt(page_contain_height));
            parent.$('#page').css("margin-top","0");
            parent.$('#page').css("margin-left","30");

            parent.$('.menuActive').removeClass('menuActive');
            parent.$('#basic-qos').addClass('menuActive');
          });
        }

      }

	 function setReadyShareState()
	 {
		  var ReadyShare_Result = 0;//getUsbPhyNumber()

          if(ReadyShare_Result > 0){
              $('#ReadyShare-condition').text(window.top.mlang["genie_106"]);
          }else{
              $('#ReadyShare-condition').text(window.top.mlang["genie_82"]);
          }

          $('#readyshare').click(function(ev){ 
              location.href = "USB_basic.html";

              parent.$('#page').width(parseInt(page_contain_width));
              parent.$('#page').height(parseInt(page_contain_height));
              parent.$('#page').css("margin-top","0");
              parent.$('#page').css("margin-left","30");

              parent.$('.menuActive').removeClass('menuActive');
              parent.$('#basic-ready').addClass('menuActive'); 

          });
	 }

      function setGuestNetworkState()
      {
        var GuestNetwork_Result = "";
        if(operationMode != "bridge")
        {
          if(document.forms[0].sta_mode.value!=1){
            $('#guest').click(function(ev){
              location.href = "WLG_wireless_guest.html";

              parent.$('#page').width(parseInt(page_contain_width));
              parent.$('#page').height(parseInt(page_contain_height));
              parent.$('#page').css("margin-top","0");
              parent.$('#page').css("margin-left","30");

              parent.$('.menuActive').removeClass('menuActive');
              parent.$('#basic-gst').addClass('menuActive');
            });
          }
        }
      }

	 function setArmorState()
    {
      var Armor_State = "<? commonCfg.getArmorStatus() ?>";//getVal_armor_status()
      if(Armor_State == 1){
          $('#armor_stat').text((window.top.mlang["D-genie_25"])+': '+(window.top.mlang["PCVP_083"]));//NOT ACTIVATED
      }else if(Armor_State == 2){
          $('#armor_stat').text((window.top.mlang["D-genie_25"])+': '+(window.top.mlang["genie_37"]));//ENABLED
      }else{
          $('#armor_stat').text((window.top.mlang["D-genie_25"])+': '+(window.top.mlang["genie_87"]));//NOT ENABLED
      }
    } 

    });
  </script>
  <link href="css/custom.css" rel="stylesheet" type="text/css">
</head>

<body style="background-color:#fff;margin:0;padding:0;width:605px;height:405px;">
  <table CELLSPACING="15" CELLPADDING="0">
    <tr>
      <td class="basic_home_icon" id="internet">
        <div>
          <div class="top-spacing"><span style="display:-moz-inline-box;display:inline-block;width:20px;height:100%;">&nbsp;</span><span style="height:100%;display:-moz-inline-box;display:inline-block;width:30px;" id="Internet_head">&nbsp;</span></div>
        </div>
        <div class="icon-top">
          <div class="icon-top-inside"><div style="height: 61px;width: 50px;"><div id="internet_icon"></div></div><br><span class="subtext" style="font-size:15px;position:relative;top:6px;" mlang="genie_69" >Internet</span></div>
        </div>
        <div style="height:41px;width:192px;background-image:url('images/DashBackBottom.gif'); background-repeat: no-repeat;align:center">
          <div id="Internet_bottom" class="normal-bottom">
            <table class="caption-1line">
              <tr>
                <td id="internet1" style="valign:middle;text-align:center">
                <? commonCfg.getInternetStatus() ?></td>
                <td id="internet2"></td>
              </tr>
            </table>
          </div>
        </div>
      </td>
      <td class="basic_home_icon" id="wireless">
        <div>
          <div class="top-spacing"><span style="display:-moz-inline-box;display:inline-block;width:20px;height:100%;">&nbsp;</span><span style="height:100%;display:-moz-inline-box;display:inline-block;width:30px;" id="Wireless_head">&nbsp;</span></div>
        </div>
        <div class="icon-top">
          <div class="icon-top-inside"><div id="wireless_icon"><div id="icon_warning" style="display:none;"></div></div><span class="subtext" style="font-size:15px;position:relative;top:9px;" mlang="genie_154" >Wireless</span></div>
        </div>
        <div style="height:36px;width:192px;background-image:url('images/DashBackBottom.gif'); background-repeat: no-repeat;align:center;padding-top:5px;">
          <div id="Wireless_bottom" class="normal-bottom" style="height:125%">
            <table style="width:100%;height:100%" CELLPADDING=0 CELLSPACING=0>
            <? dashboard.getBasicHomeWiFiPri() ?>
                          </table>
          </div>
        </div>
      </td>
      <td class="basic_home_icon" id="attached">
        <div>
          <div class="top-spacing"><span style="display:-moz-inline-box;display:inline-block;width:20px;height:100%;">&nbsp;</span><span style="height:100%;display:-moz-inline-box;display:inline-block;width:30px;" id="AttachedDevices-head">&nbsp;</span></div>
        </div>
        <div class="icon-top">
          <div class="icon-top-inside"><div style="height: 61px;width: 50px;"><div id="attached_icon"></div></div><br><span class="subtext" style="font-size:15px;position:relative;top:6px;" mlang="LUP023" >Attached Devices</span></div>
        </div>
        <div style="height:36px;padding-top:5px;">
          <div id="AttachedDevices-bottom" class="normal-bottom" style="height:120%;"><table style="width:100%;height:100%">
            <tr>
              <td id="attached1" style="valign:middle;text-align:center">
                <span id="AttachedDevices-status" class="Status-normal" mlang="genie_89" >Number of devices</span><span id="AttachedDevices-condition" class="Condition-normal"> :&nbsp;&nbsp;&nbsp;<?=attachedDev.getAttachDevNum()?></span>
              </td>
              <td id="attached2"></td>
            </tr>
            <!-- tr>
              <td id="qos_status" style="valign:middle;text-align:center">
                <span id="qos-status" class="Status-normal">QoS :&nbsp;&nbsp;&nbsp;</span><span id="qos-condition" class="Condition-normal"></span>
              </td>
              <td id="iqos_2"></td>
            </tr -->
          </table></div>
        </div>
      </td>
    </tr>
    <tr>

      <td class="basic_home_icon" id="readyshare" style="display:none;">
        <div>
          <div class="top-spacing"><span style="display:-moz-inline-box;display:inline-block;width:20px;height:100%;">&nbsp;</span><span style="height:100%;display:-moz-inline-box;display:inline-block;width:30px;" id="ReadyShare-head" >&nbsp;</span></div>
        </div>
        <div class="icon-top">
          <div class="icon-top-inside"><div style="height: 59px;width: 50px;"><div id="readyShare_icon"></div></div><br><span class="subtext" style="font-size:15px;position:relative;top:3px;" mlang="genie_811" >ReadySHARE</span></div>
        </div>
        <div style="height:41px;width:192px;background-image:url('images/DashBackBottom.gif'); background-repeat: no-repeat;align:center">
          <div  id="ReadyShare-bottom" class="normal-bottom" >
            <table class="caption-1line">
              <tr>
                <td id="readyshare1" style="valign:middle;text-align:center"><span id="ReadyShare-status" class="Status-normal"  mlang="D-genie_25" >STATUS</span><span>:&nbsp;&nbsp;&nbsp;</span><span id="ReadyShare-condition" class="Condition-normal"></span></td>
                <td id="readyshare2"></td>
              </tr>
            </table>
          </div>
        </div>
      </td>
      
      <td class="basic_home_icon" id="guest">
        <div>
          <div class="top-spacing"><span style="display:-moz-inline-box;display:inline-block;width:20px;height:100%;">&nbsp;</span><span style="height:100%;display:-moz-inline-box;display:inline-block;width:30px;">&nbsp;</span></div>
        </div>
        <div class="icon-top">
          <div class="icon-top-inside"><div style="height: 59px;width: 50px;"><div id="guest_icon"></div></div><br><span class="subtext" style="font-size:15px;position:relative;top:3px;" mlang="LUP010" >Guest Network</span></div>
        </div>
        <div style="height:41px;width:192px;background-image:url('images/DashBackBottom.gif'); background-repeat: no-repeat;align:center">
          <div id="GuestNetwork-bottom" class="normal-bottom">
            <table class="caption-1line" CELLPADDING="0" CELLSPACING="0"><? dashboard.getBasicHomeWiFiGuest() ?></table>
          </div>
        </div>
      </td>
	  
	  <td class="basic_home_icon" id="security" style="display:none;">
             <div style="height:115px;width:192px;background-image:url('images/DashBackCenter.gif'); background-repeat: no-repeat;text-align:center;border-bottom:1px inset #eaeaea;">
                 <div style="height:100%;width:188px;background-image:url('images/DashCenter.gif'); background-repeat: no-repeat;margin-left:2px;text-align:center;border-bottom:1px solid #d4d4d4;"><img src="images/armor.png" height="78"><br><span class="subtext" style="font-family: Arial; font-size: 20px;" mlang="SGN009">Security</span></div> 
             </div>
             <div style="height:34px;width:192px;background-image:url('images/DashBackBottom.gif'); background-repeat: no-repeat;align:center"> 
                   <div id="Armor-bottom" class="normal-bottom">
                    <table style="width:100%;height:170%">
                     <tbody><tr>
                     <td id="armor1" style="valign:middle;text-align:center">
                        <span id="armor_stat" class="Condition-normal">STATUS: NOT ACTIVATED</span>
                     </td>
                     <td id="armor2"></td>
                    </tr></tbody></table></div>
             </div>
      </td>
	  
    </tr>
  </table>
  <form>
    <input type="hidden" name="curlang" value="English">
    <input type="hidden" name="sta_mode" value="0">
    <input type="hidden" name="ap_mode" value="0">
  </form>
</body>
</html>
