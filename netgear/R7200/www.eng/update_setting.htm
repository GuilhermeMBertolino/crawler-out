<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Cache-Control" content="no-cache"><meta http-equiv="Expires" content="Mon, 06 Jan 1990 00:00:01 GMT"><meta name="description" content="WNR2500_multilangual"><title>NETGEAR Router @model_name#</title><script language="javascript" type="text/javascript" src="string.js"></script><link rel="stylesheet" href="style/form.css"><script language="javascript" type="text/javascript" src="funcs.js"></script><!-- link rel="stylesheet" href="form.css" --><script language="javascript" type="text/javascript" src="utility.js"></script><script language="javascript" type="text/javascript" src="linux.js"></script><script language="javascript" type="text/javascript">
<!--
var pchar = "||"; // progress char
var maxchars = 30;
var delay_time = 2000; // msecs
var charcount = 0;
var ap_mode="@ap_mode#";
var wizard_fw_upg_flag="@wizard_fw_upg_flag#";
var sso_status="@sso_reg_status#";
var sso_flag="@sso_flag#";
var sso_support="@sso_support#";
var state="@genie_wiz_state#";
var bridge_updating_flag="@bridge_mode_updating_flag#"; //change to bridge mode need 3 min.


function makeStr(strSize, fillChar)
{
	var temp = "";
	for (i=0; i < strSize ; i ++)
		temp = temp + fillChar;
	return temp;
}
function updateProgress()
{
	var cf = document.forms[0];
	
	var iswiz_sel = /\bindex\.htm\b/;
	var isfw_upg = /\badv_index\.htm\b/;
	var iswifi_ap = /\bWLG_ap\.htm\b/;
	var isopmode_ap = /\bWLG_opmode_ap\.htm\b/;
	var iswifi_settings = /\bWLG_dualband_idx\.htm\b/;
	var iswifi_guest = /\bWLG_dualband_guest_idx\.htm\b/;
	var iswifi_adv = /\bWLG_dualband_adv\.htm\b/;
	var iswifi_acl = /\bWLG_acl\.htm\b/;
	var iswifi_wds = /\bWLG_dualband_wds\.htm\b/;
	var isopmode_bridge = /\bWLG_opmode_bridge\.htm\b/;
	var isopmode_router= /\bWLG_opmode_router\.htm\b/;
	if(wizard_fw_upg_flag == 1)
	{
		if(sso_support == "1" && sso_flag == "1" && sso_status == "Unknown" && state.substring(0,1) == "c")//if device with old fw upgrade to sso fw in wizard,need to popup sso.
			var nextF = "sso_loading.html&todo=sso_ping";
		else
			var nextF = "BRS_netgear_success.html";
	}
	else
		var nextF = parent.topframe.document.forms[0].next_file.value;
	if(charcount == 1 && iswiz_sel.test(nextF))//it's factory and backup,need long time to reboot
	{
		maxchars = 35;
		delay_time = 4000;
	}
	else if(charcount == 1 && (iswifi_adv.test(nextF)) && bridge_updating_flag == "1")
	{
		maxchars = 30;
		delay_time = 5000;
	}
	else if(charcount == 1 && (iswifi_settings.test(nextF) || iswifi_guest.test(nextF) || iswifi_adv.test(nextF) || iswifi_acl.test(nextF) || iswifi_wds.test(nextF)))
	{
		maxchars = 30;
		delay_time = 800;
	}
	else if(charcount == 1 && (iswifi_ap.test(nextF) ||  isopmode_router.test(nextF) || isopmode_ap.test(nextF)))
	{
		maxchars = 39;
		delay_time = 5000;
	}
	else if(charcount == 1 &&  isopmode_bridge.test(nextF))
	{
		maxchars = 30;
		delay_time = 6000;
	}
	else if(nextF == "BRS_wanlan_conflict.html") //sometimes test(nextF) doesn't work, so compare file name directly
	{
		maxchars = 30;
		delay_time = 3000;
	}
	else if(charcount ==1 && nextF == "QOS_main.htm") //increase delay time for QOS speedtest
	{
		maxchars = 30;
		delay_time = 3000;
	}else if(charcount ==1 && (nextF == "Readyshare_remote.htm" || nextF == "Readyshare_remote_answer.htm"))
	{
		maxchars = 30;
		delay_time = 3500;
	}
	else if(charcount ==1 && nextF == "FW_remote.htm") 
	{
		maxchars = 30;
		delay_time = 200;
	}
	if (charcount < maxchars)
	{
		charcount ++;
		cf.progress.value = makeStr(charcount,pchar);
		setTimeout("updateProgress()",delay_time);
	}
	else
	{
		var reg = /(http:\/\/.+?)\/.*/; // match "http://192.168.1.1/"
		if(iswiz_sel.test(nextF) && reg.test(nextF))
		{
			var newurl =  nextF.replace(reg,"$1") + "/index.htm";
			top.location.href = newurl;
			return;
		}
		if(isfw_upg.test(nextF))
		{
			var newurl =  nextF.replace(reg,"$1") ;
			top.location.href = newurl;
			return;
		}
		if(iswifi_ap.test(nextF) || isopmode_ap.test(nextF) || isopmode_bridge.test(nextF) || isopmode_router.test(nextF))
		{
			top.location.href = "http://www.routerlogin.net";
			return;
		}
		if(nextF == "BRS_wanlan_conflict.html")//sometimes test(nextF) doesn't work, so compare file name directly
		{
			top.location.href = "http://www.routerlogin.net/"+nextF;
			return;
		}
		if(nextF == "sso_loading.html&todo=sso_ping")
		{
			top.location.href = "sso_loading.html&sso_from_old=1&todo=sso_ping";
			return;
		}
		if(nextF == "FW_remote.htm")
		{
			top.location.href = "https://"+window.location.host+"/index.htm";
			return;
		}
		window.location.href = nextF;
	}
}
//-->
</script><style type="text/css">
TD {
	FONT-SIZE: 12px; FONT-FAMILY: Arial, Helvetica, Geneva, Swiss, SunSans-Regular, sans-serif
}
H1 {
	FONT-WEIGHT: bold; FONT-SIZE: 16px; BACKGROUND: white; FONT-FAMILY: Arial, Helvetica, Geneva, Swiss, SunSans-Regular, sans-serif
}
.prgbar { font-family:Arial; padding:0px; height: 20px; width: 200px; font-weight: bolder; font-size: 10pt; color: #0000FF}
</style></head><body bgcolor="#ffffff" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" onLoad="updateProgress()">
<form name="update" action="setup.cgi@post_par#" method="post" onSubmit="return false">

<table border="0" cellpadding="0" cellspacing="3" width="100%"><tr></tr><tr><td align="left">
	 <h1 languageCode="738">Updating Settings</h1>
 </td>
 <td nowrap align="left">&nbsp;</td>
 <td nowrap><input type="text" name="progress" class="prgbar" value=""></td>
 <td nowrap align="left">&nbsp;</td>
</tr><tr><!-- RULE --><!--<td colspan="4" background="liteblue.gif" height="12"> &nbsp;</td>--><td colspan="4" height="12"><hr color="#0099CC"></td>
</tr></table><input type="hidden" name="next_file" value="BAK_backup.htm"></form>
<script language="javascript" type="text/javascript" src="langs.js"></script></body></html>
