<!DOCTYPE HTML>
<html>
<head>
<%13%>

<title>NETGEAR Router <%14%></title>
<link rel="stylesheet" href="<%15%>">
<link rel="stylesheet" href="css/scrollbar.css">
<link rel="stylesheet" href="css/button.css">

<script src="jquery.js"></script>
<script src="script/jquery.mousewheel.js"></script>
<script type="text/javascript" src="script/jquery.jscrollpane.min.js"></script>

<script src="script/script.js"></script>

<script language="javascript" type="text/javascript">
<!-- hide script from old browsers

var ajaxRespond;
var releaseNote;
var fwVersionInfo = null;
var dev;


    $(document).ready(function()
    {
        var note;	
        $("#target").submit(function() {
            buttonFilter();
        });

        getDevIndex();
        getReleaseNote();
        getFirmwareVersionInfo();

    });



function goHome(){
    if(document.forms[0].call_by_genie.value == 1 )
        window.location.href="genie_redirect_successpage3.htm";
    else if (top.tophideframe)
		    top.close();
	  else{
         if(parent.$("#BasicTab").hasClass('current')){ 
             parent.$('.subHeader').hide();
             parent.$('.menuActive').removeClass('menuActive');
             parent.$('#basic-home').addClass('menuActive');            
             window.location.href="DashBoard.htm";
         }else{
             parent.$('.noSubActive').removeClass('noSubActive');
             parent.$('.SubMenuActive').addClass('SubMenu');   
             parent.$('.SubMenuActive').removeClass('SubMenuActive');
             parent.$('.SubMenuActiveLarge').addClass('SubMenuLarge');
             parent.$('.SubMenuActiveLarge').addClass('SubMenu');
             parent.$('.SubMenuActiveLarge').addClass('Large');
             parent.$('.SubMenuActiveLarge').removeClass('SubMenuActiveLarge');
             parent.$('.SubActive').addClass('Sub');
             parent.$('.SubActive').removeClass('SubActive');
             parent.$('#adv-home').addClass('noSubActive');  
             parent.$('.subHeader:visible').slideUp('fast');
             window.location.href="ADVANCED_home.htm";        
		    /*window.location.href="<%2278%>";*/
         }
    }
}

function init(){
    if(document.getElementById("fwInfo").children[0].children[0].children.length > 4) {
        document.getElementById("fwInfo").style.height = document.getElementsByClassName("scroll-pane")[0].offsetHeight-110+"px";
    }
}

function getFirmwareVersionInfo(){

        checkFwPost_ajax("getinfo");
        fwVersionInfo=JSON.stringify(ajaxRespond);
        var obj = JSON.parse(fwVersionInfo);

        if(dev == 999)
        {
            document.getElementById("name").innerHTML=obj.router.device_Name;
            document.getElementById("curr_ver").innerHTML=obj.router.version;
            document.getElementById("new_ver").innerHTML='V'+obj.router.newVersion;
        }
        else
        {
            document.getElementById("name").innerHTML=obj.satellites[dev].device_Name;
            document.getElementById("curr_ver").innerHTML=obj.satellites[dev].version;
            document.getElementById("new_ver").innerHTML='V'+obj.satellites[dev].newVersion;
        }
}

function getReleaseNote(){

        checkFwPost_ajax("releasenote");
        releaseNote=ajaxRespond;
        note = '<table>';
        note += releaseNote;
        note += '</table>';
        document.getElementById("note").innerHTML = note;
}

function getDevIndex(){

    var strUrl = location.search;
    var getPara, ParaVal;
    var aryPara = [];

    if (strUrl.indexOf("?") != -1) {
        var getSearch = strUrl.split("?");
        getPara = getSearch[1].split("&");
        for (i = 0; i < getPara.length; i++) {
            ParaVal = getPara[i].split("=");
            aryPara.push(ParaVal[0]);
            aryPara[ParaVal[0]] = ParaVal[1];
            if(ParaVal[0] == 'dev')
                dev=ParaVal[1];
        }
   }

}

function checkFwPost_ajax(action){

    var sUrl=$("form:eq(0)").attr('action');
    aStr = sUrl.split("?");
    if(aStr.length == 2)
        sParameter = "?"+aStr[1];
    else
        sParameter = "";


   $.ajax({
       type:    'POST',
           url:     "ajax/check_ver_result"+sParameter,
           data:    {"action" : action , "dev" : dev},
           async:   false,
           cache:   false,
           success: function (data)  {
               if(data!='error')
               {
                   ajaxRespond=data;
               }
           },
               error:   function (error) { respond='error'}
        });

}

function CheckParentPage(){
    /*GUI AUTO Used*/
    if($('.SubMenuActiveLarge', window.parent.document).find('#admin_upgrade').length == 1)
    {
        document.getElementById('new_ver_next').id = 'yes';
        document.getElementById('new_ver_skip').id = 'no';
    }
}

//-->
</script>
<link href="css/custom.css" rel="stylesheet" type="text/css">
</head>
<body  onload="change_size(false);init();CheckParentPage()" style="margin:0px;/*background-color:#e5e5e5*/" onchange="change_size(false);init()">
<form id="target"  name="formname" method="POST" action="ver_result.cgi">

        <div id="fwInfo" style="overflow: auto;">
            <table>
                <tr>
                    <td colspan="2">
                        <b><span id="name"></span></b>
                    </td>
                </tr>

                <tr>
                    <td width="50%"><%1783%></td>
                        <td width="50%"><span id="curr_ver"></span></td>
                </tr>

                <tr>
                    <td width="50%"><%2281%></td>
                        <td width="50%"><span id="new_ver"></span></td>
                </tr>

                <tr>
                    <td><b><%2283%></b></td>
                </tr>

                <tr>
                    <td colspan="2">
                    <div id="note" style="white-space: pre-line;"></div>
                    </td>
                </tr>
            </table>
        </div>

</form>
<p></p>
</body>
</html>

