<!DOCTYPE HTML>
<? include 'php/interface.php';?>
<html>
<head>
  <META charset="UTF-8">
  <META http-equiv="Pragma" content="no-cache">
  <META HTTP-equiv="Cache-Control" content="no-cache">
  <META HTTP-EQUIV="Expires" CONTENT="Mon, 06 Jan 1990 00:00:01 GMT">
  
  <title>NETGEAR Router <?= getModelNameStr()?></title>



  <script src="js/jquery.min.js"></script>
  <script src="js/jquery.jscrollpane.min.js"></script>
  <script src="js/jquery.mousewheel.js"></script>
  <script src="js/utils.js<? getVer(); ?>"></script>
  <script src="js/validations.js<? getVer(); ?>"></script>

  <link rel="stylesheet" href="css/button.css">
  <link rel="stylesheet" href="css/settings.css<? getVer(); ?>">
  <link rel="stylesheet" href="css/scrollbar.css">
  <link rel="stylesheet" href="css/form.css">
  <link rel="stylesheet" href="css/custom.css" type="text/css">

  <script language="javascript" type="text/javascript">
    CSRF_TOKEN = <?= genCsrfTokenFilePhp('tokenNumber')?>;
    var enableVlan = "";

    $(document).ready(function()
    {
        fetchData('target', 'LACP', 'pre_fillout_init', 'post_fillout_init');
        $("[name='apply']").on("click",function(){
            if (validation())
            {
                var mode = $("[name='aggregationOption']:checked").val();
                if( mode == "LACP" || "static")
                {
                    $("[name='enable']").val("true");
                    $("[name='ethLAGmode']").val(mode);  
                }
                else
                {
                    ("[name='enable']").val("false");
                }
                $.postForm("setEthLAG", $('#target'), 'cgi-bin/rex_cgi', 'postForm_callback_lacp');
            }
        });
    });

    function pre_fillout_init(json)
    {
        var data = JSON.parse(json);
        enableVlan = data['enableVlan']['value'];
    }
    
    function post_fillout_init()
    {
        window.top.mlangInit($("#target"));
        /*$("[mlang]").each(function(idx, obj) {
          alert(obj.attributes.mlang.value+":"+window.top.mlang[obj.attributes.mlang.value]);    
        });*/

    }

    function postForm_callback_lacp(json)
    {
        if ( enableVlan == "true" )
        {
            /* system would reboot after sending post, show progress bar */
            sessionStorage.setItem("nextURL", "/LACP_setting.html");
            setTimeout("redirectProgressBar('D-genie_377', '2000', '120000')", 10);
        }
    }

    function validation() 
    {
        var msg = "";
        return true;
    }
  </script>  
</head>

<body onload="window.top.change_size($(this));loadhelp('LACP','');" class="page-body" onResize="window.top.change_size($(this));">
    <form id="target"  name="formname" method="POST" >
      <div class="page-header" style="position: relative;" mlang="Eth_Aggr_001">Ethernet Port Aggregation</div>
      <div id="main" name="main" class="form-group"  style=height:365px;overflow:auto;scrolling:auto">
      
        <div class="form-row">
            <label class="checkbox-container">
                <a tabindex="-1" mlang="UAS010" >Disalbe</a>
                <input type="radio" name="aggregationOption" id="Aggregationsta1" value="disabled" checked>
                <span class="radio-checkmark"></span>
            </label>
        </div>
      
        <div class="form-row">
            <label class="checkbox-container">
                <a tabindex="-1" mlang="Eth_Aggr_006" >Enable (LACP- IEEE 802.3ad)</a>
                <input type="radio" name="aggregationOption" id="Aggregationsta2" value="LACP" >
                <span class="radio-checkmark"></span>
            </label>
        </div>
        
        <div class="form-row">
            <label class="checkbox-container">
                <a tabindex="-1" mlang="Eth_Aggr_007" >Enable static LAG</a>
                <input type="radio" name="aggregationOption" id="Aggregationsta3" value="static" >
                <span class="radio-checkmark"></span>
            </label>
        </div>

        <div class="divider">&nbsp;</div>

        <div class="form-row">
          <span mlang="Eth_Aggr_002">Ethernet Port Aggregation Status</span><span>:</span><span name="aggregationStatus" id="lacp_status" mlang="Eth_Aggr_004"></span>
        </div>

        <input type="hidden" name="enable" value="" >
        <input type="hidden" name="ethLAGmode" value="" >

        <div class="space-divider">&nbsp;</div>
      </div><!--form-group-->
      <div class="form-btn-row" id="form_btn_div">
         <button value="Cancel" type="BUTTON" name="Cancel" id="cancel" class="button-cancel cancel_bt"  mlang="UAS021" >Cancel</button>
         <button value="Apply" type="BUTTON" name="apply" id="apply" class="button-apply apply_bt"  mlang="LUP004" > Apply</button>
      </div>

  
    
   </form>
   <? genHelpSection() ?>
   
</html>
