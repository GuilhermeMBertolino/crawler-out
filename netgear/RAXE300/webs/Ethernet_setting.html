<!DOCTYPE HTML>
<? include 'php/commonCfg.php';?>
<? include 'php/ethernet_setting.php';?>
<html>
<head>
  <META charset="UTF-8">
  <META http-equiv="Pragma" content="no-cache">
  <META HTTP-equiv="Cache-Control" content="no-cache">
  <META HTTP-EQUIV="Expires" CONTENT="Mon, 06 Jan 1990 00:00:01 GMT">

  <title>NETGEAR Router <?= getModelNameStr()?></title>



  <script src="js/jquery.min.js"></script>
  <script src="js/jquery.jscrollpane.min.js"></script>
  <script src="js/jquery.mousewheel.js"></script>
  <script src="js/ipInput.js"></script>
  <script src="js/utils.js<? getVer(); ?>"></script>
  <script src="js/validations.js<? getVer(); ?>"></script>
  <script src="js/embedProgressBar.js"></script>

  <link rel="stylesheet" href="css/button.css">
  <link rel="stylesheet" href="css/settings.css<? getVer(); ?>">
  <link rel="stylesheet" href="css/scrollbar.css">
  <link rel="stylesheet" href="css/form.css">
  <link rel="stylesheet" href="css/custom.css"  type="text/css">
  <script language="javascript" type="text/javascript">

  CSRF_TOKEN = <?= genCsrfTokenFilePhp('tokenNumber')?>;

  var enableVlan = "";

  function pre_fillout_init(json)
  {
      $("[name='ethset_ethport']").on("click", function(){
          $(this).val($(this).prop("checked"));
      });

      $("[name='ethset_port1']").on("click", function(){
          $(this).val($(this).prop("checked"));
      });

      $("[name='ethset_port2']").on("click", function(){
          $(this).val($(this).prop("checked"));
      });

      $("[name='ethset_port3']").on("click", function(){
          $(this).val($(this).prop("checked"));
      });

      $("[name='ethset_port4']").on("click", function(){
          $(this).val($(this).prop("checked"));
      });

      $("[name='ethset_port5']").on("click", function(){
          $(this).val($(this).prop("checked"));
      });

	  //merge from Ethernet port Aggregation
      var data = JSON.parse(json);
      enableVlan = data['enableVlan']['value'];
      console.log("enableVlan:"+enableVlan);

  }
  
  function post_fillout_init()
  {
      window.top.mlangInit($("#target"));
      /*$("[mlang]").each(function(idx, obj) {
        alert(obj.attributes.mlang.value+":"+window.top.mlang[obj.attributes.mlang.value]);    
      });*/
  }

  function postForm_callback(json)
  {
      if ( enableVlan == "true" )
      {
          /* system would reboot after sending post, show progress bar */
          sessionStorage.setItem("nextURL", "/Ethernet_setting.html");
          setTimeout("redirectProgressBar('D-genie_377', '2000', '120000')", 10);
      }
  }

  function validation()
  {
      return true;

  }
  function formSubmit()
  {
      if (validation())
      {
      	  var mode = $("[name='aggregationOption']:checked").val();
          if( mode == "LACP" || "static")
          {
              $("[name='enable']").val("true");
              $("[name='ethLAGmode']").val(mode);  
          }
          else
          {
              ("[name='enable']").val("false");
          }
          $.postForm('ethernet_setting', $('#target'), 'cgi-bin/rex_cgi', 'postForm_callback');
      }
  }

  </script>
</head>
<? bodyBegin('ethernet_setting', 'ethernet_setting', 'Eth_Aggr_008', 'Ethernet Settings', 'pre_fillout_init', 'post_fillout_init') ?>
    <div id="main" class="form-group" style=height:365px;overflow:auto;scrolling:auto;">
      <div class="form-row ">
        <b mlang="ESET_008">Enable flow control: </b>
      </div>
      <div class="form-row ">
        <label class="checkbox-container">
          <input type="checkbox" name="ethset_ethport" id="ethset_ethport" value="true"> <span mlang="ESET_005">Internet/LAN port 5 (1G)</span>
          <span class="checkbox-checkmark"></span>
        </label>
      </div>
      <div class="form-row ">
        <label class="checkbox-container">
          <input type="checkbox" name="ethset_port1" id="ethset_port1" value="true"> <span mlang="ESET_001">LAN port 1</span>
          <span class="checkbox-checkmark"></span>
        </label>
      </div>
      <div class="form-row ">
        <label class="checkbox-container">
          <input type="checkbox" name="ethset_port2" id="ethset_port2" value="true"> <span mlang="ESET_002">LAN port 2</span>
          <span class="checkbox-checkmark"></span>
        </label>
      </div>
      <div class="form-row ">
        <label class="checkbox-container">
          <input type="checkbox" name="ethset_port3" id="ethset_port3" value="true"> <span mlang="ESET_003">LAN port 3</span>
          <span class="checkbox-checkmark"></span>
        </label>
      </div>
      <div class="form-row ">
        <label class="checkbox-container">
          <input type="checkbox" name="ethset_port4" id="ethset_port4" value="true"> <span mlang="ESET_004">LAN port 4</span>
          <span class="checkbox-checkmark"></span>
        </label>
      </div>
      <div class="form-row ">
        <label class="checkbox-container">
          <input type="checkbox" name="ethset_port5" id="ethset_port5" value="true"> <span mlang="ESET_006">Internet/LAN port 5 (2.5G)</span>
          <span class="checkbox-checkmark"></span>
        </label>
      </div>
      <div class="divider">&nbsp;</div>
      <div class="space-divider">&nbsp;</div>
      <div class="form-row ">
        <b mlang="Eth_Aggr_009">LAN Port Aggregation</b><b>:</b>
      </div>    
      <div class="form-row">
          <label class="checkbox-container">
              <a tabindex="-1" mlang="UAS010">Disable</a>
              <input type="radio" name="aggregationOption" id="Aggregationsta1" value="disabled" checked="">
              <span class="radio-checkmark"></span>
          </label>
      </div>
      <div class="form-row">
          <label class="checkbox-container">
              <a tabindex="-1" mlang="Eth_Aggr_006">Enable (LACP- IEEE 802.3ad)</a>
              <input type="radio" name="aggregationOption" id="Aggregationsta2" value="LACP">
              <span class="radio-checkmark"></span>
          </label>
      </div>
     
      <div class="form-row">
          <label class="checkbox-container">
              <a tabindex="-1" mlang="Eth_Aggr_007">Enable static LAG</a>
              <input type="radio" name="aggregationOption" id="Aggregationsta3" value="static">
              <span class="radio-checkmark"></span>
          </label>
      </div>
      <div class="form-row">
        <span mlang="Eth_Aggr_003">LAN Port Aggregation Status</span><span>:</span><span name="aggregationStatus" id="lacp_status" mlang="Eth_Aggr_004">Inactive</span>
      </div>

      <input type="hidden" name="enable" value="">
      <input type="hidden" name="ethLAGmode" value="">

      <div class="space-divider">&nbsp;</div>
<? bodyEnd(0, 'Ethernet_setting.html') ?>
</html>
