<!DOCTYPE HTML>
<html>
<head>
<%13%>
<title>NETGEAR Router <%14%></title> 
<link rel="stylesheet" href="<%15%>">
<link rel="stylesheet" href="css/scrollbar.css">
<link rel="stylesheet" href="css/button.css">

<script src="jquery.js"></script>
<script src="script/jquery.mousewheel.js"></script>
<script type="text/javascript" src="script/jquery.jscrollpane.min.js"></script>
<script type="text/javascript" src="script/sorttable.js"></script>

<script src="script/script.js"></script>
<link rel="stylesheet" href="form.css">
<%16%>
<style type="text/css">

//define A
a:link{
	COLOR: blue;
	background : transparent; 
}
a:visited {
	COLOR: blue;
	background : transparent; 
}

a:hover {
	COLOR: blue;
	background : transparent; 
    cursor:pointer;
}

a:active {
	COLOR: blue;
	background : transparent;  
}
a {
	 COLOR: blue; TEXT-DECORATION: underline
}
.clickMe {
   cursor:pointer;
}
.DeviceICON{
  float:left;
  padding-top:5px;
}
.DeviceICON img{
  width:80px;
}
.DeviceInfo{
  margin-top:20px;
  cursor:pointer;
  line-height:15px;
}
.DeviceInfo span{
  margin:4px 10px 4px 2px;
  display:block;
  height:15px;
}
span[name=rule_device_type]{
  display:none;
}
span[name=rule_conndevice]{
  display:none;
}
span[name=rule_device_model]{
  color:black;
}
</style>
<script language="javascript" type="text/javascript">
<!--
    var device_type_path="device_type/";
    var unknown_device_icon="icon/Device_0.png";
    var iconArray={};
  
    $(document).ready(function()
    {
        queryDevicesResult();

//        $('.scroll-pane').jScrollPane('scrollbarMargin:5px');
        $("#target").submit(function() {
            buttonFilter();
        });
        
        iMaxWidth=0;
        $(".DeviceInfo").each(function(){
            iCuttentWidth=parseInt($(this)[0].scrollWidth);
            if(iCuttentWidth > iMaxWidth)
                iMaxWidth=iCuttentWidth;
        });
        if((iMaxWidth+80) > parseInt($(".DeviceTable tr:eq(0) td:eq(4)").width())) {
            if(/Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor))
                $(".DeviceTable tr:eq(0) td:eq(4)").css('width', (iMaxWidth+80) +"px");
            document.getElementsByClassName("DeviceInfo")[0].style.width=(iMaxWidth+100) +"px";
        }
            
        iconArray['unknown']={ "img" : unknown_device_icon, "txt" : "<%908%>"};
        $.getJSON("device_type/device_type.json", function (data){
            $.each(data, function(key,val){
              iconArray[val["Device type"]]={ "img" : device_type_path +"icon/"+val["Icon"], "txt" : val["Device type"]};
            });
            $("span[name=rule_device_type]").each(function(){
              DeviceType = $(this).html().replace(/\([0-9]*\)/g,"");
              if(!iconArray.hasOwnProperty(DeviceType))
                DeviceType='unknown';
                
              $(this).closest("td").prepend("<div class='DeviceICON'><img src='"+iconArray[DeviceType].img+"' alt=\'"+iconArray[DeviceType].txt+"\' title=\'"+iconArray[DeviceType].txt+"\'/></div>");
            });
        });
        $(".DeviceInfo").click(function(){
            //index=$(this).closest("tr").find("input[name=check_dev]").val();
            index=this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.rowIndex-1;
            get_devinfo(index);
        });

    });

    /*
    <tr>
        <td align="center">
            <label class="checkbox-container">
                <input name="check_dev" type="checkbox" value="0" onclick="handle_checkboxElements(this);">
                <span class="checkbox-checkmark"></span>
            </label>
        </td>
        <td align="center" name="show_status" style="display: none;">
            <span class="clickMe" onclick="get_devinfo(0)" color:green;="">Allowed</span>
        </td>
        <td align="center">
            <span class="clickMe" onclick="get_devinfo(0)">
                <span class="dev-hide">2 prio</span>
                High
            </span>
        </td>
        <td align="center">
            <span class="clickMe" onclick="get_devinfo(0)">Wired</span>
        </td>
        <td nowrap="" align="right">
            <table class="DeviceInfo_TB" border="0" cellpadding="0" cellspacing="0" width="400px">
                <tbody>
                    <tr>
                        <td style="border-top: 0px">
                            <div class="DeviceICON">
                                <img src="device_type/icon/desktop.png" alt="Desktop" title="Desktop">
                            </div>
                            <div class="DeviceInfo" style="width: 480px;">
                                <span class="hidden" name="rule_device_type">Desktop</span>
                                <span name="rule_device_model">Parallels, Inc</span>
                                <span name="rule_device_name">BLING76CC</span>
                                <span name="rule_device_ip">192.168.1.2</span>
                                <span class="hidden" name="rule_conndevice">7114298</span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </td>
        <td align="center" class="clickMe" onclick="get_devinfo(0)">
            <span class="dev-hide">0.0000</span>
            <p class="device-bwBarX" style="width:0.0000%"></p>
            <p class="device-bwBarLabelPadding">
                <span class="device-bwBarLabel">0.00 Mbps</span>
            </p>
        </td>
        <td align="center" class="clickMe" onclick="get_devinfo(0)">
            <span class="dev-hide">0.0000</span>
            <p class="device-bwBarY" style="width:0.0000%"></p>
            <p class="device-bwBarLabelPadding">
                <span class="device-bwBarLabel">0.00 Mbps</span>
            </p>
        </td>
    </tr>
    */

    var numberOfDevices = "";
    var mode = "";
    var HTMLTAG_IQOS_CHECKBOX = "";
    var HTMLTAG_IQOS_STATUS = "";
    var HTMLTAG_IQOS_PRIORITY = "";
    var HTMLTAG_IQOS_TYPE = "";
    var HTMLTAG_IQOS_DEV3 = "";
    var HTMLTAG_IQOS_DOWNBW = "";
    var HTMLTAG_IQOS_UPBW = "";

    var tableID = "";
    var rowData = "";

    function queryDevicesResult() {
        $.ajax({
            url: "ajax/devices_table_result",
            dataType: "json",
            type: "POST",
            success: function(data) {
                console.log(data);
                numberOfDevices = data.numberOfDevices;
                mode = data.mode;
                tableID = document.getElementById("device_table").getElementsByTagName("tbody")[0];

                for (var i = 0; i < numberOfDevices; i++) {
                    rowData = tableID.insertRow();

                    if (mode == 1) {
                        HTMLTAG_IQOS_CHECKBOX = rowData.insertCell(0);
                        HTMLTAG_IQOS_STATUS = rowData.insertCell(1);
                        HTMLTAG_IQOS_PRIORITY = rowData.insertCell(2);
                        HTMLTAG_IQOS_TYPE = rowData.insertCell(3);
                        HTMLTAG_IQOS_DEV3 = rowData.insertCell(4);
                        HTMLTAG_IQOS_DOWNBW = rowData.insertCell(5);
                        HTMLTAG_IQOS_UPBW = rowData.insertCell(6);
                    } 
                    else {
                        HTMLTAG_IQOS_CHECKBOX = rowData.insertCell(0);
                        HTMLTAG_IQOS_PRIORITY = rowData.insertCell(1);
                        HTMLTAG_IQOS_TYPE = rowData.insertCell(2);
                        HTMLTAG_IQOS_DEV3 = rowData.insertCell(3);
                        HTMLTAG_IQOS_DOWNBW = rowData.insertCell(4);
                        HTMLTAG_IQOS_UPBW = rowData.insertCell(5);
                    }

                    HTMLTAG_IQOS_CHECKBOX.innerHTML = "\t\t<tr><td align=\"center\">\n<label class=\"checkbox-container\"> <input name=\"check_dev\" type=\"checkbox\" value=\"" + i + "\" onclick=\"handle_checkboxElements(this);\">\n<span class=\"checkbox-checkmark\"></span></label></td>\n"
                    HTMLTAG_IQOS_STATUS.innerHTML = "\t\t<td align=\"center\" name=\"show_status\"><span class=\"clickMe\" onclick=\"get_devinfo(this)\" style=\"" + data.connDevices[i].scene + "\">" + data.connDevices[i].mark + "</span></td>\n";
                    HTMLTAG_IQOS_PRIORITY.innerHTML = "\t\t<td align=\"center\"><span class=\"clickMe\" onclick=\"get_devinfo(this)\"><span class=\"dev-hide\">" + data.connDevices[i].priority + " prio</span>" + data.connDevices[i].priorityStr + "</span></td>\n";
                    HTMLTAG_IQOS_TYPE.innerHTML = "\t\t<td align=\"center\"><span class=\"clickMe\" onclick=\"get_devinfo(this)\">" + data.connDevices[i].connection + "</span></td>\n";
                    HTMLTAG_IQOS_DEV3.innerHTML = "\t\t<td nowrap align=\"right\"><table class='DeviceInfo_TB' border='0' cellpadding='0' cellspacing='0' width='400px'><tbody><tr><td style='border-top: 0px'><div class=\"DeviceInfo\"><span class=\"clickMe\" onclick=\"get_devinfo(this)\" style=\"display:none\" class=\"hidden\" name=\"rule_device_type_base\">" + data.connDevices[i].type + "</span><span class=\"clickMe\" onclick=\"get_devinfo(this)\" name=\"rule_device_model\">" + data.connDevices[i].model + "</span><span class=\"clickMe\" onclick=\"get_devinfo(this)\" name=\"rule_device_name\">" + data.connDevices[i].name + "</span><span class=\"clickMe\" onclick=\"get_devinfo(this)\" name=\"rule_device_ip\">" + data.connDevices[i].ip + "</span><span class=\"clickMe\" onclick=\"get_devinfo(this)\" class=\"hidden\" name=\"rule_conndevice\">" + i + "</span></div></td></tr></tbody></table></td>\n";
                    HTMLTAG_IQOS_DOWNBW.innerHTML = "\t\t<td align=\"center\" class=\"clickMe\" onclick=\"get_devinfo(this)\"><span class=\"dev-hide\">" + data.connDevices[i].curBarDownStr + "</span><p class=\"device-bwBarX\" style=\"width:" + data.connDevices[i].curBarDownStr + "%\"></p><p class=\"device-bwBarLabelPadding\"><span class=\"device-bwBarLabel\">" + data.connDevices[i].downloadSpeedStr + "</span></p></td>\n";
                    HTMLTAG_IQOS_UPBW.innerHTML = "\t\t<td align=\"center\" class=\"clickMe\" onclick=\"get_devinfo(this)\"><span class=\"dev-hide\">" + data.connDevices[i].curBarUpStr + "</span><p class=\"device-bwBarY\" style=\"width:" + data.connDevices[i].curBarUpStr + "%\"></p><p class=\"device-bwBarLabelPadding\"><span class=\"device-bwBarLabel\">" + data.connDevices[i].uploadSpeedStr + "</span></p></td></tr>\n";
                }

                document.getElementById("progressbar").style.display = "none";

                iconArray['unknown'] = {"img": unknown_device_icon, "txt": "<%908%>"};
                $.getJSON("device_type/device_type.json", function (data) {
                    $.each(data, function(key, val) {
                        iconArray[val["Device type"]] = {"img": device_type_path + "icon/" + val["Icon"], "txt": val["Device type"]};
                    });

                    $("span[name=rule_device_type_base]").each(function() {
                        DeviceType = $(this).html().replace(/\([0-9]*\)/g, "");

                        if (!iconArray.hasOwnProperty(DeviceType)) {
                            DeviceType = 'unknown';
                        }

                        $(this).closest("td").prepend("<div class='DeviceICON'><img src='" + iconArray[DeviceType].img + "' alt=\'" + iconArray[DeviceType].txt + "\' title=\'" + iconArray[DeviceType].txt + "\'/></div>");
                    });
                });
            }
        });
    }

    function setHelpIframeVisible(){
        $('.help-frame-div').css("visibility","visible");
    }


    function showHelpIframe() {

        var imgSrc=document.getElementById('help-button');

        if(imgSrc.src.search("up")>=0)
        {
            $(".help-frame-div").show();
            // window.frames["helpframe"].$('#content').jScrollPane({showArrows:true});
            imgSrc.src="img/helparrowdown-icon.gif";
        }
        else
        {
            $(".help-frame-div").hide();
            imgSrc.src="img/helparrowup-icon.gif";
            setTimeout(setHelpIframeVisible,500);
        }
        if((navigator.appName.indexOf("Internet Explorer")==-1) ||
           (navigator.appVersion.indexOf("MSIE 9")==-1))
             change_size(false);

    }

    function moveToHTMLend()
    {
        window.location.href='#helpframe-anchor';
        setHelpIframeVisible();
    }



    function adjust_column_backColor(){
    }
function loadSettings()
{
    var isIE = navigator.userAgent.search("MSIE") > -1; 
    var isFirefox = navigator.userAgent.search("Firefox") > -1;
    var isOpera = navigator.userAgent.search("Opera") > -1;
    var isSafari = navigator.userAgent.search("Safari") > -1;
    var isIE8=navigator.appVersion.indexOf("MSIE 8") > -1;  
    
    if(isIE)
    {
        $('.device-bwBarLabel').css("width","80px"); 
    }
    grayout_button("edit_attached");

    $('#checkboxGroup li input').click(function(){
  if($(this).prop('checked')){
    $('#checkboxGroup li input:checkbox').prop('checked',false);
    $(this).prop('checked',true);
  }
        });


    var cf = document.forms[0];
	var iqos_bw;
	var bandwidthUp;
	var bandwidthDown;
	if("1"=="<%2421%>"){
	//uplink
    iqos_bw = parseFloat(<%2422%>/1000000);
	bandwidthUp = iqos_bw.toFixed(2);
    //downlink
	iqos_bw = parseFloat(<%2423%>/1000000);
	bandwidthDown = iqos_bw.toFixed(2);   
	}else{
	//uplink
    iqos_bw = parseFloat(<%2887%>/1000000);
	bandwidthUp = iqos_bw.toFixed(2);
    //downlink
	iqos_bw = parseFloat(<%2888%>/1000000);
	bandwidthDown = iqos_bw.toFixed(2);   	
	}
    document.getElementById('uplink_bd').innerHTML = bandwidthUp + " Mbps";	
    document.getElementById('downlink_bd').innerHTML = bandwidthDown + " Mbps";

    var enable_access_control = document.getElementsByName("enable_access_control");

    if(enable_access_control[0].value != "1") {	
        for(i=0 ; i<$('td[name=show_status]').length ; i++)
        {
                $('td[name=show_status]')[i].style.display = "none";	
        }
    }
    
}   
function get_devinfo(dev_num){
    var cf = document.forms[0];
    cf.select_dev.value = dev_num;
    cf.page_submit.value = "get_devinfo";
    cf.submit();
}

function handle_checkboxElements(checkbox)
{
    var i,checked_count=0;
    var checkboxElements = document.getElementsByName(checkbox.name);    
    var cf = document.forms[0];
    if(checkbox.checked==false){
        checkbox.checked==false;
        grayout_button("edit_attached");
    }else{
        for(i=0 ; i<checkboxElements.length ; i++) {
            checkboxElements[i].checked=false;
        }
        ungrayout_button("edit_attached");
        checkbox.checked=true;
        cf.page_submit.value = "edit_dev";
    }
}
//--></script>
<link href="css/custom.css" rel="stylesheet" type="text/css">
<style type="text/css">
    .cmn-table-2 tr td {
        vertical-align: middle;
    }
    .cmn-table-2 .checkbox-container {
        height: 105px;
        width: 100%;
        padding: 0 0 0 0;
        margin-bottom: 0px;
    }
    .cmn-table-2 tr td .checkbox-container span {
        top: 46px;
        left: 4px;
    }     
</style>
</head>
<body  onload="change_size(false);loadSettings();" class="page-body"  onResize="change_size(false);" >
<img class="cover-image" src="<%67%>">
<!--<img class="body-image" src="<%68%>">-->
<div id="full-page-container">

<form id="target"  method="post" action="devices.cgi">
<input type="hidden" name="buttonHit"><input type="hidden" name="buttonValue">
<img class="subtop-image" src="<%69%>">
<div class="subhead2"> <%443%></div>
<table border="0"    style="height:370px"  class="subhead2-table">

<tr><td class="scrollpane-table-seperate-border  scroll_container pt-0" colspan="2"><div class="scroll-pane" style="height:365px;width:620px;overflow:auto;scrolling:auto"><table style="border-collapse:collapse;width:97%">


<tr>
    <td id="acl_tips" nowrap colspan="2" align="right" class="pb-15"><%879%></td>
</tr>
<tr>
    <td class="pb-15">
    <table border="0" cellpadding="3" cellspacing="0" width="100%">
        <tr>
            <td width="10%" align="left">
            <button id="edit_attached" value="Edit" onclick="buttonClick(this,'Edit');"  type="SUBMIT" name="edit" class="button-sty1" ><%673%></button>
            </td>   
            <td width="40%" align="left">
            <div id="ookla">
            <table border="0" CELLSPACING=0> 
            <tr><td height="40px" width="152px" BACKGROUND="img/download.png"><span id="downlink_bd"></span></td><td height="40px" width="152px"  BACKGROUND="img/upload.png"><span id="uplink_bd"></span></td></tr>
            </table> 
            </div>
            </td>             
            <td id="acl_status" width="30%" align="left">
                <%500%>:
				<!-- access_control_mode: 1: enabled 0: disabled -->
				<%880%>
                <%881%>
				<%882%>
				<%883%>
                <%884%>
				<%885%>
				<br>
				<!-- access_all_new_devices: 1: allow all 0: block all -->
				<%886%>

            </td>
            <td width="20%" align="right">
                <button id="refresh" value="Cancel" onclick="buttonClick(this,'Refresh');"  type="SUBMIT" name="refresh" class="button-sty1" ><%887%></button>
            </td>
        </tr>        
    </table>
    </td>
</tr>
<tr>
	<td colspan="2">
	<table id="device_table" class="sortable DeviceTable tbWhite cmn-table-2" border="1" cellpadding="2" cellspacing="0" width="100%">
	<tr class="table_header">
		<td nowrap align="center" width="5%"><span class="subheadtext"></span></td>
		<td nowrap align="center" width="9%" name="show_status"><span class="subheadtext"><%889%></span></td>
		<td nowrap align="center" width="10%"><span class="subheadtext"><%2314%></span></td>
		<td nowrap align="center" width="10%"><span class="subheadtext"><%943%></span></td>
		<td nowrap align="center" width="200"><span class="subheadtext"><%486%></span></td>
		<td nowrap align="center" width="22%"><span class="subheadtext"><img src="img/down_ookla.png" width="19px" height="25px" class="device-icon"><%2889%></span></td>
		<td nowrap align="center" width="22%"><span class="subheadtext"><img src="img/up_ookla.png" width="22px" height="25px" class="device-icon"><%2890%></span></td>
	</tr>

    <tbody></tbody>

	</table>
	</td>
</tr>
<tr>
    <td nowrap colspan="2" style="display:block">
        &nbsp;
        <div id="progressbar">
            <img src='ajax-loader.gif' style="margin-top:10px; margin-left:500px;">
        </div>
    </td>
</tr>
<tr>
 <td nowrap colspan="2">&nbsp;</td>
</tr>
<tr>
 <td nowrap colspan="2"><b><%902%></b></td>
</tr>
<tr>
	<td colspan="2">
	<table id="vpn_device_table" class="sortable tbWhite cmn-table-2" border="1" cellpadding="2" cellspacing="0" width="100%">
	<tr class="table_header">
		<td nowrap align="center" width="40%"><span class="subheadtext"><%486%></span></td>
		<td nowrap align="center" width="20%"><span class="subheadtext"><%903%></span></td>
		<td nowrap align="center" width="20%"><span class="subheadtext"><%904%></span></td>
		<td nowrap align="center" width="20%"><span class="subheadtext"><%905%></span></td>
	</tr>
	<%906%>	
	</table>
	</td>
</tr>
<tr><td colspan="2" height="12" ><div style="background-image:url('seprator.gif');width:100%;background-repeat:repeat-x;">&nbsp;</div></td></tr>
</table></div></td></tr>
<tr valign="middle" align="center"><td class="table-seperate-border" colspan="2" style="padding-left:0px"><div id="help" class="help-frame-div" > <iframe id="helpframe"  src="DEV_device2_h.htm" class="help-iframe" scrolling="no" name="helpframe" frameborder="0" onload="showHelpIframe();"></iframe> </div> </td> </tr>
</table>
   <!--<img class="subfooter-image" src="img/subhead2-bottom.gif">-->
<div id="help_switch" class="subhead2-bottom" >
    <span id="help_space" class="help_ico"><img src="img/help-icon.png" onmouseover="changeCursorPointer();" onclick="showHelpIframe();" onmouseout="changeCursorDefault();"></span>
    <span id="help_center" class="subhead2-text help_center_text" onclick="showHelpIframe();" onmouseover="changeCursorPointer();" onmouseout="changeCursorDefault();"> <%203%> </span>
    <span  id="help_button" class="button-help-arrow">
      <img src="img/helparrowdown-icon.png" id="help-button" onclick="showHelpIframe();" onmouseover="changeCursorPointer();" onmouseout="changeCursorDefault();" ></span>
    <span id="help_show_hidden" class="subhead2-text help_right_text" onclick="showHelpIframe();" onmouseover="changeCursorPointer();" onmouseout="changeCursorDefault();"> <%204%> </span>
      </div>


    <input name="select_dev" type="hidden" value= "0">
    <input name="page_submit" type="hidden" value= "">
    <input name="enable_access_control" type="hidden" value= "<%907%>">
<a name="helpframe-anchor"></a>
</form>

</div>
</body>
</html>

