<!DOCTYPE HTML>
<? include 'php/interface.php';?>
<html>
<head>
  <META charset="UTF-8">
  <META http-equiv="Pragma" content="no-cache">
  <META HTTP-equiv="Cache-Control" content="no-cache">
  <META HTTP-EQUIV="Expires" CONTENT="Mon, 06 Jan 1990 00:00:01 GMT">
  
  <title>NETGEAR Router <?= getModelNameStr()?></title>



  <script src="js/jquery.min.js"></script>
  <script src="js/jquery.jscrollpane.min.js"></script>
  <script src="js/jquery.mousewheel.js"></script>
  <script src="js/ipInput.js"></script>
  <script src="js/utils.js<? getVer(); ?>"></script>
  <script src="js/validations.js<? getVer(); ?>"></script>
  <script src="js/jquery.inputmask.min.js"></script>
  <script src="js/embedProgressBar.js"></script>

  <link rel="stylesheet" href="css/button.css">
  <link rel="stylesheet" href="css/settings.css<? getVer(); ?>">
  <link rel="stylesheet" href="css/scrollbar.css">
  <link rel="stylesheet" href="css/form.css">
  <link rel="stylesheet" href="css/custom.css" type="text/css">

  <script language="javascript" type="text/javascript">
    CSRF_TOKEN = <?= genCsrfTokenFilePhp('tokenNumber')?>;

    var form_div = "lanSetup";
    var need_reboot = false;

    $(document).ready(function()
    {
        fetchData('target', 'LAN_lan', 'pre_fillout_init', 'post_fillout_init');
    });

    function sortReservedTable()
    {
        $("#address_reser_table tbody > tr").not(":first").sort(function(a, b){
            ipA = $("span", a)[1].innerHTML.split('.').reduce(function(ipInt, octet) { return (ipInt<<8) + parseInt(octet, 10)}, 0) >>> 0;
            ipB = $("span", b)[1].innerHTML.split('.').reduce(function(ipInt, octet) { return (ipInt<<8) + parseInt(octet, 10)}, 0) >>> 0;
            return (ipA < ipB) ? -1 : 1;
        }).appendTo($("#address_reser_table tbody"));
        $("#address_reser_table tbody > tr").not(":first").each(function(i){
            $(this).find("span:eq(0)").text(i+1);
        });
        $("[name=loadingIcon]").hide();
        $("#lanSetup").show();
    }

    function pre_fillout_init()
    {
        var new_tr ='<tr>\r\n\
          <td nowrap align="center"> &nbsp;\r\n\
            <input type="radio" name="ruleSelect" id="address_select__index" value="__count" onClick="changeSel(\'__iid\',\'__addr\',\'__mac\',\'__escapedName\');" />\r\n\
          </td>\r\n\
          <td nowrap align="center">\r\n\
            <span class="thead">__index</span>\r\n\
          </td>\r\n\
          <td nowrap align="center">\r\n\
            <span class="ttext ip_addr">__addr</span>\r\n\
          </td>\r\n\
          <td nowrap align="center">\r\n\
            <span class="ttext dev_name">__name</span>\r\n\
          </td>\r\n\
          <td nowrap align="center">\r\n\
          <span class="ttext mac_addr">__mac</span>\r\n\
          </td>\r\n\
          </tr>';
        fetchTableData('address_reser_table', 'reservedTable', new_tr, '', 'sortReservedTable');
    }
    
    function post_fillout_init()
    {
        $("#address-ip :input").each(function(index){
            
            if(index < 3)
            {
                $(this).attr("onBlur", "dhcp_update("+(index+1)+")");
            }
        });
        $("#start-ip :input").each(function(index){
            if(index < 3)
            $(this).attr("disabled", true);
        });

        $("#end-ip :input").each(function(index){
            if(index < 3)
            $(this).attr("disabled", true);
        });

        $('#target [name=enableDhcpServer]').on('change', function() {
            this.value = this.checked ? "true" : "false";
        });

        $('#target [name=Edit2]').on('click', function() {
            location.href='DEV_name.html';
        });

        $('#target [name=Add]').on('click', function() {
            showEdit(1);changeAction('add');
        });

        $('#target [name=Edit]').on('click', function() {
            if(!checkNoSel())
            {
              showEdit(2);
              changeAction('edit');
            }
            else
            {
                //"Please select an item to edit"
                alert(window.top.mlang["AAWE08"]);
                return;
            }
        });

        $('#target [name=Delete]').on('click', function() {
            if(!checkNoSel())
            {
                changeAction('delete');
            }
            else
            {
                //"Please select an item to delete"
                alert(window.top.mlang["AAWE07"]);
                return;
            }
        });

        $('#target [name=Cancel]').on('click', function() {
            location.href='LAN_lan.html';
        });

        $('#target [name=Apply]').on('click', function() {
            formSubmit($(this));
        });

        $('#target [name=refresh]').on('click', function() {
            removeNonReservedTable();
            refreshNonReservedTable();
            clearInput();
        });

        $('#target [name=Cancel2]').on('click', function() {
            location.href='LAN_lan.html';
        });

        $('#target [name=Apply2]').on('click', function() {
            formSubmit($(this));
        });

        $('#target [name=Add2]').on('click', function() {
            formSubmit($(this));
        });
        $(":input").inputmask();

        $('#target select[name=ripVersion]').on('change', function() {
            onChange_ripVersion();
        });

        $('#target select[name=ripAuthMode]').on('change', function() {
            onChange_ripAuthMode();
        });

        init_rip();
    }

    function init_rip()
    {
        onChange_ripVersion();
        onChange_ripAuthMode();
    }

    function showEdit(mode)
    {
        $("#target button[name='Apply']").attr("id", "");
        $("#target button[name='Cancel']").attr("id", "");
        $("#target button[name='Add']").attr("id", "");
        $("#target button[name='Apply2']").attr("id", "apply");
        $("#target button[name='Cancel2']").attr("id", "cancel");
        $("#target button[name='Add2']").attr("id", "add");

        form_div = "addrReserved";
        $("#addrReserved").show();
        $("#lanSetup").hide();
        $("#lanSetup input[name='ipAddr']").prop("disabled",true);
        $("#addrReserved input[name='ipAddr']").prop("disabled",false);

        if(mode == 2)
        {
            $("#devices").hide();
            $("#none_resv_tb_title").hide();
            $("#target [name=Apply2]").show();
            $("#target [name=Add2]").hide();
            $("#refresh").hide();
        }
        else
        {
            $("#selected-ip :input:eq(3)").val("");
            $("input[name='macAddr']").val("");
            removeNonReservedTable();
            refreshNonReservedTable();
        }

        //PEGA JYang, change the edit id to "main"
        $('div[name=main]').attr("id", "");
        $('div[name=mainEdit]').attr("id", "main");
    }

    function clearInput()
    {
      var ipAddr = $("#selected-ip").ipInput();
      ipAddr.setIp($("#lan_ipaddr").val());
      // fill auto test IDs
      $('#selected-ip :input').each(function(index){
          $(this).attr("id", 'rsv_ipaddress' + (index+1));  
      });
      $("#selected-ip :input:eq(3)").val("");
      $("input[name='macAddr']").val("");
      $("input[name='deviceName']").val("");
    }

    function removeNonReservedTable()
    {
        $("[name='non_reserved_row']").remove();
    }

    function sortNonReservedTable()
    {
        $("[name='non_reserved_table'] tbody > tr").not(":first").sort(function(a, b){
            ipA = $("span", a)[1].innerHTML.split('.').reduce(function(ipInt, octet) { return (ipInt<<8) + parseInt(octet, 10)}, 0) >>> 0;
            ipB = $("span", b)[1].innerHTML.split('.').reduce(function(ipInt, octet) { return (ipInt<<8) + parseInt(octet, 10)}, 0) >>> 0;
            return (ipA < ipB) ? -1 : 1;
        }).appendTo($("[name='non_reserved_table'] tbody"));
        $("[name='non_reserved_table'] tbody > tr").not(":first").each(function(i){
            $(this).find("span:eq(0)").text(i+1);
        });
    }

    function refreshNonReservedTable()
    {
        var new_tr ='<tr name="non_reserved_row">\r\n\
            <td nowrap align="center"> &nbsp;\r\n\
            <input type="radio" name="ruleSelect" id="address_select__index" value="__count" onClick="changeSel(\'\',\'__addr\',\'__mac\',\'__escapedName\');" />\r\n\
            </td>\r\n\
            <td nowrap align="center">\r\n\
            <span class="thead">__index</span>\r\n\
            </td>\r\n\
            <td nowrap align="center">\r\n\
            <span class="ttext">__addr</span>\r\n\
            </td>\r\n\
            <td nowrap align="center">\r\n\
            <span class="ttext">__name</span>\r\n\
            </td>\r\n\
            <td nowrap align="center">\r\n\
            <span class="ttext">__mac</span>\r\n\
            </td>\r\n\
            </tr>';
        fetchTableData('devices', 'NonReservedTable', new_tr, '', 'sortNonReservedTable');
    }

    function changeSel(select_iid, select_ip, select_mac, select_name)
    {
        $("#reserved_ipAddr").val(select_ip);
        var ipAddr = $("#selected-ip").ipInput();
        ipAddr.setIp(select_ip);
        // fill auto test IDs
        $('#selected-ip :input').each(function(index){
            $(this).attr("id", 'rsv_ipaddress' + (index+1));  
        });
        $("input[name='macAddr']").val(select_mac.toUpperCase());
        $("input[name='deviceName']").val(select_name);
        $("input[name='iid']").val(select_iid);
        return true;
    }

    function checkNoSel()
    {
        if($("#reserved_ipAddr").val() == "" ||
           $("input[name='macAddr']").val() == "")
        {
            return true;  
        }
        return false;
    }

    function formSubmit(btn) 
    {
        if (validation(document.forms[0]))
        {
            $.postForm(form_div, $('#target'), 'cgi-bin/rex_cgi', 'postForm_callback');
            
            var nextURL;
            var tmpCounts = 20000;
            if(need_reboot)
            {
                //Change the URL to new IP 
                nextURL =  window.location.protocol + "//" + $("#address-ip").getIp();
                tmpCounts = 35000;
            }
            else
            {
                nextURL =  "/LAN_lan.html";
            }
            show_EmbedProgressBar("SWP046", tmpCounts, nextURL);
        }
    }

    function validation(f) 
    {
      var msg = "";
      if(form_div == "lanSetup")
      {
          if(!$("#address-ip").validateIp())
          {
              msg+= window.top.mlang["SWPE05"];
          }
          else if(!$("#lanMask-ip").validateIp())
          {
              msg+= window.top.mlang["SWPE06"];
          }
          else
          {
              var l_ipaddr = ip2int($("#address-ip").getIp());
              var l_netmask = ip2int($("#lanMask-ip").getIp());
              var lan_netaddr_min = (l_ipaddr & l_netmask) + 1;
              var lan_netaddr_max = ((l_ipaddr & l_netmask) | (~l_netmask)) - 1;
              if(checkIP($("#address-ip").getIp(),255) //Steven modify for TT#985
                || ((parseInt($("#sys_lan_ipaddress4").val(),10)==0) && (parseInt($("#sys_lan_netmask4").val(),10)==0) && (parseInt($("#sys_lan_netmask3").val(),10)!=0))
                || ((parseInt($("#sys_lan_ipaddress4").val(),10)==0) && (parseInt($("#sys_lan_ipaddress3").val(),10)==0) && (parseInt($("#sys_lan_netmask4").val(),10)==0) && (parseInt($("#sys_lan_netmask3").val(),10)==0)&& (parseInt($("#sys_lan_netmask2").val(),10)!=0))
                || parseInt($("#sys_lan_ipaddress1").val(),10)>224
                || (l_ipaddr < lan_netaddr_min)||(l_ipaddr > lan_netaddr_max))
                  msg+= window.top.mlang["SWPE05"];

              if(checkIP($("#lanMask-ip").getIp(),255)
                || !isNetmask(l_netmask)
                || (lan_netaddr_min > lan_netaddr_max))
                  msg+= window.top.mlang["SWPE06"];

              var n1=parseInt($("#sys_pool_starting_address4").val(),10);
              var n2=parseInt($("#sys_pool_finish_address4").val(),10);

              if( isNaN(n1) || isNaN(n2)
                || (n1<1||n1>254||n2<1||n2>254||n1>n2)
                || ((n1 == n2) && (n1 == (l_ipaddr & 0xFF)))
                || (n1 < (lan_netaddr_min & 0xFF)) || (n2 > (lan_netaddr_max & 0xFF))
                || (($("#sys_pool_starting_address4").val() & $("#sys_lan_netmask4").val()) != ($("#sys_lan_ipaddress4").val() & $("#sys_lan_netmask4").val()))
                || (($("#sys_pool_finish_address4").val() & $("#sys_lan_netmask4").val()) != ($("#sys_lan_ipaddress4").val() & $("#sys_lan_netmask4").val())) )
                   msg+= window.top.mlang["ALSE03"];
          }

      
          if (msg.length > 1)
          {
              alert(msg);
              return false;
          }
          else
          {
              var w_ipaddr = ip2int($("#wan_ipaddr").val());
              var w_netmask = ip2int($("#wan_netmask").val());
              var dns_pri_ipaddr2 = ip2int($("#wan_dns1_pri").val());
              var dns_sec_ipaddr2 = ip2int($("#wan_dns1_sec").val());
              if((w_ipaddr != 0) &&
                 (((l_netmask & w_netmask ) & l_ipaddr) == ((l_netmask & w_netmask ) & w_ipaddr)))
              {
                  alert(window.top.mlang["ALSE01"]);
                  return false;
              }
              
              /* checking whether DNS address as LAN address, no matter got automatically or not */
              if (w_netmask != 0)
              {
                  if((dns_pri_ipaddr2 != 0) &&  /* first DNS conflict check */
                  (((l_netmask & w_netmask) & l_ipaddr) == ((l_netmask & w_netmask) & dns_pri_ipaddr2)))
                  {
                      alert(window.top.mlang["ALSE01"]);
                      return false;
                  }

                  if((dns_pri_ipaddr2 != 0) &&  /* first DNS conflict check */
                  (((l_ipaddr & l_netmask) & w_netmask) == ((dns_pri_ipaddr2 & l_netmask) & w_netmask)))
                  {
                      alert(window.top.mlang["ALSE01"]);
                      return false;
                  }

                  if((dns_sec_ipaddr2 != 0) && /* second DNS conflict check */
                  (((l_netmask & w_netmask) & l_ipaddr) == ((l_netmask & w_netmask) & dns_sec_ipaddr2)))
                  {
                      alert(window.top.mlang["ALSE01"]);
                      return false;
                  }

                  if((dns_sec_ipaddr2 != 0) &&  /* second DNS conflict check */
                  (((l_ipaddr & l_netmask) & w_netmask) == ((dns_sec_ipaddr2 & l_netmask) & w_netmask)))
                  {
                      alert(window.top.mlang["ALSE01"]);
                      return false;
                  }
              }
              var wan_proto =  $("#wan_proto").val()
              w_netmask = l_netmask;
              if((w_ipaddr != 0) &&
                 (((l_netmask & w_netmask ) & l_ipaddr) == ((l_netmask & w_netmask ) & w_ipaddr)))
              {
                  alert(window.top.mlang["ALSE01"]);
                  return false;
              }

              data = $("#pptp_serv_ipaddr").val().match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/);
              data1 = $("#l2tp_serv_ipaddr").val().match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/);
              if (data && (wan_proto == "pptp"))
              {
                w_ipaddr = ip2int($("#pptp_serv_ipaddr").val());
                w_netmask = l_netmask;
      
                if((w_ipaddr != 0) &&
                  (((l_netmask & w_netmask ) & l_ipaddr) == ((l_netmask & w_netmask ) & w_ipaddr)))
                {
                  alert(window.top.mlang["ALSE01"]);
                  return false;
                }
              }
              else if (data1 && (wan_proto == "l2tp"))
              {
                  w_ipaddr = ip2int($("#l2tp_serv_ipaddr").val());
                  w_netmask = l_netmask;
          
                  if((w_ipaddr != 0) &&
                    (((l_netmask & w_netmask ) & l_ipaddr) == ((l_netmask & w_netmask ) & w_ipaddr)))
                  {
                    alert(window.top.mlang["ALSE01"]);
                    return false;
                  }
              }
          }
/*
          var lan_netmask_old = $("#lan_netmask").val().split(".");

          if((parseInt(lan_netmask_old[0]) != parseInt($("#sys_lan_netmask1").val())) ||
            (parseInt(lan_netmask_old[1]) != parseInt($("#sys_lan_netmask2").val())) ||
            (parseInt(lan_netmask_old[2]) != parseInt($("#sys_lan_netmask3").val())) ||
            (parseInt(lan_netmask_old[3]) != parseInt($("#sys_lan_netmask4").val())))
          {
            alert("After this new IP change, the corresponding configurations (DMZ, port forwarding/triggering, block service and block site trusted IP, Address Reservation Table) will be flushed too.");
          }
*/
          if(($("#lan_ipaddr").val() != $("#address-ip").getIp()) || ($("#lan_netmask").val() != $("#lanMask-ip").getIp()))
          {
              alert(window.top.mlang["LANS_001"]);
              need_reboot = true;
          }

          $("#lan_ipaddr").val($("#address-ip").getIp());
          $("#lan_netmask").val($("#lanMask-ip").getIp());
          $("#dhcp_start").val($("#start-ip").getIp());
          $("#dhcp_end").val($("#end-ip").getIp());

          if (!$("input[name='enableDhcpServer']").prop("checked"))
          {
              alert(decodeHtml(window.top.mlang["ALSW02"]));
          }

          return true;

      }
      else if(form_div == "addrReserved")
      {
          var msg = "";
          if(!$("#selected-ip").getIp() || checkIP($("#selected-ip").getIp(),254) || (parseInt($("#rsv_ipaddress4").val(), 10) == 0))
              msg += window.top.mlang["SWPE05"] + "\n";
          
          //check if the reserved ip and DUT's LAN IP is in same subnet
          if(isSameSubnet_v4($("#selected-ip").getIp(), $("#address-ip").getIp(), $("#lanMask-ip").getIp()) == false) {
              //This IP address should be in the same subnet as the LAN IP address.
              msg += window.top.mlang["CBEE04"] + "\n";
          }
          
          var obj_mac = $("input[name='macAddr']");
          if(!$("input[name='macAddr']").inputmask("isComplete") || checkMacStr(obj_mac.get(0)))
              msg+= window.top.mlang["AAWE06"] + "\n";
    
          msg+= checkBlank($("input[name='deviceName']").val(), window.top.mlang["MAD001"]);
    
          if ($("input[name='deviceName']").val().match( /[^\x20-\x7E]/ ))
              msg+= window.top.mlang["AAWE04"] + "\n";
    
          if(($("input[name='deviceName']").val() == "UNKNOWN")||($("input[name='deviceName']").val() == "UNKNOWN NAME"))
              msg+= window.top.mlang["ALSE02"]  + "\n";
    

          if (msg.length > 1)
          {
              alert(msg);
              return false;
          }
          var rv_ip = new Array();
          var rv_mac = new Array();
          var rv_dv_name = new Array();
          var reply;
          $("#reserved_ipAddr").val($("#selected-ip").getIp());
          $("#address_reser_table .ip_addr").each(function(){
              rv_ip.push($(this).html());
          });
          $("#address_reser_table .mac_addr").each(function(){
              rv_mac.push($(this).html());
          });
          $("#address_reser_table .dev_name").each(function(){
              rv_dv_name.push($(this).html());
          });
          if ((rv_ip.indexOf($("#reserved_ipAddr").val()) != -1) || (rv_mac.indexOf($("input[name='macAddr']").val()) != -1) || ($("input[name='deviceName']").val().length > 0 && (rv_dv_name.indexOf($("input[name='deviceName']").val()) != -1)))
          {
              reply = confirm(window.top.mlang["ALSW01"]);
              if (!reply)
              {
                  return false;
              }
          }
      }
      return true;
    }
    
    function postForm_callback()
    {
        /* Refreshing page is already done by progress bar, the callback function do nothing here is
        to avoid the postForm defaultHandler() refreshing page may interrupt the execution of progress bar
        */
    }
    
    function dhcp_update(index)
    {
      $("#sys_pool_starting_address"+index).val($("#sys_lan_ipaddress"+index).val());
      $("#sys_pool_finish_address"+index).val($("#sys_lan_ipaddress"+index).val());
    }
    
    function changeAction(actionName)
    {
        $("input[name='action']").val(actionName);
        if(actionName == "delete")
        {
            form_div = "addrReserved";
            $.postForm(form_div, $('#target'), 'cgi-bin/rex_cgi');
        }
        else if(actionName == "edit")
        {
            $("input[name='original_ipAddr']").val($("#reserved_ipAddr").val());
            $("input[name='original_macAddr']").val($("input[name='macAddr']").val());
        }
    }

    function onChange_ripVersion()
    {
        var rip_ver = $('select[name=ripVersion]').val();
        if (rip_ver == "RIP_2B" || rip_ver == "RIP_2M")
        {
            $('#rip_auth_mode').show();
        }
        else
        {
            $('#rip_auth_mode').hide();
        }
    }

    function onChange_ripAuthMode()
    {
        var rip_auth_mode = $('select[name=ripAuthMode]').val();
        if (rip_auth_mode == "Text")
        {
            $('#rip_auth_password').show();
            $('#rip_auth_key').hide();
        }
        else if (rip_auth_mode == "MD5")
        {
            $('#rip_auth_password').hide();
            $('#rip_auth_key').show();
        }
        else
        {
            $('#rip_auth_password').hide();
            $('#rip_auth_key').hide();
        }
    }

    function onClick_pwdEye(passwdId, eyeSlashName, eyeName)
    {
        var type = document.getElementById(passwdId).type;
        
        if (type == "password") {
            document.getElementById(passwdId).type = "text";
            $('[name='+eyeSlashName+']')[0].style.display = "none";
            $('[name='+eyeName+']')[0].style.display = "";
        }
        else if (type == "text") {
            document.getElementById(passwdId).type = "password";
            $('[name='+eyeSlashName+']')[0].style.display = "";
            $('[name='+eyeName+']')[0].style.display = "none";
        }
    }
  </script>  
</head>

<body onload="window.top.change_size($(this));loadhelp('LAN_lan','');" class="page-body" onResize="window.top.change_size($(this));">
    <form id="target"  name="formname" method="POST" >
    <? generate_LoadingIcon() ?>
    <div id="lanSetup" style="display:none;">
      <div class="page-header" style="position: relative;" mlang="LUP032">LAN Setup</div>
      <div id="main" name="main" class="form-group"  style="overflow:auto;scrolling:auto">
      
        <div class="form-row">
            <a href="javascript:loadhelp('LAN_lan','device_name')" tabindex="-1"><b mlang="MAD001" >Device Name11</b></a>
        </div>
      
        <div class="form-row">
            <span name="deviceName"></span>&nbsp;&nbsp;&nbsp;
            <input type="hidden" name="hiddenDeviceName" id="device_name" disabled>
            <button type="button" value="Edit" name="Edit2" id="edit_devname_bt" class="button-sty1" mlang="UAS011" >Edit</button>
        </div>
        
        <div class="space-divider">&nbsp;</div>
        
        <div class="form-row pb-10">
            <a href="javascript:loadhelp('LAN_lan','tcp')" tabindex="-1" mlang="ALS004">LAN TCP/IP Setup</a>
        </div>
        
        <div class="form-row">
              <span mlang="SWP030">IP Address</span>
        </div>
    
        <div id="address-ip"></div>
        <input type="hidden" name="ipAddr" id="lan_ipaddr" value="">
        
        <div class="form-row">
              <span mlang="SWP044">IP Subnet Mask</span>
        </div>
    
        <div id="lanMask-ip"></div>
        <input type="hidden" name="netmask" id="lan_netmask" value="">
    
        <div class="form-row">
              <span mlang="ALS011">RIP Direction</span>
        </div>

        <div class="form-row">
          <select name="ripDirection" id="rip_direction" size="1">
            <option value="Both" mlang="ALS010" >Both</option>
            <option value="In only" mlang="ALS012" >In Only</option>
            <option value="Out only" mlang="ALS013" >Out Only</option>
          </select>
        </div>
    
        <div class="form-row">
              <span mlang="ALS014">RIP Version</span>
        </div>

        <div class="form-row">
          <select name="ripVersion" id="sys_rip_version" size="1">
            <option value="Disabled" mlang="SWP043" >Disabled</option>
            <option value="RIP_1">RIP_1</option>
            <option value="RIP_2B">RIP_2B</option>
            <option value="RIP_2M">RIP_2M</option>
          </select>
        </div>

        <div id="rip_auth_mode" style="display: none;">
          <div class="form-row">
            <span mlang="ALS016">RIPv2 authentication mode</span>
          </div>

           <div class="form-row">
            <select name="ripAuthMode" id="sys_rip_auth_mode" size="1">
              <option value="No authentication" mlang="ALS017" >No authentication</option>
              <option value="Text" mlang="ALS018" >Text</option>
              <option value="MD5" mlang="ALS019" >MD5</option>
            </select>
          </div>
    
          <div id="rip_auth_password" style="display: none;">
            <div class="form-row">
              <b mlang="SWP027">Password</b><b> :</b>

              <input type="password" class="input1" name="ripAuthPwd" id="rip_password" size="32" maxLength="32" value="">
              <img src="images/pwdEyeSlash.png" name="pwdEyeSlash" id="pwd_display" style="width:20px; cursor:pointer;" onclick="onClick_pwdEye('rip_password','pwdEyeSlash', 'pwdEye');">
              <img src="images/pwdEye.png" name="pwdEye" id="pwd_display" style="width:20px; cursor:pointer; display:none;" onclick="onClick_pwdEye('rip_password','pwdEyeSlash', 'pwdEye');">
            </div>
          </div>

          <div id="rip_auth_key" style="display: none;">
            <div class="form-row">
              <b mlang="ALS020">Key string</b><b> :</b>

              <input type="password" class="input1" name="ripAuthKey" id="rip_key" size="32" maxLength="32" value="">
              <img src="images/pwdEyeSlash.png" name="keyEyeSlash" id="key_display" style="width:20px; cursor:pointer;" onclick="onClick_pwdEye('rip_key','keyEyeSlash', 'keyEye');">
              <img src="images/pwdEye.png" name="keyEye" id="key_display" style="width:20px; cursor:pointer; display:none;" onclick="onClick_pwdEye('rip_key','keyEyeSlash', 'keyEye');">
            </div>
          </div>
        </div>

        <div class="space-divider">&nbsp;</div>
    
        <div class="form-row pb-10">
          <label class="checkbox-container">
            <input type="checkbox" name="enableDhcpServer" id="dhcp_server_enable" value="true">
            <a href="javascript:loadhelp('LAN_lan','dhcp')" tabindex="-1">
              <b mlang="ALS003" >Use Router as DHCP Server</b>
            </a>
            <span class="checkbox-checkmark"></span>
          </label>
        </div>
    
        <div class="form-row">
              <span mlang="ALS002">Starting IP Address</span>
        </div>
    
        <div id="start-ip"></div>
        <input type="hidden" name="startAddr" id="dhcp_start" value="">
    
        <div class="form-row">
              <span mlang="ALS001">Ending IP Address</span>
        </div>
    
        <div id="end-ip"></div>
        <input type="hidden" name="endAddr" id="dhcp_end" value="">
    
        <div class="space-divider">&nbsp;</div>
    
        <div class="form-row">
              <a href="javascript:loadhelp('LAN_lan','reserved')" tabindex="-1">
                <b mlang="ALS005" >Address Reservation</b>
              </a>
        </div>
    
        <div class="form-row">
            <table id="address_reser_table" border="1" cellpadding="2" cellspacing="0" width="100%" class="tbWhite table1 cmn-table-2" style="width:97%;">
              <tr class="table_header">
                <td nowrap align="center" width="6%"><span class="thead"> &nbsp;</span></td>
                <td nowrap align="center" width="6%"><span class="thead"># </span></td>
                <td nowrap align="center"><span class="thead" mlang="SWP030" >IP Address</span></td>
                <td nowrap align="center"><span class="thead" mlang="MAD001" >Device Name</span></td>
                <td nowrap align="center"><span class="thead" mlang="MRS015" >MAC Address</span></td>
              </tr>
            </table>
        </div>
    
        <div class="form-row">
          <button type="button" value="Add" name="Add" id="add" class="button-sty1" mlang="OTH012" >Add</button>
          <button type="button" value="Edit" name="Edit" id="edit" class="button-sty1" mlang="UAS011" >Edit</button>
          <button type="button" value="Delete" name="Delete" id="delete" class="button-sty1" mlang="UAS013" >Delete</button>
        </div>
        <input type="hidden" name="wan_proto" id="wan_proto" value="" disabled>
        <input type="hidden" name="wan_ipaddr" id="wan_ipaddr" value="" disabled>
        <input type="hidden" name="wan_netmask" id="wan_netmask" value="" disabled>
        <input type="hidden" name="pptp_wan_ipaddr" id="pptp_wan_ipaddr" value="" disabled>
        <input type="hidden" name="l2tp_wan_ipaddr" id="l2tp_wan_ipaddr" value="" disabled>
        <input type="hidden" name="pppoe_wan_ipaddr" id="pppoe_wan_ipaddr" value="" disabled>
        <input type="hidden" name="pptp_serv_ipaddr" id="pptp_serv_ipaddr" value="" disabled>
        <input type="hidden" name="l2tp_serv_ipaddr" id="l2tp_serv_ipaddr" value="" disabled>
        <input type="hidden" name="wan_dns1_pri" id="wan_dns1_pri" value="" disabled>
        <input type="hidden" name="wan_dns1_sec" id="wan_dns1_sec" value="" disabled>
        <div class="space-divider">&nbsp;</div>
      </div><!--form-group-->
      <div class="form-btn-row" id="form_btn_div">
         <button value="Cancel" type="BUTTON" name="Cancel" id="cancel" class="button-cancel cancel_bt"  mlang="UAS021" >Cancel</button>
         <button value="Apply" type="BUTTON" name="Apply" id="apply" class="button-apply apply_bt"  mlang="LUP004" > Apply</button>
      </div>
    </div><!--lanSetup-->

    <div id="addrReserved" style="display:none;">
      <div class="page-header" style="position: relative;" mlang="ALS005">Address Reservation</div>
      <div id="mainEdit" name="mainEdit" class="form-group" style="overflow:auto;scrolling:auto;" >
        <div class="form-row pb-10" id="none_resv_tb_title">
           <a href="javascript:loadhelp('LAN_lan','reserved')" tabindex="-1">
                      <b mlang="ALS006" >Address Reservation Table</b>
                    </a>
        </div>

        <div class="form-row">
            <table id="devices" name="non_reserved_table" border="1" cellpadding="2" cellspacing="0" width="100%" class="tbWhite table1 cmn-table-2" style="width:97%;">
              <tr class="table_header">
                <td nowrap align="center" width="6%"><span class="thead"> &nbsp;</span></td>
                <td nowrap align="center" width="6%"><span class="thead"># </span></td>
                <td nowrap align="center"><span class="thead" mlang="SWP030" >IP Address</span></td>
                <td nowrap align="center"><span class="thead" mlang="MAD001" >Device Name</span></td>
                <td nowrap align="center"><span class="thead" mlang="MRS015" >MAC Address</span></td>
              </tr>
            </table>
        </div>

        <div class="space-divider">&nbsp;</div>

        <div class="form-row">
          <span mlang="SWP030">IP Address</span>
        </div>

        <div id="selected-ip"></div>
        <input type="hidden" name="ipAddr" id="reserved_ipAddr" value="" disabled>

        <div class="form-row">
          <span mlang="MRS015">MAC Address</span>
        </div>

        <div class="form-row ip-input-row">
          <input type="text" name="macAddr" id="rsv_mac" class="num ip-feild" data-inputmask="'alias': 'mac'">
        </div>

        <div class="form-row">
          <span mlang="MAD001">Device Name</span>
        </div>

        <div class="form-row">
          <input class="input1" type="text" name="deviceName" id="device_name" size="32" maxlength="32">
        </div>
        <input type="hidden" name="action" value="default">
        <input type="hidden" name="original_ipAddr" value="default">
        <input type="hidden" name="original_macAddr" value="default">
        <input type="hidden" name="iid" value="default">
      </div><!--form-group-->
      <div class="form-btn-row" id="form_btn_div2">
        <button value="Refresh" type="button" name="refresh" id="refresh" class="button-common common_bt"  mlang="UBS012" >Refresh</button>
        <button value="Cancel" type="button" name="Cancel2" class="button-cancel cancel_bt"  mlang="UAS021" >Cancel</button>
        <button value="Apply" type="button" name="Apply2" class="button-apply apply_bt" style="display:none;"mlang="LUP004" >Apply</button>
        <button value="Add" type="button" name="Add2" class="button-apply apply_bt" mlang="OTH012" >Add</button>
      </div>
    </div><!--addrReserved-->
   </form>
   <? genHelpSection() ?>
   <? generate_EmbedProgressBar()?>
   
</html>
