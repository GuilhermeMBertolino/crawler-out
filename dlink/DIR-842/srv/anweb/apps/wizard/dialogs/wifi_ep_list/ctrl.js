"use strict";!function(){angular.module("wizard").controller("WiFiEndPointListDialogCtrl",["$scope","$state","$q","translate","ngDialog","devinfo","$timeout","wifiScan",function($scope,$state,$q,translate,ngDialog,devinfo,$timeout,wifiScan){function getShortSecurity(item){var mode=item.ModeEnabled;return translate("None"==mode?"wifi_client_open_net":"wifi_client_protected_net")+", "}var data=$scope.ngDialogData,scanInit=!1,scanInProcess=!1;$scope.getSSID=function(item){return _.isEmpty(item.SSID)?"< HIDDEN >":" "+item.SSID},$scope.getImgSignal=function(item){var signal=item.SignalStrength,security=item.ModeEnabled,value=parseInt(signal/20);return value||(value="0"),5==value&&(value=4),"None"!=security?value?"wifi_lock_"+value:"":value?"wifi_"+value:""},$scope.getSecurity=function(elem){var result="",mode=elem.ModeEnabled,encr=elem.EncryptionType;switch(mode){case"None":case"WEP":result+="Open";break;case"WPA-Enterprise":result+="WPA";break;case"WPA2-Enterprise":result+="WPA2";break;case"WPA-WPA2-Enterprise":result+="WPA/WPA2 mixed";break;case"WPA-Personal":result+="WPA-PSK";break;case"WPA2-Personal":result+="WPA2-PSK";break;case"WPA-WPA2-Personal":result+="WPA-PSK/WPA2-PSK mixed";break;case"WPA3":result+="WPA3-SAE";break;case"WPA2-WPA3":result+="WPA2-PSK/WPA3-SAE mixed";break;default:result+="UNKNOWN"}return encr&&"NONE"!=encr&&(result+=" ["+("TKIPAES"==encr?"TKIP+AES":encr)+"]"),result},$scope.showClientBand=function(){return!$scope.isSeparateClient&&data.rootIsSupport5G},$scope.getFreq=function(band){return"2.4GHz"==band?translate("24ghz"):"5GHz"==band?translate("5ghz"):""},$scope.getChannel=function(channel){return channel},$scope.getCaption=function(item){return item.SSID},$scope.getShort=function(item){return getShortSecurity(item)+$scope.getFreq(item.Band)},$scope.selectEndpoint=function(index){$scope.closeThisDialog({index:index,ep:$scope.scanList[index]})},$scope.update=function(){scanInProcess||(scanInProcess=!0,wifiScan.pullScan().then(function(points){$scope.scanList=points.filter(function(o){return!data.band||data.band==o.Band}).sort(function(a,b){return a.Band!=b.Band?a.Band<b.Band?-1:1:a.SignalStrength>b.SignalStrength?-1:1})})["finally"](function(){scanInit=!0,scanInProcess=!1}))},$scope.isLoadingList=function(){return!scanInit},$scope.isProcess=function(){return scanInit&&scanInProcess},$scope.update()}])}();