"use strict";!function(){var modname="device-monitor";window.appDeps.push(modname),angular.module(modname,["deviceAvailable"]).config(["deviceAvailableProvider",function(da){function __notAvailableCallback($rs,overlay,c){$rs.deviceMonitor.availability=!1;var config=$rs.deviceMonitorConfig,count=c||1,possiblyLostThreshold=config.possiblyLostThreshold&&config.possiblyLostThreshold>0?config.possiblyLostThreshold:1/0,haveDefinitelyLostThreshold=config.definitelyLostThreshold&&config.definitelyLostThreshold>0,definitelyLostThreshold=haveDefinitelyLostThreshold?config.definitelyLostThreshold:1/0;count>=possiblyLostThreshold&&(count>=definitelyLostThreshold?(da.getNotAvailableCountCallback=null,$rs.$emit("device_definitly_lost"),overlay.start("static")):($rs.$emit("device_possibly_lost",{count:count}),overlay.start(haveDefinitelyLostThreshold?"icon":"icon")))}function __availableCallback($rs,overlay,overlayProgress,c){var config=$rs.deviceMonitorConfig,availableAgainThreshold=config.availableAgainThreshold||1;(c||1)>=availableAgainThreshold&&(da.getNotAvailableCountCallback=notAvailableCountCallback,$rs.$emit("device_available_again"),$rs.deviceMonitor.availability=!0,overlay.stop(),$rs.fwUpgradeStatus&&($rs.fwUpgradeStatus=!1,overlayProgress.stop()))}var notAvailableCountCallback=["$rootScope","overlay-not-available","deviceNotAvailableCount",__notAvailableCallback];da.getNotAvailableCallback=["$rootScope","overlay-not-available",__notAvailableCallback],da.getNotAvailableCountCallback=notAvailableCountCallback,da.getAvailableAgainCallback=["$rootScope","overlay-not-available","overlay-progress",__availableCallback],da.getAvailableCountCallback=["$rootScope","overlay-not-available","overlay-progress","deviceAvailableCount",__availableCallback]}]).run(["$rootScope","deviceAvailable",function($rs,da){function initThresholds(){var conf=$rs.deviceMonitorConfig,old={possiblyLostThreshold:conf.possiblyLostThreshold,definitelyLostThreshold:conf.definitelyLostThreshold,availableAgainThreshold:conf.availableAgainThreshold};return conf.possiblyLostThreshold=1,conf.definitelyLostThreshold=3,conf.availableAgainThreshold=1,old}$rs.deviceMonitorConfig={baseUrl:"",initPolling:da.init,initThresholds:initThresholds,setApplyingThresholds:function(){var conf=$rs.deviceMonitorConfig,old={possiblyLostThreshold:conf.possiblyLostThreshold,definitelyLostThreshold:conf.definitelyLostThreshold,availableAgainThreshold:conf.availableAgainThreshold};return conf.possiblyLostThreshold=1,conf.definitelyLostThreshold=0,conf.availableAgainThreshold=7,old}},$rs.deviceMonitor={availability:!0},$rs.$watch("deviceMonitorConfig.baseUrl",function(newValue){da.cors(newValue)}),initThresholds()}])}();