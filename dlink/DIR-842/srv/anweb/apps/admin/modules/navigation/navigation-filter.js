"use strict";!function(){var m=angular.module(regdep("navigation-filter"),["app.page-details","menu-list"]);m.service("navigationFilter",["navigation","pageDetails","funcs","menus",function(navigation,pageDetails,funcs,menus){function filter(){if(_filters.length)for(var i in _filters)navigation=_filters[i](navigation,menus);return navigation}function getRulesDummy(){var rules={};return _.each(pageDetails,function(pages,pageKey){_.each(pages,function(page){_.each(page.features,function(feature,featureKey){funcs.setValue("pages.".concat(pageKey,".").concat(featureKey),{hide:!1},rules)})})}),rules}var _filters=[],_rules=[];return{addRules:function(cb){_rules.push(cb)},rules:function(){var dummy=getRulesDummy();if(_rules.length){var composeRules=_.compose.apply(null,_rules);return composeRules(dummy)}return dummy},addFilter:function(cb){_filters.push(cb)},filter:filter}}])}();