"use strict";function WifiMacEditSimpleDialogCtrl($scope){var inx=$scope.ngDialogData.inx,isNew=$scope.isNew=$scope.ngDialogData.isNew,rule=($scope.ngDialogData.rule.deny,$scope.rule=$scope.ngDialogData.rule),rules=angular.copy($scope.rules),wifiMacFilter=$scope.device.wifiMacFilter;$scope.header="wifi_mac_"+(isNew?"add":"edit"),$scope.optionsNetwork=isNew?$scope.networks:$scope.networksFullList,$scope.save=function(){var save=isNew?wifiMacFilter.add:wifiMacFilter.cut;$scope.wifi_mac_form.$valid&&(save(isNew?rule:inx),$scope.update($scope.closeThisDialog.bind(null,"saved")))},$scope.uniqueMacValidator=function(mac){var curNetworkRules=funo.filter(rules,function(checkingRule){return!0&&rule.Network===checkingRule.Network&&rule.Band===checkingRule.Band}),otherRules=funo.filter(curNetworkRules,function(_,checkingInx){return inx!==checkingInx}),usedMacs=_.map(otherRules,_.property("MAC"));_.each(usedMacs,function(elem,inx){usedMacs[inx]=elem.toUpperCase()});var isMacUsed=~usedMacs.indexOf(mac.toUpperCase());return isMacUsed?"wifi_mac_used":null},$scope.changeBand=function(){$scope.networks[rule.Band].List[rule.Network]||(rule.Network=_.keys($scope.networks[rule.Band].List)[0])},$scope.getButtonText=function(){var isDeny="deny"==$scope.optionsNetwork[rule.Band].List[rule.Network].AccessPolicy;return isDeny&&isNew||!isDeny&&!isNew?"act_deny":"act_allow"}}