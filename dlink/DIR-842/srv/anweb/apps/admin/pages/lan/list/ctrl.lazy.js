"use strict";angular.module("app").controllerProvider.register("LanListCtrl",["$scope","$state","lanPage","pageDetails","LanPageCommon","translate",function($scope,$state,lanPage,pageDetails,LanPageCommon,translate){function prepareLAN(lan){var ipv4=lan.IPv4,ipv6=lan.IPv6,dhcpServer=lan.DHCPServer,dhcpv4=dhcpServer.DHCPv4,dhcpv6=dhcpServer.DHCPv6;ipv4.__AddressArray=getIPAddressArray(ipv4.Address),ipv6.__AddressArray=getIPAddressArray(ipv6.Address),dhcpv4.__ModeLang=getDHCPServerModeLang(lanPageCommon.getDHCPServerMode(dhcpServer)),dhcpv6.__ModeLang=getDHCPServerModeLang(lanPageCommon.getDHCPv6ServerMode(dhcpServer))}function prepareList(list){for(var i in list)prepareLAN(list[i])}function getIPAddressArray(multiObject){return Object.keys(multiObject||{}).map(function(k){return multiObject[k]})}function getDHCPServerModeLang(mode){return{Disable:"lan_dhcp_mode_disable",Relay:"lan_dhcp_mode_relay"}[mode]||mode}var allLANData,lanPageCommon=LanPageCommon();lanPage.pull().then(function(data){allLANData=data;var inx,list=$scope.list=data.View.LAN.List,lanNum=Object.keys(list).length;if(prepareList(list),lanNum>1)$scope.$emit("pageload");else{if(1>lanNum)return Promise.reject();inx=Object.keys(list)[0],pageDetails.lanEdit[0].go(null,{data:data,inx:inx})}})["catch"](function(){$state.go("error",{code:"msg_pull_error",message:"msg_error_desc"})}),$scope.edit=function(item,inx){pageDetails.lanEdit[0].go(null,{data:allLANData,inx:inx})},$scope.getItemShortInfo=function(item){var lines=[],dhcpv4=item.DHCPServer.DHCPv4,dhcpv6=item.DHCPServer.DHCPv6,ipv4=item.IPv4,ipv6=item.IPv6,ipLine="";return ipv4.__AddressArray.length&&(ipLine+=ipv4.__AddressArray[0].IPAddress),ipv6.__AddressArray.length&&(ipLine+="; "+ipv6.__AddressArray[0].IPAddress),ipLine&&lines.push(ipLine),lines.push(translate("lan_ipv4_dhcp_mode_short")+": "+translate(dhcpv4.__ModeLang)),lines.push(translate("lan_ipv6_dhcp_mode_short")+": "+translate(dhcpv6.__ModeLang)),lines}}]);