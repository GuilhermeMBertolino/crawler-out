"use strict";!function(){angular.module("app").service("tr069Util",["funcs","device","cpe",function(funcs,device,cpe){function getConfig(){return config?config:{}}var config,attrs,__initConfig,converter=device.tr69.converter,paths={tr:"Device.Services.TR069.",conns:"Device.Network.Connection.",ifaces:"Device.Network.Interface.",groups:"Device.Network.Group.",usbConns:"Device.USB.Connection.",pppClientSettings:"Device.Network.Settings.PPPClient."},requestPaths=[paths.tr,paths.conns,paths.ifaces,paths.groups,paths.pppClientSettings];return{pull:function(){function success(response){var data=funcs.buildTree(response[0].result.ParameterList);return attrs=funcs.buildTreeAttributes(response[1].result.ParameterList),__initConfig=funcs.deepClone(data),config=converter.dsysinitToNative(data),Promise.resolve()}function error(response){return Promise.reject()}return Promise.all([cpe.GetParameterValues(requestPaths,void 0,!0),cpe.GetParameterAttributes([paths.tr])]).then(success)["catch"](error)},apply:function(settings){var data=converter.nativeToDsysinit(settings),diff=funcs.newConfig.makeDiff(__initConfig,data,attrs);return _.isEmpty(diff)?Promise.resolve():cpe.ApplyDifference(diff)},getConfig:getConfig}}])}();