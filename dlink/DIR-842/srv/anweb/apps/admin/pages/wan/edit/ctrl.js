"use strict";angular.module("app").controller("WanEditCtrl",["$scope","$state","wanPage","pageDetails","wanPageCommon",function($scope,$state,wanPage,pageDetails,wanPageCommon){var priv={baseStateName:$state.current.name,dataToConvert:{}};wanPage.pull().then(function(data){priv.data=data;var path=$state.params.path,conn=wanPageCommon.getByPath(path,data),internalType=path.replace(/\..*/,""),contype=wanPageCommon.getContype(conn,internalType);return!conn.Authorization8021x,1,conn.__Path=path,$state.go(priv.baseStateName+".conn",{data:data,conn:conn,_contype:contype})}).then(function(){$scope.$emit("pageload")})["catch"](function(){$state.go("error",{code:"msg_pull_error",message:"msg_error_desc"})}),$scope.$on("pagesubmit",function($event,conn){wanPageCommon.getOrCreateByPath(conn.__Path,priv.dataToConvert,conn);var overlay=$scope.overlay.circular.start();conn.ActiveSIM&&conn.ModemId&&priv.data.Modems&&priv.data.Modems[conn.ModemId]&&priv.data.Modems[conn.ModemId].ActiveSIM!=conn.ActiveSIM&&(priv.data.Modems[conn.ModemId].ActiveSIM=parseInt(conn.ActiveSIM)),wanPage.push(priv.dataToConvert,[],priv.data).then(function(){return wanPageCommon.goToWanMainState()})["catch"](function(error){return error?void $state.go("error",{code:"msg_push_error",message:"msg_error_desc",state:pageDetails.wanInfo[0].state}):wanPageCommon.goToWanMainState()})["finally"](function(){$scope.overlay.circular.stop(overlay)})})}]);