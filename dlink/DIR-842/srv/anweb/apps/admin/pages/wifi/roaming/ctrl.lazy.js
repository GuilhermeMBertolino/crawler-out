"use strict";!function(){angular.module("app").controllerProvider.register("wifiRoamingCtrl",["$scope","$state","wifiRoamingUtil","navShared",function($scope,$state,util,navShared){function update(){util.pull().then(function(){$scope.roaming=util.getConfig(),$scope.backup=device.funcs.deepExtend({},$scope.roaming),$scope.$emit("pageload")})["finally"](stopOverlay)}function stopOverlay(){null!=overlayId&&($scope.overlay.circular.stop(overlayId),overlayId=null)}function error(){stopOverlay(),$state.go("error",{code:"msg_push_error",message:"msg_error_desc"})}var device=$scope.device;$scope.roaming={},$scope.backup=null,$scope.bands=[{name:"24",prefix:""}],$scope.meshEnabled=navShared.isEasyMeshEnabled;var overlayId=null;$scope.bands.push({name:"5",prefix:"_5g"}),$scope.isNotModified=function(){return _.size($scope.roaming)&&$scope.backup?angular.equals($scope.roaming,$scope.backup):!0},$scope.supportMultiBand=function(){return _.size($scope.bands)>1},$scope.validateQuality=function(min,kick){return kick>min?"wifi_roaming_kick_greater_than_min_error":null},$scope.apply=function(){overlayId=$scope.overlay.circular.start(),util.apply(function(data){return data.enable?data.mc_switch?data:_.omit(data,"mc_ttl","mc_groupaddr"):{enable:!1}}($scope.roaming)).then(update)["catch"](error)},update()}])}();