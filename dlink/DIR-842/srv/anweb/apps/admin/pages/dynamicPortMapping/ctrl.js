"use strict";!function(){angular.module("app").controllerProvider.register("dynPortMappingCtrl",["$scope","$state","navShared","dynPortMappingUtil",function($scope,$state,navShared,util){function getFirewallLeases(rules){var leases={IPv4:[],IPv6:[]};return rules.forEach(function(element){element.Leases.IPv4.forEach(function(lease){lease.ruleIndex=element.__index,leases.IPv4.push(lease)}),element.Leases.IPv6.forEach(function(lease){lease.ruleIndex=element.__index,leases.IPv6.push(lease)})}),leases}$scope.dynPortMapping={Mode:navShared.deviceMode,IPStackFirstInstance:null,leases:{IPv4:null,IPv6:null,getFirewallLeases:getFirewallLeases,getCaptionLeases:function(item){return"".concat(item.Description,"(").concat(item.Protocol,")")},getShortLeases:function(item){return"".concat(item.InternalAddr,"(").concat(item.InternalPort,":").concat(item.ExternalPort,")")}}};var portMap=$scope.dynPortMapping;!function(){util.pull().then(function(){"Firewall"==portMap.Mode?(portMap.leases.IPv4=util.getConfig().Rules?getFirewallLeases(util.getConfig().Rules).IPv4:void 0,portMap.leases.IPv6=util.getConfig().Rules?getFirewallLeases(util.getConfig().Rules).IPv6:void 0):(portMap.leases.IPv4=util.getConfig().Leases?util.getConfig().Leases.IPv4:void 0,portMap.leases.IPv6=util.getConfig().Leases?util.getConfig().Leases.IPv6:void 0),portMap.IPStackFirstInstance=util.getConfig().IPStack,$scope.$emit("pageload")},function(){$state.go("error",{code:"msg_pull_error",message:"msg_error_desc"})})}()}])}();