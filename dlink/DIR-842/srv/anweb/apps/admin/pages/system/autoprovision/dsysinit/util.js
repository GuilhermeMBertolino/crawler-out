"use strict";!function(){angular.module("app").service("autoProvUtil",["cpe","device","devinfo","funcs",function(cpe,device,devinfo,funcs){var configPath="Device.Services.Autoprovision.",config=null,attrs=null,__initConfig=null,statusConfig=null;return{pull:function(){function success(response){return config=funcs.buildTree(response[0].result.ParameterList),attrs=funcs.buildTreeAttributes(response[1].result.ParameterList),__initConfig=angular.copy(config),Promise.resolve()}function error(){return Promise.reject()}return Promise.all([cpe.GetParameterValues([configPath]),cpe.GetParameterAttributes([configPath])]).then(success,error)},apply:function(){var diff=funcs.newConfig.makeDiff(__initConfig,config,attrs);return cpe.ApplyDifference(diff)},getConfig:function(){return funcs.fetchBranch(config,configPath)},getStatus:function(){return funcs.fetchBranch(statusConfig,configPath)},checkStatus:function(){var checkObj=[{Name:configPath+"Check",Value:!0}];return cpe.SetParameterValues(checkObj)},updateStatus:function(){function success(response){return statusConfig=funcs.buildTree(response[0].result.ParameterList),Promise.resolve()}function error(){return Promise.reject()}return Promise.all([cpe.GetParameterValues([configPath]),cpe.GetParameterAttributes([configPath])]).then(success,error)}}}])}();