<html>
<head>
<meta http-equiv=Content-Type content=text/html>
<meta http-equiv="Pragma" content="no-cache">
<link rel="stylesheet" href='stylemain.css' type='text/css'>
<title>D-Link ADSL Router</title>


<script language="javascript">
<!--
var ModemVer='<%ejGet(modelName)%>';
var FirmwareVer='<%ejGet(sysVersion)%>';
var HardwareVer='C2';
var cookieEnabled = window.navigator.cookieEnabled;
var accessmode = '<%ejGetOther(networkaccessmode)%>';
var captchaEnbl='<%ejGet(captchaEnbl)%>';
var pwdchanged = '<%ejGet(pwdchanged)%>';
function setCookie(c_name,val)
{
	var exdate=new Date();
	var expiredays = 10;
	var data;
	//var ny = exdate.getFullYear();

	exdate.setYear(exdate.getFullYear()+1);
	//alert(exdate);
	data = c_name+ "=" +escape(val)+ ((expiredays==null) ? "" : ";expires="+exdate);
	//alert(data);
	document.cookie=data;
	document.cookie=c_name+ "=" +escape(val)+ "; expires=" + exdate.toGMTString();
}

function delCookie(c_name)
{
	var date = new Date();
	date.setYear(date.getFullYear()- 1);
	document.cookie=c_name+ "=" + "; expires=" + date.toGMTString();
}

function getCookie(c_name)
{
	if (document.cookie.length>0)
	{
		c_start=document.cookie.indexOf(c_name + "=");
		if (c_start!=-1)
		{ 
			c_start=c_start + c_name.length+1;
			c_end=document.cookie.indexOf(";",c_start);
			if (c_end==-1) c_end=document.cookie.length;
			return unescape(document.cookie.substring(c_start,c_end));
		} 
	}
	return "";
}
function doIninitialize(){

	if (window != top) top.location.href = location.href;

	document.frmLogin.username.focus();
	//clear all cookies after change the password
	//and only clear page view cookies when each time enter login.html
	{
		var date = new Date();
		date.setYear(date.getFullYear()- 1);
		
		var strCookie=document.cookie;
		var arrCookie=strCookie.split("; ");
		var i = 0;
		for(i=0;i<arrCookie.length;i++)
		{
			if(pwdchanged != '1')
			{
				if(arrCookie[i].indexOf('username') != -1 || arrCookie[i].indexOf('password') != -1)
					continue;
			}
		    var arr=arrCookie[i].split("=");
			document.cookie=arr[0] + "=" + "; expires=" + date.toGMTString();
		}
	}
	
	logInfoExists();
}
function checkForm(){

	with ( document.forms[0] ){
		temp = password.value;
		if ((accessmode == 'lan') && (username.value == 'support')){
			alert ("From the local network side, please use the accounts: admin and user.");
			return 0;			
		}
        //if ((accessmode == 'wan') && ((username.value == 'user') || (username.value == 'admin')))
        if ((accessmode == 'wan') && (username.value == 'user')) // 20091112, Roger Yu fix it
        {
			alert ("From the ISP side, please use the account: admin or support.");
			return 0;			
		}
		if (temp.length < 1){
			alert ("Please input a password");
			return 0;
		}
		else {
			if(cookieEnabled){
				if (loginfo.checked == true){
					setCookie('username', username.value);
					setCookie('password', password.value);
					if(captchaEnbl == 1)
					    setCookie('authcode', authcode.value);
				} else {
					delCookie('username');
					delCookie('password');
					if(captchaEnbl == 1)
					    delCookie('authcode');
				}
			}
			document.forms[0].submit();
		}
	}

}

function stEnter(e){
var keynum;
if(window.event) // IE
  {
  keynum = e.keyCode;
  }
else if(e.which) // Netscape/Firefox/Opera
  {
  keynum = e.which;
  }
  /*else if (e.charCode) 
  {
  keynum = e.charCode;
  }*/

   if (keynum == 13){
     checkForm();
  }
}

function logInfoExists(){
var tmpUser;
var tmpPass;


	with ( document.forms[0] ){
		tmpUser = getCookie('username');
		tmpPass = getCookie('password');
		//alert(tmpUser + ':' + tmpPass);
		username.selectedIndex = 0;

		if ((tmpUser != '')&&(tmpPass != '')){
			/*
			for (i=0; i < username.length; i++){
				if (username[i].value == tmpUser){
					username.selectedIndex = i;
					break;
				}
			}*/
			username.value = tmpUser;
			password.value = tmpPass;
			loginfo.checked = true;
		}
	}
}

function btnRegenerate()
{
	with ( document.forms[0] ){
		var loc = 'auth_regen.cgi';
      	var code = 'location="' + loc + '"';
		eval(code);
	}
}

// -->
</script>

</head>

<!--
<body  onload="javascript:document.frmLogin.password.focus();document.frmLogin.username.value='admin';">
-->
<body onLoad='doIninitialize()'>
<BLOCKQUOTE>
	<form focus="password" name="frmLogin" method="POST" action="login.cgi">
<style>
div.overflow
{
	overflow: auto;
	width: 660px;
}
</style>
<DIV align="center" style="display: hidden" id="tblmain">
<TABLE cellSpacing=0 width="800"><TR><TD>
<TABLE id=header_container width="800"><TR>
<script language="javascript">
document.writeln("<TD align=left width=\"200\">Product: " + ModemVer + "</TD>");
document.writeln("<TD align=right width=\"50\"></TD>");
//document.writeln("<TD align=right width=\"550\">Firmware Version: " + FirmwareVer + " Hardware Version: " + HardwareVer + "</TD>");
document.writeln("<TD align=right width=\"550\">Firmware Version: " + FirmwareVer + "</TD>");
document.writeln("</TR></TABLE>");
</script>

<TABLE cellSpacing=0 width="800"><TR><TD id=masthead_container width="800"><IMG alt="" src="images/img_masthead.gif"></TD></TR></TABLE>
<TABLE cellSpacing=0 summary="" border=0 width="100%" style="background-color:white" height=300>
	<TR>
		<TD align=center >

<DIV id=maincontent style="width:600" align="center">
	<table id=box_header border=0 cellSpacing=0>
		<tr>
			<td class=topheader>
				Login
			</td>										
		</tr>
		<tr>
			<td class=content>
		<p> Log in to the router</p>

		<table class=formarea border="0" cellspacing="0" cellpadding="0" width=100%  align="center">
			<tr>
				<td  class=form_label ><b>User Name&nbsp;:</b></td>
				<td><input type="username" maxlength="16" size="16" name="username" onkeypress="stEnter(event);"></td>
<!--
				<td><select name="username">
					<option value="admin">admin</option> 
					<option value="support">support</option> 
					</select>
			</td>
-->			
			</tr>
			<tr>

				<td  class=form_label ><b>Password&nbsp;&nbsp;:</b></td>
				<td><input type="password" maxlength="16" size="16" name="password" onkeypress="stEnter(event);"> 
				<!--<input type="button" value="Log In" onclick="checkForm();"></td>-->
<script language="javascript">	
			if(captchaEnbl == '1') {

			//document.writeln("<tr>");
			//document.writeln("<td  class=form_label></td>");
			document.writeln("</td></tr><tr><td class=form_label ></td>");
			document.writeln("<td><b>Enter the correct password above, and then type the characters you see in the picture below.</b></td>");
			document.writeln("</tr>			");
			document.writeln("<tr>");
			document.writeln("<td  class=form_label></td><td valign=center><IMG src='images/captcha.bmp'></td>");
			document.writeln("</tr>	");
			document.writeln("<tr>");
			document.writeln("<td  class=form_label><b>Authcode&nbsp;&nbsp;&nbsp;:</b></td>");
			document.writeln("<td><input type=authcode maxlength=16 size=18  id=authcode name=authcode onkeypress='return stEnter(event)'> </td>");
			document.writeln("</tr>");
			
			document.writeln("<tr>");
			document.writeln("<td  class=form_label></td>");
			document.writeln("<td><input type=button value='Log In' onclick='checkForm()'><input type='button' value='Regenerate' onclick='btnRegenerate()'></td>");
			}
			else{
				//document.writeln("<tr>");
				//document.writeln("<td  class=form_label></td>");
				document.writeln("<input type=button value='Log In' onclick='checkForm()'></td>");
			}
</script>				
			</tr>
			<tr>
				<td align=right><input type="checkbox" name="loginfo" id="loginfo"></td>
				<td><label for=loginfo>Remember my login info. on this computer</label></td>
			</tr>

		</table>
			</td>
		</tr>
	</table>

</DIV>
</TD>
</TR></TABLE>
<TABLE id=footer_container cellSpacing=0 border=0><TR><TD id=leftimage>
<!--<IMG height=35 alt="" src="images/img_bottom.gif" width=114>--></TD>
<TD>&nbsp;</TD></TR></TABLE>
</TD></TR></TABLE><DIV id=copyright>Copyright &copy; 2010-2012 D-Link Systems, Inc.</DIV></DIV>
</TR></TD></TABLE>
</DIV>
	</form>
</BLOCKQUOTE>
</body>

</html>
