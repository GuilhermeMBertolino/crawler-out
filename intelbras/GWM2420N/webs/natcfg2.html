<html>
<head>
    <meta http-equiv='Pragma' content='no-cache'>
    <link rel="stylesheet" href='stylemain.css' type='text/css'>
    <link rel="stylesheet" href='colors.css' type='text/css'>

    <script language="javascript" src="util.js"></script>

    <script language="javascript">
<!-- hide
var prtcl = '<%ejGetOther(memInfo, ntwkPrtcl)%>';
var enblIP6 = '<%ejGet(enblv6)%>';
var serviceId= '<%ejGet(serviceId)%>';

function frmLoad() {
var nat = '<%ejGet(enblNat)%>';
var fullcone = '<%ejGet(enblFullcone)%>';
var firewall = '<%ejGet(enblFirewall)%>';
var locstr = window.location.toString();
if(locstr.indexOf("wanL3Edit")==-1)
{
	nat = '1';
	firewall = '1';
}
   var enableIgmp = '<%ejGet(enblIgmp)%>';

   with ( document.forms[0] ) {
      if ( nat == '1' ) {
         enblNat.checked = true;
         hideFullconeNat(0);
      }
      else {
         enblNat.checked = false;
         hideFullconeNat(1);
      }
      if ( fullcone == '1' )
         enblFullcone.checked = true;
      else
         enblFullcone.checked = false;
      if ( firewall == '1' )
         enblFirewall.checked = true;
      else
         enblFirewall.checked = false;
      if ( enableIgmp == '1' )
         enblIgmp.checked = true;
      else
         enblIgmp.checked = false;

      if ( enblIP6 == '1' ) {
         var enableMld = '<%ejGet(enblMld)%>';
         if ( enableMld == '1' )
            enblMld.checked = true;
         else
            enblMld.checked = false;
         hideMldInfo(0);
      }
      else
         hideMldInfo(1);
   }
}

function hideMldInfo(hide) {
   var status = 'block';

   if ( hide == 1 )
      status = 'none';
   if (document.getElementById)  // DOM3 = IE5, NS6
      document.getElementById('MldInfo').style.display = status;
   else {
      if (document.layers == false) // IE4
         document.all.MldInfo.style.display = status;
   }
}

function btnNext() {
   var loc = 'ifcgateway.cgi?';

   if (serviceId == '1')
  	 loc = 'ntwksum2.cgi?';
	
   with ( document.forms[0] ) {
      if ( enblNat.checked == true )
         loc += 'enblNat=1';
      else
         loc += 'enblNat=0';
      if ( enblFullcone.checked == true )
         loc += '&enblFullcone=1';
      else
         loc += '&enblFullcone=0';
      if ( enblFirewall.checked == true )
         loc += '&enblFirewall=1';
      else
         loc += '&enblFirewall=0';
      if ( enblIgmp.checked == true )
         loc += '&enblIgmp=1';
      else
         loc += '&enblIgmp=0';
      if ( enblMld.checked == true )
         loc += '&enblMld=1';
      else
         loc += '&enblMld=0';
   }

   loc += '&sessionKey=<%ejGetOther(sessionKey)%>';
   var code = 'location="' + loc + '"';
   eval(code);
}

function btnBack() {
   var loc = 'wansrvc.cmd';
	
   if (serviceId == '1')
  	 loc = 'wancfg.cmd';
   else {
     if ( prtcl == 'MER'|| prtcl == 'IPoE')
        loc = 'wancfg.html';
     else if ( prtcl == 'IPoA' )
        loc = 'ipoacfg.html';
   }
   var code = 'location="' + loc + '"';
   eval(code);
}

function hideFullconeNat(hide) {
   var status = 'block';
   if ( hide == 1 )
      status = 'none';
   if (document.getElementById)  // DOM3 = IE5, NS6
      document.getElementById('fullconeNatInfo').style.display = status;
   else {
      if (document.layers) { // Netscape 4
         if ( hide == 1 )
            document.forms[0].enblFullcone.value = '';
         else
            document.forms[0].enblFullcone.value = '<%ejGet(enblFullcone)%>';
      } else  // IE 4
         document.all.fullconeNatInfo.style.display = status;
   }
}

function natClick(cb) {
   if ( cb.checked == true )
      hideFullconeNat(0);
   else
      hideFullconeNat(1);
}

// done hiding -->
    </script>

</head>
<body onload='frmLoad()'>

    <script>tbl_head('Network Address Translation Settings');</script>

    <form>
    	<div style="width:90%;text-align:left;">
          Network Address Translation (NAT) allows you to share one Wide Area Network (WAN)
          IP address for multiple computers on your Local Area Network (LAN).
          <br><br>
    	</div>
    <table width='90%' border="0" cellpadding="0" cellspacing="0">
        <tr>
            <td width='30' height="30">
                <input type='checkbox' name='enblNat' onclick='natClick(this)' checked="checked">
            </td>
            <td>
                Enable NAT
            </td>
        </tr>
    </table>
    <div id='fullconeNatInfo' style="width:90%">
        <table border="0" width='100%' cellpadding="0" cellspacing="0">
            <tr>
                <td width='30' height="30">
                    <input type='checkbox' name='enblFullcone' checked="checked">
                </td>
                <td>
                    Enable Fullcone NAT
                </td>
            </tr>
        </table>
    </div>
    <table border="0" cellpadding="0" cellspacing="0" width='90%'>
        <tr>
            <td width='30' height="30">
                <input type='checkbox' name='enblFirewall' checked="checked">
            </td>
            <td>
                Enable Firewall
            </td>
        </tr>
    </table>
    <br />
    <table border="0" cellpadding="0" cellspacing="0" width='90%'>
<!--        <tr>
            <td>
                IGMP Multicast
                <br />
                <br />
            </td>
        </tr>
        -->
        <tr>
            <td width='30' height="30">
                <input type='checkbox' name='enblIgmp'>
            </td>
            <td>
                Enable IGMP Multicast
            </td>
        </tr>
    </table>
    <div id='MldInfo'>
        <table border="0" cellpadding="0" cellspacing="0" width='90%'>
            <tr>
                <td width='30' height="30">
                    <input type='checkbox' name='enblMld'>
                </td>
                <td>
                    Enable MLD Multicast Proxy
                </td>
            </tr>
        </table>
    </div>

    <script>tbl_tail("<input type='button' class='button'  onClick='btnBack()' value='Back'> &nbsp;&nbsp;<input type='button' class='button'  onClick='btnNext()' value='Next'>");</script>

    </form>
</body>
</html>
