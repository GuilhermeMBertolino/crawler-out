<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf8" />
<title>Wireless Basic</title>
<script language="javascript" src="util.js"></script>
<link rel=stylesheet href='stylemain.css' type='text/css'>
<link rel=stylesheet href='colors.css' type='text/css'>

<script language="javascript">
var valueTmp = '';
var m_ssid = '<%ejGetWl(wlSsid_wl0v0)%>';
var m_enbl = '<%ejGetWl(wlEnbl_wl0v0)%>';
var m_hide = '<%ejGetWl(wlHide_wl0v0)%>';
var m_bssid= '<%ejGetWl(wlBssid)%>';
var m_maxAssoc = '<%ejGetWl(wlMaxAssoc_wl0v0)%>';
var m_channel = '<%ejGetWl(wlChannel)%>';
var m_nbwcap= '<%ejGetWl(wlNBwCap)%>'; 
var m_TxPwrPcnt = '<%ejGetWl(wlTxPwrPcnt)%>';
var m_nmode = '<%ejGetWl(wlNmode)%>'; 
var m_gmode = '<%ejGetWl(wlgMode)%>';
function setOldValue(e)
{
	valueTmp = e.value;
}
function checkChange(e)
{
	if(e.value==valueTmp)
		return false;
	else
		return true;
}
function checkDigital(e)
{
	var m = /^[0-9]{0,}$/;
	if(!m.test(e.value))
		return false;
	else
		return true;
}

function checkSsid(e)
{
	var m = /^[^0-9a-zA-Z\-_]{0,}$/;
	if(m.test(e.value))
		return false;
	else
		return true;
}
function init()
{
	with(document.forms[0])
	{
		enablewl.checked = (parseInt(m_enbl)==1?true:false);
		document.getElementById('divwl').style.display=(enablewl.checked?'block':'none');
		if(m_nmode=='auto')
			wlmode.selectedIndex =0;
		else if(m_nmode=='off')
		{
			if(m_gmode=='0')
				wlmode.selectedIndex =3;
			else if(m_gmode=='1')
				wlmode.selectedIndex =1;
			else if(m_gmode=='4')
				wlmode.selectedIndex =2;
		}
		
		ssid.value = m_ssid;
		hidessid.checked = (m_hide==0?false:true);
		bssid.value= m_bssid;
		maxclient.value = m_maxAssoc;
		wlchannel.selectedIndex = m_channel;
		if(parseInt(m_nbwcap)==1) bwwidth[1].checked = true;
		else bwwidth[0].checked = true;
		wlpower.selectedIndex = ((m_TxPwrPcnt/20) -1);
	}
	wlModeChange(1);
	initChannel();
}

function wlModeChange(first)
{
	with(document.forms[0])
	{
		if(wlmode.selectedIndex!=0)
			document.getElementById('divBW').style.display = 'none';
		else
		{
			document.getElementById('divBW').style.display = 'block';
			if(first!=1)
				bwwidth[1].checked = true;
		}
	}
}

function initChannel()
{
	var wlchannelobj = document.forms[0].wlchannel;
	var channelnum = 13;

	wlchannelobj.length = 1;
	wlchannelobj.options[wlchannelobj.length-1].value = "0";
	wlchannelobj.options[wlchannelobj.length-1].text = "Auto";
	for(var i=0;i<channelnum;i++)
	{
		wlchannelobj.length = wlchannelobj.length+1;
		wlchannelobj.options[wlchannelobj.length-1].value = (i+1);
		wlchannelobj.options[wlchannelobj.length-1].text = (i+1);	
	}
	wlchannelobj.selectedIndex = parseInt(m_channel);
}
 
function btnApply()
{
   var loc = 'wlbasic.cmd?';
   with(document.forms[0])
   {
	/*	if(isValidSSID(ssid.value))
		{
			alert("only numbers, letters and underscore are allowed in SSID");
			return false;
		}*/
   		if(ssid.value.length<3)
		{
			alert("you must input at least 3 char as SSID.");return false;
		}
		maxclient.value=maxclient.value.replace(/[^0-9]/g,'');
		if(maxclient.value.length==0)
		{
			maxclient.value = 8;
		}
	   loc += "wlenbl="+(enablewl.checked?'1':'0');
	   loc += "&wlmode="+wlmode.selectedIndex;
	   loc += "&ssid="+ssid.value;
	   loc += "&hidessid="+(hidessid.checked?'1':'0');
	   loc += "&maxclient="+maxclient.value;
	   loc += "&wlchannel="+wlchannel.selectedIndex;
	   if(wlmode.selectedIndex==0)
	   	loc += "&bwwidth="+(bwwidth[0].checked?'0':'1');
	   loc += '&wlpower='+wlpower.selectedIndex;
   }
   loc += '&sessionKey=<%ejGetOther(sessionKey)%>';
   var code = 'location="' + loc + '"';
   eval(code);
}
</script>
<style>
span{
display:inline-block;
}
</style>
</head>

<body onLoad="init()">
<form>
<script>tbl_head('Wireless Basic Setting');</script>
<div id="msg" style='text-align:left;width:90%'>
	<div style="height:25px;"><span style="width:150px;display:-moz-inline-box;">Enable Wireless</span>
		 <span><input type="checkbox" name="enablewl" 
			 onclick="document.getElementById('divwl').style.display=(this.checked?'block':'none');">
		 </span>
	</div>
<div id='divwl'>
	<div style="height:25px;"><span style="width:150px;display:-moz-inline-box;">Wireless Mode</span>
		 <span><select name="wlmode" style="width:150px; font-size:12px" onChange="wlModeChange()">
		 		<option value="0" selected="selected">b/g/n Mixd Mode</option>
		 		<option value="1">b/g Mixd Mode</option>
		 		<option value="2">g Mode</option>
		 		<option value="3">b Mode</option>
		 		</select>
		 </span>
	</div>
	<div style="height:25px;"><span style="width:150px;display:-moz-inline-box;">SSID</span>
		 <span><input type="text" class="text" name="ssid" style="width:150px;" maxlength="32" onKeyDown="setOldValue(this)" > <input type="checkbox" name="hidessid" style=" font-size:12px"> Hide SSID
		 </span>
	</div>
	<div style="height:25px;"><span style="width:150px;display:-moz-inline-box;">BSSID</span>
		 <span><input type="text" class="text" id="bssid" name="bssid" 
			 style="width:150px; background-color:#eeeeee; color:#000000" disabled='disabled'>
		 </span>
	</div>
	<div style="height:25px;"><span style="width:150px;display:-moz-inline-box;">Max Clients</span>
		 <span><input type="text" class="text" name="maxclient" style="width:150px;" maxlength="2" onKeyDown="setOldValue(this)" onKeyUp="if(checkChange(this)&&!checkDigital(this)) value=value.replace(/[^0-9]/g,''); if(parseInt(value)>16) value=16; if(parseInt(value)<=0) value=1;"> (Max:16)
		 </span>
	</div>
	<div style="height:25px;"><span style="width:150px;display:-moz-inline-box;">Channel</span>
		 <span>
		 		<select name="wlchannel" style="width:150px; font-size:12px;">

		 		</select>
		 </span>
	</div>
	<div style="height:25px;" id="divBW"><span style="width:150px;display:-moz-inline-box;">Bandwidth</span>
		 <span><input type="radio" name="bwwidth" checked="checked">20MHz <input 
			 type="radio" name="bwwidth">40MHz 
		 </span>
	</div>
	<div style="height:25px;display:none"><span style="width:150px;display:-moz-inline-box;">·¢Éä¹¦ÂÊ</span>
		 <span><select name="wlpower" style="width:150px; font-size:12px">
		 		<option value="0">20%</option>
		 		<option value="1">40%</option>
		 		<option value="2">60%</option>
		 		<option value="3">80%</option>
		 		<option value="4" selected="selected">100%</option>
		 		</select>
		 </span>
	</div>
</div>
</div>
<script>tbl_tail("<input class='button' type='button' value=' Apply ' onClick='if(!btnApply()); else this.disabled=true;'>");</script>
</form>
</body>
</html>
