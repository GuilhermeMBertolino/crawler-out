
<html>
<head>
<meta HTTP-EQUIV='Pragma' CONTENT='no-cache'>
<link rel=stylesheet href='stylemain.css' type='text/css'>
<link rel=stylesheet href='colors.css' type='text/css'>
<script language='javascript' src='util.js'></script>
<script language='javascript'>
//<!-- hide
/*
var wlmacflt="<option value='0'>Tenda0</option>\
              <option value='1'>wl0_Guest1</option>\
              <option value='2'>wl0_Guest2</option>\
              <option value='3'>wl0_Guest3</option>,\
               11:22:33:44:55:66,NONE";
*/
var wlmacflt="<%ejGetOther(tenda,wlmacflt)%>";
//WlMacFltScript:refresh,sessionKey,wlSsidIdx,enbl,mode;//"0,2069361440,0,0,allow";
var WlMacFltScript="<%ejGetOther(tenda,WlMacFltScript)%>";
var FltScript=WlMacFltScript.split(",");
var wlRefresh = FltScript[0]; 

if ( wlRefresh == '1' ) { 
   var code = 'location="wlmacflt.cmd?action=refresh&sessionKey='+FltScript[1]+'"';
   eval(code);
}

function pageRefresh() {
   with ( document.forms[0] ) {
   var loc = 'wlmacflt.cmd?action=refresh' 
   loc += '&sessionKey='+FltScript[1];
      var code = 'location="' + loc+ submitSelect(wlSsidIdx) + '"';+ "'";
      eval(code);
   }
}
var mac=wlmacflt.split(",");
//alert(mac[0]);
//alert(mac[1]);

function showSSID(){
   if(wlmacflt!=""){     
	   document.write(mac[0]);
	   
   }
   

}
function showMAC(){

	if(wlmacflt != ""){  
	 	for(var i=1;;i++){
			//alert(mac[i].length);
	       if(mac[i]=='NONE')break;
		   //	alert(mac[i]);
		    var m="<tr>";
			m+= "<td align='center'>"+mac[i]+"</td>";
		    m+="<td align='center'><input type='checkbox' name='rml' value='"+mac[i]+"'</td>";
		    m+="</tr>"    
			document.write(m);
            //alert(m); 
		   }
		}
	 
}
function frmLoad() {
   with ( document.forms[0] ) {
      setSelect(wlSsidIdx, FltScript[2]);
      if ( 'disabled' == FltScript[4])
         wlFltMacMode[0].checked = true;
      else if ( FltScript[4] == 'allow' )
         wlFltMacMode[1].checked = true;
      else
         wlFltMacMode[2].checked = true;
   }
}

function addClick() {
   if ( FltScript[3] == '0' ) {
      alert('Cannot add MAC filter address since wireless is currently disabled.');
      return;
   }

   var loc = 'wlmacflt.html';

   var code = 'location="' + loc + '"';
   eval(code);
}

function removeClick(rml) {
   if ( FltScript[3] == '0' ) {
      alert('Cannot remove MAC filter address since wireless is currently disabled.');
      return;
   }

   var lst = '';
   if (rml.length > 0)
      for (i = 0; i < rml.length; i++) {
         if ( rml[i].checked == true )
            lst += rml[i].value + ', ';
      }
   else if ( rml.checked == true )
      lst = rml.value;
   var loc = 'wlmacflt.cmd?action=remove&rmLst=' + lst;

   loc += '&sessionKey='+FltScript[1];
   var code = 'location="' + loc + '"';
   eval(code);
}

function modeClick() {
   var loc = 'wlmacflt.cmd?action=save';

   if ( FltScript[3] == '0' ) {
      alert('Cannot change MAC filter mode since wireless is currently disabled.');
      return;
   }

   with ( document.forms[0] ) {
      if ( wlFltMacMode[0].checked == true )
         loc += '&wlFltMacMode=disabled';
      else if ( wlFltMacMode[1].checked == true )
         loc += '&wlFltMacMode=allow';
      else
         loc += '&wlFltMacMode=deny';
   }

   loc += '&sessionKey='+FltScript[1];
   var code = 'location="' + loc + '"';
   eval(code);
}

// done hiding -->
</script>
</head>
<body onLoad='frmLoad()'>
<form>
<script>tbl_head('Wireless -- MAC Filter');</script>
<div style="text-align:left; width:80%">
<table border='0' cellpadding='4' cellspacing='0' width='100%'>
   <tr>
   <td width="150"> SSID: </td>
   <td>
   <select name='wlSsidIdx' onChange='pageRefresh()' disabled="disabled"> 
   <script>
   showSSID();
   </script>
   </select></td>
   </tr>
</table><br><br>
<table border='0' cellpadding='4' cellspacing='0' width='100%'>
   <tr>
      <td width="145">MAC Restrict Mode:</td>
      <td width="100"><input type='radio' name='wlFltMacMode'>Disabled</td>
      <td width="100"><input type='radio' name='wlFltMacMode'>Allow</td>
      <td><input type='radio' name='wlFltMacMode'>Deny</td>
   </tr>
</table><br><br>
<table border='1' cellpadding='4' cellspacing='0' width='100%'>
   <tr>
      <td class='hd' align='center'>MAC Address</td>
      <td class='hd' align='center'>Remove</td>
   </tr>
   <script>
   showMAC();
   </script>
</table>
</div>
<script>tbl_tail("<input type='button' class='button'  onClick='modeClick()' value='Save'>&nbsp;&nbsp;<input type='button' class='button' onClick='addClick()' value='Add'>&nbsp;&nbsp;<input type='button' class='button' onClick='removeClick(this.form.rml)' value='Remove'>");</script>
</form>
</body>
</html>
