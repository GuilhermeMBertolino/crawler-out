<html>
<head>
    <meta http-equiv='Pragma' content='no-cache'>
    <link rel="stylesheet" href='stylemain.css' type='text/css'>
    <link rel="stylesheet" href='colors.css' type='text/css'>

    <script language="javascript" src="util.js"></script>

    <script language="javascript">
<!-- hide

function ddnsChange() {
  with ( document.forms[0] ) {
    var ddns = ddnsMode[ddnsMode.selectedIndex].value;

    switch( ddns ) {
    case "dyndns":
      hideDDNSInfo( 0 );
      hideTZOInfo( 1 );
      hideDynDNSInfo( 0 );
      hide3322Info( 1);
      break;
    case "tzo":
      hideDDNSInfo( 0 );
      hideTZOInfo( 0 );
      hideDynDNSInfo( 1 );
      hide3322Info( 1);
      break;
    case "3322":
      hideDDNSInfo( 0 );
      hideTZOInfo( 1);
      hideDynDNSInfo( 1);
      hide3322Info( 0 );
      break;
    }
  }
}

function hideDDNSInfo(hide) {
  var status = 'block';
  if ( hide == 1 )
    status = 'none';
  if (document.getElementById) // DOM3 = IE5, NS6
    document.getElementById('ddnsInfo').style.display = status;
  else {
    if (document.layers) { // NS4
      with ( document.forms[0] ) {
        if ( hide == 1 ) {
          ddnsHostname.value = '';
        } else {
          ddnsHostname.value = 'Hostname';
        }
      }
    } else {
      document.all.ddnsInfo.style.display = status;
    }
  }
}

function hideDynDNSInfo(hide) {
  var status = 'block';
  if ( hide == 1 )
    status = 'none';
  if (document.getElementById) // DOM3 = IE5, NS6
    document.getElementById('dyndnsInfo').style.display = status;
  else {
    if (document.layers) { // NS4
      with ( document.forms[0] ) {
        if ( hide == 1 ) {
          dyndnsHostname.value = '';
        } else {
          dyndnsHostname.value = 'Hostname';
        }
      }
    } else {
      document.all.ddnsInfo.style.display = status;
    }
  }
}

function hideTZOInfo(hide) {
  var status = 'block';
  if ( hide == 1 )
    status = 'none';
  if (document.getElementById) // DOM3 = IE5, NS6
    document.getElementById('tzoInfo').style.display = status;
  else {
    if (document.layers) { // NS4
      with ( document.forms[0] ) {
        if ( hide == 1 ) {
          tzoEmail.value = '';
          tzoKey.value = '';
        } else {
          tzoEmail.value = 'Name';
          tzoKey.value = 'Password';
        }
      }
    } else {
      document.all.ddnsInfo.style.display = status;
    }
  }
}

function hide3322Info(hide) {
  var status = 'block';
  if ( hide == 1 )
    status = 'none';
  if (document.getElementById) // DOM3 = IE5, NS6
    document.getElementById('Info3322').style.display = status;
  else {
    if (document.layers) { // NS4
      with ( document.forms[0] ) {
        if ( hide == 1 ) {
          Username3322.value = '';
	   Password3322.value = '';
        } else {
          Username3322.value = 'Name'
          Password3322.value = 'Password';
        }
      }
    } else {
      document.all.ddnsInfo.style.display = status;
    }
  }
}
function frmLoad() {
  with (document.forms[0]) {
    ddnsMode.selectedIndex = 0;
  }

  ddnsChange();
}

function btnApply(place) {
  var loc = place + '?action=add&service=';
  var update_username='';
  if ( place == "ddnsmngr.cmd" ) {
    with ( document.forms[0] ) {
      switch( ddnsMode[ddnsMode.selectedIndex].value ) {
      case '3322':
         loc += '2';
         break;
      case 'dyndns':
        loc += '1';
        break;
      case 'tzo':
        loc += '0';
        break;
      }

      switch( ddnsMode[ddnsMode.selectedIndex].value ) {
      case "dyndns":
        update_username = dyndnsUsername.value;
        update_password = dyndnsPassword.value;
        break;
      case "tzo":
        update_username = tzoEmail.value;
        update_password = tzoKey.value;
        break;
      case "3322":
        update_username = Username3322.value;
        update_password = Password3322.value;
      }

      if ( update_username.length == 0 ) {
        if ( ddnsMode[ddnsMode.selectedIndex].value == 'dyndns' ||ddnsMode[ddnsMode.selectedIndex].value == '3322'){
          alert('Empty username.' );
          return;
        }
        else if(ddnsMode[ddnsMode.selectedIndex].value =='tzo'){
         alert('Invalid Email address.' );
         return;
        }
        
      }
      loc += '&username=' + update_username;

      if ( update_password.length == 0 ) {
        if (ddnsMode[ddnsMode.selectedIndex].value == 'dyndns' || ddnsMode[ddnsMode.selectedIndex].value == '3322' ){
          alert('Empty password.' );
        return;
        }
        else if (ddnsMode[ddnsMode.selectedIndex].value == 'tzo' ){
           alert('Invalid key.' );
           return;
       }
      }
      loc += '&password=' + update_password;

      if ( ddnsHostname.value.length == 0 ) {
        alert('Empty hostname.');
        return;
      }
      loc += '&hostname=' + ddnsHostname.value;

      loc += '&iface=' + ddnsInterface[ddnsInterface.selectedIndex].value;
    }
    loc += '&sessionKey=<%ejGetOther(sessionKey)%>';
    var code = 'location="' + loc + '"';
    eval(code);
  }
}

// done hiding -->
    </script>

</head>
<body onload='frmLoad()'>

    <script>tbl_head('Add Dynamic DNS');</script>

    <form>
<div style="width:90%;text-align:left">
                This page allows you to add a Dynamic DNS address from DynDNS.org.
                <br /><br />
</div>
    <table border="0" cellpadding="0" cellspacing="0" width="90%">
        <tr>
            <td width='150'>
                <p align="justify">
                    D-DNS provider</p>
            </td>
            <td>
                <select name='ddnsMode' size="1" onchange='ddnsChange()' style="width:150px;">
                    <option value="dyndns">DynDNS.org</option>
<!-- By Jairo at intelbras

                    <option value="3322">3322</option>
                    <option value="tzo">TZO</option>
-->
                </select>
            </td>
        </tr>
    </table>
    <br>
    <div id="ddnsInfo" style="width:90%">
        <table border="0" cellpadding="0" cellspacing="0" width="100%">
            <tr>
                <td width='150'>
                    Hostname
                </td>
                <td>
                    <input type="text" name="ddnsHostname" style="width:150px;" maxlen='64'>
                </td>
            </tr>
            <tr>
                <td>
                    Interface
                </td>
                <td>
                    <select name='ddnsInterface' style="width:150px;">

                        <script language="javascript">
<!-- hide
{
   var i = 0;
   var interfaceInfo = '<%ejGetOther(wanInterfaceInfo, route)%>';
   var interfaces = interfaceInfo.split('|');
 
   for ( i = 0; i < interfaces.length; i++ ) {
      var names = interfaces[i].split('/');
      document.write("  <option value='" + names[1] + "'>");
      document.writeln(interfaces[i]);
   }
}
// done hiding -->
                        </script>

                    </select>
                </td>
            </tr>
        </table>
    <br />
    </div>
    <div id="dyndnsInfo" style="width:90%">
        <table border="0" cellpadding="0" cellspacing="0" width="100%">
            <tr>
                <td colspan="2">
                    DynDNS Settings
                </td>
            </tr>
            <tr>
                <td width='150'>
                    Username
                </td>
                <td>
                    <input type='text' name='dyndnsUsername' size='20' 
                    maxlength='64' style="width:150px;">
                </td>
            </tr>
            <tr>
                <td>
                    Password
                </td>
                <td>
                    <input type="password" name="dyndnsPassword" style="width:150px;">
                </td>
            </tr>
        </table>
    <br />
    </div>
    <div id="tzoInfo" style="width:90%">
        <table border="0" cellpadding="0" cellspacing="0" width="100%">
            <tr>
                <td colspan="2">
                    TZO Settings
                </td>
            </tr>
            <tr>
                <td width='150'>
                    Email
                </td>
                <td>
                    <input type="text" name="tzoEmail" style="width:150px;" maxlen='64'>
                </td>
            </tr>
            <tr>
                <td>
                    Key
                </td>
                <td>
                    <input type="password" name="tzoKey" style="width:150px;" maxlen='64'>
                </td>
            </tr>
        </table><br>
    </div>
    <div id="Info3322" style="width:90%">
        <table border="0" cellpadding="0" cellspacing="0" width="100%">
            <tr>
                <td colspan="2">
                    3322 Settings
                </td>
            </tr>
            <tr>
                <td width='150'>
                    Username
                </td>
                <td>
                    <input type="text" name="Username3322" style="width:150px;">
                </td>
            </tr>
            <tr>
                <td>
                    Password
                </td>
                <td>
                    <input type="password" name="Password3322" style="width:150px;">
                </td>
            </tr>
        </table>
    </div>

    <script>tbl_tail("<input type='button' class='button'  value='Apply/Save' onClick='btnApply(\"ddnsmngr.cmd\")'>");</script>

    </form>
</body>
</html>
