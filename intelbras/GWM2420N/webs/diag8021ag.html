<html>
<head>
    <meta http-equiv='Pragma' content='no-cache'>
    <link rel="stylesheet" href='stylemain.css' type='text/css'>
    <link rel="stylesheet" href='colors.css' type='text/css'>

    <script language="javascript" src="util.js"></script>

    <script language="javascript">
<!-- hide

function btnApply(testname) {
   var loc = 'diag8021ag.cgi?test8021ag=' + testname;

   with ( document.forms[0] ) {

      idx = mdLevel.selectedIndex;
      val = mdLevel.options[idx].value;
      loc += '&mdLevel8021ag=' + val;

      if( testname != 'mdl' ) {
         if (isValidMacAddress(destMac.value) == false ) {
            alert('MAC address "' + destMac.value + '" is invalid. Eg. 11:22:33:AA:BB:CC');
            return;
         }
         loc += '&macAddr8021ag=' + destMac.value;

         vlanid = parseInt(vlanId.value);
         if ( vlanid < 0 || vlanid > 4095 ) {
            alert('VLAN ID "' + vlanid + '" is out of range [0-4095].');
            return;
         }
         loc += '&vlanId8021ag=' + vlanid;
      }
   }

   loc += '&sessionKey=<%ejGetOther(sessionKey)%>';
   var code = 'location="' + loc + '"';
   eval(code);
}
      
function frmLoad() {
   var mdlvl = <%ejGet(mdLevel8021ag)%>;
   setSelect(document.forms[0].mdLevel, mdlvl);
}

// done hiding -->
   </script>

</head>
<body onload='frmLoad()'>

    <script>tbl_head('802.1ag Connectivity Fault Management');</script>

    <form>
		<div style="width:90%">
    <p align="left">
	
        This diagnostic is only used for VDSL PTM mode.</p>
    <br>
  </div>
	<div align="left" style="width:90%">
    <table border="0" cellpadding="0" cellspacing="0">
        <tr>
            <td width="200">
                Maintenance Domain (MD) Level:
            </td>
            <td>
                <select size="1" name="mdLevel" style="width:50">
                    <option value="0">0
                        <option value="1">1
                            <option value="2" selected>2
                                <option value="3">3
                                    <option value="4">4
                                        <option value="5">5
                                            <option value="6">6
                                                <option value="7">7 </option>
                </select>
            </td>
        </tr>
        <tr>
            <td width="200">
                Destination MAC Address:
            </td>
            <td>
                <input type='text' name="destMac" value="<%ejGet(macAddr8021ag)%>" style="width:150">
            </td>
        </tr>
        <tr>
            <td width="200">
                802.1Q VLAN ID: [0-4095]
            </td>
            <td>
                <input type="text" size="4" name="vlanId" value="<%ejGet(vlanId8021ag)%>" style="width:150">
            </td>
        </tr>
    </table>
    <br>
    <table border="1" cellspacing="0" cellpadding="3" width="100%">
        <tbody>
            <tr>
                <td class='hd' width="180">
                    VDSL Traffic Type:
                </td>
                <td>
                    <%ejGetOther(trafficType, 0)%>&nbsp;
                </td>
            </tr>
            <tr>
        </tbody>
    </table>
    <p>
        <b>Test the connection to another Maintenance End Point (MEP)</b></p>
    <table border="1" cellspacing="0" cellpadding="3" width="100%">
        <tbody>
            <tr>
                <td class='hd' width="180">
                    Loopback Message (LBM):
                </td>
                <td>
                    <b>
                        <%ejGetOther(diag8021ag, lbresult)%></b>&nbsp;
                </td>
            </tr>
            <tr>
        </tbody>
    </table>
    <p>
        <b>Find Maintenance End Points (MEPs)</b></p>
    <table border="1" cellspacing="0" cellpadding="3">
        <tbody>
            <tr>
                <td class='hd' width="180">
                    Linktrace Message (LTM):
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr1)%>&nbsp;
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr2)%>&nbsp;
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr3)%>&nbsp;
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr4)%>&nbsp;
                </td>
            </tr>
            <tr>
                <td class='hd' width="180">
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr5)%>&nbsp;
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr6)%>&nbsp;
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr7)%>&nbsp;
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr8)%>&nbsp;
                </td>
            </tr>
            <tr>
                <td class='hd' width="180">
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr9)%>&nbsp;
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr10)%>&nbsp;
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr11)%>&nbsp;
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr12)%>&nbsp;
                </td>
            </tr>
            <tr>
                <td class='hd' width="180">
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr13)%>&nbsp;
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr14)%>&nbsp;
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr15)%>&nbsp;
                </td>
                <td width="100">
                    <%ejGetOther(diag8021ag, ltaddr16)%>&nbsp;
                </td>
            </tr>
        </tbody>
    </table>

    <script>tbl_tail("<input type='button' class='button'  name='mdl' onClick='btnApply(this.name)' value='Set MD Level'>&nbsp;&nbsp;<input type='button' class='button'  name='lbm' onClick='btnApply(this.name)' value='Send Loopback'>&nbsp;&nbsp;<input type='button' class='button'  name='ltm' onClick='btnApply(this.name)' value='Send Linktrace'>");</script>
   </div>
    </form>
</body>
</html>
