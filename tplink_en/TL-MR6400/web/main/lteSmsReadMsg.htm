<script language="javascript">function reformatAndShowMsgCont(e){for(var t="",a=0;a<e.length;a++)"\n"==e.charAt(a)?t+="<br/>":"\r"==e.charAt(a)&&a<e.length-1&&"\n"==e.charAt(a+1)?(t+="<br/>",a++):t+=$.htmlEncode(e[a]);$("#msgContent").append(t)}function init(){if(0==indexGlobal&&1==pageNumGlobal&&($("#msgLast").removeClass("last-icon-blue"),$("#msgLast").removeClass("table-arrow-icon"),$("#msgLast").addClass("last-icon-grey"),$("#msgLast").addClass("table-arrow-icon"),$("#t_labelLast").removeClass("table-icon-text-blue-lte"),$("#t_labelLast").addClass("table-icon-text-grey-lte")),amountPerPageGlobal*(pageNumGlobal-1)+indexGlobal+1>=totalNum&&($("#msgNext").removeClass("next-icon-blue"),$("#msgNext").removeClass("table-arrow-icon"),$("#msgNext").addClass("next-icon-grey"),$("#msgNext").addClass("table-arrow-icon"),$("#msgNext").css("background-position","-29px -186px"),$("#t_labelNext").removeClass("table-icon-text-blue-lte"),$("#t_labelNext").addClass("table-icon-text-grey-lte")),0==optPageGlobal){if($("#t_et").text($.tpLang.lteSmsInbox_nstr.t_et),smsBoxObj=$.act(ACT_GET,LTE_SMS_RECVMSGBOX,null,null,["totalNumber","amountPerPage"]),$.exe())return!1;if(totalPagesGlobal=Math.ceil(smsBoxObj.totalNumber/amountPerPageGlobal),$.act(ACT_SET,LTE_SMS_RECVMSGENTRY,smsBoxPageList[indexGlobal].__stack,null,["unread=0"]),$.exe())return!1;$("#phoneNumber").text(smsBoxPageList[indexGlobal].from),$("#recvTime").text(smsBoxPageList[indexGlobal].receivedTime),reformatAndShowMsgCont(smsBoxPageList[indexGlobal].content)}else if(1==optPageGlobal){if($("#t_et").text($.tpLang.lteSmsOutbox_nstr.t_et),$("#reply").parents("div").first().remove(),smsBoxObj=$.act(ACT_GET,LTE_SMS_SENDMSGBOX,null,null,["totalNumber","amountPerPage"]),$.exe())return!1;totalPagesGlobal=Math.ceil(smsBoxObj.totalNumber/amountPerPageGlobal),$("#phoneNumber").text(smsBoxPageList[indexGlobal].to),$("#recvTime").text(smsBoxPageList[indexGlobal].sendTime),reformatAndShowMsgCont(smsBoxPageList[indexGlobal].content)}else if(6==optPageGlobal){if($("#t_et").text($.tpLang.lteSmsInbox_nstr.t_et),smsBoxObj=$.act(ACT_GET,LTE_SMS_UNREADMSGBOX,null,null,["totalNumber"]),$.exe())return!1;if(totalPagesGlobal=Math.ceil(smsBoxObj.totalNumber/amountPerPageGlobal),$.act(ACT_SET,LTE_SMS_UNREADMSGENTRY,smsBoxPageList[indexGlobal].__stack,null,["unread=0"]),$.exe())return!1;$("#phoneNumber").text(smsBoxPageList[indexGlobal].from),$("#recvTime").text(smsBoxPageList[indexGlobal].receivedTime),reformatAndShowMsgCont(smsBoxPageList[indexGlobal].content)}}var optPageGlobal=$.mainParam[0],pageNumGlobal=$.mainParam[1],indexGlobal=$.mainParam[2],smsBoxPageList=$.mainParam[3],totalNum=$.mainParam[4],paramForEditMsgPage,param,originalLastBtnState=0,originalNextBtnState=0,smsBoxObj,amountPerPageGlobal=8,totalPagesGlobal=1</script>

<h3 id="t_et">Read Message</h3>
<div class="content-container">
    <form class="pure-form pure-form-aligned">
        <div class="table-op-lte">
            <div class="table-btn">
                <div class="inline" style="padding-right:20px" id="divLastBtn">
                    <span class="last-icon-blue table-arrow-icon" id="msgLast"></span>
                    <label class="table-icon-text-blue-lte" id="t_labelLast">Last</label>
                </div>
                <div class="inline" id="divNextBtn">
                    <span class="next-icon-blue table-arrow-icon" id="msgNext"></span>
                    <label class="table-icon-text-blue-lte" id="t_labelNext">Next</label>
                </div>
            </div>
        </div>

        <div class="pure-control-group">
            <div class="read-msg-div-wrap">
                <div class="read-msg-left-top-wrap inline" style="text-align:left">
                    <label class="label-title s" id="t_from" style="width:50px">From:</label>
                    <label class="label-title m" id="phoneNumber" style="font-weight:700"></label>
                </div>
                <div class="read-msg-left-top-wrap inline" style="text-align:right">
                    <label class="label-title l" id="recvTime" style="text-align:right"></label>
                </div>
                <div class="read-msg-content-wrap">
                    <div>
                        <p class="cfg-line" id="msgContent" style="word-break:break-all"></p>
                    </div>
                </div>
            </div>
        </div>

        <div style="text-align:right" class="part-separate">
            <div class="inline">
                <button type="submit" class="green T_back" id="back">Back</button>
            </div>
            <div class="inline">
                <button type="submit" class="green T_reply" id="reply">Reply</button>
            </div>
            <div class="inline">
                <button type="submit" class="green T_forward" id="forward">Forward</button>
            </div>
        </div>
    </form>
</div>

<script language="javascript">var showContent="";$("#divLastBtn").click(function(){if(!(indexGlobal<0||indexGlobal>=amountPerPageGlobal))if(0==indexGlobal){if(indexGlobal=amountPerPageGlobal-1,pageNumGlobal--,pageNumGlobal<1)return indexGlobal=0,pageNumGlobal++,$("#msgLast").removeClass("last-icon-blue"),$("#msgLast").removeClass("table-arrow-icon"),$("#msgLast").addClass("last-icon-grey"),$("#msgLast").addClass("table-arrow-icon"),$("#t_labelLast").removeClass("table-icon-text-blue-lte"),$("#t_labelLast").addClass("table-icon-text-grey-lte"),void(originalLastBtnState=0);0==optPageGlobal?($.act(ACT_SET,LTE_SMS_RECVMSGBOX,null,null,["PageNumber="+pageNumGlobal]),smsBoxPageList=$.act(ACT_GL,LTE_SMS_RECVMSGENTRY,null,null,["index","from","content","receivedTime","unread"])):1==optPageGlobal?($.act(ACT_SET,LTE_SMS_SENDMSGBOX,null,null,["PageNumber="+pageNumGlobal]),smsBoxPageList=$.act(ACT_GL,LTE_SMS_SENDMSGENTRY,null,null,["index","to","content","sendTime"])):6==optPageGlobal&&($.act(ACT_SET,LTE_SMS_UNREADMSGBOX,null,null,["PageNumber="+pageNumGlobal]),smsBoxPageList=$.act(ACT_GL,LTE_SMS_UNREADMSGENTRY,null,null,["index","from","content","receivedTime","unread"])),$.exe()||($.each(smsBoxPageList,function(){showContent=doEscapeChar(this.content),this.content=showContent}),param[0]=optPageGlobal,param[1]=pageNumGlobal,param[2]=indexGlobal,param[3]=smsBoxPageList,$.loadMain("lteSmsReadMsg.htm",param))}else indexGlobal--,$.each(smsBoxPageList,function(){showContent=doEscapeChar(this.content),this.content=showContent}),param[0]=optPageGlobal,param[1]=pageNumGlobal,param[2]=indexGlobal,param[3]=smsBoxPageList,$.loadMain("lteSmsReadMsg.htm",param)}),$("#divNextBtn").click(function(){if(!(indexGlobal<0||indexGlobal>=amountPerPageGlobal))if(indexGlobal==amountPerPageGlobal-1){if(indexGlobal=0,pageNumGlobal++,pageNumGlobal>totalPagesGlobal)return indexGlobal=amountPerPageGlobal-1,pageNumGlobal--,$("#msgNext").removeClass("next-icon-blue"),$("#msgNext").removeClass("table-arrow-icon"),$("#msgNext").addClass("next-icon-grey"),$("#msgNext").addClass("table-arrow-icon"),$("#msgNext").css("background-position","-29px -186px"),$("#t_labelNext").removeClass("table-icon-text-blue-lte"),$("#t_labelNext").addClass("table-icon-text-grey-lte"),void(originalNextBtnState=0);0==optPageGlobal?($.act(ACT_SET,LTE_SMS_RECVMSGBOX,null,null,["PageNumber="+pageNumGlobal]),smsBoxPageList=$.act(ACT_GL,LTE_SMS_RECVMSGENTRY,null,null,["index","from","content","receivedTime","unread"])):1==optPageGlobal?($.act(ACT_SET,LTE_SMS_SENDMSGBOX,null,null,["PageNumber="+pageNumGlobal]),smsBoxPageList=$.act(ACT_GL,LTE_SMS_SENDMSGENTRY,null,null,["index","to","content","sendTime"])):6==optPageGlobal&&($.act(ACT_SET,LTE_SMS_UNREADMSGBOX,null,null,["PageNumber="+pageNumGlobal]),smsBoxPageList=$.act(ACT_GL,LTE_SMS_UNREADMSGENTRY,null,null,["index","from","content","receivedTime","unread"])),$.exe()||($.each(smsBoxPageList,function(){showContent=doEscapeChar(this.content),this.content=showContent}),param[0]=optPageGlobal,param[1]=pageNumGlobal,param[2]=indexGlobal,param[3]=smsBoxPageList,$.loadMain("lteSmsReadMsg.htm",param))}else{var a=smsBoxObj.totalNumber-(totalPagesGlobal-1)*amountPerPageGlobal;if(indexGlobal==a-1&&pageNumGlobal==totalPagesGlobal)return $("#msgNext").removeClass("next-icon-blue"),$("#msgNext").removeClass("table-arrow-icon"),$("#msgNext").addClass("next-icon-grey"),$("#msgNext").addClass("table-arrow-icon"),$("#msgNext").css("background-position","-29px -186px"),$("#t_labelNext").removeClass("table-icon-text-blue-lte"),$("#t_labelNext").addClass("table-icon-text-grey-lte"),void(originalNextBtnState=0);indexGlobal++,$.each(smsBoxPageList,function(){showContent=doEscapeChar(this.content),this.content=showContent}),param[0]=optPageGlobal,param[1]=pageNumGlobal,param[2]=indexGlobal,param[3]=smsBoxPageList,$.loadMain("lteSmsReadMsg.htm",param)}}),$("#back").click(function(){0==optPageGlobal&&$.loadMain("lteSmsInbox.htm"),1==optPageGlobal&&$.loadMain("lteSmsOutbox.htm"),6==optPageGlobal&&$.loadMain("networkMap.htm","SMS")}),$("#reply").click(function(){param[0]=6==optPageGlobal?0:optPageGlobal,param[1]=0,param[2]=pageNumGlobal,param[3]=indexGlobal,param[4]=smsBoxPageList,$.loadMain("lteSmsNewMsg.htm",param)}),$("#forward").click(function(){param[0]=6==optPageGlobal?0:optPageGlobal,param[1]=1,param[2]=pageNumGlobal,param[3]=indexGlobal,param[4]=smsBoxPageList,$.loadMain("lteSmsNewMsg.htm",param)}),$.tpInit(init)</script>