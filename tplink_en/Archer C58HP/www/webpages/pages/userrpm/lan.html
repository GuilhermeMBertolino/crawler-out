<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Internet</title>
<style type="text/css">
	div.container.widget-container.text-container.offset{
		position: absolute;
		top:200px;
		left:540px;
	}
</style>
</head>
<body>
<div class="func-container">
	<div id="lan_panel">
		 <div id="lan-ipv4">
		 	<form id="lan-ipv4-setting">
		    	<input type="text"  id="ipv4_lan_mac_address" name="macaddr" value="" />
		    	<input type="text"  id="ipv4_lan_ip_address" name="ipaddr" value="" />
		    	<input id="ipv4_lan_mask_address" name="mask_type" value="" />
		    	<input id="custom" name="custom_value" value="" />
		    	<button id="lan_submit" type="button"></button>
		    </form>
		 </div>
	</div>
	<div id="lan_help"></div>
	<div id="lan_pro_msg" class="hidden">
		<div class="reboot-loading-msg">
			<p id="reboot_tips"></p>
			<input id="lan_pro" />
		</div>
	</div>
</div>
<script type="text/javascript">try{$}catch(e){location.href="/"}$(document).ready(function(j){$("div.func-container").page({title:$.su.CHAR.LAN.TITLE,help:""});var d=0;var p=0;var f=0;var c=0;var b=0;var i=0;var k=0;var h=0;var a=0;var g=new $.su.Proxy({url:$.su.url("/admin/network?form=status_ipv4")});g.read({},function(q){d=q.lan_ipv4_ipaddr;p=q.lan_ipv4_netmask;f=q.wan_ipv4_ipaddr;c=q.wan_ipv4_netmask;h=q.wan_ipv4_pridns;a=q.wan_ipv4_snddns;k=q.wan_ipv4_conntype;q.wan_ipv4_snd_ipaddr?b=q.wan_ipv4_snd_ipaddr:1;q.wan_ipv4_snd_netmask?i=q.wan_ipv4_snd_netmask:1});$("div#lan_panel").panel({title:$.su.CHAR.LAN.TITLE,collapsible:false});$("input#ipv4_lan_mac_address").textbox({fieldLabel:$.su.CHAR.LAN.MAC_ADDRESS,readOnly:true});$("input#ipv4_lan_ip_address").textbox({fieldLabel:$.su.CHAR.LAN.IP_ADDRESS,allowBlank:false,textFormat:$.su.format.ip,vtype:"ip"});$("input#ipv4_lan_mask_address").combobox({fieldLabel:$.su.CHAR.LAN.SUBNET_MASK,cls:"inline",items:[{name:"255.255.255.0",value:"255.255.255.0"},{name:"255.255.0.0",value:"255.255.0.0"},{name:"255.0.0.0",value:"255.0.0.0"},{name:$.su.CHAR.LAN.CUSTOM,value:"custom"}]}).on("ev_change",function(s,q,r){switch(r[0]){case"custom":$("input#custom").textbox("getContainer").css({display:"inline-block"});$("input#custom").textbox("enable");break;default:$("input#custom").textbox("hide");$("input#custom").textbox("disable")}});$("input#custom").textbox({fieldLabel:null,cls:"inline-block hidden",allowBlank:false,vtype:"netmask"});$("p#reboot_tips").html($.su.CHAR.LAN.REBOOT_TIP);var o=$("div#lan_pro_msg").msg({type:"window",global:true,closeBtn:false,cls:"warning reboot-confirm-size"});var n=$("input#lan_pro").progressbar({height:6,width:326});var l=new $.su.Proxy({timeout:20000,url:$.su.url("/admin/network?form=lan_ipv4")});$("form#lan-ipv4-setting").form({proxy:l,fields:[{name:"macaddr",mapping:"macaddr"},{name:"ipaddr",mapping:"ipaddr"},{name:"mask_type",mapping:"mask_type"},{name:"custom_value",mapping:"custom_value"}],submitBtn:"#lan_submit",validator:function(){var q=$("input#ipv4_lan_ip_address").textbox("getValue");var r=$("input#ipv4_lan_mask_address").combobox("getValue")[0]=="custom"?$("input#custom").textbox("getValue"):$("input#ipv4_lan_mask_address").combobox("getValue")[0];if(!$.su.func.isNetIpLegal(q,r)){$("form#lan-ipv4-setting").form("setError",$.su.CHAR.ERROR["00000059"]);$("input#ipv4_lan_ip_address").textbox("setError");$("input#ipv4_lan_mask_address").combobox("setError");return false}if($.su.func.isNetIp(q,r)||$.su.func.isBroadCastIp(q,r)){$("form#lan-ipv4-setting").form("setError",$.su.CHAR.ERROR["00000059"]);$("input#ipv4_lan_ip_address").textbox("setError");return false}if($.su.func.isSameNet(q,f,c)||$.su.func.isSameNet(f,q,r)){$("form#lan-ipv4-setting").form("setError",$.su.CHAR.ERROR["00000060"]);$("input#ipv4_lan_ip_address").textbox("setError");return false}if((k=="l2tp"||k=="pptp"||k=="pppoe")&&b!=0&&i!=0&&($.su.func.isSameNet(q,b,i)||$.su.func.isSameNet(b,q,r))){$("form#lan-ipv4-setting").form("setError",$.su.CHAR.ERROR["00000060"]);$("input#ipv4_lan_ip_address").textbox("setError");return false}if($.su.func.isSameNet(h,q,r)){$("form#lan-ipv4-setting").form("setError",$.su.CHAR.ERROR["00000217"]);$("input#ipv4_lan_ip_address").textbox("setError");return false}if($.su.func.isSameNet(a,q,r)){$("form#lan-ipv4-setting").form("setError",$.su.CHAR.ERROR["00000217"]);$("input#ipv4_lan_ip_address").textbox("setError");return false}return true}}).on("ev_loadData",function(r,q){if(q.lock==1){$("input#ipv4_lan_ip_address").textbox("disable");$("input#ipv4_lan_mask_address").combobox("disable")}});$("button#lan_submit").button({text:$.su.CHAR.LAN.SAVE,cls:"submit",handler:function(){$("form#lan-ipv4-setting").form("submit",{},function(r){function q(v){var t=top.location.href;var u=t.indexOf("//");if(-1!=t.indexOf("tplink")){top.location.href=top.location.href}else{top.location.href=t.slice(0,u+2)+v}}if(r.new_ipaddr){o.msg("show");n.progressbar("reset");n.progressbar("animate",0,1,32000);var s=setTimeout(function(){q("tplinkwifi.net")},32000)}})}});var m=new $.su.Help({container:"div#lan_help",content:["LAN_IPV4"]})});</script>
</body>
</html>
