<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>IPTV</title>
</head>
<body>
<div class="func-container">
	<div id="settings">
	 	<form  id="iptv-setting">
				<input id="igmp_enable" name="igmp_enable" type="text" />
				<input id="igmp_snooping_enable" name="igmp_snooping_enable" type="text" />
				<input id="igmp_version" name="igmp_version" type="text" />
			<div id="iptv_cnt"  class="part-seperate">
				<input id="mcwifi_enable" name="mcwifi_enable" />
		    	<input name="enable" id="enable" type="text" />
		    	<input id="mode" name="mode" type="text" />
	    	</div>
	    	<div id="vlan_cnt"  class="part-seperate">
	    		<div id="internet_vlan_cnt">
	    			<input type="text" id="internet_vid" name="internet_vid" />
	    			<input type="text" id="internet_vprio" name="internet_vprio" />
	    			<input type="text" id="internet_tag" name="internet_tag" />
	    		</div>
	    		<div id="ip_vlan_cnt">
	    			<input type="text" id="ipphone_vid" name="ipphone_vid" />
	    			<input type="text" id="ipphone_vprio" name="ipphone_vprio" />
	    		</div>
	    		<div id="iptv_vlan_cnt">
	    			<input type="text" id="iptv_vid" name="iptv_vid" />
	    			<input type="text" id="iptv_vprio" name="iptv_vprio" />
	    		</div>
	    		<div id="iptv_multi_vlan_cnt">
	    			<input type="text" id="mciptv_vid" name="mciptv_vid" />
	    			<input type="text" id="mciptv_vprio" name="mciptv_vprio" />
	    			<input type="text" id="mciptv_enable" name="mciptv_enable" />
	    		</div>
	    	</div>
	    	<div id="vlan_cnt"  class="part-seperate">
	    		<input type="text" id="lan1" name="lan1" />
	    		<input type="text" id="lan2" name="lan2" />
	    		<input type="text" id="lan3" name="lan3" />
	    		<input type="text" id="lan4" name="lan4" />
	    	</div>
	    </form>
		<div id="upgrade_alert_cnt">
		    <div id="upload_loading_msg" class="reboot-loading-msg hidden">
	    		      <p id="note" class="reboot-progressbar-text"></p>
		    	      <input id="pro_bar" type="text" />
		    </div>
		</div>
	 </div>
	<div id="iptv_help"></div>
</div>
<script type="text/javascript">var IPTV_URL="./data/iptv.setttings.json";var IPTV_URL_NEW=$.su.url("/admin/iptv?form=setting");var URL_QOS_STATUS_NEW=$.su.url("/admin/qos?form=settings");var qos_enable=false;var cur_mode="";var cur_lan1="";var cur_lan2="";var cur_lan3="";var cur_lan4="";var cur_igmp_version="";var cur_internet_vlanid="";var cur_internet_vlanpri="";var cur_internet_vlancheck="";var cur_ipphone_vlanid="";var cur_ipphone_vlanpri="";var cur_iptv_vlanid="";var cur_iptv_vlanpri="";var cur_iptv_multi_vlanid="";var cur_iptv_multi_vlanpri="";var cur_iptv_multi_vlancheck="";var wait_time=10*1000;var qosProxy=new $.su.Proxy({url:URL_QOS_STATUS_NEW});$(document).ready(function(d){$("div#settings").panel({title:$.su.CHAR.IPTV.TITLE,collapsible:false});$("#note").html($.su.CHAR.ERROR["00000123"]);$("#mcwifi_enable").checkbox({fieldLabel:$.su.CHAR.IPTV.WIRELESS_MULTI_FORWARDING,labelCls:"m",items:[{boxlabel:$.su.CHAR.IPTV.ENABLE,inputValue:"on",uncheckedValue:"off"}]});$("#enable").checkbox({fieldLabel:$.su.CHAR.IPTV.IPTV,labelCls:"m",tips:"",items:[{boxlabel:$.su.CHAR.IPTV.ENABLE_IPTV,inputValue:"on",uncheckedValue:"off"}]}).on("ev_change",function(l,m,p){if(!p[0]||p=="off"){setTimeout(function(){$("#mode").combobox("disable");$("#internet_vlan_cnt").fieldset("disable");$("#ip_vlan_cnt").fieldset("disable");$("#iptv_vlan_cnt").fieldset("disable");$("#iptv_multi_vlan_cnt").fieldset("disable");c.combobox("disable");j.combobox("disable");f.combobox("disable");a.combobox("disable")},50)}else{$("#mode").combobox("enable");$("#internet_vlan_cnt").fieldset("enable");$("#ip_vlan_cnt").fieldset("enable");$("#iptv_vlan_cnt").fieldset("enable");$("#iptv_multi_vlan_cnt").fieldset("enable");c.combobox("enable");j.combobox("enable");f.combobox("enable");a.combobox("enable");var k=$("#mode").combobox("getValue");$("#mode").combobox("reset");$("#mode").combobox("setValue",k)}});$("#igmp_enable").checkbox({fieldLabel:$.su.CHAR.IPTV.IGMP_PROXY,labelCls:"m",tips:"",items:[{boxlabel:$.su.CHAR.IPTV.ENABLE,inputValue:"on",uncheckedValue:"off"}]});$("#igmp_snooping_enable").checkbox({fieldLabel:$.su.CHAR.IPTV.IGMP_SNOOPING,labelCls:"m",tips:"",items:[{boxlabel:$.su.CHAR.IPTV.ENABLE,inputValue:"on",uncheckedValue:"off"}]});$("#igmp_version").combobox({fieldLabel:$.su.CHAR.IPTV.IGMP_VERSION,inputCls:"m",items:[{value:2,name:$.su.CHAR.IPTV.V2},{value:3,name:$.su.CHAR.IPTV.V3}]});$("#mode").combobox({fieldLabel:$.su.CHAR.IPTV.MODE,items:[{value:"ExStream",name:$.su.CHAR.IPTV.EXSTREAM},{value:"Unifi",name:$.su.CHAR.IPTV.UNIFY},{value:"Maxis",name:$.su.CHAR.IPTV.MAXIS},{value:"Vietnam",name:$.su.CHAR.IPTV.VIETNAM},{value:"nbn",name:$.su.CHAR.IPTV.NBN},{value:"ufb",name:$.su.CHAR.IPTV.UFB},{value:"Bridge",name:$.su.CHAR.IPTV.BRIDGE},{value:"Custom",name:$.su.CHAR.IPTV.BASIC}]}).on("ev_change",function(r,k,q){var p=$("#lan1").combobox("getValue");var o=$("#lan2").combobox("getValue");var n=$("#lan3").combobox("getValue");var m=$("#lan4").combobox("getValue");switch(q[0]){case"Bridge":$("#internet_vlan_cnt").fieldset("hide");$("#ip_vlan_cnt").fieldset("hide");$("#iptv_vlan_cnt").fieldset("hide");$("#iptv_multi_vlan_cnt").fieldset("hide");c.combobox("disableItem","IP-Phone");j.combobox("disableItem","IP-Phone");f.combobox("disableItem","IP-Phone");a.combobox("disableItem","IP-Phone");if(p=="IP-Phone"){c.combobox("setValue","Internet")}if(o=="IP-Phone"){j.combobox("setValue","Internet")}if(n=="IP-Phone"){f.combobox("setValue","Internet")}if(m=="IP-Phone"){a.combobox("setValue","Internet")}if(1){if(cur_mode=="Bridge"){$("#igmp_version").combobox("setValue",cur_igmp_version);c.combobox("setValue",cur_lan1);j.combobox("setValue",cur_lan2);f.combobox("setValue",cur_lan3);a.combobox("setValue",cur_lan4)}else{if(cur_mode!=""){if($.su.locale.country=="RU"){c.combobox("setValue","Internet");j.combobox("setValue","Internet");f.combobox("setValue","Internet");a.combobox("setValue","IPTV")}else{c.combobox("setValue","Internet");j.combobox("setValue","Internet");f.combobox("setValue","IPTV");a.combobox("setValue","IPTV")}}}}c.combobox("enable");j.combobox("enable");f.combobox("enable");a.combobox("enable");break;case"Custom":$("#internet_vlan_cnt").fieldset("show");$("#ip_vlan_cnt").fieldset("show");$("#iptv_vlan_cnt").fieldset("show");$("#iptv_multi_vlan_cnt").fieldset("show");var l=$("#mciptv_enable").checkbox("getValue");if((l.length==0)||(l[0]=="off")){$("#mciptv_vid").textbox("disable");$("#mciptv_vprio").combobox("disable")}else{$("#mciptv_vid").textbox("enable");$("#mciptv_vprio").combobox("enable")}c.combobox("enableItem","IP-Phone");j.combobox("enableItem","IP-Phone");f.combobox("enableItem","IP-Phone");a.combobox("enableItem","IP-Phone");if(1){if(cur_mode=="Custom"){$("#igmp_version").combobox("setValue",cur_igmp_version);$("#internet_vid").textbox("setValue",cur_internet_vlanid);$("#internet_vprio").combobox("setValue",cur_internet_vlanpri);$("#internet_tag").checkbox("setValue",cur_internet_vlancheck);$("#ipphone_vid").textbox("setValue",cur_ipphone_vlanid);$("#ipphone_vprio").combobox("setValue",cur_ipphone_vlanpri);$("#iptv_vid").textbox("setValue",cur_iptv_vlanid);$("#iptv_vprio").combobox("setValue",cur_iptv_vlanpri);$("#mciptv_vid").textbox("setValue",cur_iptv_multi_vlanid);$("#mciptv_vprio").combobox("setValue",cur_iptv_multi_vlanpri);$("#mciptv_enable").checkbox("setValue",cur_iptv_multi_vlancheck);c.combobox("setValue",cur_lan1);j.combobox("setValue",cur_lan2);f.combobox("setValue",cur_lan3);a.combobox("setValue",cur_lan4)}else{if(cur_mode!=""){$("#internet_vid").textbox("setValue","");$("#internet_vprio").combobox("setValue",0);$("#internet_tag").checkbox("setValue","off");$("#ipphone_vid").textbox("setValue","");$("#ipphone_vprio").combobox("setValue",0);$("#iptv_vid").textbox("setValue","");$("#iptv_vprio").combobox("setValue",0);$("#mciptv_vid").textbox("setValue","");$("#mciptv_vprio").combobox("setValue",0);$("#mciptv_enable").checkbox("setValue","off");c.combobox("setValue","Internet");j.combobox("setValue","Internet");f.combobox("setValue","Internet");a.combobox("setValue","Internet")}}}c.combobox("enable");j.combobox("enable");f.combobox("enable");a.combobox("enable");break;case"ExStream":$("#internet_vlan_cnt").fieldset("show");$("#ip_vlan_cnt").fieldset("hide");$("#iptv_vlan_cnt").fieldset("show");$("#iptv_multi_vlan_cnt").fieldset("hide");$("#internet_vid").textbox("disable");$("#internet_vprio").combobox("disable");$("#internet_tag").checkbox("disable");$("#iptv_vid").textbox("disable");$("#iptv_vprio").combobox("disable");c.combobox("disableItem","IP-Phone");j.combobox("disableItem","IP-Phone");f.combobox("disableItem","IP-Phone");a.combobox("disableItem","IP-Phone");if(p=="IP-Phone"){c.combobox("setValue","Internet")}if(o=="IP-Phone"){j.combobox("setValue","Internet")}if(n=="IP-Phone"){f.combobox("setValue","Internet")}if(m=="IP-Phone"){a.combobox("setValue","Internet")}if(1){if(cur_mode=="ExStream"){$("#igmp_version").combobox("setValue",cur_igmp_version);$("#internet_vid").textbox("setValue",cur_internet_vlanid);$("#internet_vprio").combobox("setValue",cur_internet_vlanpri);$("#internet_tag").checkbox("setValue",cur_internet_vlancheck);$("#ipphone_vid").textbox("setValue",cur_ipphone_vlanid);$("#ipphone_vprio").combobox("setValue",cur_ipphone_vlanpri);$("#iptv_vid").textbox("setValue",cur_iptv_vlanid);$("#iptv_vprio").combobox("setValue",cur_iptv_vlanpri);$("#mciptv_vid").textbox("setValue",cur_iptv_multi_vlanid);$("#mciptv_vprio").combobox("setValue",cur_iptv_multi_vlanpri);$("#mciptv_enable").checkbox("setValue",cur_iptv_multi_vlancheck);c.combobox("setValue",cur_lan1);j.combobox("setValue",cur_lan2);f.combobox("setValue",cur_lan3);a.combobox("setValue",cur_lan4)}else{if(cur_mode!=""){$("#internet_vid").textbox("setValue",10);$("#internet_vprio").combobox("setValue",0);$("#internet_tag").checkbox("setValue","on");$("#iptv_vid").textbox("setValue",20);$("#iptv_vprio").combobox("setValue",4);c.combobox("setValue","Internet");j.combobox("setValue","Internet");f.combobox("setValue","Internet");a.combobox("setValue","IPTV")}}}c.combobox("disable");j.combobox("disable");f.combobox("disable");a.combobox("disable");break;case"ufb":$("#internet_vlan_cnt").fieldset("show");$("#ip_vlan_cnt").fieldset("hide");$("#iptv_vlan_cnt").fieldset("hide");$("#iptv_multi_vlan_cnt").fieldset("hide");$("#internet_vid").textbox("disable");$("#internet_vprio").combobox("disable");$("#internet_tag").checkbox("disable");$("#iptv_vid").textbox("disable");$("#iptv_vprio").combobox("disable");$("#internet_vid").textbox("setValue",10);$("#internet_tag").checkbox("setValue","on");c.combobox("setValue","Internet");j.combobox("setValue","Internet");f.combobox("setValue","Internet");a.combobox("setValue","Internet");c.combobox("disable");j.combobox("disable");f.combobox("disable");a.combobox("disable");break;case"nbn":$("#internet_vlan_cnt").fieldset("show");$("#ip_vlan_cnt").fieldset("hide");$("#iptv_vlan_cnt").fieldset("hide");$("#iptv_multi_vlan_cnt").fieldset("hide");$("#internet_vid").textbox("disable");$("#internet_vprio").combobox("disable");$("#internet_tag").checkbox("disable");$("#iptv_vid").textbox("disable");$("#iptv_vprio").combobox("disable");$("#internet_vid").textbox("setValue",100);$("#internet_tag").checkbox("setValue","on");c.combobox("setValue","Internet");j.combobox("setValue","Internet");f.combobox("setValue","Internet");a.combobox("setValue","Internet");c.combobox("disable");j.combobox("disable");f.combobox("disable");a.combobox("disable");break;case"Unifi":$("#internet_vlan_cnt").fieldset("show");$("#ip_vlan_cnt").fieldset("hide");$("#iptv_vlan_cnt").fieldset("show");$("#iptv_multi_vlan_cnt").fieldset("hide");$("#internet_vid").textbox("disable");$("#internet_vprio").combobox("disable");$("#internet_tag").checkbox("disable");$("#iptv_vid").textbox("disable");$("#iptv_vprio").combobox("disable");c.combobox("disableItem","IP-Phone");j.combobox("disableItem","IP-Phone");f.combobox("disableItem","IP-Phone");a.combobox("disableItem","IP-Phone");if(p=="IP-Phone"){c.combobox("setValue","Internet")}if(o=="IP-Phone"){j.combobox("setValue","Internet")}if(n=="IP-Phone"){f.combobox("setValue","Internet")}if(m=="IP-Phone"){a.combobox("setValue","Internet")}if(1){if(cur_mode=="Unifi"){$("#igmp_version").combobox("setValue",cur_igmp_version);$("#internet_vid").textbox("setValue",cur_internet_vlanid);$("#internet_vprio").combobox("setValue",cur_internet_vlanpri);$("#internet_tag").checkbox("setValue",cur_internet_vlancheck);$("#ipphone_vid").textbox("setValue",cur_ipphone_vlanid);$("#ipphone_vprio").combobox("setValue",cur_ipphone_vlanpri);$("#iptv_vid").textbox("setValue",cur_iptv_vlanid);$("#iptv_vprio").combobox("setValue",cur_iptv_vlanpri);$("#mciptv_vid").textbox("setValue",cur_iptv_multi_vlanid);$("#mciptv_vprio").combobox("setValue",cur_iptv_multi_vlanpri);$("#mciptv_enable").checkbox("setValue",cur_iptv_multi_vlancheck);c.combobox("setValue",cur_lan1);j.combobox("setValue",cur_lan2);f.combobox("setValue",cur_lan3);a.combobox("setValue",cur_lan4)}else{if(cur_mode!=""){$("#internet_vid").textbox("setValue",500);$("#internet_vprio").combobox("setValue",0);$("#internet_tag").checkbox("setValue","on");$("#iptv_vid").textbox("setValue",600);$("#iptv_vprio").combobox("setValue",0);c.combobox("setValue","IPTV");j.combobox("setValue","Internet");f.combobox("setValue","Internet");a.combobox("setValue","Internet")}}}c.combobox("disable");j.combobox("disable");f.combobox("disable");a.combobox("disable");break;case"Russia":$("#internet_vlan_cnt").fieldset("show");$("#ip_vlan_cnt").fieldset("show");$("#iptv_vlan_cnt").fieldset("show");$("#iptv_multi_vlan_cnt").fieldset("show");$("#internet_vid").textbox("disable");$("#internet_vprio").combobox("disable");$("#internet_tag").checkbox("disable");$("#ipphone_vid").textbox("disable");$("#ipphone_vprio").combobox("disable");$("#iptv_vid").textbox("disable");$("#iptv_vprio").combobox("disable");$("#mciptv_vid").textbox("disable");$("#mciptv_vprio").combobox("disable");$("#mciptv_enable").checkbox("enable");c.combobox("enableItem","IP-Phone");j.combobox("enableItem","IP-Phone");f.combobox("enableItem","IP-Phone");a.combobox("enableItem","IP-Phone");if(1){if(cur_mode=="Russia"){$("#igmp_version").combobox("setValue",cur_igmp_version);$("#internet_vid").textbox("setValue",cur_internet_vlanid);$("#internet_vprio").combobox("setValue",cur_internet_vlanpri);$("#internet_tag").checkbox("setValue",cur_internet_vlancheck);$("#ipphone_vid").textbox("setValue",cur_ipphone_vlanid);$("#ipphone_vprio").combobox("setValue",cur_ipphone_vlanpri);$("#iptv_vid").textbox("setValue",cur_iptv_vlanid);$("#iptv_vprio").combobox("setValue",cur_iptv_vlanpri);$("#mciptv_vid").textbox("setValue",cur_iptv_multi_vlanid);$("#mciptv_vprio").combobox("setValue",cur_iptv_multi_vlanpri);$("#mciptv_enable").checkbox("setValue",cur_iptv_multi_vlancheck);c.combobox("setValue",cur_lan1);j.combobox("setValue",cur_lan2);f.combobox("setValue",cur_lan3);a.combobox("setValue",cur_lan4)}else{if(cur_mode!=""){$("#internet_vid").textbox("setValue",1257);$("#internet_vprio").combobox("setValue",0);$("#internet_tag").checkbox("setValue","on");$("#ipphone_vid").textbox("setValue",263);$("#ipphone_vprio").combobox("setValue",0);$("#iptv_vid").textbox("setValue",4000);$("#iptv_vprio").combobox("setValue",4);$("#mciptv_vid").textbox("setValue",1110);$("#mciptv_vprio").combobox("setValue",4);$("#mciptv_enable").checkbox("setValue","off");c.combobox("setValue","IP-Phone");j.combobox("setValue","Internet");f.combobox("setValue","Internet");a.combobox("setValue","IPTV")}}}c.combobox("disable");j.combobox("disable");f.combobox("disable");a.combobox("disable");break;case"Maxis":$("#internet_vlan_cnt").fieldset("show");$("#ip_vlan_cnt").fieldset("show");$("#iptv_vlan_cnt").fieldset("show");$("#iptv_multi_vlan_cnt").fieldset("hide");$("#internet_vid").textbox("disable");$("#internet_vprio").combobox("disable");$("#internet_tag").checkbox("disable");$("#ipphone_vid").textbox("disable");$("#ipphone_vprio").combobox("disable");$("#iptv_vid").textbox("disable");$("#iptv_vprio").combobox("disable");c.combobox("enableItem","IPTV");j.combobox("enableItem","Internet");f.combobox("enableItem","Internet");a.combobox("enableItem","IP-Phone");if(1){if(cur_mode=="Maxis"){$("#igmp_version").combobox("setValue",cur_igmp_version);$("#internet_vid").textbox("setValue",cur_internet_vlanid);$("#internet_vprio").combobox("setValue",cur_internet_vlanpri);$("#internet_tag").checkbox("setValue",cur_internet_vlancheck);$("#ipphone_vid").textbox("setValue",cur_ipphone_vlanid);$("#ipphone_vprio").combobox("setValue",cur_ipphone_vlanpri);$("#iptv_vid").textbox("setValue",cur_iptv_vlanid);$("#iptv_vprio").combobox("setValue",cur_iptv_vlanpri);$("#mciptv_vid").textbox("setValue",cur_iptv_multi_vlanid);$("#mciptv_vprio").combobox("setValue",cur_iptv_multi_vlanpri);$("#mciptv_enable").checkbox("setValue",cur_iptv_multi_vlancheck);c.combobox("setValue",cur_lan1);j.combobox("setValue",cur_lan2);f.combobox("setValue",cur_lan3);a.combobox("setValue",cur_lan4)}else{if(cur_mode!=""){$("#internet_vid").textbox("setValue",621);$("#internet_vprio").combobox("setValue",0);$("#internet_tag").checkbox("setValue","on");$("#ipphone_vid").textbox("setValue",822);$("#ipphone_vprio").combobox("setValue",0);$("#iptv_vid").textbox("setValue",823);$("#iptv_vprio").combobox("setValue",0);c.combobox("setValue","IPTV");j.combobox("setValue","Internet");f.combobox("setValue","Internet");a.combobox("setValue","IP-Phone")}}}c.combobox("disable");j.combobox("disable");f.combobox("disable");a.combobox("disable");break;case"Vietnam":case"Poland":$("#igmp_version").combobox("setValue",cur_igmp_version);$("#internet_vid").textbox("setValue",35);$("#internet_vprio").combobox("setValue",0);$("#internet_tag").checkbox("setValue","on");$("#ipphone_vid").textbox("setValue",37);$("#ipphone_vprio").combobox("setValue",5);$("#iptv_vid").textbox("setValue",36);$("#iptv_vprio").combobox("setValue",4);$("#mciptv_vid").textbox("setValue",cur_iptv_multi_vlanid);$("#mciptv_vprio").combobox("setValue",cur_iptv_multi_vlanpri);$("#mciptv_enable").checkbox("setValue",cur_iptv_multi_vlancheck);if(cur_mode=="Vietnam"){c.combobox("setValue","Internet");j.combobox("setValue",cur_lan2);f.combobox("setValue",cur_lan3);a.combobox("setValue",cur_lan4)}else{c.combobox("setValue","Internet");j.combobox("setValue","Internet");f.combobox("setValue","IPTV");a.combobox("setValue","IP-Phone")}c.combobox("disable");j.combobox("disable");f.combobox("disable");a.combobox("disable");$("#internet_vlan_cnt").fieldset("show");$("#ip_vlan_cnt").fieldset("show");$("#iptv_vlan_cnt").fieldset("show");$("#iptv_multi_vlan_cnt").fieldset("hide");$("#internet_vid").textbox("disable");$("#internet_vprio").combobox("disable");$("#internet_tag").checkbox("disable");$("#ipphone_vid").textbox("disable");$("#ipphone_vprio").combobox("disable");$("#iptv_vid").textbox("disable");$("#iptv_vprio").combobox("disable");c.combobox("enableItem","IP-Phone");j.combobox("enableItem","IP-Phone");f.combobox("enableItem","IP-Phone");a.combobox("enableItem","IP-Phone");break}});$("#internet_vid").textbox({fieldLabel:$.su.CHAR.IPTV.INTERNET_VLAN_ID,inputCls:"xs",labelCls:"m",cls:"inline-block",allowBlank:false,maxLength:4,vtype:{vtype:"number",min:2,max:4094}});$("#internet_vprio").combobox({fieldLabel:$.su.CHAR.IPTV.INTERNET_VLAN_PRIORITY,inputCls:"xs",cls:"inline-block same-line",items:[{value:"0",name:"0"},{value:"1",name:"1"},{value:"2",name:"2"},{value:"3",name:"3"},{value:"4",name:"4"},{value:"5",name:"5"},{value:"6",name:"6"},{value:"7",name:"7"}]});$("#internet_vlan_cnt").fieldset({fields:[{name:"internet_tag"},{name:"internet_vid"},{name:"internet_vprio"}]}).hide();$("#internet_tag").checkbox({fieldLabel:null,cls:"inline-block",items:[{boxlabel:$.su.CHAR.IPTV.Q_TAG,inputValue:"on",uncheckedValue:"off"}]});$("#ip_vlan_cnt").fieldset({fields:[{name:"ipphone_vid"},{name:"ipphone_vprio"}]}).hide();$("#ipphone_vid").textbox({fieldLabel:$.su.CHAR.IPTV.IP_PHONE_VLAN_ID,labelCls:"m",inputCls:"xs",cls:"inline-block",allowBlank:false,maxLength:4,vtype:{vtype:"number",min:2,max:4094}});$("#ipphone_vprio").combobox({fieldLabel:$.su.CHAR.IPTV.IP_PHONE_VLAN_PRIORITY,inputCls:"xs",cls:"inline-block same-line",items:[{value:"0",name:"0"},{value:"1",name:"1"},{value:"2",name:"2"},{value:"3",name:"3"},{value:"4",name:"4"},{value:"5",name:"5"},{value:"6",name:"6"},{value:"7",name:"7"}]});$("#iptv_vlan_cnt").fieldset({fields:[{name:"iptv_vid"},{name:"iptv_vprio"}]}).hide();$("#iptv_vid").textbox({fieldLabel:$.su.CHAR.IPTV.IPTV_VLAN_ID,labelCls:"m",inputCls:"xs",cls:"inline-block",allowBlank:false,maxLength:4,vtype:{vtype:"number",min:2,max:4094}});$("#iptv_vprio").combobox({fieldLabel:$.su.CHAR.IPTV.IPTV_VLAN_PRIORITY,inputCls:"xs",cls:"inline-block same-line",items:[{value:"0",name:"0"},{value:"1",name:"1"},{value:"2",name:"2"},{value:"3",name:"3"},{value:"4",name:"4"},{value:"5",name:"5"},{value:"6",name:"6"},{value:"7",name:"7"}]});$("#iptv_multi_vlan_cnt").fieldset({fields:[{name:"mciptv_vid"},{name:"mciptv_vprio"},{name:"mciptv_enable"}]}).hide();$("#mciptv_vid").textbox({fieldLabel:$.su.CHAR.IPTV.IPTV_MULTI_VLAN_ID,labelCls:"m",inputCls:"xs",cls:"inline-block",allowBlank:false,maxLength:4,vtype:{vtype:"number",min:2,max:4094}});$("#mciptv_vprio").combobox({fieldLabel:$.su.CHAR.IPTV.IPTV_MULTI_VLAN_PRIORITY,inputCls:"xs",cls:"inline-block same-line",items:[{value:"0",name:"0"},{value:"1",name:"1"},{value:"2",name:"2"},{value:"3",name:"3"},{value:"4",name:"4"},{value:"5",name:"5"},{value:"6",name:"6"},{value:"7",name:"7"}]});$("#mciptv_enable").checkbox({fieldLabel:null,cls:"inline-block",items:[{boxlabel:$.su.CHAR.IPTV.ENABLE,inputValue:"on",uncheckedValue:"off"}]}).on("ev_change",function(m,k,l){if((l.length==0)||(l[0]=="off")){$("#mciptv_vid").textbox("disable");$("#mciptv_vprio").combobox("disable")}else{$("#mciptv_vid").textbox("enable");$("#mciptv_vprio").combobox("enable")}});var c=$("#lan1").combobox({fieldLabel:$.su.CHAR.IPTV.LAN1,items:[{value:"Internet",name:$.su.CHAR.IPTV.INTERNET},{value:"IPTV",name:$.su.CHAR.IPTV.TYPE_IPTV},{value:"IP-Phone",name:$.su.CHAR.IPTV.IP_PHONE}]});var j=$("#lan2").combobox({fieldLabel:$.su.CHAR.IPTV.LAN2,items:[{value:"Internet",name:$.su.CHAR.IPTV.INTERNET},{value:"IPTV",name:$.su.CHAR.IPTV.TYPE_IPTV},{value:"IP-Phone",name:$.su.CHAR.IPTV.IP_PHONE}]});var f=$("#lan3").combobox({fieldLabel:$.su.CHAR.IPTV.LAN3,items:[{value:"Internet",name:$.su.CHAR.IPTV.INTERNET},{value:"IPTV",name:$.su.CHAR.IPTV.TYPE_IPTV},{value:"IP-Phone",name:$.su.CHAR.IPTV.IP_PHONE}]});var a=$("#lan4").combobox({fieldLabel:$.su.CHAR.IPTV.LAN4,items:[{value:"Internet",name:$.su.CHAR.IPTV.INTERNET},{value:"IPTV",name:$.su.CHAR.IPTV.TYPE_IPTV},{value:"IP-Phone",name:$.su.CHAR.IPTV.IP_PHONE}]});var i=new $.su.Proxy({url:IPTV_URL_NEW,autoLoad:false});var b=$("form#iptv-setting").form({proxy:i,fields:[{name:"igmp_enable",mapping:"igmp_enable"},{name:"igmp_snooping_enable",mapping:"igmp_snooping_enable"},{name:"mcwifi_enable",mapping:"mcwifi_enable"},{name:"enable",mapping:"enable"},{name:"igmp_version",mapping:"igmp_version"},{name:"mciptv_enable",mapping:"mciptv_enable"},{name:"internet_tag",mapping:"internet_tag"},{name:"internet_vid",mapping:"internet_vid"},{name:"internet_vprio",mapping:"internet_vprio"},{name:"ipphone_vid",mapping:"ipphone_vid"},{name:"ipphone_vprio",mapping:"ipphone_vprio"},{name:"iptv_vid",mapping:"iptv_vid"},{name:"iptv_vprio",mapping:"iptv_vprio"},{name:"mciptv_vid",mapping:"mciptv_vid"},{name:"mciptv_vprio",mapping:"mciptv_vprio"},{name:"lan1",mapping:"lan1"},{name:"lan2",mapping:"lan2"},{name:"lan3",mapping:"lan3"},{name:"lan4",mapping:"lan4"},{name:"mode",mapping:"mode"}],autoLoad:true,showPrompt:false,callback:function(e){if(e.cfg_changed){$("#upgrade_alert_cnt").msg("show");$("#upload_loading_msg").show();g.progressbar("animate",0,1,wait_time,function(){$("#upgrade_alert_cnt").msg("close");$("#upload_loading_msg").hide();b.form("prompt",true)})}else{b.form("prompt",true)}},validator:function(){var t=$("#mode").combobox("getValue");var u={};var n=$("#internet_vid").textbox("getValue");var m=$("#ipphone_vid").textbox("getValue");var k=$("#iptv_vid").textbox("getValue");var e=$("#mciptv_vid").textbox("getValue");if(t=="Bridge"){}if(t=="Basic"){u[n]=1;if(u[m]){$("#ipphone_vid").textbox("setError");$("form#iptv-setting").form("setError",$.su.CHAR.ERROR["00000094"]);return false}else{u[m]=1}if(u[k]){$("#iptv_vid").textbox("setError");$("form#iptv-setting").form("setError",$.su.CHAR.ERROR["00000094"]);return false}else{u[k]=1}if(u[e]){$("#mciptv_vid").textbox("setError");$("form#iptv-setting").form("setError",$.su.CHAR.ERROR["00000094"]);return false}else{u[e]=1}}if(t=="ExStream"){if(n==k){$("#iptv_vid").textbox("setError");$("form#iptv-setting").form("setError",$.su.CHAR.ERROR["00000094"]);return false}}if(t=="Unifi"){if(n==k){$("#iptv_vid").textbox("setError");$("form#iptv-setting").form("setError",$.su.CHAR.ERROR["00000094"]);return false}}if(t=="Custom"){var r=$("#mciptv_enable").checkbox("getValue");if((r.length==0)||(r[0]=="off")){var l=0;if((n==m)){$("#ipphone_vid").textbox("setError");l=2}if((n==k)){$("#iptv_vid").textbox("setError");l=l==2?2:3}if((m==k)){$("#iptv_vid").textbox("setError");l=l==2?2:3}if(l>0){if(l===2){$("input#ipphone_vid").focus();$("#ipphone_vid").textbox("setError")}else{$("input#iptv_vid").focus();$("#iptv_vid").textbox("setError")}$("form#iptv-setting").form("setError",$.su.CHAR.ERROR["00000094"]);return false}}else{if((n==m)||(n==k)||(n==e)){$("#internet_vid").textbox("setError");$("form#iptv-setting").form("setError",$.su.CHAR.ERROR["00000094"]);return false}if((m==k)||(m==e)){$("#ipphone_vid").textbox("setError");$("form#iptv-setting").form("setError",$.su.CHAR.ERROR["00000094"]);return false}if((k==e)){$("#iptv_vid").textbox("setError");$("form#iptv-setting").form("setError",$.su.CHAR.ERROR["00000094"]);return false}}}var s=$("#lan1").combobox("getValue");var q=$("#lan2").combobox("getValue");var p=$("#lan3").combobox("getValue");var o=$("#lan4").combobox("getValue");if((s[0]!="Internet")&&(q[0]!="Internet")&&(p[0]!="Internet")&&(o[0]!="Internet")&&($.su.locale.country!="RU")){$("form#iptv-setting").form("setError",$.su.CHAR.ERROR["00000095"]);return false}return true},submitBtn:"default"}).on("ev_beforeLoadData",function(l,k){cur_mode=k.mode;cur_lan1=k.lan1;cur_lan2=k.lan2;cur_lan3=k.lan3;cur_lan4=k.lan4;cur_igmp_version=k.igmp_version;cur_internet_vlanid=k.internet_vid;cur_internet_vlanpri=k.internet_vprio;cur_internet_vlancheck=k.internet_tag;cur_ipphone_vlanid=k.ipphone_vid;cur_ipphone_vlanpri=k.ipphone_vprio;cur_iptv_vlanid=k.iptv_vid;cur_iptv_vlanpri=k.iptv_vprio;cur_iptv_multi_vlanid=k.mciptv_vid;cur_iptv_multi_vlanpri=k.mciptv_vprio;cur_iptv_multi_vlancheck=k.mciptv_enable;wait_time=k.wait_time?k.wait_time*1000:1*1000}).on("ev_loadData",function(m,l){if(l.enable=="off"){setTimeout(function(){$("#mode").combobox("disable");$("#internet_vlan_cnt").fieldset("disable");$("#ip_vlan_cnt").fieldset("disable");$("#iptv_vlan_cnt").fieldset("disable");$("#iptv_multi_vlan_cnt").fieldset("disable");c.combobox("disable");j.combobox("disable");f.combobox("disable");a.combobox("disable")},50)}else{$("#mode").combobox("enable");$("#internet_vlan_cnt").fieldset("enable");$("#ip_vlan_cnt").fieldset("enable");$("#iptv_vlan_cnt").fieldset("enable");$("#iptv_multi_vlan_cnt").fieldset("enable");c.combobox("enable");j.combobox("enable");f.combobox("enable");a.combobox("enable");var k=$("#mode").combobox("getValue");$("#mode").combobox("reset");$("#mode").combobox("setValue",k)}});$("#upgrade_alert_cnt").msg({cls:"warning reboot-confirm-size",closeBtn:false,type:"window"});var g=$("input#pro_bar").progressbar({width:326,height:6,cls:"reboot-loading-probar"});qosProxy.read({},function(e){if(e.qos_iptv_compatible=="no"){qos_enable=e.enable;if(qos_enable=="on"){$("#enable").checkbox("disable");$("#enable").checkbox("setTips",$.su.CHAR.ERROR["00000105"])}else{$("#enable").checkbox("enable");$("#enable").checkbox("setTips","")}}});var h=new $.su.Help({container:"div#iptv_help",content:["IPTV"]})});</script>
</body>
</html>