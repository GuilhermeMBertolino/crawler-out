<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Parental Control</title>
</head>
<body>
<div class="func-container">
	 <div id="diag">
	 	<form id="diag_setting">
	    	<input type="text"  id="type" name="type" value="" />
	    	<input type="hidden"  id="type_hidden" name="type" value="0" />
	    	<input type="text"  id="ipaddr_ping" name="ipaddr_ping" value="" />
	    	<input type="text"  id="ipaddr_trace" name="ipaddr_trace" value="" />
	    	<input id="ipaddr_hidden" type="hidden"  name="ipaddr" value="" />
	    	<div class="part-seperate ">
	    		<button type="button" id="start" name="start"></button>
	    	</div>
	    	<div id="adv_btn" class="advanced-block part-seperate" type="button">
				<span class="advanced-icon"></span>
				<span class="advanced-text"></span>
			</div>
			<div id="basic_btn" class="basic-block part-seperate" type="button">
				<span class="basic-icon"></span>
				<span class="basic-text"></span>
			</div>
	    	<div id="pingCnt" class="hidden">
		    	<input type="text"  id="count" name="count" value="" />
		    	<input type="text"  id="pkt" name="pktsize" value="" />
	    	</div>
	    	<div id="traceCnt" class="hidden ">
		    	<input type="text"  id="ttl" name="ttl" value="" />
	    	</div>
	    	<div class="">
	    		<textarea type="text"  id="result" name="result" value="" readonly></textarea>
	    	</div>
	    </form>
	    <input type="hidden"  id="adv_diag_just_for_timmmer" />
	 </div>
	<div id="port_mirroring">
		<input type="text"  id="enable_port" name="enable" value="" />
	</div>
	<div id="port_form_container">
		<p class="note">
		</p>
		<form id="port_form">
			<input id="source_checkbox1" name="lan1" />
			<input id="source_checkbox2" name="lan2" />
			<input id="source_checkbox3" name="lan3" />
			<input id="source_checkbox4" name="lan4" />
			<input id="target" name="mirroring_port" />
		</form>
	</div>
	<div id="help_diagnostic"></div>
</div>
<script type="text/javascript">try{$}catch(e){location.href="/"}$(document).ready(function(i){var a="./data/diag.set.json";var l=$.su.url("/admin/diag?form=diag");var k=$.su.url("/admin/diag?form=port_mirror");var c=false;var h=0;var j="none";$("div.func-container").page({title:$.su.CHAR.DIAG.TITLE,help:""});$("div#diag").panel({title:$.su.CHAR.DIAG.TITLE,collapsible:false});$("#pingCnt").fieldset({fields:[{name:"count"},{name:"pktsize"}]}).hide();$("#traceCnt").fieldset({fields:[{name:"ttl"}]}).hide();$("input#type").radio({fieldLabel:$.su.CHAR.DIAG.DIAGNOSTIC_TOOL,columns:2,labelCls:"l",items:[{boxlabel:$.su.CHAR.DIAG.PING,inputValue:"0"},{boxlabel:$.su.CHAR.DIAG.TRACE,inputValue:"1"}]}).on("ev_change",function(o,m,n){$("#basic_btn").hide();$("#adv_btn").show();$("input#ipaddr_ping").textbox("reset");$("input#ipaddr_ping").textbox("setNormal");$("input#ipaddr_trace").textbox("reset");$("input#ipaddr_trace").textbox("setNormal");switch(n){case"0":$("#type_hidden").val(0);$("button#start").find("span").last().html($.su.CHAR.DIAG.START);$("div#pingCnt").fieldset("hide");$("div#traceCnt").fieldset("hide");$("input#ipaddr_ping").textbox("show");$("input#ipaddr_ping").textbox("enable");$("input#ipaddr_trace").textbox("disable");$("input#ipaddr_trace").textbox("hide");break;case"1":$("#type_hidden").val(1);$("button#start").find("span").last().html($.su.CHAR.DIAG.START);$("div#pingCnt").fieldset("hide");$("div#traceCnt").fieldset("hide");$("input#ipaddr_ping").textbox("hide");$("input#ipaddr_ping").textbox("disable");$("input#ipaddr_trace").textbox("enable");$("input#ipaddr_trace").textbox("show");break}});$("input#ipaddr_ping").textbox({fieldLabel:$.su.CHAR.DIAG.IPADDR,labelCls:"l",allowBlank:false,vtype:"string_ip_domain",tipsCls:"s",maxLength:32,cls:"inline"});$("input#ipaddr_trace").textbox({fieldLabel:$.su.CHAR.DIAG.IPADDR,labelCls:"l",allowBlank:false,vtype:"string_ip_domain",tipsCls:"s",maxLength:32,cls:"inline hidden"});$("input#ipaddr_trace").textbox("hide");$("input#ipaddr_trace").textbox("disable");$("input#count").textbox({fieldLabel:$.su.CHAR.DIAG.COUNT,labelCls:"l",inputCls:"s",vtype:{vtype:"number",min:1,max:50},maxLength:2,textFormat:$.su.format.number,allowBlank:false,min:1,max:50,tips:$.su.CHAR.DIAG.COUNTUNIT});$("input#pkt").textbox({fieldLabel:$.su.CHAR.DIAG.PKT,labelCls:"l",inputCls:"s",vtype:{vtype:"number",min:4,max:1472},maxLength:4,textFormat:$.su.format.number,allowBlank:false,min:4,max:1472,tips:$.su.CHAR.DIAG.PKTUNIT});$("input#ttl").textbox({fieldLabel:$.su.CHAR.DIAG.TTL,labelCls:"l",vtype:{vtype:"number",min:1,max:30},maxLength:2,textFormat:$.su.format.number,allowBlank:false,tips:"(1-30)"});function f(){var m=$("input#type").radio("getValue");if(m==1){$("#ipaddr_hidden").val($("#ipaddr_trace").textbox("getValue"))}else{$("#ipaddr_hidden").val($("#ipaddr_ping").textbox("getValue"))}}function g(m){if($("#adv_diag_just_for_timmmer")[0]){if(h!=0){m="continue"}f();$("form#diag_setting").form("submit",{operation:m},function(p){if(parseInt(p.finish,10)==1){clearInterval(c);c=false;h=0;$("button#start").button("setText",$.su.CHAR.DIAG.START);$("input#type").radio("enableItem",[0,1]);j="stop";var o=$("input#type").radio("getValue");if(o==0){$("input#ipaddr_ping").textbox("enable");if(!$("adv_btn").is(":visible")){$("input#count").textbox("enable");$("input#pkt").textbox("enable")}}else{$("input#ipaddr_trace").textbox("enable");if(!$("basic_btn").is(":visible")){$("input#ttl").textbox("enable")}}}},null,null,false);var n=$("input#type").radio("getValue");if(n==0){$("input#ipaddr_ping").textbox("disable");$("input#count").textbox("disable");$("input#pkt").textbox("disable")}else{$("input#ipaddr_trace").textbox("disable");$("input#ttl").textbox("disable")}h++}}$("button#start").button({text:$.su.CHAR.DIAG.START,handler:function(){if(!$("form#diag_setting").form("validate")){return false}var o=$(this).find("span").last().html();var m="start";var n=$("input#type").radio("getValue");if(o==$.su.CHAR.DIAG.START){$("button#start").button("setText",$.su.CHAR.DIAG.STOP);m="start"}else{$("input#type").radio("enableItem",[0,1]);$("button#start").button("setText",$.su.CHAR.DIAG.START);$(this).find("span").last().html($.su.CHAR.DIAG.START);m="stop"}if(m=="stop"){j="stop";f();$("form#diag_setting").form("submit",{operation:m},function(p){if(p.type=="0"){$("input#ipaddr_ping").textbox("enable");if(!$("adv_btn").is(":visible")){$("input#count").textbox("enable");$("input#pkt").textbox("enable")}}else{$("input#ipaddr_trace").textbox("enable");if(!$("adv_btn").is(":visible")){$("input#ttl").textbox("enable")}}},null,null,false);clearInterval(c);c=false;h=0;$("button#start").button("setText",$.su.CHAR.DIAG.START)}else{j="start";$("input#type").radio("disableItem",[0,1]);c=setInterval(function(){g(m)},1000)}},});$("textarea#result").textarea({fieldLabel:null,inputCls:"dig xxxl fixed-height"});$("form#diag_setting").form({proxy:{url:l,timeout:2000},fields:[{name:"type",mapping:"type"},{name:"ipaddr",mapping:"ipaddr"},{name:"ipaddr_ping",mapping:"ipaddr"},{name:"ipaddr_trace",mapping:"ipaddr"},{name:"count",mapping:"count"},{name:"pktsize",mapping:"pktsize"},{name:"ttl",mapping:"ttl"},{name:"finish",mapping:"finish"},{name:"result",mapping:"result"}],submitBtn:null}).on("ev_validatechange",function(){}).on("ev_loadData",function(n,m){if(m.type==""||!m.type){$("#type").radio("setValue","0")}});$("span.advanced-text").html($.su.CHAR.DIAG.ADVANCED);$("span.basic-text").html($.su.CHAR.DIAG.ADVANCED);$("div#basic_btn").hide();$("div#adv_btn").on("click",function(){if(j=="start"){return false}var m=$("input#type").radio("getValue");if(m=="0"){$("div#pingCnt").fieldset("show");$("div#traceCnt").fieldset("hide")}else{$("div#pingCnt").fieldset("hide");$("div#traceCnt").fieldset("show")}$(this).hide();$("#basic_btn").show()});$("div#basic_btn").on("click",function(){if(j=="start"){return false}$("div#pingCnt").fieldset("hide");$("div#traceCnt").fieldset("hide");$(this).hide();$("#adv_btn").show()});$("div#port_mirroring").panel({title:$.su.CHAR.DIAG.TITLE2,collapsible:false});var b=new $.su.Proxy({url:k});$("input#enable_port").switchbutton({fieldLabel:$.su.CHAR.DIAG.TITLE2,labelCls:"s",cls:"form-inner",proxy:b,field:{name:"enable"}}).on("ev_loadData",function(n,p,m){if(m=="on"){$("#port_form_container").show()}else{$("#port_form_container").hide()}});$(".note").text($.su.CHAR.DIAG.TIPS);$("#source_checkbox1").checkbox({fieldLabel:$.su.CHAR.DIAG.SOURCE,labelCls:"s",columns:1,cls:"inline",items:[{boxlabel:$.su.CHAR.DIAG.LAN1,inputValue:"1",uncheckedValue:"0",name:""}]});$("#source_checkbox2").checkbox({labelCls:"s",columns:1,cls:"inline",items:[{boxlabel:$.su.CHAR.DIAG.LAN2,inputValue:"1",uncheckedValue:"0",name:""}]});$("#source_checkbox3").checkbox({labelCls:"s",columns:1,cls:"inline",items:[{boxlabel:$.su.CHAR.DIAG.LAN3,inputValue:"1",uncheckedValue:"0",name:""}]});$("#source_checkbox4").checkbox({labelCls:"s",columns:1,cls:"inline",items:[{boxlabel:$.su.CHAR.DIAG.LAN4,inputValue:"1",uncheckedValue:"0",name:""}]});$("#target").combobox({fieldLabel:$.su.CHAR.DIAG.TARGET,labelCls:"s",items:[{value:"1",name:$.su.CHAR.DIAG.LAN1,selected:"selected"},{value:"2",name:$.su.CHAR.DIAG.LAN2},{value:"3",name:$.su.CHAR.DIAG.LAN3},{value:"4",name:$.su.CHAR.DIAG.LAN4}]});$("form#port_form").form({proxy:b,fields:[{name:"lan1",mapping:"lan1"},{name:"lan2",mapping:"lan2"},{name:"lan3",mapping:"lan3"},{name:"lan4",mapping:"lan4"},{name:"mirroring_port",mapping:"mirroring_port"}],submitBtn:"default",autoLoad:true}).on("ev_loadData",function(n,m){});var d=new $.su.Help({container:"div#help_diagnostic",content:["DIGNOSTIC","PORT_MIRROR"]});$.su.app.runningModule.addUnloadHandler(function(){clearInterval(c)})});</script>
</body>
</html>
