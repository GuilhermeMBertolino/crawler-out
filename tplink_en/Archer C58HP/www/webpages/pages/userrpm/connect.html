<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Connect to Existing Network</title>
</head>
<css>
<style type="text/css">
span.hidden_5g {
	display: none;
}
</style>	
<body>
<div class="func-container">
	<div id="connect-container">
		<div id="region_tips_connect" class="region-tips-wrap hidden">
			<span id="region_status_tips" class="region-status-tips"></span>
			<button id="jump_to_basic" type="button"></button>
		</div>
		<form id="connect-form">
			<div id="2g-connect">
				<input id="2g_connect_ap_enable" name="syspara_2g_enable"/>
				<button id="btn_2g_scan" type="button"></button>
				<input id="2g_connect_ap_ssid" name="syspara_2g_ssid" />
				<input id="2g_connect_ap_security" name="syspara_2g_encryption"/>
				<input id="2g_connect_ap_password" name="syspara_2g_psk_key"/>
				<input id="2g_connect_ap_password_wep" name="syspara_2g_wep_key1"/>
				<input type="text"  id="channelwidth-2g" name="wireless_2g_htmode" value=""/>
			</div>
			<div id="router_2g_msg">
                <div id="2g_connect_error" class="hidden">
                	<p id="2g_connect_error_tip" class="connection-error-p"></p>
                </div>
				<div id="router_2g_grid" class="quicksetup-grid"></div>
			</div>
			</br>
			</br>
			</br>
			<div id="5g-connect" class="hidden margin-top-50">
				<input id="5g_connect_ap_enable" name="syspara_5g_enable"/>
				<button id="btn_5g_scan" type="button"></button>
				<input id="5g_connect_ap_ssid"  name="syspara_5g_ssid" />
				<input id="5g_connect_ap_security"  name="syspara_5g_encryption"/>
				<input id="5g_connect_ap_password"  name="syspara_5g_psk_key"/>
				<input id="5g_connect_ap_password_wep"  name="syspara_5g_wep_key1"/>
				<input type="text"  id="channelwidth-5g" name="wireless_5g_htmode" value=""/>
			</div>
			<div id="router_5g_msg" class="hidden">
                <div id="5g_connect_error" class="hidden">
                	<p id="5g_connect_error_tip" class="connection-error-p"></p>
                </div>
				<div id="router_5g_grid" class="quicksetup-grid"></div>
			</div>
			<div id="router_pro_msg" class="hidden">
				<p id="router_pro_text" class="reboot-progressbar-text"></p>
				<input id="router_grid_pro"/>
			</div>
		</form>
		<button id="total_save" type="button"></button>
	</div>
	<div id="connect_help"></div>
</div>
<script type="text/javascript">try{$}catch(e){location.href="/"}$(document).ready(function(C){var g={};var b={};var t;var u;var v=new $.su.Proxy({timeout:15000,url:$.su.url("/admin/wireless?form=repeater_connect_2g5g")});var w=new $.su.Proxy({timeout:20*1000,url:$.su.url("/admin/wireless?form=region"),async:false});var x=new $.su.Proxy({url:$.su.url("/admin/wireless?form=wireless_2g")});var o=new $.su.Proxy({url:$.su.url("/admin/wireless?form=wireless_5g")});w.read({},function(F){support_smart_conn=F.support_smart_connect||"no";g=F.capability;b=F});var k;var q;var z=false;var h=false;var l={"2g":false,"5g":false};var D;var E;$("span#region_status_tips").html($.su.CHAR.CONNECT.REGION_TIPS);$("p#2g_connect_error_tip").html($.su.CHAR.CONNECT.CONNECT_ERROR);$("p#5g_connect_error_tip").html($.su.CHAR.CONNECT.CONNECT_ERROR);$("#router_pro_text").html($.su.CHAR.CONNECT.SCANNING);var j=$("div#router_pro_msg").msg({type:"window",closeBtn:true,cls:"l"}).on("ev_close",function(){clearInterval(k);clearTimeout(q);z=true;h=true;if(l["2g"]){y("2g")}if(l["5g"]){y("5g")}});$("input#router_grid_pro").progressbar({cls:"scan-progressbar",showPercentage:true,height:6,width:400});$("button#jump_to_basic").button({text:$.su.CHAR.CONNECT.GO_REGION,cls:"inline-block",handler:function(){$.su.menu.basic.goTo("region")}});var d=$("form#connect-form").form({proxy:v,fields:[{name:"syspara_2g_enable",mapping:"syspara_2g_enable"},{name:"syspara_2g_ssid",mapping:"syspara_2g_ssid"},{name:"syspara_2g_encryption",mapping:"syspara_2g_encryption"},{name:"syspara_2g_psk_key",mapping:"syspara_2g_psk_key"},{name:"syspara_2g_wep_key1",mapping:"syspara_2g_wep_key1"},{name:"syspara_5g_enable",mapping:"syspara_5g_enable"},{name:"syspara_5g_ssid",mapping:"syspara_5g_ssid"},{name:"syspara_5g_encryption",mapping:"syspara_5g_encryption"},{name:"syspara_5g_psk_key",mapping:"syspara_5g_psk_key"},{name:"syspara_5g_wep_key1",mapping:"syspara_5g_wep_key1"}],submitBtn:"#total_save",validator:function(){var L;L=$("input#2g_connect_ap_security").combobox("getValue")[0];var G;G=$("input#5g_connect_ap_security").combobox("getValue")[0];var K;K=$("input#2g_connect_ap_password").textbox("getValue").toString();var I;I=$("input#5g_connect_ap_password").textbox("getValue").toString();var J;J=$("input#2g_connect_ap_password_wep").textbox("getValue").toString();var H;H=$("input#5g_connect_ap_password_wep").textbox("getValue").toString();function F(N,P,R){var Q=/^[A-Fa-f0-9]+$/;var M=/^[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\|\/\?\.\,\<\>\s]+$/;var O=/^[A-Za-z0-9\`\~\!\@\#\$\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\|\/\?\.\,\<\>\%\^\ ]+$/;if(N=="wep"){if(P.length==5){if(!M.test(P)){R.textbox("setError",$.su.CHAR.ERROR["00000215"].replace("%num",5));return false}}else{if(P.length==13){if(!M.test(P)){R.textbox("setError",$.su.CHAR.ERROR["00000215"].replace("%num",13));return false}}else{if(P.length==10){if(!Q.test(P)){R.textbox("setError",$.su.CHAR.ERROR["00000216"].replace("%num",10));return false}}else{if(P.length==26){if(!Q.test(P)){R.textbox("setError",$.su.CHAR.ERROR["00000216"].replace("%num",26));return false}}else{R.textbox("setError",$.su.CHAR.ERROR["00000213"]);return false}}}}}else{if(N=="psk"){if(P.length<8||P.length>64){R.textbox("setError",$.su.CHAR.ERROR["00000214"]);return false}else{if(P.length==64&&!Q.test(P)){R.textbox("setError",$.su.CHAR.ERROR["00000214"]);return false}else{if(!O.test(P)){R.textbox("setError",$.su.CHAR.ERROR["00000214"]);return false}}}}}return true}if(L=="wep"){if($("input#2g_connect_ap_enable").checkbox("getValue")[0]=="syspara_2g_enable"&&!F(L,J,$("input#2g_connect_ap_password_wep"))){return false}}else{if(L=="psk"){if($("input#2g_connect_ap_enable").checkbox("getValue")[0]=="syspara_2g_enable"&&!F(L,K,$("input#2g_connect_ap_password"))){return false}}}if(G=="wep"){if($("input#5g_connect_ap_enable").checkbox("getValue")[0]=="syspara_5g_enable"&&!F(G,H,$("input#5g_connect_ap_password_wep"))){return false}}else{if(G=="psk"){if($("input#5g_connect_ap_enable").checkbox("getValue")[0]=="syspara_5g_enable"&&!F(G,I,$("input#5g_connect_ap_password"))){return false}}}return true}}).on("ev_loadData",function(F,G){if(G.syspara_2g_enable=="off"){$("input#2g_connect_ap_password").textbox("hide");$("input#2g_connect_ap_password_wep").textbox("hide");if($("input#2g_connect_ap_security").combobox("getValue")=="psk"){$("input#2g_connect_ap_password").textbox("show")}else{if($("input#2g_connect_ap_security").combobox("getValue")=="wep"){$("input#2g_connect_ap_password_wep").textbox("show")}else{$("input#2g_connect_ap_password").textbox("disable");$("input#2g_connect_ap_password_wep").textbox("disable");$("input#2g_connect_ap_password").textbox("hide");$("input#2g_connect_ap_password_wep").textbox("hide")}}}if(G.syspara_5g_enable=="off"){$("input#5g_connect_ap_password").textbox("hide");$("input#5g_connect_ap_password_wep").textbox("hide");if($("input#5g_connect_ap_security").combobox("getValue")=="psk"){$("input#5g_connect_ap_password").textbox("show")}else{if($("input#5g_connect_ap_security").combobox("getValue")=="wep"){$("input#5g_connect_ap_password_wep").textbox("show")}else{$("input#5g_connect_ap_password").textbox("disable");$("input#5g_connect_ap_password_wep").textbox("disable");$("input#5g_connect_ap_password").textbox("hide");$("input#5g_connect_ap_password_wep").textbox("hide")}}}x.read({},function(H){$("input#channelwidth-2g").combobox("setValue",H.htmode)});o.read({},function(H){$("input#channelwidth-5g").combobox("setValue",H.htmode)})});$("div#connect-container").panel({title:$.su.CHAR.CONNECT.TITLE_CONNECT,collapsible:false});function y(F){$("button#btn_"+F+"_scan").button("enable");l[F]=false}function s(F){$("button#btn_"+F+"_scan").button("disable");l[F]=true}$("input#2g_connect_ap_enable").checkbox({fieldLabel:$.su.CHAR.CONNECT.NETWORK_24G,labelCls:"xl",items:[{boxlabel:$.su.CHAR.CONNECT.ENABLE_2G_ROUTER_AP,inputValue:"on",uncheckedValue:"off",name:"syspara_2g_enable"}]}).on("ev_change",function(G,F,H){if(H[0]=="on"||H[0]=="syspara_2g_enable"){$("input#2g_connect_ap_ssid").textbox("enable");$("input#2g_connect_ap_security").combobox("enable");$("button#btn_2g_scan").button("enable");$("input#channelwidth-2g").combobox("enable");if($("input#2g_connect_ap_security").combobox("getValue")=="psk"){$("input#2g_connect_ap_password").textbox("enable")}else{if($("input#2g_connect_ap_security").combobox("getValue")=="wep"){$("input#2g_connect_ap_password_wep").textbox("enable")}else{$("input#2g_connect_ap_password").textbox("disable");$("input#2g_connect_ap_password_wep").textbox("disable");$("input#2g_connect_ap_password").textbox("hide");$("input#2g_connect_ap_password_wep").textbox("hide")}}}else{$("button#btn_2g_scan").button("disable");$("input#2g_connect_ap_ssid").textbox("disable");$("input#2g_connect_ap_ssid").textbox("setNormal");$("input#2g_connect_ap_security").combobox("disable");$("input#2g_connect_ap_password").textbox("disable");$("input#2g_connect_ap_password").textbox("setNormal");$("input#2g_connect_ap_password_wep").textbox("disable");$("input#2g_connect_ap_password_wep").textbox("setNormal");$("input#channelwidth-2g").combobox("disable")}}).on("ev_loadData",function(F,G){$("input#2g_connect_ap_password").textbox("hide");$("input#2g_connect_ap_password_wep").textbox("hide");if($("input#2g_connect_ap_security").combobox("getValue")=="psk"){$("input#2g_connect_ap_password").textbox("enable");$("input#2g_connect_ap_password").textbox("show")}else{if($("input#2g_connect_ap_security").combobox("getValue")=="wep"){$("input#2g_connect_ap_password_wep").textbox("enable");$("input#2g_connect_ap_password_wep").textbox("show")}else{$("input#2g_connect_ap_password").textbox("disable");$("input#2g_connect_ap_password_wep").textbox("disable");$("input#2g_connect_ap_password").textbox("hide");$("input#2g_connect_ap_password_wep").textbox("hide")}}});$("button#btn_2g_scan").button({fieldLabel:"",labelCls:"xl",cls:"width-184",text:$.su.CHAR.CONNECT.SCAN_CHOOSE,handler:function(){z=false;A.grid("removeAllData");j.msg("show",s("2g"));$("input#router_grid_pro").progressbar("reset");var H=60*1000;var G=$("input#router_grid_pro");var F=false;G.progressbar("reset");G.progressbar("animate",0,1,H);q=setTimeout(function(){if(!F){setTimeout(function(){if(z==false){k=setInterval(function(){var I=setTimeout(function(){clearInterval(k)},300);$("div#router_2g_grid").grid("show");if(z==false){j.msg("close",y("2g"));$("div#router_2g_msg").msg("show",s("2g"))}$("div#router_2g_grid").find("input.totalCount").textbox("setValue","0");$("div#router_2g_grid").addClass("no-cursor");clearInterval(k);$("p#2g_connect_error_tip").html($.su.CHAR.ERROR["00000189"]);$("div#2g_connect_error").show()},1000)}},1000)}},H);c.load({},function(J){F=true;clearTimeout(q);var I=$("input#router_grid_pro").progressbar("getValue");if(I<0.98){G.progressbar("stop").progressbar("animate",I,0.98,1000,function(){setTimeout(function(){if(z==false){k=setInterval(function(){var K=setTimeout(function(){clearInterval(k)},300);$("div#router_2g_grid").grid("show");G.progressbar("stop").progressbar("animate",0.98,1,500,function(){if(z==false){j.msg("close",y("2g"));$("div#router_2g_msg").msg("show",s("2g"))}if(J.length==0){$("div#router_2g_grid").addClass("no-cursor")}else{$("div#router_2g_grid").removeClass("no-cursor")}clearInterval(k);$("div#2g_connect_error").hide()})},1000)}},1000)})}else{G.progressbar("stop").progressbar("animate",I,1,500,function(){setTimeout(function(){if(z==false){k=setInterval(function(){var K=setTimeout(function(){clearInterval(k)},300);$("div#router_2g_grid").grid("show");if(z==false){j.msg("close",y("2g"));$("div#router_2g_msg").msg("show",s("2g"))}if(J.length==0){$("div#router_2g_grid").addClass("no-cursor")}else{$("div#router_2g_grid").removeClass("no-cursor")}clearInterval(k);$("div#2g_connect_error").hide()},1000)}},1000)})}},function(){A.grid("removeAllData");$("div#router_2g_grid").addClass("no-cursor");$("p#2g_connect_error_tip").html($.su.CHAR.CONNECT.CONNECT_ERROR);$("div#2g_connect_error").show()},function(){A.grid("removeAllData");$("div#router_2g_grid").addClass("no-cursor");$("p#2g_connect_error_tip").html($.su.CHAR.CONNECT.CONNECT_ERROR);$("div#2g_connect_error").show()})}});var r=new $.su.Proxy({timeout:60000,url:$.su.url("/admin/wireless?form=survey_2g")});var i=$("div#router_2g_msg").msg({autoshow:false,global:false,title:$.su.CHAR.CONNECT.ROUTER_AP_24G,cls:"xxl",type:"window"}).on("ev_close",function(){y("2g")});var c=new $.su.Store({proxy:r,autoLoad:false,fields:[{name:"bssid"},{name:"ssid"},{name:"signal"},{name:"channel"},{name:"encryption"}]});var A=$("div#router_2g_grid").grid({store:c,minLines:0,maxLines:5,columns:[{text:$.su.CHAR.GRID.ID,xtype:"rownumberer",width:40},{text:$.su.CHAR.SYSPARA.SSID,width:130,dataIndex:"ssid"},{text:$.su.CHAR.SYSPARA.MAC_ADDRESS,width:140,dataIndex:"bssid"},{text:$.su.CHAR.SYSPARA.SIGNAL,width:100,dataIndex:"signal",renderer:function(G){var F="";var H=G.toString();switch(H){case"0":case"1":case"2":case"3":case"4":case"5":F+='<span class="signal-level-'+H+' signal-icon"></span>';break;default:F+='<span class="signal-level-0 signal-icon"></span>';break}return F}},{text:$.su.CHAR.SYSPARA.CHANNEL,width:100,dataIndex:"channel"},{text:$.su.CHAR.SYSPARA.SECURITY,width:100,dataIndex:"encryption",renderer:function(F){if(F.toUpperCase()=="NONE"){return $.su.CHAR.SYSPARA.NONE}else{return F.toUpperCase()}}},{text:$.su.CHAR.GRID.OPERATION,renderer:function(H,F,G){return'<a href="void(0);" index="'+F+'" class="choose" >'+$.su.CHAR.OPERATION.CHOOSE+"</a>"}}],operation:[{xtype:"totalCount",cls:"left",fieldLabel:$.su.CHAR.SYSPARA.AP_NUMBER},{xtype:"button",text:$.su.CHAR.OPERATION.REFRESH,id:"refreshBtn_2g",iconCls:"btn-refresh",handler:function(F){F.stopPropagation();F.preventDefault();$("#refreshBtn_2g").button("disable");A.grid("runProgress");A.grid("getStore").load({},function(){A.grid("prompt",true);$("#refreshBtn_2g").button("enable")},function(){A.grid("prompt",false);$("#refreshBtn_2g").button("enable")},function(){A.grid("prompt",false);enableButton()});return true}}]}).on("ev_load",function(H,F){var G=$(this);$(F).each(function(J,K){var I=K.encryption.toUpperCase();if(I!="NONE"&&I!="WEP"&&I!="PSK"){G.grid("disableRow",J)}})});$("div#router_2g_grid").delegate("a.choose","click",function(L){var G=$("div#router_2g_grid").grid("getStore");var H=$(this).attr("index");L.preventDefault();var J=$(this).parents("tr.grid-content-tr")[0];var K=G.data[H].ssid;var I=G.data[H].channel;D=I;var F=$(J).find("td.grid-content-td-encryption div").eq(0).html().toLowerCase();if(F==$.su.CHAR.CONNECT.NO_SECURITY.toLowerCase()){F="none"}if(F!="none"&&F!="wep"&&F!="psk"){return}$("input#2g_connect_ap_ssid").textbox("setValue",K);$("#2g_connect_ap_security").combobox("setValue",F);$("div#router_2g_msg").msg("close")});$("input#2g_connect_ap_ssid").textbox({fieldLabel:$.su.CHAR.CONNECT.HOST_AP_24G,labelCls:"xl",cls:"inline-block",maxLength:32,minLength:0,allowBlank:false,autoTrim:false,vtype:{vtype:"utf8_lan",maxLength:32},validator:function(G){var F=encodeURIComponent(G);F=F.replace(/%[A-F\d]{2}/g,"U").length;if(F>32){return $.su.CHAR.ERROR["00000210"]}return true}}).on("ev_change",function(F,H){var G=encodeURIComponent(H);G=G.replace(/%[A-F\d]{2}/g,"U").length;if(G==32){$(this).attr("maxLength",H.length)}else{if(G>32){$(this).attr("maxLength",H.length-1)}else{if(G<32){$(this).attr("maxLength",32)}}}});$("input#2g_connect_ap_security").combobox({fieldLabel:$.su.CHAR.CONNECT.ROUTER_AP_SECURITY_24G,labelCls:"xl",items:[{value:"none",name:$.su.CHAR.CONNECT.NO_SECURITY},{value:"psk",name:$.su.CHAR.CONNECT.WPA_WPA2},{value:"wep",name:$.su.CHAR.CONNECT.WEP}]}).on("ev_change",function(G,F,H){$("input#2g_connect_ap_password").textbox("setNormal");$("input#2g_connect_ap_password_wep").textbox("setNormal");if(H[0]=="none"){if($("input#2g_connect_ap_enable").checkbox("getValue")[0]=="syspara_2g_enable"){$("input#2g_connect_ap_password").textbox("disable");$("input#2g_connect_ap_password_wep").textbox("disable");$("input#2g_connect_ap_password").textbox("hide");$("input#2g_connect_ap_password_wep").textbox("hide")}}else{if(H[0]=="wep"){if($("input#2g_connect_ap_enable").checkbox("getValue")[0]=="syspara_2g_enable"){$("input#2g_connect_ap_password_wep").textbox("enable");$("input#2g_connect_ap_password_wep").textbox("show");$("input#2g_connect_ap_password").textbox("disable");$("input#2g_connect_ap_password").textbox("hide")}}else{if($("input#2g_connect_ap_enable").checkbox("getValue")[0]=="syspara_2g_enable"){$("input#2g_connect_ap_password").textbox("enable");$("input#2g_connect_ap_password").textbox("show");$("input#2g_connect_ap_password_wep").textbox("disable");$("input#2g_connect_ap_password_wep").textbox("hide")}}}});$("input#2g_connect_ap_password").textbox({fieldLabel:$.su.CHAR.CONNECT.ROUTER_AP_PASSWORD_24G,labelCls:"xl",allowBlank:false,vtype:"password",maxLength:64,autoTrim:false});$("input#2g_connect_ap_password_wep").textbox({fieldLabel:$.su.CHAR.CONNECT.ROUTER_AP_PASSWORD_24G,labelCls:"xl",allowBlank:false,vtype:"password",maxLength:64,autoTrim:false});$("input#channelwidth-2g").combobox({fieldLabel:$.su.CHAR.WIRELESS.CHANNEL_WIDTH,labelCls:"xl"});var n=function(K){var M=g.htmode_2g;var I=g.htmode_5g;var L=[];var F=M.length;L[0]={name:$.su.CHAR.WIRELESS.AUTO,value:"auto"};for(var H=0;H<F;H++){var G={};G.name=M[H]+$.su.CHAR.WIRELESS.MHZ;G.value=M[H];L.push(G)}$("#channelwidth-2g").combobox("loadData",L);var J=[];J[0]={name:$.su.CHAR.WIRELESS.AUTO,value:"auto"};var F=I.length;for(var H=0;H<F;H++){var G={};G.name=I[H]+"MHz";G.value=I[H];J.push(G)}$("#channelwidth-5g").combobox("loadData",J)};$("input#5g_connect_ap_enable").checkbox({fieldLabel:$.su.CHAR.CONNECT.NETWORK_5G,cls:"",labelCls:"xl",items:[{boxlabel:$.su.CHAR.CONNECT.ENABLE_5G_ROUTER_AP,inputValue:"on",uncheckedValue:"off",name:"syspara_5g_enable"}]}).on("ev_change",function(G,F,H){if(H[0]=="on"||H[0]=="syspara_5g_enable"){$("input#5g_connect_ap_ssid").textbox("enable");$("input#5g_connect_ap_security").combobox("enable");$("button#btn_5g_scan").button("enable");$("input#channelwidth-5g").combobox("enable");if($("input#5g_connect_ap_security").combobox("getValue")=="psk"){$("input#5g_connect_ap_password").textbox("enable")}else{if($("input#5g_connect_ap_security").combobox("getValue")=="wep"){$("input#5g_connect_ap_password_wep").textbox("enable")}else{$("input#5g_connect_ap_password").textbox("disable");$("input#5g_connect_ap_password_wep").textbox("disable");$("input#5g_connect_ap_password").textbox("hide");$("input#5g_connect_ap_password_wep").textbox("hide")}}}else{$("button#btn_5g_scan").button("disable");$("input#5g_connect_ap_ssid").textbox("disable");$("input#5g_connect_ap_ssid").textbox("setNormal");$("input#5g_connect_ap_security").combobox("disable");$("input#5g_connect_ap_password").textbox("disable");$("input#5g_connect_ap_password").textbox("setNormal");$("input#5g_connect_ap_password_wep").textbox("disable");$("input#5g_connect_ap_password_wep").textbox("setNormal");$("input#channelwidth-5g").combobox("disable")}}).on("ev_loadData",function(F,G){$("input#5g_connect_ap_password").textbox("hide");$("input#5g_connect_ap_password_wep").textbox("hide");if($("input#5g_connect_ap_security").combobox("getValue")=="psk"){$("input#5g_connect_ap_password").textbox("enable");$("input#5g_connect_ap_password").textbox("show")}else{if($("input#5g_connect_ap_security").combobox("getValue")=="wep"){$("input#5g_connect_ap_password_wep").textbox("enable");$("input#5g_connect_ap_password_wep").textbox("show")}else{$("input#5g_connect_ap_password").textbox("disable");$("input#5g_connect_ap_password_wep").textbox("disable");$("input#5g_connect_ap_password").textbox("hide");$("input#5g_connect_ap_password_wep").textbox("hide")}}});$("button#btn_5g_scan").button({fieldLabel:"",labelCls:"xl",text:$.su.CHAR.CONNECT.SCAN_CHOOSE,cls:"width-184",handler:function(){h=false;f.grid("removeAllData");j.msg("show",s("5g"));$("input#router_grid_pro").progressbar("reset");var H=60*1000;var G=$("input#router_grid_pro");var F=false;G.progressbar("reset");G.progressbar("animate",0,1,H);q=setTimeout(function(){if(!F){setTimeout(function(){if(h==false){k=setInterval(function(){var I=setTimeout(function(){clearInterval(k)},300);$("div#router_5g_grid").grid("show");if(h==false){j.msg("close",y("5g"));$("div#router_5g_msg").msg("show",s("5g"))}$("div#router_5g_grid").find("input.totalCount").textbox("setValue","0");$("div#router_5g_grid").addClass("no-cursor");clearInterval(k);$("p#5g_connect_error_tip").html($.su.CHAR.ERROR["00000189"]);$("div#5g_connect_error").show()},1000)}},1000)}},H);B.load({},function(J){F=true;clearTimeout(q);var I=$("input#router_grid_pro").progressbar("getValue");if(I<0.98){G.progressbar("stop").progressbar("animate",I,0.98,1000,function(){setTimeout(function(){if(h==false){k=setInterval(function(){var K=setTimeout(function(){clearInterval(k)},300);$("div#router_5g_grid").grid("show");G.progressbar("stop").progressbar("animate",0.98,1,500,function(){if(h==false){j.msg("close",y("5g"));$("div#router_5g_msg").msg("show",s("5g"))}if(J.length==0){$("div#router_5g_grid").addClass("no-cursor")}else{$("div#router_5g_grid").removeClass("no-cursor")}clearInterval(k);$("div#5g_connect_error").hide()})},1000)}},1000)})}else{G.progressbar("stop").progressbar("animate",I,1,500,function(){setTimeout(function(){if(h==false){k=setInterval(function(){var K=setTimeout(function(){clearInterval(k)},300);$("div#router_5g_grid").grid("show");if(h==false){j.msg("close",y("5g"));$("div#router_5g_msg").msg("show",s("5g"))}if(J.length==0){$("div#router_5g_grid").addClass("no-cursor")}else{$("div#router_5g_grid").removeClass("no-cursor")}clearInterval(k);$("div#5g_connect_error").hide()},1000)}},1000)})}},function(){f.grid("removeAllData");$("div#router_5g_grid").addClass("no-cursor");$("p#5g_connect_error_tip").html($.su.CHAR.CONNECT.CONNECT_ERROR);$("div#5g_connect_error").show()},function(){f.grid("removeAllData");$("div#router_5g_grid").addClass("no-cursor");$("p#5g_connect_error_tip").html($.su.CHAR.CONNECT.CONNECT_ERROR);$("div#5g_connect_error").show()})}});var m=new $.su.Proxy({timeout:60000,url:$.su.url("/admin/wireless?form=survey_5g")});var a=$("div#router_5g_msg").msg({autoshow:false,title:$.su.CHAR.CONNECT.ROUTER_AP_5G,cls:"xxl",type:"window"}).on("ev_close",function(){y("5g")});var B=new $.su.Store({proxy:m,autoLoad:false,fields:[{name:"bssid"},{name:"ssid"},{name:"signal"},{name:"channel"},{name:"encryption"}]});var f=$("div#router_5g_grid").grid({store:B,minLines:0,maxLines:5,columns:[{text:$.su.CHAR.GRID.ID,xtype:"rownumberer",width:40},{text:$.su.CHAR.SYSPARA.SSID,width:130,dataIndex:"ssid"},{text:$.su.CHAR.SYSPARA.MAC_ADDRESS,width:140,dataIndex:"bssid"},{text:$.su.CHAR.SYSPARA.SIGNAL,width:100,dataIndex:"signal",renderer:function(G){var F="";var H=G.toString();switch(H){case"0":case"1":case"2":case"3":case"4":case"5":F+='<span class="signal-level-'+H+' signal-icon"></span>';break;default:F+='<span class="signal-level-0 signal-icon"></span>';break}return F}},{text:$.su.CHAR.SYSPARA.CHANNEL,width:100,dataIndex:"channel"},{text:$.su.CHAR.SYSPARA.SECURITY,width:100,dataIndex:"encryption",renderer:function(F){if(F.toUpperCase()=="NONE"){return $.su.CHAR.SYSPARA.NONE}else{return F.toUpperCase()}}},{text:$.su.CHAR.GRID.OPERATION,renderer:function(H,F,G){return'<a href="void(0);" index="'+F+'" class="choose" >'+$.su.CHAR.OPERATION.CHOOSE+"</a>"}}],operation:[{xtype:"totalCount",cls:"left",fieldLabel:$.su.CHAR.SYSPARA.AP_NUMBER},{xtype:"button",text:$.su.CHAR.OPERATION.REFRESH,id:"refreshBtn_5g",iconCls:"btn-refresh",handler:function(F){F.stopPropagation();F.preventDefault();$("#refreshBtn_5g").button("disable");f.grid("runProgress");f.grid("getStore").load({},function(){f.grid("prompt",true);$("#refreshBtn_5g").button("enable")},function(){f.grid("prompt",false);$("#refreshBtn_5g").button("enable")},function(){f.grid("prompt",false);$("#refreshBtn_5g").button("enable")});return true}}]}).on("ev_load",function(H,F){var G=$(this);$(F).each(function(J,K){var I=K.encryption.toUpperCase();if(I!="NONE"&&I!="WEP"&&I!="PSK"){G.grid("disableRow",J)}})});$("div#router_5g_grid").delegate("a.choose","click",function(L){var G=$("div#router_5g_grid").grid("getStore");var H=$(this).attr("index");L.preventDefault();var J=$(this).parents("tr.grid-content-tr")[0];var K=G.data[H].ssid;var I=G.data[H].channel;E=I;var F=$(J).find("td.grid-content-td-encryption div").eq(0).html().toLowerCase();if(F==$.su.CHAR.CONNECT.NO_SECURITY.toLowerCase()){F="none"}if(F!="none"&&F!="wep"&&F!="psk"){return}$("input#5g_connect_ap_ssid").textbox("setValue",K);$("#5g_connect_ap_security").combobox("setValue",F);$("div#router_5g_msg").msg("close")});$("input#5g_connect_ap_ssid").textbox({fieldLabel:$.su.CHAR.CONNECT.HOST_AP_5G,labelCls:"xl",cls:"inline-block",maxLength:32,minLength:0,allowBlank:false,autoTrim:false,vtype:{vtype:"utf8_lan",maxLength:32},validator:function(G){var F=encodeURIComponent(G);F=F.replace(/%[A-F\d]{2}/g,"U").length;if(F>32){return $.su.CHAR.ERROR["00000210"]}return true}}).on("ev_change",function(F,H){var G=encodeURIComponent(H);G=G.replace(/%[A-F\d]{2}/g,"U").length;if(G==32){$(this).attr("maxLength",H.length)}else{if(G>32){$(this).attr("maxLength",H.length-1)}else{if(G<32){$(this).attr("maxLength",32)}}}});$("input#5g_connect_ap_security").combobox({fieldLabel:$.su.CHAR.CONNECT.ROUTER_AP_SECURITY_5G,labelCls:"xl",items:[{value:"none",name:$.su.CHAR.CONNECT.NO_SECURITY},{value:"psk",name:$.su.CHAR.CONNECT.WPA_WPA2},{value:"wep",name:$.su.CHAR.CONNECT.WEP}]}).on("ev_change",function(G,F,H){$("input#5g_connect_ap_password").textbox("setNormal");$("input#5g_connect_ap_password_wep").textbox("setNormal");if(H[0]=="none"){if($("input#5g_connect_ap_enable").checkbox("getValue")[0]=="syspara_5g_enable"){$("input#5g_connect_ap_password").textbox("disable");$("input#5g_connect_ap_password_wep").textbox("disable");$("input#5g_connect_ap_password").textbox("hide");$("input#5g_connect_ap_password_wep").textbox("hide")}}else{if(H[0]=="wep"){if($("input#5g_connect_ap_enable").checkbox("getValue")[0]=="syspara_5g_enable"){$("input#5g_connect_ap_password_wep").textbox("enable");$("input#5g_connect_ap_password_wep").textbox("show");$("input#5g_connect_ap_password").textbox("disable");$("input#5g_connect_ap_password").textbox("hide")}}else{if($("input#5g_connect_ap_enable").checkbox("getValue")[0]=="syspara_5g_enable"){$("input#5g_connect_ap_password").textbox("enable");$("input#5g_connect_ap_password").textbox("show");$("input#5g_connect_ap_password_wep").textbox("disable");$("input#5g_connect_ap_password_wep").textbox("hide")}}}});$("input#5g_connect_ap_password").textbox({fieldLabel:$.su.CHAR.CONNECT.ROUTER_AP_PASSWORD_5G,labelCls:"xl",allowBlank:false,vtype:"password",maxLength:64,autoTrim:false});$("input#5g_connect_ap_password_wep").textbox({fieldLabel:$.su.CHAR.CONNECT.ROUTER_AP_PASSWORD_5G,labelCls:"xl",allowBlank:false,vtype:"password",maxLength:64,autoTrim:false});$("#channelwidth-5g").combobox({fieldLabel:$.su.CHAR.WIRELESS.CHANNEL_WIDTH,labelCls:"xl"});$("button#total_save").button({text:$.su.CHAR.OPERATION.SAVE,cls:"submit",handler:function(){d.form("submit")}});n(b);$.su.app.runningModule.addUnloadHandler(function(){clearInterval(k)});var p=new $.su.Help({container:"div#connect_help",content:["WIRELESS_CONNECT"]})});</script>
</body>
</html>
