(function(a){a.su=a.su||{};a.su.Widget=function(c,b){var e=a.fn[c];var d={defaults:{separator:":",cls:"",labelCls:"m",inputCls:"l",fieldLabel:"",tips:null,tipsCls:"m",errorTipsCls:""},create:null,validate:function(){return true},setValue:function(g,f){var g=g||this,h=f[1];a(g).attr("snapshot",h);a(g).val(h);return g},enable:function(){var g=g||this,f=g[c]("getContainer");f.removeClass("disabled");g.prop("disabled",false);return g},disable:function(){var g=g||this,f=g[c]("getContainer");f.addClass("disabled");g.prop("disabled",true);return g},setFieldLabel:function(h,i){var h=h||this,f=h[c]("getContainer");var g=i[1]||h.get(0).fieldLabel||"";f.find("label.widget-fieldlabel").html(g);return h},setNormal:function(g){var g=g||this,h=g.get(0),f=g[c]("getContainer");g[c]("setTips",h.tips);f.removeClass("focus error disable dirty");f.find("span.widget-validate-icon").css({display:"none"});f.find("div.widget-error-tips-wrap").css({display:"none"});f.find("div.widget-error-tips").height("");f.find("div.widget-error-tips").removeClass("show")},setFocus:function(g){var g=g||this,f=g[c]("getContainer");g[c]("setNormal");f.addClass("focus");return g},removeFocus:function(g){var g=g||this,f=g[c]("getContainer");f.removeClass("focus");return g},setValid:function(g){var g=g||this,f=g[c]("getContainer");f.removeClass("error");f.addClass("valid");f.find("span.widget-validate-icon").css({display:"inline-block"});f.find("div.widget-error-tips-wrap").css({display:"none"});f.find("div.widget-error-tips").height("");f.find("div.widget-error-tips").removeClass("show");return g},setError:function(h,f){var h=h||this,f=f[1]||null,g=h[c]("getContainer");if(f){h[c]("setErrorTips",f)}g.removeClass("valid");g.addClass("error");g.find("span.widget-validate-icon").css({display:"inline-block"});if(f){g.find("div.widget-error-tips").height(g.find("div.error-tips-content").outerHeight());g.find("div.widget-error-tips").addClass("show")}return h},reset:function(g){var g=g||this,h=g.get(0),f=h.defaultValue||"";if(h.xtype==="password"){g.closest("div.password-container").find("input.password-hidden").val(f)}g.val(f);return g},setDirty:function(g){var g=g||this,f=g[c]("getContainer");g[c]("setNormal");f.addClass("dirty");return g},setTips:function(h,j){var h=h||this,g=h[c]("getContainer"),i=g.find("div.widget-tips div.tips-content"),f=j[1]||"";if(h.get(0)){h.get(0).tips=f}if(a.type(f)==="string"){i.html(f)}if(f==""){i.hide();i.css("display","none")}else{i.show();i.fadeIn(150)}return h},setErrorTips:function(j,k){var j=j||this,h=j[c]("getContainer"),f=k[1]||"",l=h.find("div.widget-error-tips-wrap").removeClass("show").css({left:"-9999px",top:"-9999px",display:"block"}),i=l.find("div.error-tips-content");if(f==""){l.css("display","none")}else{var g=l.width();if(a.type(f)==="string"){i.html(f)}l.css({display:"block",left:0,top:0});setTimeout(function(){l.addClass("show")},200)}return j},hideErrorTips:function(){var h=h||this,f=h[c]("getContainer"),i=f.find("div.widget-error-tips-wrap").removeClass("show").css({display:"none"}),g=i.find("div.error-tips-content").css({width:"inherit","white-space":"normal"});f.find("div.widget-error-tips").height("");f.find("div.widget-error-tips").removeClass("show")},setPosition:function(h,f){var h=h||this,g=h[c]("getContainer"),j=f[1]==="center"?parseInt((Math.max(a(window).width(),a("body").width())-g.width())/2,10):f[1]||0,i=f[2]==="center"?parseInt((a(window).height()-g.height())/2,10):f[2]||0;j=j<0?0:j;i=(i-60)<0?0:i-60;g.css({left:j,top:i});return{x:j,y:i}},getContainer:function(g){var g=g||this;if(g.hasClass("widget-container")){return g}else{var f=g.closest("div.widget-container");if(f.get(0)){return a(f.get(0))}else{return null}}},getWidth:function(f){var f=f||this;return f[c]("getContainer").width()},getHeight:function(f){var f=f||this;return f[c]("getContainer").height()},getSize:function(g){var g=g||this,f=g[c]("getContainer");return{width:f.width(),height:f.height()}},getValue:function(f){var f=f||this;return f.val()},show:function(g){var g=g||this,f=g[c]("getContainer");f.fadeIn(150);return g},hide:function(g){var g=g||this,f=g[c]("getContainer");f.css({display:"none"});return g}};e=e||function(f){var g=this,h=e.defaults||{},f=f||{};h=a.extend(d.defaults,h);h.xtype=c;h.isWidget=true;if(f.title){f._title=f.title;delete f.title}if(f.minLength){f._minLength=f.minLength;delete f.minLength}if(f.maxLength){f._maxLength=f.maxLength;delete f.maxLength}if(a.type(f)==="string"){return e[f].call(g,g,arguments)}if(!e.create){}else{return e.create.call(g,h,f)}};a.fn[c]=a.extend(e,d,b);return e};a("html").delegate("input","focus",function(b){b.stopPropagation();b.preventDefault()}).on("click",function(b){b.stopPropagation();a("div.region-select-wrap, div.region-search-wrap").hide();a("div.combobox-list-wrap").hide().attr("toggleflag","hidden");a("div.combobox-container").removeClass("selected focus");a("div.widget-error-tips-wrap.show").css("display","none");a("div.timepicker-msg-container").removeAttr("dragFlag")}).on("mouseup",function(b){b.stopPropagation();a("div.button-container").removeClass("clicked");a("div.btn-help-container a.btn-help").removeClass("clicked");a("div.timepicker-msg-container-wrap").trigger("mouseup")}).on("keyup mousedown",function(b){a("div.widget-error-tips-wrap.show").css("display","none");a("div.widget-error-tips").height("");a("div.widget-error-tips").removeClass("show")});a(window).on("resize",function(b){var c=a("div.msg-container");c.each(function(e,f){var d=a(f);if(f.shown||d.attr("shown")){d.msg("setPosition","center","center")}})})})(jQuery);