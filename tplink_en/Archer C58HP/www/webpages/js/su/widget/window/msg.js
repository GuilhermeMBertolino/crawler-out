(function(a){a.su.Widget("msg",{defaults:{type:"prompt",cls:"xl",_title:"",autoshow:false,mask:true,msg:"",callback:null,okHandler:null,noHandler:null,cancelHandler:null,closeBtn:true,global:false,okText:a.su.CHAR.OPERATION.OK,yesText:a.su.CHAR.OPERATION.YES,noText:a.su.CHAR.OPERATION.NO,cancelText:a.su.CHAR.OPERATION.CANCEL},create:function(d,b){var c=this;c.each(function(j,h){if(this.isMsg){return}var f=a(this);a.extend(this,d,b);if(this.global){if(!this.id){return null}}this.id=this.id||a.su.randomId("msg");var e="";e+='<div class="msg-wrap">';if(this.closeBtn){e+='<a class="widget-close msg-close" href="javascript:void(0);"></a>'}e+='<div class="msg-content-wrap">';var n=this._title||"";e+='<h3 class="widget-title msg-title">';e+='<span class="msg-title-container">'+n+"</span>";e+="</h3>";var l=this.msg||this.innerHTML;f.empty();e+='<div class="widget-content msg-content-container">'+l+"</div>";e+="</div>";var m=this.type;switch(m){case"alert":e+='<div class="msg-btn-container">';e+='<div class="msg-btn-wrap">';e+='<div class="button-container inline-block">';e+='<button type="button" class="button-button btn-msg btn-msg-ok btn-alert">';e+='<span class="button-button-before"></span>';e+='<span class="text button-text">'+this.okText+"</span>";e+="</button>";e+="</div>";e+="</div>";e+="</div>";break;case"confirm":e+='<div class="msg-btn-container">';e+='<div class="msg-btn-wrap">';e+='<div class="button-container inline-block">';e+='<button type="button" class="button-button btn-msg btn-msg-no btn-confirm">';e+='<span class="button-button-before"></span>';e+='<span class="text button-text">'+this.noText+"</span>";e+="</button>";e+="</div>";e+='<div class="button-container inline-block">';e+='<button type="button" class="button-button btn-msg btn-msg-ok btn-confirm">';e+='<span class="button-button-before"></span>';e+='<span class="text button-text">'+this.yesText+"</span>";e+="</button>";e+="</div>";e+="</div>";e+="</div>";break;case"prompt":e+='<div class="button-container msg-btn-container">';e+='<div class="msg-btn-wrap">';e+='<div class="button-container inline-block">';e+='<button type="button" class="button-button btn-msg btn-msg-cancel btn-prompt">';e+='<span class="button-button-before"></span>';e+='<span class="text button-text">'+this.cancelText+"</span>";e+="</button>";e+="</div>";e+='<div class="button-container inline-block">';e+='<button type="button" class="button-button btn-msg btn-msg-ok btn-prompt">';e+='<span class="button-button-before"></span>';e+='<span class="text button-text">'+this.okText+"</span>";e+="</button>";e+="</div>";e+="</div>";e+="</div>";break;case"show":e+='<div class="button-container msg-btn-container">';e+='<div class="msg-btn-wrap">';e+='<div class="button-container inline-block">';e+='<button type="button" class="button-button btn-msg btn-msg-cancel btn-show">';e+='<span class="button-button-before"></span>';e+='<span class="text button-text">'+this.cancelText+"</span>";e+="</button>";e+="</div>";e+='<div class="button-container inline-block">';e+='<button type="button" class="button-button btn-msg btn-msg-no btn-show">';e+='<span class="button-button-before"></span>';e+='<span class="text button-text">'+this.noText+"</span>";e+="</button>";e+="</div>";e+='<div class="button-container inline-block">';e+='<button type="button" class="button-button btn-msg btn-msg-ok btn-show">';e+='<span class="button-button-before"></span>';e+='<span class="text button-text">'+this.yesText+"</span>";e+="</button>";e+="</div>";e+="</div>";e+="</div>";break;default:var g=this.buttons;if(g){}break}e+="</div>";e='<div class="position-center-right">'+e+"</div>";e='<div class="position-center-left">'+e+"</div>";e='<div class="position-top-right"></div>'+e;e='<div class="position-top-center"></div>'+e;e='<div class="position-top-left"></div>'+e;e+='<div class="position-bottom-left"></div>';e+='<div class="position-bottom-center"></div>';e+='<div class="position-bottom-right"></div>';var k=a("div#msg-boxs-container");if(k.length==0){k=a('<div id="msg-boxs-container" class="msg-boxs-container"></div>');a("body").append(k)}k.find("#"+h.id).remove();k.append(f.detach());f.append(a(e)).addClass("container widget-container msg-container "+this.cls).css({"z-index":"999",display:"none"});this.isMsg=true;a.su.msgManager.add(this)});c.delegate("a.msg-close","click",function(f){f.preventDefault();a(this).closest("div.msg-container").msg("close")}).delegate("button.btn-msg-ok","click",function(g){g.preventDefault();var f=a(this).closest("div.msg-container");if(f.get(0).okHandler){if(f.get(0).okHandler.call(c)!==false){f.msg("close")}}else{f.msg("close")}}).delegate("button.btn-msg-no","click",function(g){g.preventDefault();var f=a(this).closest("div.msg-container");f.msg("close",f.get(0).noHandler)}).delegate("button.btn-msg-cancel","click",function(g){g.preventDefault();var f=a(this).closest("div.msg-container");f.msg("close",f.get(0).cancelHandler)});if(c.get(0).autoshow){c.msg("show")}return c},show:function(e,g){var e=e||this;var d=g[1]||false;e.msg("setPosition","center","center");var b=a(this).closest("div.msg-container");var i=b.find("div.msg-wrap");var c=a(window).height();var h=a(window).width();var f=navigator.userAgent.match("MSIE");if(f){i.css({"max-height":c-40,"overflow-y":"auto","overflow-x":"hidden"});a(window).resize(function(){var j=a(window).height();var k=a(window).width();i.css({"max-height":j-40,"overflow-y":"auto","overflow-x":"hidden"})})}else{i.css({"max-height":c,"overflow-y":"auto","overflow-x":"hidden"});a(window).resize(function(){var j=a(window).height();var k=a(window).width();i.css({"max-height":j,"overflow-y":"auto","overflow-x":"hidden"})})}e.each(function(){if(this.isMsg===true){if(this.mask){a.su.mask.show()}a(this).fadeIn(200,function(){this.shown=true;e.css("display","block")})}else{return false}});e.trigger("ev_show",e);return e},close:function(c,d){var c=c||this,e=c.get(0);var f=a.type(d[1])==="function"?d[1]:null,b=a.type(d[1])==="boolean"?d[1]:a.type(d[2])==="boolean"?d[2]:false;if(!e.shown){return c}if(e.mask){a.su.mask.hide()}if(b){c.fadeOut(200,function(){this.shown=true;c.remove()})}else{c.fadeOut(200,function(){this.shown=true;c.css("display","none")})}c.trigger("ev_close",c);if(f){return f.call(c,c)}else{return c}},setTitle:function(b,c){var b=b||this,d=b.get(0),e=c[1];if(e){d._title=e;b.find("span.msg-title-container").html(e)}return b},setContent:function(b,c){var b=b||this,d=c[1];if(d){b.find("span.msg-content-container").html(d)}return b},showButtons:function(c){var c=c||this,b=c.find("div.msg-btn-container");b.fadeIn(150);return c},hideButtons:function(c){var c=c||this,b=c.find("div.msg-btn-container");b.css("display","none");return c}})})(jQuery);