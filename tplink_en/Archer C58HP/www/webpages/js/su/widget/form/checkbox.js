(function(a){a.su.Widget("checkbox",{defaults:{name:null,items:[],fieldLabel:null,cls:"",columns:1},create:function(e,c){var d=this;d.each(function(v,p){var n=a(this),s=c.id||this.id||e.id,t=c.value||this.value||e.value,B=c.name||this.name||e.name;n.addClass("hidden");a.extend(this,e,c);n.attr({value:t,id:s,name:B}).val(t).addClass("checkbox");var q='<div class="container widget-container checkbox-group-container '+this.cls+'">';if(this.fieldLabel!==null){q+='<div class="widget-fieldlabel-wrap '+this.labelCls+'">';q+='<label class="widget-fieldlabel checkbox-group-label">'+this.fieldLabel+"</label>";if(this.fieldLabel!==""){q+='<span class="widget-separator">'+this.separator+"</span>"}q+="</div>"}q+='<div class="widget-wrap-outer checkbox-group-wrap-outer">';q+='<div class="checkbox-group-wrap">';var r=this.items,x=r.length,u=Math.ceil(x/this.columns),A=0;q+='<ul class="checkbox-group-list-wrap">';for(var k=0;k<r.length;k++){var f=r[k].name||B||"",m=r[k].inputValue||t||"",y=r[k].uncheckedValue||"",z=r[k].itemCls||"",g=r[k].id||"checkbox-"+parseInt(Math.random()*1000*1000*1000,10).toString();var l="",j="",w="";if(r[k].checked==="checked"||r[k].checked===true){l='checked="checked"';j='disabled="disabled"';w="checked"}var h=function(E,C,i,D){q+='<li class="checkbox-list">';q+='<div class="widget-wrap">';q+='<label class="checkbox-label '+z+" "+w+'" for="'+i+'">';q+='<input class="hidden" type="hidden" name="'+E+'" value="'+y+'" data-checked="'+C+'" data-unchecked="'+y+'" '+j+" />";q+='<input class="checkbox-checkbox" type="checkbox" name="'+E+'" value="'+C+'" data-checked="'+C+'" data-unchecked="'+y+'" id="'+i+'" '+l+" />";q+='<span class="icon"></span>';q+='<span class="text">'+r[k].boxlabel+"</span>";q+="</label>";q+="</div>";q+="</li>"};if(A<u){h(f,m,g,r[k].boxlabel)}else{q+="</ul>";q+='<ul class="checkbox-group-list-wrap">';h(f,m,g,r[k].boxlabel);A=0}A++}q+="</ul>";q+="</div>";if(this.tips!=null&&this.tips!=undefined){q+='<div class="widget-tips textbox-tips '+p.tipsCls+'">';q+='<div class="widget-tips-wrap">';q+='<div class="content tips-content"></div>';q+="</div>";q+="</div>"}q+='<div class="widget-error-tips textbox-error-tips '+p.errorTipsCls+'">';q+='<span class="widget-error-tips-delta"></span>';q+='<div class="widget-error-tips-wrap">';q+='<div class="content error-tips-content"></div>';q+="</div>";q+="</div>";q+="</div>";q+="</div>";var o=a(q);n.prop("disabled",true).val("").replaceWith(o);o.prepend(n)});var b=d.closest("div.checkbox-group-container");b.delegate("label.checkbox-label","click",function(k){k.preventDefault();var g=a(this),f=g.closest("li.checkbox-list");if(f.hasClass("disabled")){return}var i=d.checkbox("getValue");g.toggleClass("checked");var j=g.find("input[type=checkbox]").eq(0),h=j.prev("input[type=hidden]");if(j.prop("checked")){j.prop("checked",false);j.prop("disabled",true);h.prop("disabled",false)}else{j.prop("checked",true);j.prop("disabled",false);h.prop("disabled",true)}var l=d.checkbox("getValue");if(l.sort().toString()!==i.sort().toString()){d.trigger("ev_change",[i,l])}d.trigger("ev_click",l)});return d},setValue:function(h,d){var h=h||this,i=d[1],g=h.checkbox("getValue"),c=h.checkbox("getContainer");if(a.type(i)!="array"){i=[i]}c.find("input[type=checkbox]").each(function(j,k){k.checked=false;k.disabled=true});c.find("input[type=hidden]").each(function(j,k){k.checked=true;k.disabled=false});c.find("label.checkbox-label").removeClass("checked");for(var f=0;f<i.length;f++){var e=c.find("input[value="+i[f]+"][type=checkbox]");if(e.length){e.closest("label.checkbox-label").addClass("checked");e.get(0).checked=true;e.get(0).disabled=false}var b=c.find("input[value="+i[f]+"][type=hidden]");if(b.length){b.get(0).disabled=false;b.get(0).checked=true}}if(i.sort().toString()!==g.sort().toString()){h.trigger("ev_change",[g,i])}return h},getValue:function(d){var d=d||this,c=d.checkbox("getContainer"),b=[];c.find("input[type=checkbox]").each(function(e,f){if(f.checked){b.push(f.name)}});return b},reset:function(b){var b=b||this,c=b.get(0),d="";if(c.defaultValue){d=c.defaultValue}b.checkbox("setValue",d);return b},disable:function(d){var d=d||this,e=d.get(0),c=d.checkbox("getContainer").addClass("disabled"),b=c.find("input.checkbox-checkbox");b.each(function(g,h){var f=a(h);f.closest("li.checkbox-list").addClass("disabled");f.closest("label.checkbox-label").addClass("disabled");f.prev("input[type=hidden]").prop("disabled",true);f.prop("disabled",true)});return d},enable:function(d){var d=d||this,e=d.get(0),c=d.checkbox("getContainer").removeClass("disabled"),b=c.find("input.checkbox-checkbox");b.each(function(g,h){var f=a(h);f.closest("li.checkbox-list").removeClass("disabled");f.closest("label.checkbox-label").removeClass("disabled");f.prev("input[type=hidden]").prop("disabled",false);f.prop("disabled",false)});return d},disableItem:function(e,d){var e=e||this,f=e.get(0),c=e.checkbox("getContainer"),b=c.find("input.checkbox-checkbox"),d=d[1];if(a.type(d)==="string"){d=[d]}var g=(function(){var i={};for(var h=0;h<d.length;h++){i[d[h]]=true}return i})();b.each(function(j,k){var h=a(k);if(h.val() in g){h.closest("li.checkbox-list").addClass("disabled");h.closest("label.checkbox-label").addClass("disabled");h.prev("input[type=hidden]").prop("disabled",true);h.prop("disabled",true)}});return e},enableItem:function(e,d){var e=e||this,f=e.get(0),c=e.checkbox("getContainer"),b=c.find("input.checkbox-checkbox"),d=d[1];if(a.type(d)==="string"){d=[d]}var g=(function(){var i={};for(var h=0;h<d.length;h++){i[d[h]]=true}return i})();b.each(function(j,k){var h=a(k);if(h.val() in g){h.closest("li.checkbox-list").removeClass("disabled");h.closest("label.checkbox-label").removeClass("disabled");h.prev("input[type=hidden]").prop("disabled",false);h.prop("disabled",false)}});return e},getContainer:function(b){var b=b||this;return b.closest("div.checkbox-group-container")}})})(jQuery);