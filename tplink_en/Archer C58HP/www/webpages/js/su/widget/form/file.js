(function(a){a.su.Widget("file",{defaults:{fieldLabel:"",tips:"",cls:"",inputCls:"l",buttonText:a.su.CHAR.OPERATION.FILEBUTTONTEXT,blankText:a.su.CHAR.OPERATION.FILEBLANKTEXT,extension:"txt, ai, docx",extensionErrorText:a.su.CHAR.ERROR["00000074"]},create:function(e,c){var d=this;d.each(function(h,k){var f=a(this);if(!f.is("input[type=file]")){return null}a.extend(this,e,c);var j='<div class="container widget-container text-container file-container">';if(this.fieldLabel!==null){j+='<div class="widget-fieldlabel-wrap '+this.labelCls+'">';j+='<label class="widget-fieldlabel text-fieldlabel">'+this.fieldLabel+"</label>";if(this.fieldLabel!==""){j+='<span class="widget-separator">'+this.separator+"</span>"}j+="</div>"}j+='<div class="file-wrap-outer widget-wrap-outer">';j+='<div class="file-wrap widget-wrap">';j+='<div class="widget-wrap text-wrap">';j+='<span class="text-wrap-before"></span>';j+='<span class="text-wrap">';j+='<label class="file-text text-text '+k.inputCls+'"></label>';j+="</span>";j+='<span class="text-wrap-after"></span>';j+="</div>";j+='<div class="button-container file-button-container inline-block">';j+='<button class="file-button button-button" type="button">';j+='<span class="button-button-before"></span>';j+='<span class="text button-text">'+this.buttonText+"</span>";j+="</button>";j+="</div>";j+="</div>";if(this.tips){j+='<div class="widget-tips textbox-tips '+k.tipsCls+'">';j+='<div class="content tips-content"></div>';j+="</div>"}j+='<div class="widget-error-tips textbox-error-tips '+k.errorTipsCls+'">';j+='<span class="widget-error-tips-delta"></span>';j+='<div class="widget-error-tips-wrap">';j+='<div class="content error-tips-content"></div>';j+="</div>";j+="</div>";j+="</div>";j+="</div>";var g=a(j);f.replaceWith(g);g.find("div.file-wrap").append(f.addClass("file-input").prop("single",true));g.find("div.file-wrap").append('<div class="file-text-hover"></div>')});var b=a(d.parents("div.file-container").get(0));b.delegate("button.file-button","click",function(f){b.find("input.file-input").click()});b.delegate("label.file-text","click",function(f){b.find("button.file-button").click()});b.find("input.file-input").on("change",function(j){var f=a(this),h=f.val();var i=/.+(?=\\)/g;var g=h.toString().match(i);if(g&&g[0]&&g[0].length){g=h.substring(g[0].length+1)}else{g=h}b.find("label.file-text").html(g);b.find("label.file-text").attr("title",g);if(h){d.file("validate")}});d.file("setTips",c.tips);return d},validate:function(h){var h=h||this,c=h.get(0),j=h.val(),k=c.extension.replace(/\s/g,"");var i=k.split(","),b="",g=false;if(j==""){h.file("setError",c.blankText);g=false}else{var d=j.split("."),b=d[d.length-1];for(var f=0,e=i.length;f<e;f++){if(b===i[f]){g=true;break}}if(!g){h.file("setError",c.extensionErrorText)}else{h.file("setNormal")}}h.triggerHandler("ev_validatechange",g);return g}})})(jQuery);