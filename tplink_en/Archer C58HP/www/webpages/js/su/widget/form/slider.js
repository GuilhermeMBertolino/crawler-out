(function(a){a.su.Widget("slider",{defaults:{showPercentage:true,_width:206,increment:5,minValue:0,maxValue:100,range:null,unit:"%",value:50},create:function(g,c){var e=this;e.each(function(l,n){var k=a(n);if(c.width){c._width=c.width;delete c.width}if(n.maxValue<=n.minValue){return}a.extend(n,g,c);if(!n.range){n.range=[n.minValue,n.maxValue]}var j=c.value||k.val()||g.value;var m='<div class="container widget-container slider-container '+n.cls+'">';if(n.fieldLabel!==null){m+='<div class="widget-fieldlabel-wrap '+n.labelCls+'">';m+='<label class="widget-fieldlabel slider-fieldlabel">'+n.fieldLabel+"</label>";if(n.fieldLabel!==""){m+='<span class="widget-separator">'+n.separator+"</span>"}m+="</div>"}m+='<div class="widget-wrap-outer slider-wrap-outer">';m+='<div class="widget-wrap slider-wrap">';m+='<div class="widget-wrap slider-content">';m+='<div class="widget-value slider-value">';m+='<div class="widget-value-inner slider-value-inner">';m+="</div>";m+="</div>";m+="</div>";if(n.showPercentage){m+='<div class="slider-text">';m+='<span class="slider-percentage">'+j+n.unit+"</span>";m+="</div>"}m+="</div>";m+="</div>";m+="</div>";var h=a(m);k.replaceWith(h);h.prepend(k.addClass("hidden"));h.find("div.slider-content").css({width:n._width})});var b=e.closest("div.slider-container");var d=function(h){a("html").off("mousemove",f);a("html").off("mouseup",d)};var f=function(m){m.preventDefault();var n=b.find("div.slider-value");var k=e.get(0);var l=parseInt(k.maxValue,10);var o=parseInt(k.minValue,10);var i=parseInt(k._width,10);var q=parseInt(k.increment,10);var h=m.pageX||m.screenX;var p=(h-n.offset().left);var j=Math.round(p/i*(l));var r=Math.round(j/q)*q;e.slider("setValue",r)};b.delegate("div.slider-value-inner","mousedown",function(h){a("html").on("mousemove",f);a("html").on("mouseup",d)}).delegate("div.slider-value-inner","mouseup",d);return e},getValue:function(b){var b=b||this;return b.val()},setValue:function(j,m){var j=j||this;var b=j.closest("div.slider-container");var g=b.find("div.slider-value");var f=j.get(0);var h=j.val();var m=m[1];var i=parseInt(f.maxValue,10);var k=parseInt(f.minValue,10);var d=parseInt(f.range[1],10);var e=parseInt(f.range[0],10);if(m>d){m=d}else{if(m<e){m=e}}var c=parseInt(f._width,10);var l=Math.round(c/(i)*m);g.css({width:l});b.find("span.slider-percentage").html(m+f.unit);j.val(m);if(h.toString()!==m.toString()){j.trigger("ev_change",[h,m])}return j},reset:function(d){var d=d||this;var f=d.get(0);var e=parseInt(f.minValue,10);var b=parseInt(f.defaultValue,10);var c=b||e;d.slider("setValue",c);return d},setRange:function(c,b){var c=c||this;var f=c.get(0);var b=b[1];var e=parseInt(f.maxValue,10);var d=parseInt(f.minValue,10);if(b[0]<d){b[0]=d}if(b[1]>e){b[1]=e}if(b[0]>b[1]){return}f.range=b;return c}})})(jQuery);