!function(o){o.su.moduleManager.define("mapMesh",{services:["ajax","timer"],deps:["networkMap","navigatorController"],models:[],stores:["oneMeshClientsStore"],views:["mapMeshView"],listeners:{ev_on_launch:function(e,t,n,s,i,r,o){t.getClients()},ev_before_destroy:function(e,t){t.beforeDestroy()}},init:function(e,t,n,s,i,r){this.configViews({id:"mapMeshView",items:[{id:"connected-mesh-grid",configs:{columns:[{dataIndex:"name",cls:"m-hide l-hide xl-hide label-empty"},{dataIndex:"deviceType",width:"8%",cls:"s-hide",renderer:function(e,t){var n="";return(n+='<div class="device-type-container widget-container">')+('<span class="icon '+("icon-"+(e=e.toLowerCase()))+' "></span>')+"</div>"}},{text:o.su.CHAR.NETWORK_MAP.TYPE,dataIndex:"model"},{text:o.su.CHAR.ONE_MESH.NAME,cls:"s-hide",dataIndex:"name"},{text:o.su.CHAR.NETWORK_MAP.MAC_ADDRESS,dataIndex:"mac"},{text:o.su.CHAR.ONE_MESH.LOCATION,dataIndex:"location",renderer:function(e,t){return e=e.toUpperCase(),o.su.CHAR.ONE_MESH[e]||o.su.CHAR.ONE_MESH.OTHER}},{text:o.su.CHAR.NETWORK_STATUS.STATUS,dataIndex:"status",cls:"mesh-th-status",renderer:function(e,t){return o.su.CHAR.NETWORK_STATUS[e.toUpperCase()]||"--"}}]}}]}),this.control({}),this.listen({})}},function(t,n,e,s,i,r){return{getClients:function(){r.timer.setInterval(t,function(){"mesh"==i.networkMap.getCurrentModule()&&t.loadMeshClientStore({success:function(e){i.networkMap.trigger("ev_mesh_number_changed",e.length),t.checkLength(e.length)}})},10007,!0)},loadMeshClientStore:function(e){s.oneMeshClientsStore.load({data:{operation:"read"},success:(e=e||{}).success,fail:e.fail,error:e.error})},checkLength:function(e){0==e?(n.mapMeshView.meshGrid.hide(),n.mapMeshView.meshTips.show()):(n.mapMeshView.meshGrid.show(),n.mapMeshView.meshTips.hide())},beforeDestroy:function(){clearInterval(null)}}})}(jQuery);