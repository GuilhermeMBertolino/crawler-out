<div class="titleBar">
    <h1>
        <script type="text/html" class="title-string">
            <%=$.tpLang.parentCtrl_nstr.et%>
        </script>
    </h1>
</div>
<div class="section-container mt15">
    <div class="section-box">
        <div>
            <span>
                <script type="text/html" class="title-string">
                    <%=$.tpLang.parentCtrl_nstr.et%>
                </script>
            </span>
        </div>
        <input type='checkbox' id='pCtrl' />
    </div>
</div>
<div class="section-container mtNo">
    <div class="section-box">
        <a class="turn-page" url="deviceControl.mobile.htm">
            <span>
                <script type="text/html" class="title-string">
                    <%=$.tpLang.parentCtrl_nstr.t_title2%>
                </script>
            </span>
        </a>
    </div>
</div>
<div class="section-container mtNo">
    <div class="section-box">
        <a class="turn-page" url="contentRestrict.mobile.htm">
            <span>
                <script type="text/html" class="title-string">
                    <%=$.tpLang.parentCtrl_nstr.t_title3%>
                </script>
            </span>
        </a>
    </div>
</div>


<script type="text/javascript">
    (function() {
        (function() {
            $.tpLocal('title-string', $.tpLang);

            $('.titleBar').titleBar();
            $('#pCtrl').flipSwitch({
                'hasTitle': true,
                'title': $.tpLang.parentCtrl_nstr.et
            }).bind('on.flipSwitch', function(e) {
                $.startWaitingMobile($.tpLang.m_str.waiting);
                $.act(ACT_SET, FIREWALL, null, null, ["enalbeParentCtrl=1"]);
                $.exe(function(err) {
                    $.stopWaitingMobile();
                    if (!err) {
                        $.stopWaitingMobile();
                    }
                });

            }).bind('off.flipSwitch', function(e) {
                $.startWaitingMobile($.tpLang.m_str.waiting);
                $.act(ACT_SET, FIREWALL, null, null, ["enalbeParentCtrl=0"]);
                $.exe(function(err) {
                    $.stopWaitingMobile();
                    if (!err) {
                        $.stopWaitingMobile();
                    }
                });
            });

            $.each($('.turn-page'), function() {
                $.initTurnPage(this);
            });
        })();

        init();

        function init() {
            var fwInfo = $.act(ACT_GET, FIREWALL, null, null, ["enalbeParentCtrl", "parentCtrlMode"]);
            if (!$.exe()) {
                if (fwInfo.enalbeParentCtrl == 1) {
                    $("#pCtrl").parent().addClass("toggleOn");
                } else {
                    $("#pCtrl").parent().removeClass("toggleOn");
                }
            }
        }
    })();
</script>
