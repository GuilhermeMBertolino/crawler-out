<style type="text/css">
#logout {
    padding-left: 0;
}
#logout .section-box {
    text-align: center;
    color: rgb(220, 64, 64);
}
</style>
<div>
    <div class="titleBar">
        <h1>System Tools</h1>
    </div>

    <!--     <div class="section-container mt15">
        <div class="section-box">
            <a class="turn-page" url="ledControl.mobile.htm" ><span>LED Control</span></a>
        </div>
    </div> -->
    <div class="link-list mt15">
        <div class="section-container">
        <div class="section-box">
                <a class="turn-page" url="timeSettings.mobile.htm">
                    <span>
                <script type="text/html" class="pages-name">
                    <%=$.tpLang.menu_str.time%>
                </script>
                    </span>
                </a>
        </div>
    </div>
    <div class="section-container mtNo">
        <div class="section-box">
                <a class="turn-page" url="administration.mobile.htm">
                    <span>
                <script type="text/html" class="pages-name">
                    <%=$.tpLang.menu_str.admin%>
                </script>
                    </span>
                </a>
        </div>
    </div>
    </div>
    <div class="link-list mt15">
        <div id="restore" class="section-container ">
        <div class="section-box">
            <span>
                <script type="text/html" class="pages-name">
                    <%=$.tpLang.m_str.restore%>
                </script>
            </span>
        </div>
    </div>
    <div id="reboot" class="section-container mtNo">
        <div class="section-box">
            <span>
                <script type="text/html" class="pages-name">
                    <%=$.tpLang.m_str.reboot%>
                </script>
            </span>
        </div>
    </div>
    </div>

    <div class="link-list mt15">
        <div id="logout" class="section-container">
        <div class="section-box">
            <span>
                <script type="text/html" class="pages-name">
                    <%=$.tpLang.s_str.logout%>
                </script>
            </span>
        </div>
    </div>
    </div>
</div>

<script type="text/javascript">
(function() {
    $.tpLocal('pages-name', $.tpLang);
    $('.titleBar').titleBar();
    $('.titleBar').titleBar('title', $.tpLang.menu_str.tools);

    $.each($('.turn-page'), function() {
        $.initTurnPage(this);
    });

    $('#reboot').on('click', function() {
        $.confirmMobile($.tpLang.c_str.creboot, function() {
            $.clearAsync();
            $.guageMobile("<span>" + $.tpLang.s_str.wait_reboot + "</span>", 100, $.guageInterval, function() {
                $.refresh();
            });
            $.act(ACT_OP, ACT_OP_REBOOT);
            $.exe(true);
        });
    });

    $('#logout').on('click', function() {
        $.confirmMobile($.tpLang.c_str.logout, function() {
            $.act(ACT_CGI, '/cgi/logout');
            $.exe();
            //$.deleteCookie('Authorization');
            $.deleteCookie('UserChange');
            $.refresh();
        });
    });

    $('#restore').on('click', function() {
        $.confirmMobile($.tpLang.c_str.cdefaults, function() {
            $.act(ACT_OP, ACT_OP_FACTORY_RESET);
            $.exe(function(err) {
                if (!err) {
                    $.guageMobile("<span>" + $.tpLang.s_str.wait_reboot + "</span>", 100, $.guageInterval, function() {
                        var ret = location.href.match(/(https?):\/\/([^:\/]+)(:\d+)?\/?([^?]*)/);
                        location.href = ret[1] + '://' + ret[2];
                    });
                }
                $.act(ACT_OP, ACT_OP_REBOOT);
                $.exe(function(err) {
                    if (!err) $.deleteCookie("Authorization");
                }, true);
            });
        })
    });
})();
</script>
