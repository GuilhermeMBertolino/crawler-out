<h3 id="et">Advanced Settings</h3>

<div class="content-container">
    <div class="mode-change" id="ad_5g">
        <span class="mode-select T_modeghz24">2.4GHz</span>
        <span class="T_modeghz5">5GHz</span>
    </div>
    <form class="pure-form pure-form-aligned">
        <div class="pure-control-group">
            <b class="xxl" id="t_beacon_2g">Beacon Interval:</b>
            <input type="text" maxlength="4" class="tp-input-text" id="beaconInterval_2g">
            <span class="textbox-tips">(25-1000)</span>
        </div>
        <div class="pure-control-group">
            <b class="xxl" id="t_rts_2g">RTS Threshold:</b>
            <input type="text" maxlength="4" class="tp-input-text" id="rts_2g">
            <span class="textbox-tips">(1-2346)</span>
        </div>
        <div class="pure-control-group nd">
            <b class="xxl" id="t_frag_2g">Fragmentation Threshold:</b>
            <input type="text" maxlength="4" class="tp-input-text" id="frag_2g">
            <span class="textbox-tips">(256-2346)</span>
        </div>
        <div class="pure-control-group">
            <b class="xxl" id="t_dtim_2g">DTIM Interval:</b>
            <input type="text" maxlength="4" class="tp-input-text" id="dtim_2g">
            <span class="textbox-tips">(1-255)</span>
        </div>
        <div class="pure-control-group">
            <b class="xxl" id="t_time_2g">Group Key Update Period:</b>
            <input type="text" maxlength="4" class="tp-input-text" id="keyUpdate_2g">
            <span class="textbox-tips T_seconds">seconds</span>
        </div>
        <div class="part-separate">
            <b class="xxl" id="t_wmm_2g">WMM Feature:</b>
            <input type="checkbox" id="wmm_2g">
            <label id="t_enwmm_2g">Enable WMM</label>
        </div>
        <div>
            <b class="xxl" id="t_sgi_2g">Short GI Feature:</b>
            <input type="checkbox" id="gi_2g">
            <label id="t_ensgi_2g">Enable Short GI</label>
        </div>
        <div>
            <b class="xxl" id="t_iso_2g">AP Isolation Feature:</b>
            <input type="checkbox" id="apIso_2g">
            <label id="t_eniso_2g">Enable AP Isolation</label>
        </div>
        <div style="height:36px">
        
        
        </div>
        <button type="submit" class="green T_save" id="wlAdvSave_2g">Save</button>
    </form>
    <form class="pure-form pure-form-aligned">
        <div class="pure-control-group">
            <b class="xxl" id="t_beacon_5g">Beacon Interval:</b>
            <input type="text" maxlength="4" class="tp-input-text" id="beaconInterval_5g">
            <span class="textbox-tips">(25-1000)</span>
        </div>
        <div class="pure-control-group">
            <b class="xxl" id="t_rts_5g">RTS Threshold:</b>
            <input type="text" maxlength="4" class="tp-input-text" id="rts_5g">
            <span class="textbox-tips">(1-2346)</span>
        </div>
        <div class="pure-control-group nd">
            <b class="xxl" id="t_frag_5g">Fragmentation Threshold:</b>
            <input type="text" maxlength="4" class="tp-input-text" id="frag_5g">
            <span class="textbox-tips">(256-2346)</span>
        </div>
        <div class="pure-control-group">
            <b class="xxl" id="t_dtim_5g">DTIM Interval:</b>
            <input type="text" maxlength="4" class="tp-input-text" id="dtim_5g">
            <span class="textbox-tips">(1-255)</span>
        </div>
        <div class="pure-control-group">
            <b class="xxl" id="t_time_5g">Group Key Update Period:</b>
            <input type="text" maxlength="4" class="tp-input-text" id="keyUpdate_5g">
            <span class="textbox-tips T_seconds">seconds</span>
        </div>
        <div class="part-separate">
            <b class="xxl" id="t_wmm_5g">WMM Feature:</b>
            <input type="checkbox" id="wmm_5g">
            <label id="t_enwmm_5g">Enable WMM</label>
        </div>
        <div>
            <b class="xxl" id="t_sgi_5g">Short GI Feature:</b>
            <input type="checkbox" id="gi_5g">
            <label id="t_ensgi_5g">Enable Short GI</label>
        </div>
        <div>
            <b class="xxl" id="t_iso_5g">AP Isolation Feature:</b>
            <input type="checkbox" id="apIso_5g">
            <label id="t_eniso_5g">Enable AP Isolation</label>
        </div>
        
		<div style="display:none">
            <b class="xxl" id="t_bf_5g">Tx Beamforming:</b>
            <input type="checkbox" id="bfEn_5g">
            <label id="t_enbf_5g">Enable</label>
        </div>
        <div id="mu_div" style="display:none">
            <b class="xxl" id="t_mu_5g">MU MIMO:</b>
            <input type="checkbox" id="muEn_5g">
            <label id="t_enmu_5g">Enable</label>
        </div>
        <button type="submit" class="green T_save" id="wlAdvSave_5g">Save</button>
    </form>
</div>

<div id="wds_div" class="content-container">
<h3>WDS</h3>
    <div id="wds_mode" class="mode-change">
        <span class="mode-select T_modeghz24">2.4GHz</span>
        <span class="T_modeghz5">5GHz</span>
    </div>
    <form class="pure-form pure-form-aligned">
        <div>
            <b id="t_wds_2g">WDS Bridging:</b>
            <input type="checkbox" id="wds_2g">
            <label id="t_enwds_2g">Enable WDS Bridging</label>
        </div>
        <div id="wdsInfo_2g">
            <div class="pure-control-group inline">
                <b class="T_c_ssid_bridge">Name(SSID):</b>
                <input type="text" maxlength="32" oninput="$.maxlength(this)" class="tp-input-text" id="wdsSsid_2g">
            </div>
            <button type="submit" class="blue inline T_scan" id="survey_2g">Survey</button>
            <div class="pure-control-group">
                <b class="T_c_mac_bridge">MAC Address(to be bridged):</b>
                <input type="text" maxlength="17" class="tp-input-text mac-address" id="wdsMac_2g">
            </div>
            <div>
                <b class="T_wlsec">Security:</b>
                <input type="radio" name="security_2g" id="noSec_2g" checked="checked">
                <label class="T_wldissec">No Security</label>
                <input type="radio" name="security_2g" id="wpaSec_2g">
                <label class="T_wlsecpersonal">WPA/WPA2 Personal</label>
                <input type="radio" name="security_2g" id="wepSec_2g">
                <label>WEP</label>
            </div>
            <div id="hideWpaSec_2g" class="nd">
                <div>
                    <b class="T_version">Version:</b>
                    <input type="radio" name="version_2g" id="wpaVersion_2g">
                    <label>WPA-PSK</label>
                    <input type="radio" name="version_2g" id="wpa2Version_2g" checked="checked">
                    <label>WPA2-PSK</label>
                </div>

                <div>
                    <b class="T_encryption">Encryption:</b>
                    <input type="radio" name="encryption_2g" id="tkipEncryption_2g">
                    <label>TKIP</label>
                    <input type="radio" name="encryption_2g" id="aesEncryption_2g" checked="checked">
                    <label>AES</label>
                </div>
                <div class="pure-control-group">
                    <label class="label_title"><b class="T_wlpwd">Wireless Password:</b>
                    </label>
                    <input type="text" class="tp-input-text" id="passwd_2g">
                </div>
            </div>
            <div id="hideWep_2g" class="">
                <div>
                    <b class="T_type">Type:</b>
                    <input type="radio" name="wepType_2g" id="typeOpenSys_2g" checked="checked">
                    <label class="T_opensys">Open System</label>
                    <input type="radio" name="wepType_2g" id="typeSharedKey_2g">
                    <label class="T_sharekey">Shared Key</label>
                </div>
                <div>
                    <b class="T_weptype">Key Format:</b>
                    <input type="radio" name="keyFormat_2g" id="keyFormatAscii_2g" checked="checked">
                    <label>ASCII</label>
                    <input type="radio" name="keyFormat_2g" id="keyFormatHex_2g">
                    <label class="T_hex">Hexadecimal</label>
                </div>
                <b class="T_wepkeyindex">Key Index:</b>
                <select id="wepShareKey_2g" class="xl">
                    <option value="1" id="key1_2g" class="T_wepkey1">Key 1</option>
                    <option value="2" id="key2_2g" class="T_wepkey2">Key 2</option>
                    <option value="3" id="key3_2g" class="T_wepkey3">key 3</option>
                    <option value="4" id="key4_2g" class="T_wepkey4">Key 4</option>
                </select>

                <div>
                    <b class="T_keyvalue">Key Value:</b>
                    <input type="text" class="tp-input-text xl" name="wepKeyValue_2g" id="wepKeyValue_2g">
                </div>
            </div>
        </div>
        <button type="submit" class="green T_save" id="wdsSave_2g">Save</button>
    </form>
    <form class="pure-form pure-form-aligned">
        <div>
            <b id="t_wds_5g">WDS Bridging:</b>
            <input type="checkbox" id="wds_5g">
            <label id="t_enwds_5g">Enable WDS Bridging</label>
        </div>
        <div id="wdsInfo_5g">
            <div class="pure-control-group inline">
                <b class="T_c_ssid_bridge">Name(SSID):</b>
                <input type="text" maxlength="32" oninput="$.maxlength(this)" class="tp-input-text" id="wdsSsid_5g">
            </div>
            <button type="submit" class="blue inline T_scan" id="survey_5g">Survey</button>
            <div class="pure-control-group">
                <b class="T_c_mac_bridge">MAC Address(to be bridged):</b>
                <input type="text" maxlength="17" class="tp-input-text mac-address" id="wdsMac_5g">
            </div>
            <div>
                <b class="T_wlsec">Security:</b>
                <input type="radio" name="security_5g" id="noSec_5g" checked="checked">
                <label class="T_wldissec">No Security</label>
                <input type="radio" name="security_5g" id="wpaSec_5g">
                <label class="T_wlsecpersonal">WPA/WPA2 Personal</label>
                <input type="radio" name="security_5g" id="wepSec_5g">
                <label>WEP</label>
            </div>
            <div id="hideWpaSec_5g" class="nd">
                <div>
                    <b class="T_version">Version:</b>
                    <input type="radio" name="version_5g" id="wpaVersion_5g">
                    <label>WPA-PSK</label>
                    <input type="radio" name="version_5g" id="wpa2Version_5g" checked="checked">
                    <label>WPA2-PSK</label>
                </div>

                <div>
                    <b class="T_encryption">Encryption:</b>
                    <input type="radio" name="encryption_5g" id="tkipEncryption_5g">
                    <label>TKIP</label>
                    <input type="radio" name="encryption_5g" id="aesEncryption_5g" checked="checked">
                    <label>AES</label>
                </div>
                <div class="pure-control-group">
                    <label class="label_title"><b class="T_wlpwd">Wireless Password:</b>
                    </label>
                    <input type="text" class="tp-input-text" id="passwd_5g">
                </div>
            </div>
            <div id="hideWep_5g" class="">
                <div>
                    <b class="T_type">Type:</b>
                    <input type="radio" name="wepType_5g" id="typeOpenSys_5g" checked="checked">
                    <label class="T_opensys">Open System</label>
                    <input type="radio" name="wepType_5g" id="typeSharedKey_5g">
                    <label class="T_sharekey">Shared Key</label>
                </div>
                <div>
                    <b class="T_weptype">Key Format:</b>
                    <input type="radio" name="keyFormat_5g" id="keyFormatAscii_5g" checked="checked">
                    <label>ASCII</label>
                    <input type="radio" name="keyFormat_5g" id="keyFormatHex_5g">
                    <label class="T_hex">Hexadecimal</label>
                </div>
                <b class="T_wepkeyindex">Key Index:</b>
                <select id="wepShareKey_5g" class="xl">
                    <option value="1" id="key1_5g" class="T_wepkey1">Key 1</option>
                    <option value="2" id="key2_5g" class="T_wepkey2">Key 2</option>
                    <option value="3" id="key3_5g" class="T_wepkey3">key 3</option>
                    <option value="4" id="key4_5g" class="T_wepkey4">Key 4</option>
                </select>

                <div>
                    <b class="T_keyvalue">Key Value:</b>
                    <input type="text" class="tp-input-text xl" name="wepKeyValue_5g" id="wepKeyValue_5g">
                </div>
            </div>
        </div>
        <button type="submit" class="green T_save" id="wdsSave_5g">Save</button>
    </form>
</div>
<h3>WPS</h3>
<div class="content-container">
    <form class="pure-form pure-form-aligned">
        <div>
            <b>WPS:</b>
            <input type="checkbox" id="wps_en">
            <label class="T_t_ensgi_2g">enable</label>
        </div>
    </form>
    <button type="submit" class="green T_save" id="wpsSave">Save</button>
</div>
<script>!function(){function isHex(e){e=e.toLowerCase();for(var a=0;a<e.length;a++)if(!(e.charAt(a)>="0"&&e.charAt(a)<="9"||e.charAt(a)>="a"&&e.charAt(a)<="f"))return $.alert(ERR_WLAN_WDS_HEX_KEY_INVALID),!1;return 0!=parseInt(e,16)||($.alert(ERR_WLAN_WDS_HEX_KEY_OUTRANGE),!1)}function checkValue(e){var a,n=$("#beaconInterval"+e),_=$("#rts"+e),d=($("#frag"+e),$("#dtim"+e)),r=$("#keyUpdate"+e);return(a=$.num(n.prop("value"),[25,1e3],!0))?(a==ERR_NUM_INVAD?$.alert(ERR_WLAN_BEACONINTERVAL_INVAD):a==ERR_NUM_OUTRANGE&&$.alert(ERR_WLAN_BEACONINTERVAL_OUTRANGE),n.focus(),n.select(),!1):(a=$.num(_.prop("value"),[1,2346],!0))?(a==ERR_NUM_INVAD?$.alert(ERR_WLAN_RTSINTERVAL_INVAD):a==ERR_NUM_OUTRANGE&&$.alert(ERR_WLAN_RTSINTERVAL_OUTRANGE),_.focus(),_.select(),!1):(a=$.num(d.prop("value"),[1,255],!0))?(a==ERR_NUM_INVAD?$.alert(ERR_WLAN_DTIMTH_INVAD):a==ERR_NUM_OUTRANGE&&$.alert(ERR_WLAN_DTIMTH_OUTRANGE),d.focus(),d.select(),!1):0==r.val()||!(a=$.num(r.prop("value"),[10,1e4],!0))||(a==ERR_NUM_INVAD?$.alert(CMM_WLAN_INVALID_GROUP_KEY_PERIOD):a==ERR_NUM_OUTRANGE&&$.alert(CMM_WLAN_INVALID_GROUP_KEY_PERIOD),r.focus(),r.select(),!1)}function init(argument){var basicList=$.act(ACT_GL,LAN_WLAN,null,null,["name","X_TP_Band","X_TP_Configuration_Modified","TransmitPowerSupported","TransmitPower","Standard","X_TP_BeaconInterval","X_TP_RTSThreshold","X_TP_FragmentThreshold","X_TP_DTIMFrequency","X_TP_ShortGIEnable","X_TP_IsolateClients","WMMEnable","X_TP_GroupKeyUpdateInterval","SSID","Channel","AutoChannelEnable","SSIDAdvertisementEnabled","Enable","X_TP_Bandwidth","BeaconType","WPAAuthenticationMode","WPAEncryptionModes","IEEE11iEncryptionModes","IEEE11iAuthenticationMode","BasicEncryptionModes"]);if(INCLUDE_LAN_WLAN_WDS||$("#wds_div").addClass("nd"),$.exe()||($.each(basicList,function(){"2.4GHz"==this.X_TP_Band?wlanObj_2g=this:INCLUDE_LAN_WLAN_DUALBAND&&"5GHz"==this.X_TP_Band&&(wlanObj_5g=this)}),INCLUDE_LAN_WLAN_WDS&&(wdsObj_2g=$.act(ACT_GET,LAN_WLAN_WDSBRIDGE,wlanObj_2g.__stack,null,["BridgeEnable","BridgeAddrMode","BridgeBSSID","BridgeSSID","BridgeAuthMode","BridgeEncryptMode","BridgeKey","BridgeWepKeyIndex"])),wpsObj_2g=$.act(ACT_GET,LAN_WLAN_WPS,wlanObj_2g.__stack,null,["Enable"]),INCLUDE_LAN_WLAN_DUALBAND&&(INCLUDE_LAN_WLAN_WDS&&(wdsObj_5g=$.act(ACT_GET,LAN_WLAN_WDSBRIDGE,wlanObj_5g.__stack,null,["BridgeEnable","BridgeAddrMode","BridgeBSSID","BridgeSSID","BridgeAuthMode","BridgeEncryptMode","BridgeKey","BridgeWepKeyIndex"])),INCLUDE_LAN_WLAN_MU_BUTTION&&(muObj=$.act(ACT_GET,LAN_WLAN,wlanObj_5g.__stack,null,["X_TP_TxbfEnable","X_TP_MuEnable"])),wpsObj_5g=$.act(ACT_GET,LAN_WLAN_WPS,wlanObj_5g.__stack,null,["Enable"]))),$.exe()||(initParam(wlanObj_2g,"_2g"),INCLUDE_LAN_WLAN_WDS&&initWDS(wlanObj_2g,wdsObj_2g,"_2g"),INCLUDE_LAN_WLAN_DUALBAND?(initParam(wlanObj_5g,"_5g"),INCLUDE_LAN_WLAN_WDS&&initWDS(wlanObj_5g,wdsObj_5g,"_5g")):($("#ad_5g").addClass("nd"),$("#wds_mode").addClass("nd")),initWPSShow(wpsObj_2g,wlanObj_2g,wpsObj_5g,wlanObj_5g)),void 0!==$.mainParam){var param=new Object;param=$.mainParam,$("#scroll").scrollTop(param.scrollTop),"_5g"==param.band&&($("#wds_mode").find("span.second-mode").trigger("click"),$("#wds_mode").find("span").first().removeClass("mode-select").next().addClass("mode-select")),1==param.wdsExist&&($("#wdsSsid"+param.band).prop("value",param.SSID),$("#wdsMac"+param.band).tpAddress("val",param.BSSID),param.channel==eval("wlanObj"+param.band).channel&&1!=eval("wlanObj"+param.band).autoChannelEnable||$.confirm(n_str.wirelessAdv.t_confirm,function(){$.act(ACT_SET,LAN_WLAN,eval("wlanObj"+param.band).__stack,null,["Channel="+param.channel,"autoChannelEnable=0"]),$.showCover(),$.exe(function(ret){$.hideCover(),ret||(eval("wlanObj"+param.band).channel=param.channel)})},null,param.channel)),1==param.wdsEn?($("#wds"+param.band).prop("checked",!0),$("#wdsInfo"+param.band).show()):($("#wds"+param.band).prop("checked",!1),$("#wdsInfo"+param.band).hide())}}function initParam(e,a){$("#beaconInterval"+a).prop("value",e.X_TP_BeaconInterval),$("#rts"+a).prop("value",e.X_TP_RTSThreshold),$("#frag"+a).prop("value",e.X_TP_FragmentThreshold),$("#dtim"+a).prop("value",e.X_TP_DTIMFrequency),$("#keyUpdate"+a).prop("value",e.X_TP_GroupKeyUpdateInterval),$("#wmm"+a).prop("checked",1==e.WMMEnable),"n"!=e.standard&&"n-only"!=e.standard&&"gn"!=e.standard&&"ac"!=e.standard&&"an"!=e.standard&&"nac"!=e.standard&&"ac-only"!=e.standard||$("#wmm"+a).prop("disabled",!0),$("#gi"+a).prop("checked",1==e.X_TP_ShortGIEnable),$("#apIso"+a).prop("checked",1==e.X_TP_IsolateClients),INCLUDE_LAN_WLAN_MU_BUTTION&&"_5g"==a&&($("#mu_div").show(),$("#muEn_5g").prop("checked",1==muObj.X_TP_MuEnable),$("#bfEn_5g").prop("checked",1==muObj.X_TP_TxbfEnable))}function initWPSShow(e,a,n,_){0==e.enable||INCLUDE_LAN_WLAN_DUALBAND&&0==n.enable?$("#wps_en").prop("checked",!1):$("#wps_en").prop("checked",!0)}function initWDS(e,a,n){if(0==e.enable)return $("#wds"+n).prop("disabled",!0),$("#wds"+n).prop("checked",!1),$("#wdsInfo"+n).hide(),$("#wdsSave"+n).prop("disabled",!0),void $.errorTip("wds"+n,ERR_WLAN_DISABLED);1==a.bridgeEnable?($("#wdsInfo"+n).show(),$("#wds"+n).prop("checked",!0),$("#wdsSsid"+n).prop("value",a.bridgeSSID),$("#wdsMac"+n).tpAddress("val",a.bridgeBSSID),"Open"==a.bridgeAuthMode&&"None"==a.bridgeEncryptMode?$("#noSec"+n).prop("checked",!0):"WEPEncryption"==a.bridgeEncryptMode?($("#wepSec"+n).prop("checked",!0),"SharedAuthentication"==a.bridgeAuthMode?$("#typeSharedKey"+n).prop("checked",!0):(a.bridgeAuthMode="Open")&&$("#typeOpenSys"+n).prop("checked",!0),$("#wepKeyValue"+n).prop("value",a.bridgeKey),5==a.bridgeKey.length||13==a.bridgeKey.length||16==a.bridgeKey.length?$("#keyFormatAscii"+n).prop("checked",!0):10!=a.bridgeKey.length&&26!=a.bridgeKey.length&&32!=a.bridgeKey.length||$("#keyFormatHex"+n).prop("checked",!0),$("#key"+a.bridgeWepKeyIndex+n).prop("selected",!0)):($("#wpaSec"+n).prop("checked",!0),"PSKAuthentication"==a.bridgeAuthMode?$("#wpaVersion"+n).prop("checked",!0):$("#wpa2Version"+n).prop("checked",!0),"TKIPEncryption"==a.bridgeEncryptMode?$("#tkipEncryption"+n).prop("checked",!0):$("#aesEncryption"+n).prop("checked",!0),$("#passwd"+n).prop("value",a.bridgeKey))):($("#wds"+n).prop("checked",!1),$("#wdsInfo"+n).hide())}function wlAdvSave(e,a){var n={};if(0!=checkValue(a))if(n.X_TP_BeaconInterval=parseInt($("#beaconInterval"+a).prop("value"),10),n.X_TP_RTSThreshold=parseInt($("#rts"+a).prop("value"),10),n.X_TP_FragmentThreshold=parseInt($("#frag"+a).prop("value"),10),n.X_TP_DTIMFrequency=parseInt($("#dtim"+a).prop("value"),10),n.X_TP_GroupKeyUpdateInterval=parseInt($("#keyUpdate"+a).prop("value"),10),n.WMMEnable=$("#wmm"+a).prop("data-checked")?1:0,n.X_TP_ShortGIEnable=$("#gi"+a).prop("data-checked")?1:0,n.X_TP_IsolateClients=$("#apIso"+a).prop("data-checked")?1:0,INCLUDE_LAN_WLAN_MU_BUTTION&&"_5g"==a&&(n.X_TP_MuEnable=$("#muEn_5g").prop("data-checked")?1:0,n.X_TP_TxbfEnable=$("#bfEn_5g").prop("data-checked")?1:0),$.act(ACT_SET,LAN_WLAN,e.__stack,null,n),INCLUDE_LAN_WLAN_MSSID){var _=$.act(ACT_GS,LAN_WLAN_MSSIDENTRY,null,e.__stack,["IsolateClients","name"]);if(INCLUDE_LAN_WLAN_GUESTNETWORK)var d=$.act(ACT_GET,LAN_WLAN_GUESTNET,e.__stack,null,["name"]);$.showGuage({rate:3,updateInterval:900,callback_complete:function(){$.each(_,function(e,a){INCLUDE_LAN_WLAN_GUESTNETWORK&&d.name==this.name||$.act(ACT_SET,LAN_WLAN_MSSIDENTRY,this.__stack,null,["IsolateClients="+n.X_TP_IsolateClients])}),$.exe(function(e){$.removeLoading()})}})}else $.showGuage({rate:3,updateInterval:900,callback_complete:function(){$.removeLoading()}})}function checkWds(wdsObj,band){var ssidLen=$.realLen($("#wdsSsid"+band).prop("value"));if(ssidLen<=0)return $.alert(ERR_WLAN_WDS_SSID_IS_EMPTY),$("#wdsSsid"+band).focus().select(),!1;if(ssidLen>32)return $.alert(ERR_WLAN_WDS_SSID_LEN_OUTRANGE),$("#wdsSsid"+band).focus().select(),!1;var bssid=$("#wdsMac"+band).tpAddress("val");if(0==bssid.length)return $.alert(ERR_WLAN_WDS_BSSID_IS_EMPTY),$("#wdsMac"+band).tpAddress("focus"),!1;if($.mac(bssid,!0))return $.alert(ERR_WLAN_WDS_BSSID_INVALID),$("#wdsMac"+band).tpAddress("focus"),!1;if(1==$("#wepSec"+band).prop("checked")){var wepKey=$("#wepKeyValue"+band).prop("value");if(1==$("#keyFormatAscii"+band).prop("checked")){if(5!=wepKey.length&&13!=wepKey.length&&16!=wepKey.length)return $.alert(ERR_WLAN_WDS_ASCII_KEY_OUTRANGE),!1;if($.asc(wepKey,!0))return $.alert(ERR_WLAN_WDS_ASCII_KEY_INVALID),!1}else if(1==$("#keyFormatHex"+band).prop("checked")){if(10!=wepKey.length&&26!=wepKey.length&&32!=wepKey.length)return $.alert(ERR_WLAN_WDS_HEX_KEY_OUTRANGE),!1;if(!isHex(wepKey))return!1}}else if(1==$("#wpaSec"+band).prop("checked")){var wpaKey=$("#passwd"+band).prop("value");if(wpaKey.length>64||wpaKey.length<8)return $.alert(ERR_WLAN_WDS_PSK_OUTRANGE),!1;if(64==wpaKey.length){if(!isHex(wpaKey))return!1}else if($.asc(wpaKey,!0))return $.alert(ERR_WLAN_WDS_ASCII_KEY_INVALID),!1}return null==$.mainParam||1!=$.mainParam.wdsExist||$.mainParam.band!=band||$.mainParam.channel==eval("wlanObj"+band).channel||($.alert(ERR_WLAN_WDS_CHANNEL,$.mainParam.channel),!1)}function wdsSave(e,a){if(1==$("#wds"+a).prop("data-checked")&&0==checkWds(e,a))return!1;var n,_,d,r;n=$("#wds"+a).prop("data-checked")?1:0,1==$("#noSec"+a).prop("checked")?(_="Open",d="None",r=""):1==$("#wepSec"+a).prop("checked")?(d="WEPEncryption",1==$("#typeOpenSys"+a).prop("checked")?_="Open":1==$("#typeSharedKey"+a).prop("checked")&&(_="SharedAuthentication"),r=$("#wepKeyValue"+a).prop("value")):1==$("#wpaSec"+a).prop("checked")&&(1==$("#wpaVersion"+a).prop("checked")?_="PSKAuthentication":1==$("#wpa2Version"+a).prop("checked")&&(_="PSK2Authentication"),1==$("#tkipEncryption"+a).prop("checked")?d="TKIPEncryption":1==$("#aesEncryption"+a).prop("checked")&&(d="AESEncryption"),r=$("#passwd"+a).prop("value")),1==n?$.act(ACT_SET,LAN_WLAN_WDSBRIDGE,e.__stack,null,["BridgeEnable="+n,"BridgeBSSID="+$("#wdsMac"+a).tpAddress("val"),"BridgeSSID="+$("#wdsSsid"+a).prop("value"),"BridgeAuthMode="+_,"BridgeEncryptMode="+d,"BridgeKey="+r,"BridgeWepKeyIndex="+$("#wepShareKey"+a).data("value")]):$.act(ACT_SET,LAN_WLAN_WDSBRIDGE,e.__stack,null,["BridgeEnable="+n]),$.exe(function(){$.removeLoading()})}function surveyAp(e,a){$.act(ACT_OP,ACT_OP_WLAN_SCAN,e.__stack);var n={};n.wdsEn=$("#wds"+a).prop("data-checked")?1:0,n.scrollTop=$("#scroll").scrollTop(),$.exe(function(e){$.removeLoading(),e||("_2g"==a?$.loadMain("wlScan_2G.htm",n):$.loadMain("wlScan_5G.htm",n))})}var wlanObj_2g,wlanObj_5g,wdsObj_2g,wdsObj_5g,wpsObj_2g,wpsObj_5g,muObj;$("#wds_2g").on("click.wlAdv",function(e){$("#wds_2g").prop("data-checked")?$("#wdsInfo_2g").show("fast"):$("#wdsInfo_2g").hide("fast")}),$("#wds_5g").on("click.wlAdv",function(e){$("#wds_5g").prop("data-checked")?$("#wdsInfo_5g").show("fast"):$("#wdsInfo_5g").hide("fast")}),$("#wlAdvSave_2g").on("click.wlAdv",function(e){$.addLoading($(this)),wlAdvSave(wlanObj_2g,"_2g")}),$("#wlAdvSave_5g").on("click.wlAdv",function(e){$.addLoading($(this)),wlAdvSave(wlanObj_5g,"_5g")}),$("#noSec_2g").on("click.wlAdv",function(e){$("#hideWpaSec_2g").hide("fast"),$("#hideWep_2g").hide("fast")}),$("#noSec_5g").on("click.wlAdv",function(e){$("#hideWpaSec_5g").hide("fast"),$("#hideWep_5g").hide("fast")}),$("#wpaSec_2g").on("click.wlAdv",function(e){$("#hideWpaSec_2g").show("fast"),$("#hideWep_2g").hide("fast")}),$("#wpaSec_5g").on("click.wlAdv",function(e){$("#hideWpaSec_5g").show("fast"),$("#hideWep_5g").hide("fast")}),$("#wepSec_2g").on("click.wlAdv",function(e){$("#hideWpaSec_2g").hide("fast"),$("#hideWep_2g").show("fast")}),$("#wepSec_5g").on("click.wlAdv",function(e){$("#hideWpaSec_5g").hide("fast"),$("#hideWep_5g").show("fast")}),$("#survey_2g").on("click.wlAdv",function(e){$.addLoading($(this)),surveyAp(wlanObj_2g,"_2g")}),$("#survey_5g").on("click.wlAdv",function(e){$.addLoading($(this)),surveyAp(wlanObj_5g,"_5g")}),$("#wdsSave_2g").on("click.wlAdv",function(){$.addLoading($(this)),wdsSave(wdsObj_2g,"_2g")}),$("#wdsSave_5g").on("click.wlAdv",function(){$.addLoading($(this)),wdsSave(wdsObj_5g,"_5g")}),$("#wpsSave").on("click",function(){$.addLoading($(this));var e=1==$("#wps_en").prop("data-checked")?1:0;$.act(ACT_SET,LAN_WLAN_WPS,wlanObj_2g.__stack,null,["Enable="+e]),INCLUDE_LAN_WLAN_DUALBAND&&$.act(ACT_SET,LAN_WLAN_WPS,wlanObj_5g.__stack,null,["Enable="+e]),$.exe(function(a){a?($.act(ACT_SET,LAN_WLAN_WPS,wlanObj_2g.__stack,null,["Enable="+(e?0:1)]),INCLUDE_LAN_WLAN_DUALBAND&&$.act(ACT_SET,LAN_WLAN_WPS,wlanObj_5g.__stack,null,["Enable="+(e?0:1)])):1==e&&($.act(ACT_SET,LAN_WLAN,wlanObj_2g.__stack,null,["SSIDAdvertisementEnabled=1"]),INCLUDE_LAN_WLAN_DUALBAND&&$.act(ACT_SET,LAN_WLAN,wlanObj_5g.__stack,null,["SSIDAdvertisementEnabled=1"])),$.exe(function(e){e||$.removeLoading()})})}),$.tpInit(init)}()</script>
