<script language="javascript">function doEdit(n,s){for(var t=0;t<$.wd.conn.length;t++)if($.wd.conn[t].obj.__stack==s&&(1==n&&$.wd.conn[t].type.indexOf("ppp")<0||2==n&&$.wd.conn[t].type.indexOf("ppp")>=0||3==n&&"l2tp"==$.wd.conn[t].type||4==n&&"pptp"==$.wd.conn[t].type)){$.wd.editIndex=t;break}$.loadPage("divPage","div.htm")}function doDel(n,s){var t=s;$.confirm(c_str.del_con,function(){$.showCover(),$.lock();var s=!1,a=t.slice();a[2]=0;var i=$.act(ACT_GET,WAN_CONN_DEVICE,a,null,["WANIPConnectionNumberOfEntries","WANPPPConnectionNumberOfEntries"]);$.exe(function(c){c?$.hideCover():+i.WANIPConnectionNumberOfEntries+ +i.WANPPPConnectionNumberOfEntries==1&&(s=!0),1==n?$.act(ACT_DEL,WAN_IP_CONN,t,null):2==n?$.act(ACT_DEL,WAN_PPP_CONN,t,null):3==n?$.act(ACT_DEL,WAN_L2TP_CONN,t,null):4==n&&$.act(ACT_DEL,WAN_PPTP_CONN,t,null),(s||3==n||4==n)&&$.act(ACT_DEL,WAN_CONN_DEVICE,a,null),$.exe(function(n){n||($.hideCover(),$.reload())})})})}function doDisConn(n,s){var t=s;1==n?($.act(ACT_OP,ACT_OP_DHCP_RELEASE_BY_USER,t),$.act(ACT_OP,ACT_OP_WAN6_IP_DISCONN_BY_USER,t)):2==n?($.act(ACT_OP,ACT_OP_PPP_DISCONN,t),$.act(ACT_OP,ACT_OP_WAN6_PPP_DISCONN,t)):3==n?$.act(ACT_OP,ACT_OP_L2TP_DISCONN,t):4==n&&$.act(ACT_OP,ACT_OP_PPTP_DISCONN,t),$.exe()||$.timeout(function(){$.reload()},1500)}function doConn(n,s){var t=s;1==n?($.act(ACT_OP,ACT_OP_DHCP_RENEW_BY_USER,t),$.act(ACT_OP,ACT_OP_WAN6_IP_CONN_BY_USER,t)):2==n?($.act(ACT_OP,ACT_OP_PPP_CONN,t),$.act(ACT_OP,ACT_OP_WAN6_PPP_CONN,t)):3==n?$.act(ACT_OP,ACT_OP_L2TP_CONN,t):4==n&&$.act(ACT_OP,ACT_OP_PPTP_CONN,t),$.exe()||$.timeout(function(){$.reload()},1500)}function isSpecialConnection(n){return!(!INCLUDE_IPTV||"iptv"!=n.name&&"ewan_iptv"!=n.name)}function initSpecialConnection(){var n=$.act(ACT_GL,WAN_IP_CONN,null,null,["name"]),s=$.act(ACT_GL,WAN_PPP_CONN,null,null,["name"]);$.exe()||($.merge(n,s),$.each(n,function(){1==isSpecialConnection(this)&&specialConnectionList.push(this)}))}function init(){INCLUDE_3G4G_BACKUP||($("#check_ping").addClass("nd"),$("#lteBackup").addClass("nd"),$("#lteBackup_space").addClass("nd"),$("#lteBackup_ping").addClass("nd"),$("#detection").addClass("nd"),$("#DNS").addClass("nd"),$("#ipv4_ping").addClass("nd"),$("#ipv6_ping").addClass("nd"),$("#bSave").addClass("nd")),$("#scroll").scrollTop(0),initSpecialConnection(),INCLUDE_CHECK_WANALIVE_WITH_PING&&initLteBackup()}function initLteBackup(){sysModeObj=$.act(ACT_GET,SYS_MODE,null,null,null),$.exe(),$("#check_ping").removeClass("nd"),$("#lteBackup_ping").removeClass("nd"),$("#lteBackup_ping").removeClass("off"),$("#lteBackup_ping").removeClass("on"),1==sysModeObj.lteBackupEnable?($("#lteBackup_ping").addClass("on"),$("#lteBackup_en_ping").addClass("selected"),$("#detection").removeClass("nd"),$("#DNS").removeClass("nd"),$("#dns").val(sysModeObj.DNS),$("#bSave").removeClass("nd"),0==sysModeObj.detectionMode?$("#single_dect").prop("checked","checked"):$("#dual_dect").prop("checked","checked")):($("#lteBackup_ping").addClass("off"),$("#lteBackup_dis_ping").addClass("selected"),$("#detection").addClass("nd"),$("#ipv4_ping").addClass("nd"),$("#ipv6_ping").addClass("nd"),$("#DNS").addClass("nd"),$("#bSave").addClass("nd"))}function initTable(){var n,s,t,a=new Array,i=$.act(ACT_GL,WAN_COMMON_INTF_CFG,null,null,["WANAccessType"]);if("DSL"==$.sysMode){var c={},e=$.act(ACT_GL,WAN_DSL_LINK_CFG,null,null);INCLUDE_VDSLWAN?c=$.act(ACT_GL,WAN_DSL_INTF_CFG,null,null,["status","linkEncapsulationUsed"]):($("#xDslTip").addClass("nd"),c=$.act(ACT_GL,WAN_DSL_INTF_CFG,null,null,["status"]))}else if("ETH"==$.sysMode)var o=$.act(ACT_GL,WAN_ETH_INTF,null,null,null),_=$.act(ACT_GL,WAN_ETH_LINK_CFG,null,null);if(INCLUDE_IPV6&&$("#t_ipvx").removeClass("nd"),INCLUDE_IPTV)$.act(ACT_GET,DSL_IPTV_CFG,null,null,["iptvVPI","iptvVCI"]);INCLUDE_3G4G_BACKUP&&!INCLUDE_CHECK_WANALIVE_WITH_PING&&(sysModeObj=$.act(ACT_GET,SYS_MODE,null,null,["lteBackupEnable"]));var d=$.act(ACT_GL,WAN_IP_CONN,null,null),l=$.act(ACT_GL,WAN_PPP_CONN,null,null);if(INCLUDE_L2TP)var p=$.act(ACT_GL,WAN_L2TP_CONN,null,null);if(INCLUDE_PPTP)var C=$.act(ACT_GL,WAN_PPTP_CONN,null,null);var r=$.act(ACT_GET,L3_FORWARDING,null,null,["__ifAliasName"]);if(INCLUDE_IPV6)var T=$.act(ACT_GET,L3_IP6_FORWARDING,null,null,["__ifAliasName"]);$.exe(function(u){if(!u){if(INCLUDE_3G4G_BACKUP&&!INCLUDE_CHECK_WANALIVE_WITH_PING&&($("#lteBackup").removeClass("nd"),$("#lteBackup_space").removeClass("nd"),$("#lteBackup").removeClass("off"),$("#lteBackup").removeClass("on"),1==sysModeObj.lteBackupEnable?($("#lteBackup").addClass("on"),$("#lteBackup_en").addClass("selected")):($("#lteBackup").addClass("off"),$("#lteBackup_dis").addClass("selected"))),$.each(i,function(){("DSL"==$.sysMode&&"DSL"==this.WANAccessType||"ETH"==$.sysMode&&"Ethernet"==this.WANAccessType)&&($.wd.pStk=this.__stack,$.wd.l3ForwardingObj.__ifAliasName=r.__ifAliasName,$.wd.originIfAliasName=r.__ifAliasName,INCLUDE_IPV6&&($.wd.l3Ip6ForwardingObj.__ifAliasName=T.__ifAliasName))}),"DSL"==$.sysMode){var P="",h="",N=0,b=0;INCLUDE_VDSLWAN&&($.wd.curSupXtmType="G.993.2_Annex_K_PTM"==c[0].linkEncapsulationUsed?"PTM":"ATM","PTM"==$.wd.curSupXtmType?($("#xDslTipText").val(n_str.wan.xDslTipTextVDSL),N=1):$("#xDslTipText").val(n_str.wan.xDslTipTextADSL));for(I=0;I<c.length;I++){S=c[I].__stack.split(",");P+=S[0]+",",h+=c[I].status+","}for(var k="",D="",A="",I=0;I<e.length;I++){S=e[I].__stack.split(",");D+=S[0]+S[1]+",",k+=e[I].linkType+",",A+=e[I].destinationAddress+","}return $.each(d,function(){var i=$.stkPop(this.__stack,2);if($.wd.pStk==i){for(var c,e=this.__stack.split(","),o=e[0]+e[1],_=D.split(","),d=e[0],l=P.split(","),p=k.split(","),C=A.split(","),r=h.split(","),T=0;T<_.length;T++)if(o==_[T]){if(INCLUDE_IPTV_V2&&("iptv"==this.name||"ewan_iptv"==this.name))continue;connObj={},connObj.dsl=$.act(ACT_GET,WAN_DSL_LINK_CFG,$.stkPop(this.__stack,1),null,["destinationAddress","linkType","ATMPeakCellRate","ATMMaximumBurstSize","ATMSustainableCellRate","ATMEncapsulation","ATMQoS"]),INCLUDE_VDSLWAN&&(connObj.ptm=$.act(ACT_GET,WAN_PTM_LINK_CFG,$.stkPop(this.__stack,1),null,["X_TP_Used","X_TP_VlanEnabled","X_TP_VID"])),$.exe(),b=INCLUDE_VDSLWAN?connObj.ptm.X_TP_Used:0,connObj.obj=this,connObj.obj.__stack=this.__stack,"-1"==(c=INCLUDE_VDSLWAN&&1==b?connObj.ptm.X_TP_VID:C[T].split(":")[1])&&(c="N/A"),INCLUDE_VDSLWAN&&0!=b||"IPoA"!=p[T]||(connObj.type="ipoa"),(INCLUDE_VDSLWAN&&1==b||"EoA"==p[T])&&("IP_Bridged"==this.connectionType&&(connObj.type="bridge"),"IP_Routed"==this.connectionType&&("DHCP"==this.addressingType?connObj.type="dynamicIp":"Static"==this.addressingType&&(connObj.type="staticIp"))),$.wd.editIndex=$.wd.conn.push(connObj);break}for(var u="["+this.__stack+"]",T=0;T<l.length;T++)if(d==l[T]){if("Up"==r[T]?"Connected"==this.connectionStatus||1==this.X_TP_IPv6Enabled&&"Connected"==this.X_TP_IPv6ConnStatus?(n=INCLUDE_VDSLWAN&&N!=b?"<span>DSL "+m_str.disabled+"</span>":"<span class='T_connected'>"+m_str.connected+"</span>",s="IP_Bridged"==this.connectionType||"IP_Routed"==this.connectionType&&"Static"==this.addressingType?"<span class='conn-opt-disabled T_disconn'>"+m_str.disconn+"</span>":"<span class='conn-opt T T_disconn' onClick='doDisConn(1, "+u+");'>"+m_str.disconn+"</span>"):"Disconnected"!=this.connectionStatus&&"Unconfigured"!=this.connectionStatus||"Disconnected"!=this.X_TP_IPv6ConnStatus&&"Unconfigured"!=this.X_TP_IPv6ConnStatus?($.auto(function(){$.locked()||$.reload()},5e3),n=INCLUDE_VDSLWAN&&N!=b?"<span>DSL "+m_str.disabled+"</span>":"<span class='T_connecting'>"+m_str.connecting+"</span>",s="<span class='conn-opt-disabled T_conn' >"+m_str.conn+"</span>"):(n=INCLUDE_VDSLWAN&&N!=b?"<span>DSL "+m_str.disabled+"</span>":"<span class='T_disconnected'>"+m_str.disconnected+"</span>",s=INCLUDE_VDSLWAN&&N!=b?"<span class='conn-opt-disabled T_conn' onClick='doConn(1, "+u+");'>"+m_str.conn+"</span>":"<span class='conn-opt T_conn' onClick='doConn(1, "+u+");'>"+m_str.conn+"</span>"):"Initializing"==r[T]||"EstablishingLink"==r[T]?($.auto(function(){$.locked()||$.reload()},5e3),n=INCLUDE_VDSLWAN&&N!=b?"<span>DSL "+m_str.disabled+"</span>":"<span>DSL "+m_str.initing+"</span>",s="<span class='conn-opt-disabled T_conn'>"+m_str.conn+"</span>"):(n=INCLUDE_VDSLWAN&&N!=b?"<span>DSL "+m_str.disabled+"</span>":"<span>DSL "+m_str.disconnected+"</span>",s="<span class='conn-opt-disabled T_conn'>"+m_str.conn+"</span>"),INCLUDE_IPTV)if(this.name.search("iptv")>=0){if(INCLUDE_IPTV_V2)continue;t="IP_Bridged"==this.connectionType?"<span class='a T T_view table-grid-icon edit-modify-icon' onClick='doEdit(1, "+u+")'></span>":"<span class='a table-grid-icon edit-modify-icon' onClick='doEdit(1, "+u+")'></span>&nbsp;<span class='a table-grid-icon edit-trash-icon' onClick='doDel(1, "+u+")'></span>"}else t="<span class='a table-grid-icon edit-modify-icon' onClick='doEdit(1, "+u+")'></span>&nbsp;<span class='a table-grid-icon edit-trash-icon' onClick='doDel(1, "+u+")'></span>";else t="<span class='a table-grid-icon edit-modify-icon' onClick='doEdit(1, "+u+")'></span>&nbsp;<span class='a table-grid-icon edit-trash-icon' onClick='doDel(1, "+u+")'></span>";a.push([{text:this.name,width:""},{text:c,width:"10%"},{text:n,width:"20%"},{text:s,width:"10%"},{text:t,width:"15%"}]);break}}}),$.each(l,function(){var i=$.stkPop(this.__stack,2);if($.wd.pStk==i){for(var c,e=this.__stack.split(","),o=e[0]+e[1],_=D.split(","),d=e[0],l=P.split(","),p=(k.split(","),A.split(",")),C=h.split(","),r=0;r<_.length;r++)if(o==_[r]){if(INCLUDE_IPTV_V2&&("iptv"==this.name||"ewan_iptv"==this.name))continue;connObj={},connObj.dsl=$.act(ACT_GET,WAN_DSL_LINK_CFG,$.stkPop(this.__stack,1),null,["destinationAddress","linkType","ATMPeakCellRate","ATMMaximumBurstSize","ATMSustainableCellRate","ATMEncapsulation","ATMQoS"]),INCLUDE_VDSLWAN&&(connObj.ptm=$.act(ACT_GET,WAN_PTM_LINK_CFG,$.stkPop(this.__stack,1),null,["X_TP_Used","X_TP_VlanEnabled","X_TP_VID"])),$.exe(),b=INCLUDE_VDSLWAN?connObj.ptm.X_TP_Used:0,connObj.obj=this,connObj.obj.__stack=this.__stack,"-1"==(c=INCLUDE_VDSLWAN&&1==b?connObj.ptm.X_TP_VID:p[r].split(":")[1])&&(c="N/A"),"PPPoA"==this.transportType?connObj.type="pppoa":"PPPoE"==this.transportType?connObj.type="pppoe":"L2TP"==this.transportType?connObj.type="l2tp":"PPTP"==this.transportType&&(connObj.type="pptp"),$.wd.editIndex=$.wd.conn.push(connObj);break}for(var T="["+this.__stack+"]",r=0;r<l.length;r++)if(d==l[r]){if("Up"==C[r]?"Connected"==this.connectionStatus||1==this.X_TP_IPv6Enabled&&"Connected"==this.X_TP_IPv6ConnStatus?(n=INCLUDE_VDSLWAN&&N!=b?"<span>DSL "+m_str.disabled+"</span>":"<span class='T_connected'>"+m_str.connected+"</span>",s="<span class='conn-opt T_discon' onClick='doDisConn(2, "+T+");'>"+m_str.disconn+"</span>"):"Disconnected"!=this.connectionStatus&&"Unconfigured"!=this.connectionStatus||"Disconnected"!=this.X_TP_IPv6ConnStatus&&"Unconfigured"!=this.X_TP_IPv6ConnStatus?"Connecting"!=this.connectionStatus&&"Connecting"!=this.X_TP_IPv6ConnStatus||($.auto(function(){$.locked()||$.reload()},5e3),n=INCLUDE_VDSLWAN&&N!=b?"<span>DSL "+m_str.disabled+"</span>":"<span class='T_connecting'>"+m_str.connecting+"</span>",s="<span class='conn-opt T_disconn' onClick='doDisConn(2, "+T+");'>"+m_str.disconn+"</span>"):(n=INCLUDE_VDSLWAN&&N!=b?"<span>DSL "+m_str.disabled+"</span>":"<span class='T_disconnected'>"+m_str.disconnected+"</span>",s=INCLUDE_VDSLWAN&&N!=b?"<span class='conn-opt-disabled T_conn' onClick='doConn(2, "+T+");'>"+m_str.conn+"</span>":"<span class='conn-opt T_conn' onClick='doConn(2, "+T+");'>"+m_str.conn+"</span>"):"Initializing"==C[r]||"EstablishingLink"==C[r]?($.auto(function(){$.locked()||$.reload()},5e3),n=INCLUDE_VDSLWAN&&N!=b?"<span>DSL "+m_str.disabled+"</span>":"<span>DSL "+m_str.initing+"</span>",s="<span class='conn-opt-disabled T_conn'>"+m_str.conn+"</span>"):(n=INCLUDE_VDSLWAN&&N!=b?"<span>DSL "+m_str.disabled+"</span>":"<span>DSL "+m_str.disconnected+"</span>",s="<span class='conn-opt-disabled T_conn'>"+m_str.conn+"</span>"),INCLUDE_IPTV_V2){if("iptv"==this.name||"ewan_iptv"==this.name)continue;t="<span class='a table-grid-icon edit-modify-icon' onClick='doEdit(2, "+T+")'></span>&nbsp;<span class='a table-grid-icon edit-trash-icon' onClick='doDel(2, "+T+")'></span>"}else t="<span class='a table-grid-icon edit-modify-icon' onClick='doEdit(2, "+T+")'></span>&nbsp;<span class='a table-grid-icon edit-trash-icon' onClick='doDel(2, "+T+")'></span>";a.push([{text:this.name,width:"20%"},{text:c,width:""},{text:n,width:"20%"},{text:s,width:"10%"},{text:t,width:"15%"}]);break}}}),$.initTableBody($("#wanTable"),a),a}if("ETH"==$.sysMode){for(var E="",f="",I=0;I<o.length;I++){S=o[I].__stack.split(",");E+=S[0]+",",f+=o[I].status+","}for(var L="",m="",I=0;I<_.length;I++){var S=_[I].__stack.split(",");m+=S[0]+S[1]+",",L+=_[I].linkType+","}return $.each(d,function(){var i=$.stkPop(this.__stack,2);if($.wd.pStk==i){for(var c=this.__stack.split(","),e=c[0]+c[1],o=m.split(","),_=c[0],d=E.split(","),l=(L.split(","),f.split(",")),p=0;p<o.length;p++)if(e==o[p]){if(INCLUDE_IPTV&&"ewan_iptv"==this.name)continue;connObj={},connObj.ewan=$.act(ACT_GET,WAN_ETH_LINK_CFG,$.stkPop(this.__stack,1),null,null),$.exe(),connObj.obj=this,connObj.obj.__stack=this.__stack,pvc="-1"==connObj.ewan.X_TP_VID?"N/A":connObj.ewan.X_TP_VID,"IP_Bridged"==this.connectionType&&(connObj.type="bridge"),"IP_Routed"==this.connectionType&&("DHCP"==this.addressingType?connObj.type="dynamicIp":"Static"==this.addressingType&&(connObj.type="staticIp")),$.wd.editIndex=$.wd.conn.push(connObj);break}for(var C="["+this.__stack+"]",p=0;p<d.length;p++)if(_==d[p]){if("Up"==l[p]?"Connected"==this.connectionStatus||1==this.X_TP_IPv6Enabled&&"Connected"==this.X_TP_IPv6ConnStatus?(n="<span class='T_connected'>"+m_str.connected+"</span>",s="IP_Bridged"==this.connectionType||"IP_Routed"==this.connectionType&&"Static"==this.addressingType?"<span class='conn-opt-disabled T_disconn'>"+m_str.disconn+"</span>":"<span class='conn-opt T T_disconn' onClick='doDisConn(1, "+C+");'>"+m_str.disconn+"</span>"):"Disconnected"!=this.connectionStatus&&"Unconfigured"!=this.connectionStatus||"Disconnected"!=this.X_TP_IPv6ConnStatus&&"Unconfigured"!=this.X_TP_IPv6ConnStatus?($.auto(function(){$.locked()||$.reload()},5e3),n="<span class='T_connecting'>"+m_str.connecting+"</span>",s="<span class='conn-opt-disabled T_conn' >"+m_str.conn+"</span>"):(n="<span class='T_disconnected'>"+m_str.disconnected+"</span>",s="<span class='conn-opt T_conn' onClick='doConn(1, "+C+");'>"+m_str.conn+"</span>"):(n="<span>WAN "+m_str.disconnected+"</span>",s="<span class='conn-opt-disabled T_conn'>"+m_str.conn+"</span>"),INCLUDE_IPTV){if("ewan_iptv"==this.name)continue;t="<span class='a table-grid-icon edit-modify-icon' onClick='doEdit(1, "+C+")'></span>&nbsp;<span class='a table-grid-icon edit-trash-icon' onClick='doDel(1, "+C+")'></span>"}else t="<span class='a table-grid-icon edit-modify-icon' onClick='doEdit(1, "+C+")'></span>&nbsp;<span class='a table-grid-icon edit-trash-icon' onClick='doDel(1, "+C+")'></span>";a.push([{text:this.name,width:""},{text:pvc,width:"10%"},{text:n,width:"20%"},{text:s,width:"10%"},{text:t,width:"15%"}]);break}}}),$.each(l,function(){var i=$.stkPop(this.__stack,2);if($.wd.pStk==i){for(var c,e=this.__stack.split(","),o=e[0]+e[1],_=m.split(","),d=e[0],l=E.split(","),p=(L.split(","),f.split(",")),C=0;C<_.length;C++)if(o==_[C]){if(INCLUDE_IPTV&&("iptv"==this.name||"ewan_iptv"==this.name))continue;connObj={},connObj.ewan=$.act(ACT_GET,WAN_ETH_LINK_CFG,$.stkPop(this.__stack,1),null,null),$.exe(),connObj.obj=this,connObj.obj.__stack=this.__stack,c="-1"==connObj.ewan.X_TP_VID?"N/A":connObj.ewan.X_TP_VID,"PPPoA"==this.transportType?connObj.type="pppoa":"PPPoE"==this.transportType?connObj.type="pppoe":"L2TP"==this.transportType?connObj.type="l2tp":"PPTP"==this.transportType&&(connObj.type="pptp"),$.wd.editIndex=$.wd.conn.push(connObj);break}for(var r="["+this.__stack+"]",C=0;C<l.length;C++)if(d==l[C]){if("Up"==p[C]?"Connected"==this.connectionStatus||1==this.X_TP_IPv6Enabled&&"Connected"==this.X_TP_IPv6ConnStatus?(n="<span class='T_connected'>"+m_str.connected+"</span>",s="<span class='conn-opt T_discon' onClick='doDisConn(2, "+r+");'>"+m_str.disconn+"</span>"):"Disconnected"==this.connectionStatus||"Unconfigured"==this.connectionStatus&&("Disconnected"==this.X_TP_IPv6ConnStatus||"Unconfigured"==this.X_TP_IPv6ConnStatus)?(n="<span class='T_disconnected'>"+m_str.disconnected+"</span>",s=INCLUDE_VDSLWAN&&N!=b?"<span class='conn-opt-disabled T_conn' onClick='doConn(2, "+r+");'>"+m_str.conn+"</span>":"<span class='conn-opt T_conn' onClick='doConn(2, "+r+");'>"+m_str.conn+"</span>"):"Connecting"!=this.connectionStatus&&"Connecting"!=this.X_TP_IPv6ConnStatus||($.auto(function(){$.locked()||$.reload()},5e3),n="<span class='T_connecting'>"+m_str.connecting+"</span>",s="<span class='conn-opt T_disconn' onClick='doDisConn(2, "+r+");'>"+m_str.disconn+"</span>"):(n="<span>WAN "+m_str.disconnected+"</span>",s="<span class='conn-opt-disabled T_conn'>"+m_str.conn+"</span>"),INCLUDE_IPTV){if("iptv"==this.name||"ewan_iptv"==this.name)continue;t="<span class='a table-grid-icon edit-modify-icon' onClick='doEdit(2, "+r+")'></span>&nbsp;<span class='a table-grid-icon edit-trash-icon' onClick='doDel(2, "+r+")'></span>"}else t="<span class='a table-grid-icon edit-modify-icon' onClick='doEdit(2, "+r+")'></span>&nbsp;<span class='a table-grid-icon edit-trash-icon' onClick='doDel(2, "+r+")'></span>";a.push([{text:this.name,width:"20%"},{text:c,width:""},{text:n,width:"20%"},{text:s,width:"10%"},{text:t,width:"15%"}]);break}}}),$.each(p,function(){var i=$.stkPop(this.__stack,2);if($.wd.pStk==i){for(var c,e=this.__stack.split(","),o=e[0]+e[1],_=m.split(","),d=e[0],l=E.split(","),p=(L.split(","),f.split(",")),C=0;C<_.length;C++)if(o==_[C]){if(INCLUDE_IPTV&&("iptv"==this.name||"ewan_iptv"==this.name))continue;connObj={},connObj.ewan=$.act(ACT_GET,WAN_ETH_LINK_CFG,$.stkPop(this.__stack,1),null,null),$.exe(),connObj.obj=this,connObj.obj.__stack=this.__stack,c="-1"==connObj.ewan.X_TP_VID?"N/A":connObj.ewan.X_TP_VID,"PPPoA"==this.transportType?connObj.type="pppoa":"PPPoE"==this.transportType?connObj.type="pppoe":"L2TP"==this.transportType?connObj.type="l2tp":"PPTP"==this.transportType&&(connObj.type="pptp"),$.wd.editIndex=$.wd.conn.push(connObj);break}for(var r="["+this.__stack+"]",C=0;C<l.length;C++)if(d==l[C]){if("Up"==p[C]?INCLUDE_IPV6&&0==this.X_TP_IPv4Enabled?(n="<span class='T_disconnected'>"+m_str.disconnected+"</span>",s="<span class='conn-opt T_conn' onClick='doConn(3, "+r+");'>"+m_str.conn+"</span>","Connected"==this.X_TP_IPv6ConnStatus&&(n="<span class='T_disconnected'>"+m_str.connected+"</span>",s="<span class='conn-opt T_discon' onClick='doDisConn(3, "+r+");'>"+m_str.disconn+"</span>")):"Connected"==this.connectionStatus?(n="<span class='T_connected'>"+m_str.connected+"</span>",s="<span class='conn-opt T_discon' onClick='doDisConn(3, "+r+");'>"+m_str.disconn+"</span>"):"Disconnected"==this.connectionStatus||"Unconfigured"==this.connectionStatus?(n="<span class='T_disconnected'>"+m_str.disconnected+"</span>",s=INCLUDE_VDSLWAN&&N!=b?"<span class='conn-opt-disabled T_conn' onClick='doConn(3, "+r+");'>"+m_str.conn+"</span>":"<span class='conn-opt T_conn' onClick='doConn(3, "+r+");'>"+m_str.conn+"</span>"):"Connecting"==this.connectionStatus&&($.auto(function(){$.locked()||$.reload()},5e3),n="<span class='T_connecting'>"+m_str.connecting+"</span>",s="<span class='conn-opt T_disconn' onClick='doDisConn(3, "+r+");'>"+m_str.disconn+"</span>"):(n="<span>WAN "+m_str.disconnected+"</span>",s="<span class='conn-opt-disabled T_conn'>"+m_str.conn+"</span>"),INCLUDE_IPTV){if("iptv"==this.name||"ewan_iptv"==this.name)continue;t="<span class='a table-grid-icon edit-modify-icon' onClick='doEdit(3, "+r+")'></span>&nbsp;<span class='a table-grid-icon edit-trash-icon' onClick='doDel(3, "+r+")'></span>"}else t="<span class='a table-grid-icon edit-modify-icon' onClick='doEdit(3, "+r+")'></span>&nbsp;<span class='a table-grid-icon edit-trash-icon' onClick='doDel(3, "+r+")'></span>";a.push([{text:this.name,width:"20%"},{text:c,width:""},{text:n,width:"20%"},{text:s,width:"10%"},{text:t,width:"15%"}]);break}}}),$.each(C,function(){var i=$.stkPop(this.__stack,2);if($.wd.pStk==i){for(var c,e=this.__stack.split(","),o=e[0]+e[1],_=m.split(","),d=e[0],l=E.split(","),p=(L.split(","),f.split(",")),C=0;C<_.length;C++)if(o==_[C]){if(INCLUDE_IPTV&&("iptv"==this.name||"ewan_iptv"==this.name))continue;connObj={},connObj.ewan=$.act(ACT_GET,WAN_ETH_LINK_CFG,$.stkPop(this.__stack,1),null,null),$.exe(),connObj.obj=this,connObj.obj.__stack=this.__stack,c="-1"==connObj.ewan.X_TP_VID?"N/A":connObj.ewan.X_TP_VID,"PPPoA"==this.transportType?connObj.type="pppoa":"PPPoE"==this.transportType?connObj.type="pppoe":"L2TP"==this.transportType?connObj.type="l2tp":"PPTP"==this.transportType&&(connObj.type="pptp"),$.wd.editIndex=$.wd.conn.push(connObj);break}for(var r="["+this.__stack+"]",C=0;C<l.length;C++)if(d==l[C]){if("Up"==p[C]?INCLUDE_IPV6&&0==this.X_TP_IPv4Enabled?(n="<span class='T_disconnected'>"+m_str.disconnected+"</span>",s="<span class='conn-opt T_conn' onClick='doConn(4, "+r+");'>"+m_str.conn+"</span>","Connected"==this.X_TP_IPv6ConnStatus&&(n="<span class='T_disconnected'>"+m_str.connected+"</span>",s="<span class='conn-opt T_discon' onClick='doDisConn(4, "+r+");'>"+m_str.disconn+"</span>")):"Connected"==this.connectionStatus?(n="<span class='T_connected'>"+m_str.connected+"</span>",s="<span class='conn-opt T_discon' onClick='doDisConn(4, "+r+");'>"+m_str.disconn+"</span>"):"Disconnected"==this.connectionStatus||"Unconfigured"==this.connectionStatus?(n="<span class='T_disconnected'>"+m_str.disconnected+"</span>",s=INCLUDE_VDSLWAN&&N!=b?"<span class='conn-opt-disabled T_conn' onClick='doConn(4, "+r+");'>"+m_str.conn+"</span>":"<span class='conn-opt T_conn' onClick='doConn(4, "+r+");'>"+m_str.conn+"</span>"):"Connecting"==this.connectionStatus&&($.auto(function(){$.locked()||$.reload()},5e3),n="<span class='T_connecting'>"+m_str.connecting+"</span>",s="<span class='conn-opt T_disconn' onClick='doDisConn(4, "+r+");'>"+m_str.disconn+"</span>"):(n="<span>WAN "+m_str.disconnected+"</span>",s="<span class='conn-opt-disabled T_conn'>"+m_str.conn+"</span>"),INCLUDE_IPTV){if("iptv"==this.name||"ewan_iptv"==this.name)continue;t="<span class='a table-grid-icon edit-modify-icon' onClick='doEdit(4, "+r+")'></span>&nbsp;<span class='a table-grid-icon edit-trash-icon' onClick='doDel(4, "+r+")'></span>"}else t="<span class='a table-grid-icon edit-modify-icon' onClick='doEdit(4, "+r+")'></span>&nbsp;<span class='a table-grid-icon edit-trash-icon' onClick='doDel(4, "+r+")'></span>";a.push([{text:this.name,width:"20%"},{text:c,width:""},{text:n,width:"20%"},{text:s,width:"10%"},{text:t,width:"15%"}]);break}}}),$.initTableBody($("#wanTable"),a),a}}})}var specialConnectionList=[],sysModeObj;$("span.delete-all-icon").click(function(){if(0!=$.wd.conn.length){var n=[],s=!1;$.confirm(c_str.del_con,function(){$.showCover(),$.lock(),$.each($.wd.conn,function(){if(s=!1,this.type){if(INCLUDE_IPTV&&this.obj.name.search("iptv")>=0)return!0;if(specialConnectionList.length){for(var t=0;t<specialConnectionList.length;t++)if($.stkPop(this.obj.__stack,1)==$.stkPop(specialConnectionList[t].__stack,1)){s=!0;break}s||n.push(this.obj.__stack)}else n.push(this.obj.__stack);"l2tp"==this.type?$.act(ACT_DEL,WAN_L2TP_CONN,this.obj.__stack,null):"pptp"==this.type?$.act(ACT_DEL,WAN_PPTP_CONN,this.obj.__stack,null):this.type.indexOf("ppp")<0?$.act(ACT_DEL,WAN_IP_CONN,this.obj.__stack,null):$.act(ACT_DEL,WAN_PPP_CONN,this.obj.__stack,null)}});var t,a=[];$.each(n,function(){t=$.stkPop(this,1);for(var n=0;n<a.length;n++)if(a[n]==t)return!0;a.push(t),$.act(ACT_DEL,WAN_CONN_DEVICE,t,null)}),$.exe(function(n){$.hideCover(),$.reload()})})}else $.alert(CMM_WAN_NO_INTF)}),INCLUDE_3G4G_BACKUP&&($("#lteBackup_en").on("click.wan",function(n){$.addLoading($(this)),$.act(ACT_SET,SYS_MODE,null,null,["lteBackupEnable=1"]),$.exe(function(n){n&&(1==sysModeObj.lteBackupEnable?$("#lteBackup_en").addClass("selected"):$("#lteBackup_dis").addClass("selected")),$.removeLoading()})}),$("#lteBackup_dis").on("click.wan",function(n){$.addLoading($(this)),$.act(ACT_SET,SYS_MODE,null,null,["lteBackupEnable=0"]),$.exe(function(n){n&&(1==sysModeObj.lteBackupEnable?$("#lteBackup_en").addClass("selected"):$("#lteBackup_dis").addClass("selected")),$.removeLoading()})})),INCLUDE_CHECK_WANALIVE_WITH_PING&&($("#lteBackup_en_ping").on("click.wan",function(n){$.addLoading($(this)),$.act(ACT_SET,SYS_MODE,null,null,["lteBackupEnable=1"]),$.exe(function(n){$.removeLoading(),$.reload()})}),$("#lteBackup_dis_ping").on("click.wan",function(n){$.addLoading($(this)),$.act(ACT_SET,SYS_MODE,null,null,["lteBackupEnable=0"]),$.exe(function(n){$.removeLoading(),$.reload()})}),$("#single_dect").on("click",function(n){$("#ipv4_ping").addClass("nd"),$("#ipv6_ping").addClass("nd")}),$("#dual_dect").on("click",function(n){$("#ipv4_ping").removeClass("nd"),$("#ipv6_ping").removeClass("nd"),$("#ipv4_ping_address").tpAddress("val",sysModeObj.IPV4Ping),$("#ipv6_ping_address").val(sysModeObj.IPV6Ping)}),$("#t_save").on("click",function(n){if($.addLoading(),DNS=$("#dns").val(),""!=DNS&&$.chkKeyword(DNS)){if($("#dual_dect").prop("checked")){var s=$("#ipv4_ping_address").tpAddress("val"),t=$("#ipv6_ping_address").val();if("0.0.0.0"!=s&&$.ifip(s))return $("#ipv4_ping_address").tpAddress("focus"),void $.alert(ERR_IPV4_ADDRESS);if("::"!=t&&!$.isValidGLUIP6AddrStrict(t))return $("#ipv6_ping_address").focus().select(),void $.alert(ERR_IPV6_ADDRESS);$.act(ACT_SET,SYS_MODE,null,null,["detectionMode=1","DNS="+DNS,"IPV4Ping="+s,"IPV6Ping="+t])}else $.act(ACT_SET,SYS_MODE,null,null,["detectionMode=0","DNS="+DNS]);$.exe(),$.removeLoading(),$.reload()}else $.alert(ERR_DNS_NAME)})),$("#addConnIcon").click(function(){$.loadPage("divPage","div.htm"),$("#editContainer").addClass("nd")})</script>

<h3 id="et">DSL WAN Interface</h3>
<div class="content-container" id="arp">
    <form class="pure-form pure-form-aligned">
		<div class="button-group-container nd" id="lteBackup">
			<b class="T_lteBackup">3G/4G Backup</b>
			<ul><li><button id="lteBackup_en" class="fst" value="on">On</button></li>
				<li><button id="lteBackup_dis" class="lst" value="off">Off</button></li>
			</ul>
		</div>
		<div class="part-separate-m nd" id="lteBackup_space">
		</div>
        <div class="table-op" id="addItem">
            <div class="table-btn">
                <span class="refresh-icon"></span>
                <label class="T_refresh">Refresh</label>
                <span id="addConnIcon" class="add-icon"></span>
                <label class="T_add">Add</label>
                <span class="delete-all-icon"></span>
                <label class="T_delall">Delete All</label>
            </div>
        </div>
        <table id="wanTable">
            <thead></thead>
            <tbody id="wanBody">
                <tr id="editContainer" class="nd">
                    <td colspan="5">
                        <div id="divPage"></div>
                    </td>
                </tr>
            </tbody>
        </table>
    </form>
</div>
<div class="nd" id="check_ping">
<h3 id="et7">Internet Backup</h3>
</div>
<div class="content-container">
    <form class="pure-form pure-form-aligned">
        <div class="button-group-container nd" id="lteBackup_ping">
            <b class="T_lteBackup">3G/4G Backup</b>
            <ul><li><button id="lteBackup_en_ping" class="fst" value="on">On</button></li>
                <li><button id="lteBackup_dis_ping" class="lst" value="off">Off</button></li>
            </ul>
        </div>
        <div class="pure-control-group nd" id="detection">
            <label id="t_offline_detection" class="label-title nd">Offline Detection</label>
            <input type="radio" name="offline_detection" id="single_dect">
            <label id="t_single">Single Detection</label>
            <input type="radio" name="offline_detection" id="dual_dect">
            <label id="t_dual">Dual Detection</label>
        </div>
        <div class="pure-control-group nd" id="ipv4_ping">
            <b id="t_ipv4_ping">IPv4 Ping:</b>
            <input type="text" class="ip-address" id="ipv4_ping_address" maxlength="15">
        </div>
        <div class="pure-control-group nd" id="ipv6_ping">
            <b id="t_ipv6_ping">IPv6 Ping:</b>
            <input type="text" class="tp-input-text" id="ipv6_ping_address" maxlength="40">
        </div>
        <div class="pure-control-group nd" id="DNS">
            <b id="t_DNS">DNS Lookup:</b>
            <input type="text" maxlength="40" class="tp-input-text" id="dns">
        </div>
        <div class="nd" id="bSave">
            <button type="submit" class="green T_save" id="t_save">Save</button>
        </div>
    </form>
</div>
<script language="javascript">var connObj={type:null,obj:{},dsl:{},ptm:{}};$.wd={conn:new Array,pStk:null,editIndex:0,l3ForwardingObj:{},l3Ip6ForwardingObj:{}};var pvcOrVid="DSL"==$.sysMode?INCLUDE_VDSLWAN?s_str.destVDSL:s_str.destADSL:"VLAN ID",headArray=[{text:table_str.wanInfName,width:""},{text:pvcOrVid,width:"15%"},{text:table_str.status,width:"20%"},{text:table_str.operation,width:"20%"},{text:table_str.modify,width:"15%"}];$.initTableHead($("#wanTable"),headArray),$("#wanTable").tpTable(initTable),$.tpInit(init)</script>
