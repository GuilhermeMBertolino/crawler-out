<div id="top-con">
    <div>
    <a id="top-product" href="http://www.tp-link.com" target="_blank">
        <span id="top-product-name"></span>
    </a>
    <div id="top-nav" class="top-nav">
        <ul id="ul-nav">
            <li id="qs">
                <span class="T_qs">Quick Setup</span>
            </li>
            <li id="basic">
                <span class="T_basic">Basic</span>
            </li>
            <li id="advanced">
                <span class="T_adv">Advanced</span>
            </li>
        </ul>
    </div>
        <div class="top-country">
            <select id="top-country" class="top-country-select">
            </select>
        </div>
    <div class="top-control">
        <!-- <div class="top-lang"></div> -->
        <a id="topLogout" class="top-btn" href="javascript:void(0);">
            <span class="icon"></span>
            <span class="text T_logout">Logout</span>
        </a>
        <a id="topReboot" class="top-btn" href="javascript:void(0);">
            <span class="icon"></span>
            <span class="text T_reboot">Reboot</span>
        </a>
            <a id="topUpdate" class="top-btn nd" href="javascript:void(0);">
                <span class="icon">
                    <span class="icon" id="topUpdate-number">1</span>
                </span>
                <span class="text T_update">Update</span>
            </a>
    </div>
    <div class="clr"></div>
</div>
</div>
<script type="text/javascript">
$(document).ready(function() {
    $('#ul-nav li').click(function() {
        $(this).siblings().removeClass('selected');
        $(this).addClass('selected');
        $('#scroll').scrollTop(0);
        $.loadMenu('./frame/menu.htm');
    });
    $('#ul-nav li span').hover(function() {
        $(this).siblings().removeClass('hover');
        $(this).addClass('hover');
    });
    $('#topLogout').click(function() {
        $.confirm(c_str.logout, function() {
            // $.act(ACT_CGI, '/cgi/logout');
            // $.exe();
            $.deleteCookie('Authorization');
            $.refresh();
        });
        return false;
    });
    $('#topReboot').click(function() {
        $.confirm(c_str.creboot, function() {
            var mainCon = $('#con');
            if (mainCon !== undefined && mainCon.css('display') == 'none') {
                mainCon.css('display', 'block');
                $('#menu').css('display', 'none');
            }
            $.clearAsync();

            $.guage(["<span class='T T_rebooting'>" + s_str.rebooting + "</span>", "<span class='T T_wait_reboot'>" + s_str.wait_reboot + "</span>"], 100, $.guageInterval, function() {
                $.refresh();
            });
            $.act(ACT_OP, ACT_OP_REBOOT);
            $.exe(true);
        });
        return false;
    });
    $('#top-product-name').html($.model);

    //  add for cloud. for upgrade
    if ('INCLUDE_CLOUD' in window && INCLUDE_CLOUD == 1) {
        $('#topUpdate').click(function() {
            $.goToOtherPage('softup.htm', 'advanced');
        });

        var newFwObj = $.act(ACT_GET, FW_UPGRADE_INFO, null, null, null);
        var cloudObj = $.act(ACT_GET, CLOUD_SERVICE, null, null, ['tcspStatus']);
        $.exe(function(err) {
            if (err) {
                return;
            }
            if ( !! newFwObj.version) {
                //                $('#top-con').addClass('hasUpgrade');
                $("#topUpdate").removeClass('nd');
            } else {
                //                $('#top-con').removeClass('hasUpgrade');
                $("#topUpdate").addClass('nd');
            }
            refreshTopCon();
            if (cloudObj.tcspStatus == 2 || cloudObj.tcspStatus == 3) {
                var upgradeAlert1 = n_str.softup.upgradeAlert1 || "The current firmware does not support TP-LINK cloud service. We strongly recommend that you download the latest firmware at www.tp-link.com and update it.",
                    upgradeAlert2 = n_str.softup.upgradeAlert2 || "The current firmware does not support TP-LINK cloud service. We strongly recommend that you update the firmware by clicking the Update icon in the upper right corner.";
                $.toastGlobal({
                    text: cloudObj.tcspStatus == 2 ? upgradeAlert1 : upgradeAlert2,
                    className: "global-toast-important",
                    callback_close: function() {
                        $.act(ACT_SET, CLOUD_SERVICE, null, null, ['tcspStatus=1']);
                        $.exe();
                    }
                })
            }
        });

        if (document.cookie.search('goToUpgrade=true') >= 0) {
            $.goToOtherPage('softup.htm', 'advanced');
            $.deleteCookie('goToUpgrade');
        }
    }

    //    add for language selection by hwl

    function initLanguageSelect() {
        var select = $('#top-country');
        var items = [
            //            {"value": "bg_BG", "name": $.su.CHAR.LANGUAGE.BG_BG},
            //            {"value": "cs_CZ", "name": $.su.CHAR.LANGUAGE.CS_CZ},
            {"value": "da_DK", "name": $.su.CHAR.LANGUAGE.DA_DK, "include": "INCLUDE_LANGUAGE_DA_DK"},
            {
                "value": "de_DE",
                "name": $.su.CHAR.LANGUAGE.DE_DE,
                "include": "INCLUDE_LANGUAGE_DE_DE"
            }, {
                "value": "el_GR",
                "name": $.su.CHAR.LANGUAGE.EL_GR,
                "include": "INCLUDE_LANGUAGE_EL_GR"
            }, {
                "value": "en_US",
                "name": $.su.CHAR.LANGUAGE.EN_US,
                "include": "INCLUDE_LANGUAGE_EN_US"
            }, {
                "value": "es_ES",
                "name": $.su.CHAR.LANGUAGE.ES_ES,
                "include": "INCLUDE_LANGUAGE_ES_ES"
            }, {
                "value": "es_LA",
                "name": $.su.CHAR.LANGUAGE.ES_LA,
                "include": "INCLUDE_LANGUAGE_ES_LA"
            },
            {"value": "fi_FI", "name": $.su.CHAR.LANGUAGE.FI_FI, "include": "INCLUDE_LANGUAGE_FI_FI"},
            {
                "value": "fr_FR",
                "name": $.su.CHAR.LANGUAGE.FR_FR,
                "include": "INCLUDE_LANGUAGE_FR_FR"
            }, {
                "value": "it_IT",
                "name": $.su.CHAR.LANGUAGE.IT_IT,
                "include": "INCLUDE_LANGUAGE_IT_IT"
            },
            //            {"value": "ko_KR", "name": $.su.CHAR.LANGUAGE.KO_KR},
            {"value": "nl_NL", "name": $.su.CHAR.LANGUAGE.NL_NL, "include": "INCLUDE_LANGUAGE_NL_NL"},
            {"value": "no_NO", "name": $.su.CHAR.LANGUAGE.NO_NO, "include": "INCLUDE_LANGUAGE_NO_NO"},
            {
                "value": "pl_PL",
                "name": $.su.CHAR.LANGUAGE.PL_PL,
                "include": "INCLUDE_LANGUAGE_PL_PL"
            },
            {"value": "pt_PT", "name": $.su.CHAR.LANGUAGE.PT_PT, "include": "INCLUDE_LANGUAGE_PT_PT"},
            {
                "value": "pt_BR",
                "name": $.su.CHAR.LANGUAGE.PT_BR,
                "include": "INCLUDE_LANGUAGE_PT_BR"
            },
            //            {"value": "ro_RO", "name": $.su.CHAR.LANGUAGE.RO_RO},
            {
                "value": "ru_RU",
                "name": $.su.CHAR.LANGUAGE.RU_RU,
                "include": "INCLUDE_LANGUAGE_RU_RU"
            },
            //            {"value": "sk_SK", "name": $.su.CHAR.LANGUAGE.SK_SK},
            {"value": "sv_SE", "name": $.su.CHAR.LANGUAGE.SV_SE, "include": "INCLUDE_LANGUAGE_SV_SE"},
            {
                "value": "th_TH",
                "name": $.su.CHAR.LANGUAGE.th_TH,
                "include": "INCLUDE_LANGUAGE_th_TH"
            }, {
                "value": "tr_TR",
                "name": $.su.CHAR.LANGUAGE.TR_TR,
                "include": "INCLUDE_LANGUAGE_TR_TR"
            }, {
                "value": "zh_TW",
                "name": $.su.CHAR.LANGUAGE.ZH_TW,
                "include": "INCLUDE_LANGUAGE_ZH_TW"
            },
            //            {"value": "uk_UA", "name": $.su.CHAR.LANGUAGE.UK_UA},
            {"value": "vi_VN", "name": $.su.CHAR.LANGUAGE.VI_VN, "include": "INCLUDE_LANGUAGE_VI_VN"}
            //            {"value": "zh_CN", "name": $.su.CHAR.LANGUAGE.ZH_CN},
            //            {"value": "zh_TW", "name": $.su.CHAR.LANGUAGE.ZH_TW}
        ];

        var languageCount = 0;
        for (var i = 0; i < items.length; i++) {
            if (window[items[i]["include"]]) {
                select.append('<option value="' + items[i]["value"] + '">' + items[i]["name"] + '</option>');
                languageCount++;
            }
        }
        if (languageCount > 1) {
            $('#top-country option[value="' + $.locale.locale + '"]').prop('selected', true);
            $('#top-country').tpSelect({
                    namespace: 'language'
                })
                .on('click', function() {
                    var val = $(this).data('value');
                    setTimeout(function() {
                        $.locale.set(val);

                    }, 500);
                });
        } else {
            $('#top-con').addClass('singleLanguage');
            $('#top-con .top-country').addClass('nd');
        }



    }

    initLanguageSelect();
    //    change the href of support
    $('#top-product').attr('href', $.su.CHAR.SUPPORT[$.locale.locale.toUpperCase()].replace(/Support\/?/, ''));

    //    set top-con in center
	function refreshTopCon() {
		$('#top-con').width(1800);
		$('#top-con').css({
			width: $('#top-con > div').width() + 10
		});
	};
    refreshTopCon();
});
</script>
