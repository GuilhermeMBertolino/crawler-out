function initIndex(){void 0===$("div")[0].style.borderRadius&&($.isIE=!0),$.unloadCover=$.unlock;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}var css=function(){var link=$.c("link");return link.rel="Stylesheet",link.type="text/css",link}();if($.browser.msie)switch(parseInt($.browser.version,10)){case 8:case 9:case 10:css.href="./css/ie.file.css"}if($.head.insertBefore(css,$.head.firstChild),$.w.onresize=$.resize,$.attach(document.documentElement,"keydown",function(e){116==(e.keyCode?e.keyCode:e.charCode)&&($.refresh(),document.all?(e.keyCode=0,e.returnValue=!1):(e.cancelBubble=!0,e.preventDefault()))}),$.local&&$.io($.params,!0),$.cgi("/cgi/getParm"),$.ee=ee,$.nn=nn,INCLUDE_LOGIN_GDPR_ENCRYPT){try{$.newencryptorManager=$.encrypt.encryptManager,$.Iencryptor=$.newencryptorManager.getEncryptor()}catch(e){console.log("can't get newencryptorManager or Iencryptor"),$.cgi("/cgi/logout"),$.refresh()}$.seq=seq,$.Iencryptor.setSeq($.seq)}var sysmodeobj,infoobj=$.act(ACT_GET,IGD_DEV_INFO,null,null,["modelName","description","X_TP_IsFD"]),ethobj=$.act(ACT_GET,ETH_SWITCH,null,null,["numberOfVirtualPorts"]);INCLUDE_WAN_MODE&&(sysmodeobj=$.act(ACT_GET,SYS_MODE,null,null,null)),$.act(ACT_CGI,"/cgi/info"),$.exe(),INCLUDE_LOGIN_GDPR_ENCRYPT&&void 0==infoobj.modelName&&($.cgi("/cgi/logout"),$.refresh()),$.local&&(infoobj={modelName:"TD-W89741N",description:"ADSL+ Router"},ethobj={numberOfVirtualPorts:4},sysmodeobj={mode:"DSL"}),$.model=infoobj.modelName,$.desc=infoobj.description,$.ports=parseInt(ethobj.numberOfVirtualPorts,10),INCLUDE_WAN_MODE&&($.sysMode=sysmodeobj.mode),$.workMode=$.sysMode,INCLUDE_USB_3G_BACKUP&&($.usb3gBackup=sysmodeobj.usb3gBackup),INCLUDE_EWAN_BACKUP&&($.ewanBackup=sysmodeobj.ewanBackup);try{$.model&&(document.title=$.model)}catch(e){}$.isFD=infoobj.X_TP_IsFD;var img=new Image;img.src="/img/loading.gif",delete img,$(function(){"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(object){return object.__proto__}:function(object){return object.constructor.prototype})}),Array.prototype.indexOf||(Array.prototype.indexOf=function(elt){var len=this.length>>>0,from=Number(arguments[1])||0;for((from=from<0?Math.ceil(from):Math.floor(from))<0&&(from+=len);from<len;from++)if(from in this&&this[from]===elt)return from;return-1})}$.extend({w:window,d:document,c:function(obj){return document.createElement(obj)},head:document.getElementsByTagName("head")[0],div:document.createElement("div"),bak:document.createElement("div"),ret:0,sim:!1,params:"./js/local.js",cn:!1,qss:!1,sysMode:"DSL",guageInterval:900,magic:"0y8nc5094yeyrnoq",local:"file:"==location.protocol,flag:navigator.appVersion.match(/MSIE/)?parseInt(navigator.appVersion.match(/MSIE\s(\d)/)[1]):0,curPage:void 0,mainParam:void 0,diagParam:void 0,coverParam:void 0,accStack:[],model:"",desc:"",ports:4,itv:2,isFD:0,isMobileFlag:0,isIE:!1,helpControl:{},jumpToPage:function(menu,pageName,top){$("#"+top).click(),$.jumpToMenu=menu,$.jumpToPageName=pageName},chgChd:function(childs,handle){var tmp=$.mkArr(childs);$.each(tmp,function(){if(1==this.nodeType)return handle.call(this)}),tmp=null},id:function(id){return $.d.getElementById(id)},mkArr:function(array){if(!array)return[];for(var ret=[],i=0,l=array.length;i<l;i++)ret[i]=array[i];return ret},inArray:function(elem,elems){for(var i=0,l=elems.length;i<l;i++)if(elems[i]===elem)return!0;return!1},realLen:function(str){for(var len=0,i=0,l=str.length;i<l;i++)str.charCodeAt(i)<=parseInt("0x7F")?len+=1:str.charCodeAt(i)<=parseInt("0x7FF")?len+=2:str.charCodeAt(i)<=parseInt("0xFFFF")?len+=3:str.charCodeAt(i)<=parseInt("0x1FFFFF")?len+=4:str.charCodeAt(i)<=parseInt("0x3FFFFFF")?len+=5:len+=6;return len},maxlength:function(input){if(!(void 0==input.maxLength||void 0==input.value||$.realLen(input.value)<=input.maxLength)){for(var tmp=input.value,len=input.maxLength,index=len;$.realLen(tmp)>len;)index--,tmp=input.value.substring(0,index);input.value=tmp}},checkUrlmatch:function(url){for(var checkUrlTable=[{url:"/cgi_gdpr",flag:1},{url:"/cgi/log",flag:1},{url:"/cgi/ispinfo",flag:1},{url:"/frame/menu.cgi",flag:1},{url:"/cgi/getTokenc",flag:1}],i=0;i<checkUrlTable.length;i++)if(null!=url.match(checkUrlTable[i].url))return!0;return!1},attach:function(elem,type,data,handler){var tmp;handler?tmp=data:handler=data;var handle=function(e){var event=event||e;return handler.call(elem,event,tmp)};elem.addEventListener?elem.addEventListener(type,handle,!1):elem.attachEvent&&elem.attachEvent("on"+type,handle)},hasElemClass:function(elem,className){return elem&&$.inArray(className,(elem.className?elem.className:"").split(/\s+/))},addElemClass:function(elem,className){elem&&1==elem.nodeType&&!$.hasElemClass(elem,className)&&(elem.className+=(elem.className?" ":"")+className)},removeElemClass:function(elem,className){elem&&1==elem.nodeType&&$.hasElemClass(elem,className)&&(elem.className=elem.className.replace(className,""),elem.className=elem.className.replace(/\s+/," "))},cssFloat:function(elem,type){var floattype=void 0===elem.style.cssFloat?"styleFloat":"cssFloat";if("left"!=type&&"right"!=type&&"none"!=type)return elem.style[floattype];elem.style[floattype]=type},opacity:function(elem,opacity){opacity||(opacity=0),void 0===elem.style.opacity?(elem.zoom=1,elem.style.filter=(elem.style.filter||"").replace(/alpha\([^)]*\)/,"")+(parseInt(opacity)+""=="NaN"?"":"alpha(opacity="+100*opacity+")")):elem.style.opacity=opacity},h:function(elem,value){if(elem&&void 0!==elem.innerHTML){if(void 0===value)return elem.innerHTML;elem.innerHTML=value}return null},dhtml:function(str,hook,midhook){$.div.innerHTML="div"+str,$.div.removeChild($.div.firstChild);var scripts=[];$.chgChd($.div.childNodes,function(){this.nodeName&&"script"===this.nodeName.toLowerCase()?scripts.push(this):($.isMobileFlag||$.trans($(this)),hook.call($(this).get(0)))}),midhook&&midhook(),$.each(scripts,function(){$.script(this.text||this.textContent||this.innerHTML||"")}),$.emptyElem($.div)},appendElem:function(elem,value,midhook){elem&&1==elem.nodeType&&"string"==typeof value&&$.dhtml(value,function(){elem.appendChild(this)},midhook)},removeElem:function(elem){elem&&elem.parentNode&&elem.parentNode.removeChild(elem)},emptyElem:function(elem){for(;elem&&elem.firstChild;)elem.removeChild(elem.firstChild)},asyncId:1,asyncStack:{},getAsync:function(){var id=$.asyncId;return $.asyncStack[id]=!0,$.asyncId++,id},checkAsync:function(id){return $.asyncStack[id]},clearAsync:function(){for(var i in $.asyncStack)delete $.asyncStack[i]},deleteCookie:function(name){var LargeExpDate=new Date;document.cookie=name+"=; expires="+LargeExpDate.toGMTString()},stkPop:function(stack,times){times=times||1,stack instanceof Array&&(stack=stack.join(","));for(var i=1,l=(stack=stack.split(",")).length;i<l&&0!=stack[i];i++);for(i--;times>0;i--,times--)stack[i]=0;return stack.join(",")},arr2obj:function(arr,param){var ret={};if(void 0===param)return ret;for(var i=0,l=arr.length;i<l;i++)arr[i][param]&&(ret[arr[i][param]]=arr[i]);return ret},obj2str:function(obj,sign1,sign2,tailing){var ret="";for(var i in obj)ret+=i+(obj[i]||0===obj[i]||""===obj[i]?sign1+obj[i]:"")+sign2;return tailing?ret:ret.substr(0,ret.length-sign2.length)},toStr:function(data,sign1,sign2,tailing){return data?"string"==typeof data&&data||data instanceof Array&&data.join(sign2)+(tailing?sign2:"")||$.obj2str(data,sign1,sign2,tailing):""},backup:function(id){if($.emptyElem($.bak),$.flag){var con=$.id(id),checks=[],inputs=$.mkArr(con.getElementsByTagName("input"));$.each(inputs,function(arg,index){this.checked&&(checks[index]=!0)})}$.chgChd($.id(id).childNodes,function(){$.bak.appendChild(this)}),$.flag&&$.each(checks,function(arg,index){1==this&&(inputs[index].checked=!0)})},restore:function(id){if($.emptyElem($.id(id)),$.flag){var checks=[],inputs=$.mkArr($.bak.getElementsByTagName("input"));$.each(inputs,function(arg,index){this.checked&&(checks[index]=!0)})}$.chgChd($.bak.childNodes,function(){$.id(id).appendChild(this)}),$.flag&&$.each(checks,function(arg,index){1==this&&(inputs[index].checked=!0)})},err:function(src,errno,unerr){if(unerr)return errno;$.clearAsync(),$.alertAsnyc(errno)},errBack:function(errno,dir){$.clearAsync(),$.alertAsnyc(errno)},tpLoad:function(html,id,resize,hook1,hook2,midhook){var con=$.id(id);html.indexOf("<")<0?$.io(html,!1,function(ret){"number"!=typeof ret?$.fill(con,ret,hook1,hook2,resize,midhook):$.err(id,ret)},null,"ban"==id||"menu"==id||"help"==id||"bot"==id||"top"==id):$.fill(con,html,hook1,hook2,resize,midhook)},fill:function(container,content,hook1,hook2,resize,midhook){hook1&&hook1(),$.emptyElem(container),$.appendElem(container,content,midhook),hook2&&hook2(),resize&&$.resize()},loadBot:function(path){$.tpLoad(path,"bot",!1)},loadBanner:function(path,callback){$.tpLoad(path,"top",!1,null,callback)},loadMenu:function(path){$.act(ACT_CGI,"/cgi/clearBusy"),$.exe(function(){},!0),$.tpLoad(path,"menu",!1,null,function(){$("#menu a:first").trigger("click")})},loadPage:function(id,path,hook1,hook2){var bFile=path.indexOf("<")<0;$.tpLoad(bFile?"./main/"+path:path,id,!0,hook1,function(){$.upStyle(),$(window).trigger("loadPage"),hook2&&hook2()})},loadMain:function(path,arg){$("table").tpTable("destroy"),$("input[type='checkbox']").tpCheckbox("destroy"),$("input[type='radio']").tpRadio("destroy"),$("div.button-group-container").tpBtnGroup("destroy"),$("#main").empty(),$("#quicksetup").empty(),$(document).off(".tpSelect"),$(window).off(".tpSelect"),path||(path=$.curPage);var bFile=path.indexOf("<")<0;bFile&&($.emptyElem($.bak),$.clearAsync()),$.act(ACT_CGI,"/cgi/clearBusy"),$.exe(function(){},!0),$.loadPage("main",path,function(){for(bFile&&($.curPage=path,$.accStack.push(path)),$.mainParam=arg;$.as.length;)$.as.pop();for(;$.ds.length;)$.ds.pop();for(;$.ansiarg.length;)$.ansiarg.pop();$.addElemClass($.id("main"),"nv"),$.unlock()},function(){$.removeElemClass($.id("main"),"nv")})},loadCover:function(path,opacity,arg){$.tpLoad(path,"cover",!1,function(){$.diagParam=arg,$.removeElemClass($.id("cover"),"nd"),$.opacity($.id("cover"),opacity)})},reload:function(arg){$.isMobileFlag?$.loadPhoneMain(null,arg):$.loadMain(null,arg)},refresh:function(domain,port,frame,page){if($.local)location.reload(!0);else{var ret=location.href.match(/(https?):\/\/([^\]]+[\]]|[^:\/]+)(:\d+)?\/?([^?]*)/);location.href=ret[1]+"://"+(domain||ret[2])+(port?":"+port:ret[3]?ret[3]:"")+"/"}},resize:function(){},mainScroll:function(){},fixTbl:function(){$.each(document.getElementsByTagName("div"),function(){0!=this.offsetWidth&&($.hasElemClass(this,"thead")||$.hasElemClass(this,"tbody"))&&(this.getElementsByTagName("table")[0].style.width=this.offsetWidth-20+"px")})},resizeStrList:function(val,num){for(var tmpStr="",index=0;val.length>index;){if(!(val.length>index+num)){tmpStr+=val.slice(index,val.length);break}tmpStr+=val.slice(index,index+num),tmpStr+="<br/>",index+=num}return tmpStr},htmlEncode:function(str){var div=document.createElement("div");return div.appendChild(document.createTextNode(str)),div.innerHTML},resizeStr:function(val,num){var tmpStr="";if(val.length>num){for(var i=0;i<num;i++)tmpStr+=val.charAt(i);tmpStr+="..."}else tmpStr=val;return tmpStr},resizeTlb:function(tlb,rows,rowLines){var div=tlb.parentNode;tlb.rows.length>rows?(div.style.height=(22*(rowLines||1)+3)*rows+"px",$.addElemClass(div,"scroll")):(div.style.height="auto",$.removeElemClass(div,"scroll"))},lock:function(){$.removeElemClass($.id("cover"),"nd"),$.opacity($.id("cover"),0)},unlock:function(){$.addElemClass($.id("cover"),"nd")},locked:function(){return!$.hasElemClass($.id("cover"),"nd")},addLoading:function(object,interval,hook,isNoCover){$.lock();var obj;object?(obj=$(object)).hasClass("button-group-button")?$("<div style='display: inline-block; vertical-align: middle;position: relative;top: -10px;'><span class='load'></span></div>").appendTo(obj.closest("div.button-group-container")):$("<div style='display: inline-block; vertical-align: middle;position: relative;top: -10px;'><span class='load'></span></div>").insertAfter(obj):obj=null,interval&&$.timeout(function(){hook&&!1===hook()||$.removeLoading()},interval),$.showLoading(obj,isNoCover)},showLoading:function(obj,isNoCover){if(obj){if(obj.hasClass("button-group-button")?obj.closest("div.button-group-container").find(".load").show():obj.next("div").find(".load").show(),1===isNoCover)return;$("span.load").length>0&&$.showCover()}else($("#g-loading-container").length>0?$("#g-loading-container"):$('<div class="g-loading-container" id="g-loading-container" ><div class="g-loading-container-wrap"><div class="g-loading-container-inner"><div class="g-loading-waiting-icon"></div></div></div></div>').appendTo("body")).show(),$.showCover()},hideLoading:function(){$.hideCover(),$("span.load").not(".wpsload").hide()},removeLoading:function(){$("span.load").closest("div").remove(),$("#g-loading-container").hide(),$.unlock(),$.hideCover(),$.isFunction($.act)&&($.act(ACT_CGI,"/cgi/clearBusy"),$.exe(function(){},!0))},timeout:function(hook,interval){var id=$.getAsync();return setTimeout(function(){$.checkAsync(id)&&hook&&hook()},interval)},auto_interval:0,auto:function(handle,interval,imediate,args,hook,id){if($.auto_interval=interval,id){if(!$.checkAsync(id))return}else id=$.getAsync();if(!imediate||!1!==handle(args))return setTimeout(function(){$.auto(handle,$.auto_interval,1,args,hook,id)},$.auto_interval);hook&&hook(args)},guage:function(strs,step,interval,hook,start,end,diag,note){var note=note?"<p class='progressbar-note'><span class='progressbar-note-title'>"+m_str.note+": </span>"+note+"</p>":"",str="<div class='con2'><p class='center'>"+strs[1]+"</p><div class='gbar-parent' style='width:450px;'><div class='gbar' id='_gbar'><b class='gitem' id='gitem'></b></div></div>"+note+"</div>";if(diag)$.loadCover(str,1);else $.progressBar(str);var completed=!1,count=0,count_max=5e3/interval;$.auto(function(args){if(completed)$.auto_interval=5e3/step;else if(args[2]>=args[3]/2&&count++>count_max){count=0,type="GET",url="?_="+ +new Date;var xhr=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;xhr.open(type,url,!0),xhr.setRequestHeader("Content-Type","text/plain"),xhr.onreadystatechange=function(){4==xhr.readyState&&200==xhr.status&&(completed=!0)},xhr.send(null)}var percent=Math.floor(100*args[2]/args[3]);if($(args[1]).animate({width:4.5*percent},$.auto_interval,function(){$(args[0]).html(percent+"%")}),args[2]>=args[3])return!1;args[2]++},interval,!0,[$.id("gitem"),$.id("_gbar"),start||0,step,end||step],function(args){$("#_gbar").animate({width:450},1,hook)})},guageStatic:function(strs,step,interval,hook,start,end,diag,note){var note=note?"<p class='progressbar-note'><span class='progressbar-note-title'>"+m_str.note+": </span>"+note+"</p>":"",str="<div class='con2'><p class='center'>"+strs[1]+"</p><div class='gbar-parent' style='width:450px;'><div class='gbar' id='_gbar'><b class='gitem' id='gitem'></b></div></div>"+note+"</div>";if(diag)$.loadCover(str,1);else $.progressBar(str);$.auto(function(args){$.auto_interval=5e3/step;var percent=Math.floor(100*args[2]/args[3]);if($(args[1]).animate({width:4.5*percent},$.auto_interval,function(){$(args[0]).html(percent+"%")}),args[2]>=args[3])return!1;args[2]++},interval,!0,[$.id("gitem"),$.id("_gbar"),start||0,step,end||step],function(args){$("#_gbar").animate({width:450},1,hook)})},guageWithRateControl:function(options){var percent=(options=$.extend({},options)).startRate||0,text=options.text||"",note=options.note?"<p class='progressbar-note'><span class='progressbar-note-title'>"+m_str.note+": </span>"+options.note+"</p>":"",updateImmediately=options.updateImmediately||!0,updateInterval=options.updateInterval||1e3,rateControl=options.rateControl||function(percentOld,callback){callback(percentOld+1)},callback_complete=options.callback_complete,callback_error=options.callback_error,isComplete=options.isComplete||function(percentOld,callback_complete){percentOld>=100&&callback_complete&&callback_complete()},updateIntervalHighSpeed=options.updateIntervalHighSpeed||50,autoEndFlag=!1,completeFlag=!1,errorFlag=!1,closeProgressBar=function(){bar.tpMsg("hide"),$("body").off("mousedown.focus"),$("body").off("keydown.focus"),$.hideCover()},str="<div class='con2'><p class='center'>"+text+"</p><div class='gbar-parent' style='width:450px;'><div class='gbar' id='_gbar'><b class='gitem' id='gitem'>"+percent+"%</b></div></div>"+note+"</div>",bar=$.progressBar(str);$.auto(function(args){if(autoEndFlag)return!1;var gbar=$("#_gbar"),gitem=$("#gitem");rateControl(percent,function(percentNew){percentNew>100&&(percentNew=100),percent=percentNew,gbar.animate({width:4.5*percentNew},$.auto_interval,function(){gitem.html(percentNew+"%"),percentNew>=100&&completeFlag&&(autoEndFlag=!0)})}),isComplete(percent,function(){completeFlag=!0,rateControl=function(percentOld,callback){callback(percentOld+1)},$.auto_interval=updateIntervalHighSpeed,isComplete=function(){}},function(data){autoEndFlag=!0,errorFlag=!0,callback_error.call($,data)})},updateInterval,updateImmediately,[],function(){closeProgressBar(),errorFlag||callback_complete&&callback_complete()})},showGuage:function(option){var isEnd=!1,isFirst=!0,rate=option.rate||2,counter=0,callback_complete=option.callback_complete,callback_error=option.callback_error;"undefined"!=typeof INCLUDE_WL_PROGRESSBAR&&INCLUDE_WL_PROGRESSBAR?$.guageWithRateControl({text:option.text||m_str.saving,updateInterval:option.updateInterval||1e3,rateControl:function(percentOld,callback){if(isFirst)return isFirst=!1,void $.exe(function(err){isEnd=!0,rate=100-percentOld});percentOld>85&&!isEnd?++counter>5&&(counter=0,callback(percentOld+1)):callback(percentOld+rate)},callback_complete:callback_complete,callback_error:callback_error}):$.exe(function(err){err?!!callback_error&&callback_error():!!callback_complete&&callback_complete()})},goToOtherPage:function(page,navName,callback){var flag_channelChange=!1;if(page&&navName)if($.curPage!=page||$("#ul-nav li.selected").attr("id")!=navName)var timer1=setInterval(function(){if(!$("#top-nav").hasClass("disabled")){var navSelected=$("#ul-nav li.selected");if(0!=navSelected.length&&($("#quicksetup").text().match(/\S/)||$("#menu").data("tpMenu")&&!$("#main").is(":empty"))){clearInterval(timer1),navSelected.attr("id")!=navName?($("#"+navName).click(),flag_channelChange=!0):flag_channelChange=!1;var timer2=setInterval(function(){var li=$("#menuTree").find('a[url="'+page+'"]:not(.more)').parent("li");if(0!==li.length){clearInterval(timer2);var parentScrollTop=0;if(li.hasClass("ml2")&&li.is(":hidden")){var parentLi=li.parents("li.ml1");parentScrollTop=parentLi.offset().top,$("#menu").scrollTop(parentScrollTop),parentLi.find("a")[0].click()}li.find("a")[0].click(),setTimeout(function(){$("#menu").scrollTop(li.position().top-$("#menu").children(":first").position().top),$.isFunction(callback)&&callback()},200)}},flag_channelChange?200:10)}}},$("#ul-nav li.selected").length>0?10:200);else $.isFunction(callback)&&callback()},turnqss:function(str){return $.qss?str.replace(/\bWPS\b/g,"QSS"):str.replace(/\bQSS\b/g,"WPS")},num:function(){var l=arguments.length-1,unalert=arguments[l];if(!0!==unalert&&(l++,unalert=!1),"string"==typeof(val=arguments[0])&&val.match(/\D/))return $.alert(ERR_NUM_INVAD,unalert);var val=parseInt(val,10);if(isNaN(val))return $.alert(ERR_NUM_INVAD,unalert);if(1==l)return 0;for(var i=1;i<l;i++)if(val>=arguments[i][0]&&val<=arguments[i][1]||val===arguments[i])return 0;return $.alert(ERR_NUM_OUTRANGE,unalert)},step:function(num,step){return Math.round(parseInt(num,10)/step)*step},asc:function(str,unalert){for(var i=0,l=str.length;i<l;i++)if(str.charCodeAt(i)>127)return $.alert(90201,unalert);return 0},ip2num:function(ip){if("number"==typeof ip)return ip;var ret;if(!(ret=ip.match(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/)))return!1;for(var i=1,val=0;i<=4;i++){if(parseInt(ret[i],10)>255)return!1;val=(val<<8)+parseInt(ret[i],10)}return val},num2ip:function(num){return"number"==typeof num&&(256+(num>>24))%256+"."+(num>>16&255)+"."+(num>>8&255)+"."+(255&num)},ifip:function(ip,unalert){if(!1===(ip=$.ip2num(ip)))return $.alert(ERR_IP_FORMAT,unalert);if(-1==ip)return $.alert(ERR_IP_BROADCAST,unalert);var net=ip>>24;return 0==net?$.alert(ERR_IP_SUBNETA_NET_0,unalert):127==net?$.alert(ERR_IP_LOOPBACK,unalert):net>=-32&&net<-16?$.alert(ERR_IP_MULTICAST,unalert):net>=-16&&net<0?$.alert(ERR_IP_PRESERVED,unalert):0},mask:function(mask,unalert){if((mask=$.ip2num(mask))>=0)return $.alert(ERR_MASK_INVAD,unalert);for(var i=32;i>0;i--,mask>>=1)if(mask%2)return-1==mask?0:$.alert(ERR_MASK_INVAD,unalert)},ipmask:function(ip,mask,unalert){return ip=$.ip2num(ip),mask=$.ip2num(mask),(ip&mask)==mask||0==(ip&mask)?$.alert(ERR_IPMASK_SUBNET_INVAD,unalert):(ip&~mask)==~mask||0==(ip&~mask)?$.alert(ERR_IPMASK_HOST_INVAD,unalert):0},ipmaskgw:function(ip,mask,gw,unalert){return ip=$.ip2num(ip),mask=$.ip2num(mask),gw=$.ip2num(gw),(ip&mask)!=(gw&mask)?$.alert(ERR_IPGW_NOT_SAME_SUBNET,unalert):0},mac:function(mac,unalert){return(ret=mac.match(/^([0-9a-fA-F]{2})(:[0-9a-fA-F]{2}){5}$/))?"00:00:00:00:00:00"==mac?$.alert(ERR_MAC_ZERO,unalert):mac.match(/^[fF]{2}(:[fF]{2}){5}$/)?$.alert(ERR_MAC_BROADCAST,unalert):parseInt(ret[1],16)%2?$.alert(ERR_MAC_MULTICAST,unalert):0:$.alert(ERR_MAC_FORMAT,unalert)},ip2ip:function(ip){for(var ipParts=ip.split("."),i=0;i<4;i++)ipParts[i]=parseInt(ipParts[i],10);return ipParts[0]+"."+ipParts[1]+"."+ipParts[2]+"."+ipParts[3]},isname:function(pName){return pName.length&&null==pName.match(/[\\\/\"\:\*\?\<\>\|\&]|\s$/)},isdomain:function(domain){var c,gotDot=!1;if("."==domain.charAt(0)||"-"==domain.charAt(0)||"."==domain.charAt(domain.length-1)||"-"==domain.charAt(domain.length-1))return!1;for(var i=0;i<domain.length;i++){if(c=domain.charAt(i),-1=="-.ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".indexOf(c))return!1;if("-"==c&&1==gotDot)return!1;if("."==c&&1==gotDot)return!1;"."==c&&0==gotDot&&(gotDot=!0),"-"==c&&0==gotDot&&(gotDot=!0),"."!=c&&"-"!=c&&1==gotDot&&(gotDot=!1)}return!0},chkKeyword:function(value){return!(value&&(!/^\S+$/.test(value)||value.indexOf(",")>=0))},isnum:function(num_string){for(var c,i=0;i<num_string.length;i++)if(c=num_string.charAt(i),-1=="0123456789".indexOf(c))return!1;return!0},isSameLan:function(lan1Ip,lan1Mask,lan2Ip,lan2Mask){var count=0;for(lan1a=lan1Ip.split("."),lan1m=lan1Mask.split("."),lan2a=lan2Ip.split("."),lan2m=lan2Mask.split("."),i=0;i<4;i++)l1a_n=parseInt(lan1a[i]),l1m_n=parseInt(lan1m[i]),l2a_n=parseInt(lan2a[i]),l2m_n=parseInt(lan2m[i]),(l1a_n&l1m_n)==(l2a_n&l2m_n)&&count++;if(4==count){var testIp=$.ip2num(lan1Ip),lanMask=$.ip2num(lan1Mask);return 0!=(testIp&~lanMask)&&(testIp&~lanMask)!=~lanMask}return!1},charCompareA:function(szname,en_limit,cn_limit){var c;if(szname.length>en_limit)return!1;for(var i=0;i<szname.length;i++)if(c=szname.charAt(i),-1=="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".indexOf(c)&&szname.length>cn_limit)return!1;return!0},getrightfirstonebitpos:function(num){var i,pos=0,numArr=[1,2,4,8,16,32,64,128];for(i=0;i<8;i++)(num&numArr[i])>>i==0&&pos++;return pos},getmaskbit:function(mask){var i,j,pos=0,numArr=[1,2,4,8,16,32,64,128],maskPart=mask.split(".");for(i=3;i>=0;i--)for(j=0;j<8;j++)(maskPart[i]&numArr[j])>>j==0&&pos++;return pos},isOrderIp:function(ip1,ip2){for(var ipS=ip1.split("."),ipE=ip2.split("."),i=0;i<4;i++){if(parseInt(ipS[i],10)<parseInt(ipE[i],10))return!0;if(parseInt(ipS[i],10)>parseInt(ipE[i],10))return!1}return!0},reverseStr:function(str){for(var newStr="",i=0;i<str.length;i++)newStr+=str.substring(str.length-1-i,str.length-i);return newStr},formatNum:function(num){var numNew=$.reverseStr(num.toString());return numNew.length>3&&(numNew=numNew.replace(/(\d\d\d)/g,function($0,$1){return $1+","})),numNew=","==numNew.charAt(numNew.length-1)?numNew.substring(0,numNew.length-1):numNew,$.reverseStr(numNew)},getWl24gMask:function(modeValue,chwidthValue){var mask=0;return"n-only"==modeValue||"n"==modeValue||"gn"==modeValue?"20M"==chwidthValue?mask=1<<IEEE80211_MODE_11NG_HT20:"40M"==chwidthValue?mask=1<<IEEE80211_MODE_11NG_HT40:"Auto"==chwidthValue&&(mask=1<<IEEE80211_MODE_11NG_HT40|1<<IEEE80211_MODE_11NG_HT20):"g-only"==modeValue?mask=1<<IEEE80211_MODE_11G:"b"==modeValue?mask=1<<IEEE80211_MODE_11B:$.alert(ERR_WLAN_MODE_INVALID),mask},getWl5gMask:function(modeValue,chwidthValue){var mask=0;return"n-only"==modeValue||"an"==modeValue||"ac"==modeValue||"ac-only"==modeValue||"nac"==modeValue?"20M"==chwidthValue?mask=1<<IEEE80211_MODE_11NA_HT20:"40M"==chwidthValue||"80M"==chwidthValue?mask=1<<IEEE80211_MODE_11NA_HT40:"Auto"==chwidthValue&&(mask=1<<IEEE80211_MODE_11NA_HT40):"a"==modeValue?mask=1<<IEEE80211_MODE_11A:$.alert(ERR_WLAN_MODE_INVALID),mask},is5GSupportRegion:function(standardArg,bandwidthArg,indexArg){var flag=!1,regionIndex=indexArg*region_chan_table_shift,dfsMask=1<<IEEE80211_CHAN_REQUIRED_DFS,mask=$.getWl5gMask(standardArg,bandwidthArg);for(i=1;i<=TOTAL_CHANNEL;i++)if(Region_chan_table[regionIndex+i]&mask&&(0==(Region_chan_table[regionIndex+i]&dfsMask)||(Region_chan_table[regionIndex+i],!1))){flag=!0;break}return flag},chgElem:function(elem,val){if(elem&&elem.nodeName)switch(elem.nodeName.toLowerCase()){case"input":elem.value=val;break;case"option":elem.text=val;break;default:$.hasElemClass(elem,"item")&&(val=val.replace(/:?\s*$/,":")),$(elem).html(val)}},upStyle:function(){$("h3").each(function(){if(!$(this).parent("div").hasClass("header-container")){var str="<div class='header-container'><h3><span class='T "+$(this).attr("class")+"'>"+$(this).html()+"</span></h3></div>";$(this).replaceWith(str)}}),WEB_INCLUDE_HELP&&$.addHelp(),$("div.mode-change").tpModeSelect(),$("input[type='text']").each(function(){var divTmp=$(this).parent("div"),bTmp=$(divTmp).find("b");if($(this).addClass("tp-input-text"),$.isIE&&$(this).is(":not(.mac-address):not(.ip-address)")&&0==$(this).css("borderWidth").search("1px")){$(this).wrap('<div class="input-wrapper">').after('<span class="corner-left"></span><span class="corner-right"></span>');var wrap=$(this).parent(".input-wrapper");$(this).off(".inputIE").on("focus.inputIE",function(){wrap.addClass("focus")}).on("blur.inputIE",function(){wrap.removeClass("focus")})}void 0==$(bTmp).attr("class")?void 0==$(bTmp).attr("id")?$(bTmp).replaceWith("<label class='label-title'>"+$(bTmp).html()+"</label>"):$(bTmp).replaceWith("<label class='label-title' id='"+$(bTmp).attr("id")+"'>"+$(bTmp).html()+"</label>"):void 0==$(bTmp).attr("id")?$(bTmp).replaceWith("<label class='label-title "+$(bTmp).attr("class")+"'>"+$(bTmp).html()+"</label>"):$(bTmp).replaceWith("<label class='label-title "+$(bTmp).attr("class")+"' id='"+$(bTmp).attr("id")+"'>"+$(bTmp).html()+"</label>"),$(divTmp).addClass("pure-control-group"),$(this).keydown(function(e){13==e.keyCode&&e.preventDefault()})}),$("input[type='password']").each(function(){var divTmp=$(this).closest("div:not(.tpPassword)"),bTmp=$(divTmp).find("b");if($(this).addClass("tp-input-text"),$.isIE&&0==$(this).css("borderWidth").search("1px")){$(this).wrap('<div class="input-wrapper">').after('<span class="corner-left"></span><span class="corner-right"></span>');var wrap=$(this).parent(".input-wrapper");$(this).off(".inputIE").on("focus.inputIE",function(){wrap.addClass("focus")}).on("blur.inputIE",function(){wrap.removeClass("focus")})}void 0==$(bTmp).attr("class")?void 0==$(bTmp).attr("id")?$(bTmp).replaceWith("<label class='label-title'>"+$(bTmp).html()+"</label>"):$(bTmp).replaceWith("<label class='label-title' id='"+$(bTmp).attr("id")+"'>"+$(bTmp).html()+"</label>"):void 0==$(bTmp).attr("id")?$(bTmp).replaceWith("<label class='label-title "+$(bTmp).attr("class")+"'>"+$(bTmp).html()+"</label>"):$(bTmp).replaceWith("<label class='label-title "+$(bTmp).attr("class")+"' id='"+$(bTmp).attr("id")+"'>"+$(bTmp).html()+"</label>"),$(divTmp).addClass("pure-control-group"),$(this).keydown(function(e){13==e.keyCode&&e.preventDefault()})}),$("div.steps").each(function(){$(this).children("h5").addClass("title"),$(this).find("span[id*='step']").addClass("step")}),$("button[type='submit']").not(".button-group-button").each(function(){var tag;if(!$(this).hasClass("tp-btn-custom")){$(this).addClass("pure-button tp-btn-custom"),nameTmp=$(this).html(),(tag=null!=this.className.match(/\b(T_|t_)(\w+)\b/))&&(tag=tag[0]),$(this).html('<span class="'+tag+'">'+nameTmp+"</span>");var str="<div class='button-container'></div>";$(this).wrap(str),$(this).hasClass("inline")&&$(this).parent().addClass("inline"),$(this).hasClass("inline-block")&&$(this).parent().addClass("inline-block"),$(this).hasClass("left")&&($(this).parent().addClass("left"),$(this).removeClass("left")),str="<form class='pure-form'></form>",$(this).wrap(str)}}),$("button[type='submit']").click(function(e){e.preventDefault()})},addHelp:function(){var curPageName=$.curPage.replace(/\.htm$/,"");if($.helpContent[curPageName]||$.helpContent[curPageName+$.sysMode]){$("div.help-container").remove(),$("#verticalFixed-con").append('<div class="help-container"><div class="help-btn-container"><a class="btn-help" href="javascript:void(0)"><svg xmlns="http://www.w3.org/2000/svg" width="28px" height="28px" viewBox="0 0 28 28"><path class="controlIcon" d="M14,4.4A9.6,9.6,0,1,1,4.4,14,9.62,9.62,0,0,1,14,4.4M14,2A12,12,0,1,0,26,14,12,12,0,0,0,14,2Z"/><path class="controlIcon" d="M17.81,7.54a6.41,6.41,0,0,0-3.78-1A5.62,5.62,0,0,0,9.86,8a5.1,5.1,0,0,0-1.4,3.69v.6h2.61v-.59C11.11,9.84,12,9,14,9a3.7,3.7,0,0,1,2.2.61A1.64,1.64,0,0,1,17,11a1.77,1.77,0,0,1-.42,1.19,7.41,7.41,0,0,1-1.18,1,10.09,10.09,0,0,0-2.29,2,4.33,4.33,0,0,0-.47,2.36v.51h2.51v-.51a2.19,2.19,0,0,1,.18-1.12,4.89,4.89,0,0,1,1.29-1.11,11.38,11.38,0,0,0,2.2-1.87A3.84,3.84,0,0,0,19.6,11,4,4,0,0,0,17.81,7.54Z"/><rect class="controlIcon" x="12.64" y="19.29" width="2.49" height="2.4"/></svg></a></div><div class="help-content-container"><div class="position-top-left"></div><div class="position-top-center"></div><div class="position-top-right"></div><div class="position-center-left"><div class="position-center-right"><span class="help-content-delta"></span><div class="help-content-container-wrap"><div class="help-content"></div></div></div></div><div class="position-bottom-left"></div><div class="position-bottom-center"></div><div class="position-bottom-right"></div></div></div>'),$.loadHelp($.curPage.replace(/\.htm$/,""));var $helpContainer=$("div.help-container"),$helpContent=$(".help-content-container");$("div.help-btn-container").on("click",function(e){e.preventDefault(),e.stopPropagation(),$helpContainer.hasClass("clicked")?($helpContainer.removeClass("clicked"),$helpContent.slideUp("fast"),$(document).off("click.closeHelp")):($helpContainer.addClass("clicked"),$helpContent.slideDown("fast"),$(document).off("click.closeHelp").on("click.closeHelp",function(){$helpContainer.hasClass("clicked")&&($helpContainer.removeClass("clicked"),$helpContent.slideUp("fast"),$(document).off("click.closeHelp"))}))}),$("div.help-btn-container").on("mouseenter.helpBtn",function(e){$(this).find("a.btn-help").addClass("hover")}),$("div.help-btn-container").on("mouseleave.helpBtn",function(e){$(this).find("a.btn-help").removeClass("hover")}),$helpContent.on("click",function(e){e.stopPropagation()});var resizeHelp=function(){var wrap=$("div.help-content-container-wrap"),wh=$(window).height();wrap.css("max-height",wh-290-56),($("#scroll").width()-$("#con").width())/2>=$(".help-content-container").width()?$helpContent.addClass("right"):$helpContent.removeClass("right")};resizeHelp(),$(window).off("resize.helpBtn").on("resize.helpBtn",function(){resizeHelp()})}else $("div.help-container").hide();$("tr.editor-container").children("td").find("div.help-container").remove()},loadHelp:function(name){name=name||$.curPage.replace(/\.htm$/,"");var help=this,index=1,sectionFlag=!1,render=function(contentObj){if(void 0!=contentObj){var htmlStr="";contentObj.TITLE&&(sectionFlag=!0,htmlStr+='<div class="section-container">',htmlStr+='<h4 class="title">'+contentObj.TITLE+"</h4>");var objContent=contentObj.CONTENT;return"wanBasic"==name&&("ETH"==$.sysMode.toUpperCase()?objContent=contentObj.CONTENT_ETH:"DSL"==$.sysMode.toUpperCase()&&(objContent=contentObj.CONTENT_DSL)),objContent&&$(objContent).each(function(index,element){htmlStr+=contentRender(element)}),1==sectionFlag&&(sectionFlag=!1,htmlStr+="</div>"),htmlStr}},contentRender=function(obj){if(obj.hasOwnProperty("display")&&1!==obj.display&&("string"==typeof obj.display&&1!=eval(obj.display)||void 0===obj.display||0==obj.display))return"";var htmlStr="",type=obj.type,connector=obj.connector||" - ";switch(type){case"title":1==sectionFlag&&(htmlStr+="</div>"),sectionFlag=!0,htmlStr+='<div class="section-container">',htmlStr+='<div class="title-container">',obj.title?(htmlStr+='<h5 class="title title-title">'+obj.title+"</h5>",obj.content&&(htmlStr+="<p>"+obj.content+"</p>")):htmlStr+='<h5 class="title title-title">'+obj.content+"</h5>";break;case"title2":htmlStr+='<div class="title-container">',htmlStr+='<h5 class="title title-title2">'+obj.content+"</h5>";break;case"name":if(index>=2){var level=index;htmlStr+='<div class="name-container'+level+'">',htmlStr+='<h5 class="title name-title'+level+'">'+obj.title+"</h5>",htmlStr+='<span class="connector">'+connector+"</span>",htmlStr+="<span>"+(obj.content?obj.content:"")+"</span>"}else htmlStr+='<div class="name-container">',htmlStr+='<h5 class="title name-title"><span class="name-text">'+obj.title+'</span><span class="help-arrow">arrow</span></h5>',htmlStr+='<div class="nd"><p>'+(obj.content?obj.content:"")+"</p>";break;case"paragraph":htmlStr+='<div class="paragraph-container">',obj.title&&(htmlStr+='<h5 class="title paragraph-title">'+obj.title+"</h5>"),htmlStr+='<p class="paragraph">'+obj.content+"</p>";break;case"step":case"note":htmlStr+='<div class="note-container">',htmlStr+='<h5 class="title note-title">'+obj.title+"</h5>",htmlStr+='<ol class="note">',$(obj.content).each(function(index,note){void 0!==note&&(htmlStr+="string"==typeof note?"<li>"+note+"</li>":"<li>"+contentRender(note)+"</li>")}),htmlStr+="</ol>"}return obj.children&&(index++,htmlStr+='<div class="container sub-container  sub-container-'+index+'">',$(obj.children).each(function(index,child){htmlStr+=contentRender(child)}),htmlStr+="</div>",index--),"name"==obj.type&&1==index&&(htmlStr+="</div>"),htmlStr+="</div>"},contentObj;$.helpContent[name]?contentObj=$.helpContent[name]:(name+=$.sysMode.toUpperCase(),contentObj=$.helpContent[name]);var htmlStr="";htmlStr=render(contentObj);var content=$("div.help-content");content.html($(htmlStr)),$("div.name-container h5.name-title").each(function(){var self=$(this);$(this).parent().on("click.help",function(){var tempDiv=self.next("div");self.find("span");tempDiv.hasClass("nd")?(self.addClass("h5-opened"),tempDiv.slideDown("fast",function(){tempDiv.removeClass("nd")})):(self.removeClass("h5-opened"),tempDiv.slideUp("fast",function(){tempDiv.addClass("nd")}))})})},displayHelp:function(display,sectionIndex,itemIndex){"number"==typeof sectionIndex&&setTimeout(function(){var section=$("div.help-content").find(".section-container:eq("+sectionIndex+")");if(itemIndex){$.isArray(itemIndex)||(itemIndex=[itemIndex]);for(var i=0,len=itemIndex.length;i<len;i++)if("number"==typeof itemIndex[i]){var item=section.find(":nth-child("+(itemIndex[i]+1)+")");!0===display?item.show():item.hide()}}else!0===display?section.show():section.hide()},100)},pwdIntensityCheck:function(div,val){if(div.slideDown(),div.find("span[class^=level]").addClass("ori").removeClass("green yellow red"),val){var lowerRe=/[a-z]/,digitRe=/\d/,otherRe=/(.[^a-zA-Z0-9])/,hasUpper=0,hasLower=0,hasDigit=0,hasOther=0,level=0;hasUpper=/[A-Z]/.test(val)?1:0,hasLower=lowerRe.test(val)?1:0,hasDigit=digitRe.test(val)?1:0,hasOther=otherRe.test(val)?1:0,level=hasUpper+hasLower+hasDigit+(val.length>10?1:0)+hasOther,val.length<=5?level<=2?div.find("span.level1").addClass("red"):3!=level&&4!=level||div.find("span.level2").addClass("yellow"):level<=1?div.find("span.level1").addClass("red"):2==level||3==level?div.find("span.level2").addClass("yellow"):level>=4&&div.find("span.level3").addClass("green")}},isValidGLUIP6Addr:function(ip6Addr){var flag,regExp=/^(:|[a-f]|[A-F]|[0-9]){1,39}$/;if(flag=!!regExp.test(ip6Addr),regExp=/::/,flag)if(regExp.test(ip6Addr))if((regExp=/^([a-f]|[A-F]|[0-9])*(::)([a-f]|[A-F]|[0-9])*(::)([a-f]|[A-F]|[0-9])*$/).test(ip6Addr))flag=!1;else{var index=ip6Addr.indexOf("::"),len=ip6Addr.length,substr1=ip6Addr.substr(0,index),substr2=ip6Addr.substr(index+2,len-index-2);regExp=/^(([a-f]|[A-F]|[0-9]){1,4}(:)){0,6}([a-f]|[A-F]|[0-9]){1,4}$/;var num=0;if(""==substr1&&""==substr2)return!0;if(""==substr2)regExp.test(substr1)||(flag=!1);else if(""==substr1)regExp.test(substr2)||(flag=!1);else if(regExp.test(substr1)&&regExp.test(substr2)){if(regExp.test(substr1)&&regExp.test(substr2)){for(i=0;i<substr1.length;i++)":"==substr1.charAt(i)&&(num+=1);for(var i=0;i<substr2.length;i++)":"==substr1.charAt(i)&&(num+=1);num>5&&(flag=!1)}}else flag=!1}else(regExp=/^(([a-f]|[A-F]|[0-9]){1,4}(:)){7}([a-f]|[A-F]|[0-9]){1,4}$/).test(ip6Addr)||(flag=!1);if(flag){index=ip6Addr.indexOf(":");var substr=ip6Addr.substr(0,index);0==index||0==parseInt(substr,16)?((regExp=/^((0{0,4})|::|:)*$/).test(ip6Addr)&&(flag=!1),(regExp=/^(((0){0,4})|::|:)*((0){0,3}(1))$/).test(ip6Addr)&&(flag=!1)):parseInt(substr,16)>=65280?flag=!1:parseInt(substr,16)>=65152&&parseInt(substr,16)<=65215?flag=!0:parseInt(substr,16)>=8192&&parseInt(substr,16)<=16383&&(flag=!0)}return flag},isValidGLUIP6AddrStrict:function(ip6Addr){var flag,regExp=/^(:|[a-f]|[A-F]|[0-9]){1,39}$/;if(flag=!!regExp.test(ip6Addr),regExp=/::/,flag)if(regExp.test(ip6Addr))if((regExp=/^([a-f]|[A-F]|[0-9])*(::)([a-f]|[A-F]|[0-9])*(::)([a-f]|[A-F]|[0-9])*$/).test(ip6Addr))flag=!1;else{var index=ip6Addr.indexOf("::"),len=ip6Addr.length,substr1=ip6Addr.substr(0,index),substr2=ip6Addr.substr(index+2,len-index-2);regExp=/^(([a-f]|[A-F]|[0-9]){1,4}(:)){0,6}([a-f]|[A-F]|[0-9]){1,4}$/;var num=0;if(""==substr1&&""==substr2)flag=!1;else if(""==substr2)flag=!1;else if(""==substr1)regExp.test(substr2)||(flag=!1);else if(regExp.test(substr1)&&regExp.test(substr2)){if(regExp.test(substr1)&&regExp.test(substr2)){for(i=0;i<substr1.length;i++)":"==substr1.charAt(i)&&(num+=1);for(var i=0;i<substr2.length;i++)":"==substr1.charAt(i)&&(num+=1);num>5&&(flag=!1)}}else flag=!1}else(regExp=/^(([a-f]|[A-F]|[0-9]){1,4}(:)){7}([a-f]|[A-F]|[0-9]){1,4}$/).test(ip6Addr)||(flag=!1);if(flag){index=ip6Addr.indexOf(":");var substr=ip6Addr.substr(0,index);0==index||0==parseInt(substr,16)?((regExp=/^((0{0,4})|::|:)*$/).test(ip6Addr)&&(flag=!1),(regExp=/^(((0){0,4})|::|:)*((0){0,3}(1))$/).test(ip6Addr)&&(flag=!1)):parseInt(substr,16)>=65280?flag=!1:parseInt(substr,16)>=65152&&parseInt(substr,16)<=65215?flag=!0:parseInt(substr,16)>=8192&&parseInt(substr,16)<=16383&&(flag=!0)}return flag},isTimeVaild:function(time){if(regExp=/^[0-9]{2}:[0-9]{2}$/,!regExp.test(time))return!1;var timePart=time.split(":");return!(timePart[0]>23||timePart[1]>59)},getDefaultHostname:function(){var c,i=0,hostname="",hostnameLen=0;for(i=0;i<$.model.length;i++)if(c=$.model.charAt(i),-1=="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".indexOf(c)){if(0==hostnameLen||hostnameLen>0&&"_"==hostname.charAt(hostnameLen-1))continue;hostname+="_",hostnameLen++}else hostname+=c,hostnameLen++;return hostnameLen>0&&"_"==hostname.charAt(hostnameLen-1)?hostname.substr(0,hostnameLen-1):hostname},trans:function(obj){var elems=["input","option","span","td","th","b","p","label","h3","h5","button","a"],strs=$.curPage?n_str[$.curPage.match(/(\w+)\.htm$/)[1]]:[];for(var i in strs)obj.prop("id")==i?$.chgElem(obj.get(0),strs[i]):$.chgElem(obj.find("#"+i).get(0),strs[i]);$.each(elems,function(){if(obj.is(""+this)){var tag;(tag=obj.prop("class").match(/\bT_(\w+)\b/))&&tag[1]&&(void 0!==s_str[tag[1]]?$.chgElem(obj.get(0),s_str[tag[1]]):void 0!==m_str[tag[1]]?$.chgElem(obj.get(0),m_str[tag[1]]):void 0!==strs[tag[1]]&&$.chgElem(obj.get(0),strs[tag[1]]))}$.each(obj.find(""+this),function(){var tag;(tag=$(this).prop("class").match(/\bT_(\w+)\b/))&&tag[1]&&(void 0!==s_str[tag[1]]?$.chgElem($(this).get(0),s_str[tag[1]]):void 0!==m_str[tag[1]]?$.chgElem($(this).get(0),m_str[tag[1]]):void 0!==strs[tag[1]]&&$.chgElem($(this).get(0),strs[tag[1]]))})})},randomId:function(type){return type+"-"+parseInt(1e3*Math.random()*1e3*1e3*10,10).toString()},setCentralPosition:function(me){var me=me||this,posX=parseInt(($(window).width()-me.width())/2,10),posY=parseInt(($(window).height()-me.height())/2,10);return me.css({left:posX,top:posY}),{x:posX,y:posY}},setFixedCentral:function(me){var me=me||this,posX=parseInt(($(window).width()-me.width())/2,10),posY=parseInt(($(window).height()-me.height())/2,10);me.css({left:posX,top:posY,bottom:"auto",right:"auto",position:"fixed"});var changeSize=function(){posX=parseInt(($(window).width()-me.width())/2,10),posY=parseInt(($(window).height()-me.height())/2,10),me.css({left:posX,top:posY})};$(window).off("resize.setfixed"),$("body#mainBody").off("resize.setfixed"),$(window).on("resize.setfixed",changeSize),$("body#mainBody").on("resize.setfixed",changeSize)},showCover:function(){if(!$.isMobileFlag){var mask=$("div.mask#mask");!!mask.length||(mask=$('<div id="mask" class="mask"><div id="cover-loading"></div></div>').appendTo($("body#mainBody"))),mask.show()}},hideCover:function(){if(!$.isMobileFlag){var mask=$("div.mask#mask");!!mask.length&&mask.hide()}},showWaiting:function(){var detBox=$("#cover-loading"),width=0,height=0,docWidth=($("#mask"),document.documentElement.clientWidth),docHeight=document.documentElement.clientHeight;detBox.css("display","block");var width=detBox.get(0).offsetWidth,height=detBox.get(0).offsetHeight,marginX=docWidth>width?-width/2:0,marginY=docHeight>height?-height/2:0,left=0==marginX?0:"50%",top=0==marginY?0:"50%";detBox.css({left:left,top:top})},baseIndexOf:function(array,value,fromIndex){for(var index=(fromIndex||0)-1,length=array?array.length:0;++index<length;)if(array[index]===value)return index;return-1},errorTip:function(id,content){var str,errno=content;str=$.isNumeric(errno)?e_str[errno]?e_str[errno]:e_str[ERR_UNKOWN]:content,$("#"+id+"_tips").showCold("fast"),$("#"+id+"_tips_content").html(str)},isMobile:function(){if(!("WEB_INCLUDE_MOBILE_UI"in window&&1==window.WEB_INCLUDE_MOBILE_UI))return!1;var check=!1;return function(a){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0)}(navigator.userAgent||navigator.vendor||window.opera),$.isMobileFlag=check&&-1===document.cookie.search("UserChange=true"),check},detectUA:function(uas){return(uas=uas||navigator.userAgent).search(/(GoogleTV|AppleTV|HbbTV|Smart.?TV|SMART.TV)/)>=0?"desktop":uas.search(/(Tablet|iPad;|Kindle|Silk)/)>=0?"tablet":uas.search(/(iPod;|iPod touch;|iPhone;|Mobile Safari|IEMobile|Windows Phone|Fennec|Opera Mini|Opera Mobi)/)>=0?"mobile":uas.search(/(Windows NT|CrOS|Macintosh;)/)>=0?"desktop":uas.search(/TV[^a-zA-Z]/)>=0?"desktop":uas.search(/Mobile/)>=0?"mobile":uas.search(/Android/)>=0?uas.search(/Safari/)>=0?"tablet":"mobile":uas.search(/(MIDP|Linux arm)/)>=0?"mobile":uas.search(/(Linux|SunOS|FreeBSD|OpenBSD|NetBSD)/)>=0?"desktop":"unknow"},alert:function(){return $.isMobileFlag?$.alertMobile(arguments):$.alertPC.apply($,arguments)},alertAsnyc:function(){return $.isMobileFlag?$.alertMobile(arguments):$.alertPC.apply($,arguments)},toastGlobal:function(options){(options=$.extend({},options)).className=options.className||"",options.text=options.text||"";var toast_container=$("#global-toast-container").length>0?$("#global-toast-container"):$('<div id="global-toast-container"><div class="global-toast-wrapper"><div class="shadow-top-left"></div><div class="shadow-top"></div><div class="shadow-top-right"></div><div class="shadow-left"><div class="shadow-right"><div class="global-toast-inner"><span id="global-toast-text"></span><span class="icon-close"></span> </span></div></div></div><div class="shadow-bot-left"></div><div class="shadow-bot"></div><div class="shadow-bot-right"></div></div></div>').appendTo("body");toast_container.removeClass().fadeInCold(400),options.className&&toast_container.addClass(options.className),$("#global-toast-text").html(options.text),$("#global-toast-container .icon-close").off("click").on("click",function(){$("#global-toast-container").fadeOutCold(400),$.isFunction(options.callback_close)&&options.callback_close.call(window)})},Base64Encoding:function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",output="",i=0;for(input=$.utf8_encode(input);i<input.length;)enc1=(chr1=input.charCodeAt(i++))>>2,enc2=(3&chr1)<<4|(chr2=input.charCodeAt(i++))>>4,enc3=(15&chr2)<<2|(chr3=input.charCodeAt(i++))>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4);return output},utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext},isSpecialConnection:function(connObj){return"route.htm"!=$.curPage&&(connObj.name.search("iptv")>=0||connObj.name.search("voip")>=0)},checkCloudConn:function(success,fail){var getHttpObject=function(hook){var xmlHttp=null;try{xmlHttp=new XMLHttpRequest}catch(e){try{xmlHttp=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{xmlHttp=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}}return xmlHttp.onreadystatechange=function(){4==xmlHttp.readyState&&hook&&hook()},xmlHttp},xmlHttpObj=getHttpObject(function(){200==xmlHttpObj.status?(eval(xmlHttpObj.responseText),0==Status&&success?success():fail&&fail()):window.location.reload()});xmlHttpObj.open("POST",window.location.protocol+"//"+window.location.host+"/cgi/checkCloudConn",!0),xmlHttpObj.setRequestHeader("TokenID",$.tokenid||0),xmlHttpObj.send(null)},setIframeSrc:function(module,newPageFlag){if(module){var url;url=1?$.cloudOrigin+"/cloud_ui_v2/pages/device/index.html?module="+module+"&_="+(new Date).getTime():$.cloudOrigin+"/cloud_ui_newVI/pages/device/index.html?module="+module+"&_="+(new Date).getTime(),$("#cloud-login").attr("src",url),$.setWaitingEvent("ev_watingTimeout")}},getToken:function(module,updateFlag,cgi,newPageFlag){$.tpAjax({url:"/cgi/getTokenc",async:!0,bScript:!0,success:function(){$.deviceToken=Token,$.cloudOrigin=EwebURL,$.deviceToken?$.setIframeSrc(module,newPageFlag):$(window).trigger("ev_watingTimeout")}})},postToken:function(){var param={};param.token=$.deviceToken,param.deviceToken=$.deviceToken,param.eType="ev_token";var str=JSON.stringify(param);window.frames["cloud-login"]&&window.frames["cloud-login"].postMessage(str,$.cloudOrigin)},postUserInfo:function(){var param={};if(param=$.userInfo,param.eType="ev_user_info",$.act){var userObj=$.act(ACT_GET,CURRENT_USER);$.exe(),2==userObj.userSetting&&(1==userObj.userRole?param.role=0:2==userObj.userRole&&(param.role=1))}var str=JSON.stringify(param);window.frames["cloud-login"]&&window.frames["cloud-login"].postMessage(str,$.cloudOrigin)},getDeviceInfo:function(hasStok){$.cloud=$.cloud||{};var params={};if($.act){var userObj=$.act(ACT_GET,CURRENT_USER);$.exe(),2==userObj.userSetting&&(params.cloudUserName=userObj.userName,1==userObj.userRole?params.role=0:2==userObj.userRole&&(params.role=1)),params.model=$.model}params.eType="ev_deviceInfo",params.windowHeight=$(window).height()-90,params.windowWidth=$(window).width(),params.iframeTop=$("#cloud-login").offset().top,"INCLUDE_OPTION66"in window&&INCLUDE_OPTION66&&(void 0==$.controlIconColor&&($.controlIconColor=$(".controlIcon").css("fill"),console.log($.controlIconColor)),void 0!=$.controlIconColor&&(params.theme={color:$.controlIconColor}));var str=JSON.stringify(params);window.frames["cloud-login"].postMessage(str,$.cloudOrigin)},iframeResize:function(iframeObj,height){iframeObj.css({height:height+20}),$.removeLoading()},waitingId:!1,waitingTime:1e4,setWaitingEvent:function(eType,obj,waitingTime){$.waitingId=!1;var time=waitingTime||$.waitingTime,me=obj||window;return me=me.jquery?me:$(me),$.waitingId=setTimeout(function(){me.trigger(eType)},time),!0},clearWaitingEvent:function(){$.waitingId&&(clearTimeout($.waitingId),$.waitingId=!1)},doInternetDiag:function(callCon,CallDis){function getDiagResult(callCon,CallDis){var diagTool=$.act(ACT_GET,DIAG_TOOL,null,null,["LastResult"]);$.exe(function(err){err||(1==diagTool.lastResult?callCon&&callCon():3==diagTool.lastResult?setTimeout(function(){getDiagResult(callCon,CallDis)},1e3):CallDis&&CallDis())})}var diagTool=$.act(ACT_GET,DIAG_TOOL,null,null,["LastResult"]);$.exe(function(err){err||($.act(ACT_OP,ACT_OP_DIAG_STARTDIAG,diagTool.__stack),$.exe(function(err){err||setTimeout(function(){getDiagResult(callCon,CallDis)},1500)}))})},encodeHtml:function(str){var arrEntities={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return str.replace(/&(lt|gt|nbsp|amp|quot);/gi,function(all,t){return arrEntities[t]})},htmlEncodeStr:function(str){return void 0==str||""==str?str:str.replace(/[<>&"]/g,function(c){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[c]})},loadScript:function(url){$("head").append('<script src="'+url+'" type="text/javascript"><\/script>')},loadCss:function(url){$("head").append('<link rel="stylesheet" type="text/css" href="'+url+'"/>')}}),function($){$.fn.divmask=function(){$(this).parent().append('<div class="div-mask"> </div>')},$.fn.unmask=function(){$(this).parent().find(".div-mask").remove()},$.fn.hideCold=function(speed,callback){$.isIE?$(this).hide(callback):$(this).hide(speed,callback)},$.fn.showCold=function(speed,callback){$.isIE?$(this).show(callback):$(this).show(speed,callback)},$.fn.fadeInCold=function(speed,callback){$.isIE?$(this).show(callback):$(this).fadeIn(speed,callback)},$.fn.fadeOutCold=function(speed,callback){$(this).show(callback),$.isIE?$(this).hide(callback):$(this).fadeOut(speed,callback)}}(jQuery);var img2=new Image;img2.src="/img/globalLoading.gif",delete img2;var BETA,DATACODE,AGILE_CONFIG;