!function(o){var d,n;o.su=o.su||{},o.su.widgets={},o.su.Widget=(d={labelField:{attribute:"label-field",defaultValue:""},cls:{attribute:"cls",defaultValue:" container widget-container "},separator:{attribute:"separator",defaultValue:":"},labelCls:{attribute:"label-cls",defaultValue:""},inputCls:{attribute:"input-cls",defaultValue:""},tips:{attribute:"tips",defaultValue:""},shortTips:{attribute:"short-tips",defaultValue:""},tipsCls:{attribute:"tips-cls",defaultValue:""},errorTipsCls:{attribute:"error-tips-cls",defaultValue:""}},(n=function(e){if("object"===o.type(e.id))o(e.id).attr("id")?this.domId=o(e.id).attr("id"):(this.domId=o.su.randomId("widget-"),o(e.id).attr("id",this.domId)),e.id=this.domId;else{if("string"!==o.type(e.id))return void console.error("Widget id doesn't exists. ");this.domId=e.id}this._init(e),this.init(e);var i,s,e=this.render;return this.render=(i=e,s=this,function(){var e=this,t=i.call(this),t=t&&t.then?t:o.Deferred().resolve();return t.then(function(){s._bindListeners(),s._initTip(),s._initScrollbar(),e._view&&e._view.onChildWidgetRendered(e),e.rendered=!0})}),this}).regMap={base:o.extend({settings:d,listeners:[]},n.prototype={_init:function(e){var a=this.dom(),n=this,r=e.settings=e.settings||{};this.settings=function(){var e,t,i,s=o.extend({},d,n.settings);for(e in s)s.hasOwnProperty(e)&&(t=s[e],r.hasOwnProperty(t.attribute)||a[0]&&a[0].hasAttribute(t.attribute)?("object"===o.type(r[t.attribute])&&"object"===o.type(t.defaultValue)&&(r[t.attribute]=o.extend(!0,{},t.defaultValue,r[t.attribute])),i=r[t.attribute]||a.attr(t.attribute),i=o.isFunction(t.setter)?t.setter.call(a,i):i,r[e]=i):(i=t.defaultValue,t.getter?r[e]=t.getter.call(a):r[e]="object"===o.type(i)?o.su.clone(i):i));return r}(),e.customSettings&&o.extend(this.settings,e.customSettings),this._view=e.view,this._view&&this._view.addChildWidget(this),this._status={shown:!0,disabled:!1},this.dom().data("viewObj",this)},_initTip:function(e){var t,i=(e=this).settings,s=e.getContainer();i.tipText&&s&&((t=s.children("div[widget=toolTip]")).get(0)&&(o(t[0]).attr("id",e.domId+"_tooltip"),new o.su.widgets.toolTip({id:o(t[0]),tipText:i.tipText}).render())),!s||(t=s.children(".widget-wrap-outer").children("div[widget=errortip]")).get(0)&&(o(t[0]).attr("id",e.domId+"_errortip"),e.errortip=new o.su.widgets.errortip({id:o(t[0]),type:e._type}),e.errortip.render(),e.errortip.hide()),e.setTips(i.tips)},_initScrollbar:function(){var i=this;i.dom().find(".su-scroll").add(i.dom().filter(".su-scroll")).each(function(e,t){o(this).closest("[widget]")[0]==i.dom()[0]&&o.su.scrollbar({ele:t,opts:i.scrollOption||{}})})},_bindListeners:function(){if(this.listeners&&o.isArray(this.listeners)){var e,t,a=this,n=this.listeners;if(a._eventMap&&0<a._eventMap.length)for(e=0,t=a._eventMap.length;e<t;e++){var i=a._eventMap[e];i.target?i.parent.off(i.event,i.target,i.func):i.parent.off(i.event,i.func)}for(a._eventMap=[],e=0,t=n.length;e<t;e++)!function(t){var e,i,s=function(){var e=Array.prototype.slice.apply(arguments);e.push(a),n[t].callback.apply(this,e)};n[t].condition&&!1===n[t].condition(a)||(e=n[t].selector,"function"===o.type(e)?((i=e.call(a)).target?o(i.parent).on(n[t].event,i.target,s):o(i.parent).on(n[t].event,s),a._eventMap.push({parent:o(i.parent),target:i.target||"",event:n[t].event,handler:s})):(""!==e?a.dom().on(n[t].event,e,s):a.dom().on(n[t].event,s),a._eventMap.push({parent:a.dom(),target:e||"",event:n[t].event,handler:s})))}(e)}},init:function(){},dom:function(){return o("#"+this.domId)},render:function(){this.dom().addClass(this.settings.cls)},getContainer:function(){var e=this.dom();return e.hasClass("widget-container")?e:(e=e.children(".widget-container")).get(0)?o(e.get(0)):null},setLabelField:function(e){this.dom().find("label.widget-fieldlabel").html(e)},setLabelVisible:function(e){this.dom().find(".widget-fieldlabel-inner").css("visibility",e?"visible":"hidden")},show:function(){this.dom().show(),this.dom().triggerHandler("ev_widget_show")},hide:function(){this.dom().hide(),this.dom().triggerHandler("ev_widget_hide")},fadeOut:function(e){var t=this,i=e/1e3+"s";this.dom().css({opacity:0,transtion:"opacity "+i}),setTimeout(function(){t.dom().hide().css({display:"none",opacity:1,transtion:"no "})},e)},toggle:function(){this.dom().is(":visible")?this.hide():this.show()},enable:function(){this.dom().removeClass("disabled")},disable:function(){this.dom().addClass("disabled")},isDisabled:function(){var e=this.dom(),t=this.getContainer();return t&&t.hasClass("disabled")&&!t.hasClass("visual-disabled")||!0===e.prop("disabled")},setError:function(e){var t=this.dom(),i=this.getContainer(),t=t.find("div[widget=errortip]");i&&!this.isDisabled()&&(this.errortip?e&&this.errortip.show(e):0<t.length&&i&&((t=i.children(".widget-wrap-outer").children("div[widget=errortip]")).get(0)&&(o(t[0]).attr("id",this.domId+"_errortip"),this.errortip=o(t[0]).errortip({type:this.type})[0],this.errortip.render(),e&&this.errortip.show(e))),i.removeClass("valid").addClass("error"),i.find("span.widget-validate-icon").css({"display":"inline-block"}))},setErrorHtml:function(e){var t=this.dom(),i=this.getContainer(),t=t.find("div[widget=errortip]");i&&!this.isDisabled()&&e&&(this.errortip?this.errortip.showHtml(e):0<t.length&&i&&((t=i.children(".widget-wrap-outer").children("div[widget=errortip]")).get(0)&&(o(t[0]).attr("id",this.domId+"_errortip"),this.errortip=o(t[0]).errortip({type:this.type})[0],this.errortip.render(),this.errortip.showHtml(e))),i.removeClass("valid").addClass("error"),i.find("span.widget-validate-icon").css({"display":"inline-block"}))},setNormal:function(){var e=this.dom(),t=(this.settings,this.getContainer()||e);e.find("div[widget=errortip]");t&&(t.removeClass("focus error disable dirty correct"),t.find("span.widget-validate-icon").css({"display":"none"}),this.errortip&&this.errortip.hide())},addClass:function(e){var t=this.dom();return t&&0<t.length&&t.addClass(e),this},removeClass:function(e){var t=this.dom();return t&&0<t.length&&t.removeClass(e),this},setFocus:function(){var e=this.getContainer();this.setNormal(),e.addClass("focus")},removeFocus:function(){this.getContainer().removeClass("focus")},setTips:function(e){var t=this.dom(),i=this.settings,t=(this.getContainer()||t).find("div.widget-tips");i.tips=e,"string"===o.type(e)&&t.find("div.tips-content").html(e),e?(t.show(),t.fadeIn(150)):(t.hide(),t.css("display","none"))},setShortTips:function(e){var t=this.dom(),i=this.settings,t=(this.getContainer()||t).find("div.widget-short-tips");i.shortTips=e,"string"===o.type(e)&&t.find("div.short-tips-content").html(e),e?(t.css("display","inline-block"),t.fadeIn(150)):(t.hide(),t.css("display","none"))},setToolTip:function(e){var t=this.dom(),i=this.settings,t=(this.getContainer()||t).find("div.tooltip-container");i.tipText=e,"string"===o.type(e)&&t.find("p.tip-text").html(e),e?t.show():t.hide()},setPosition:function(e,t,i,s){var a=this.getContainer();if(a)return e=(e="center"===e?parseInt((o(window).width()-a.outerWidth())/2,10):e||0)<0?0:e,t=(t="center"===t?parseInt((o(window).height()-a.outerHeight())/2,10):t||0)<0?0:t,a.css({left:e,top:t,right:i,bottom:s}),{x:e,y:t}},getMask:function(){var e=o("#global-mask");return 0<e.length?e.data("viewObj"):(o('<div id="global-mask"></div>').appendTo(o("body")),new o.su.widgets.mask({id:"global-mask"}))},_destroy:function(){if(this._view&&this._view.removeChildWidget(this),this.destroy&&this.destroy(),this._eventMap){for(var e=0,t=this._eventMap.length;e<t;e++){var i=this._eventMap[e];i.target?o(i.parent).off(i.event,i.target,i.handler):o(i.parent).off(i.event,i.handler)}this._eventMap=[]}this.dom().data("viewObj",null),this.dom().remove(),this.settings=null},getStatus:function(e){return e?this._status[e]:this._status},setStatus:function(e,t){this._status[e]=t,this.dom().triggerHandler("ev_status_change",[this._status])},setVisible:function(e){e?this.dom().css("visibility","visible"):this.dom().css("visibility","hidden")}})},n.register=function(t,s){var a,i,e;for(e in n.regMap[t]=s,i=s.extend?o.su.widgets[s.extend]:o.su.Widget,n.regMap[t].settings=function(){var e,t,i=s.extend?n.regMap[s.extend].settings:d;e=o.isFunction(s.settings)?s.settings.call(a,o.extend({},i)):o.extend({},i,s.settings);for(t in e)e.hasOwnProperty(t)&&!e[t].setter&&(e[t].setter=(e[t].attribute,function(e){o(this);var t=o.su.getAttrObject;if(null!==e&&e!==undefined)return"string"===o.type(e)&&e.match(/{(.+)}/g)?null!==(t=t(o.su.CHAR,e))&&t!==undefined?t:"Not Defined":e}));return e}(),n.regMap[t].listeners=function(){var e=s.extend?n.regMap[s.extend].listeners:[];if(s.listeners=s.listeners||[],o.isFunction(s.listeners))return s.listeners.call(a,e);return e.concat(s.listeners)}(),a=o.su.widgets[t]=function(e){return this._type||(this._type=t,this.settings=n.regMap[t].settings,this.listeners=n.regMap[t].listeners),i.call(this,e),this},o.su.inherit(i,a),s)s.hasOwnProperty(e)&&o.isFunction(s[e])&&(a.prototype[e]=s[e]);return a},n),o("html").delegate("input","focus",function(e){e.stopPropagation(),e.preventDefault()}).on("click",function(e){e.stopPropagation(),o("div.region-select-wrap, div.region-search-wrap").hide(),o("div.timepicker-msg-container").removeAttr("dragFlag")}).on("mouseup",function(e){o("div.button-container").removeClass("clicked"),o("div.btn-help-container a.btn-help").removeClass("clicked"),o("div.timepicker-msg-container-wrap").trigger("mouseup")}).on("keyup mousedown",function(e){}),o(document).ready(function(e){o('<div id="global-mask"></div>').appendTo(o("body"));new o.su.widgets.mask({id:"global-mask"}).render(),o('<div id="global-combobox-options" data-shown="_hidden_"></div>').appendTo(o("body")),o('<div id="global-tips-text" class="global-tips-text" data-shown="_hidden_"></div>').appendTo(o("body"));var t=document.body.clientWidth,t=t<768?"s":t<1024?"m":t<1280?"l":"xl";o.su.widgetSize=t}),o(window).on("resize",o.su.throttle(function(e){var t=o("div.msg-container"),i=document.body.clientWidth,s=o("#global-combobox-options"),a=o("#global-tips-text"),s=s.attr("data-shown"),a=a.attr("data-shown"),n=o.su.widgetSize,r=i<768||o.su.isMobile()?"s":i<1024?"m":i<1280?"l":"xl",r=(o.su.widgetSize=r,o(window).trigger("ev_resize",[r,i,n]),t.each(function(e,t){t=o(t).data("viewObj");t.settings.shown&&t.setPosition("center","center")}),"_hidden_"!==s&&o("#"+s).data("viewObj").calculatePosition(),"_hidden_"!==a&&o("#"+a).data("viewObj").adjustLayout(o.su.widgetSize),o(".page-content").data("ps"));r&&r.update(),0<o(".onemesh-pic-container").length&&(i=.4629*o(".onemesh-pic-container").width()+"px",o(".onemesh-bg-left").height(i),o(".onemesh-bg-right").height(i))},100,100)),o(document).on("DOMSubtreeModified",o.su.debounce(function(){o(".ps").each(function(e){var t=o(this).data("ps");t&&t.update()})},100))}(jQuery),function(){function i(e,t){var i;0<$(e.ele).length&&($(e.ele).data("ps")?$(e.ele).data("ps").update():(e.opts=$.extend(e.opts,{wheelPropagation:!0}),i=new scrollbar(e.ele,e.opts),$(e.ele).data("ps",i),t&&t(i)))}$.su.scrollbar=function(e,t){$.su.isMobile()||"Microsoft Internet Explorer"===navigator.appName&&(navigator.userAgent.match(/Trident/i)&&navigator.userAgent.match(/MSIE 8.0/i)||navigator.userAgent.match(/MSIE 9.0/i))||($.su.scrollbar.loaded?i(e,t):$.su.router.loadFile("js/libs/perfect-scrollbar.min.js?t=29dee038",function(){i(e,t),$.su.scrollbar.loaded=!0}))},$.su.scrollbar.loaded=!1}(),$.su.Widget.register("panel",{settings:{_title:{attribute:"title-label",defaultValue:""},instruction:{attribute:"instruction",defaultValue:""},icon:{attribute:"icon",defaultValue:""},iconCls:{attribute:"icon-cls",defaultValue:""},panelType:{attribute:"panel-type",defaultValue:"form"},collapsible:{attribute:"collapsible",defaultValue:!1},collapsed:{attribute:"collapsed",defaultValue:!1}},listeners:[{selector:function(e){return{parent:this.getContainer().find(".panel-title:first")}},event:"click",callback:function(e,t){var i,s=$(this).find("span.panel-header-btn-collapse"),a=t.settings;a.collapsible&&(t=t.getContainer(),i=t.find("div.panel-content"),a.collapsed?(i.slideDown(200,function(){i.css("display","block")}),t.removeClass("collapsed"),a.collapsed=!1,s.closest("div[widget=panel]").triggerHandler("ev_panel_open")):(i.slideUp(200,function(){$(this).css("display","none")}),t.addClass("collapsed"),a.collapsed=!0,s.closest("div[widget=panel]").triggerHandler("ev_panel_close")))}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=!t.collapsible||!1===t.collapsed?"block":"none",s=t.collapsed?" collapsed":"",s=(e.addClass(t.cls+"panel-container "+t.panelType+s),""),t=(s=s+'<div class="panel-wrap-before"></div>'+'<div class="panel-wrap">',!1!==t._title&&(s=(s+='<div class="panel-header"><h3 class="panel-title">')+'<span class="panel-title-icon"></span><span class="panel-title-text">'+t._title+"</span>","string"===$.type(t.instruction)&&""!==t.instruction&&(s+='<div class="panel-title-instruction">'+t.instruction+"</div>"),s+='<div class="panel-header-btn-container">',t.collapsible&&(s+='<span class="panel-header-btn-collapse" type="button"></span>'),s+="</div></h3></div>"),s=(s=(s=(s+='<div class="panel-content" style="display: '+i+'">')+'<div class="panel-tbar-container"></div>'+'<div class="panel-content-container"></div>')+'<div class="panel-fbar-container"></div>'+"</div>")+"</div>"+'<div class="panel-wrap-after"></div>',$(s));0<e.find("div.panel-content-container").length?(t.find("div.panel-content-container").append(e.find("div.panel-content-container").children().detach()),e.find(".panel-wrap").remove()):t.find("div.panel-content-container").append(e.children().detach()),e.append(t)},setTitle:function(e){var t=this.getContainer();e&&t.children(".panel-wrap").children(".panel-header").find("h3.panel-title span.panel-title-text").html(e)},setInstruction:function(e){var t=this.getContainer();e?(t.find("h3.panel-title div.panel-title-instruction").show(),t.find("h3.panel-title div.panel-title-instruction").html(e)):t.find("h3.panel-title div.panel-title-instruction").hide()},open:function(){var e=this.settings,t=this.getContainer(),i=t.find("div.panel-content");t.find("span.panel-header-btn-collapse");i.slideDown(200,function(){i.css("display","block"),t.removeClass("collapsed")}),e.collapsed=!1,this.dom().triggerHandler("ev_panel_open")},isOpen:function(){return!this.getContainer().hasClass("collapsed")},hideTitle:function(){var e=this.getContainer(),t=e.find("div.panel-header"),e=e.find("div.panel-content");t.hide(),e.css("padding-top",0)}}),$.su.Widget.register("simpleDom",{render:function(){}}),$.su.Widget.register("form",{settings:{formName:{attribute:"form-name",defaultValue:""}},init:function(){this.fields=[]},render:function(){},loadData:function(){},getAllFields:function(){for(var e=[],t=this.dom().find("div[widget]"),i=0,s=t.length;i<s;i++){var a,n=$(t[i]),r=n.attr("widget"),o=n.attr("name");o&&((a=(a=$(n).data("viewObj"))||$(n)[r]({})[0]).field=o,e.push(a))}return e},setNormal:function(){var e=this.getAllFields();$.each(e,function(e,t){t.setNormal&&t.setNormal()})},destroy:function(){var e=this.getAllFields();$.each(e,function(e,t){t._destroy()})}}),$.su.Widget.register("textbox",{settings:{readOnly:{attribute:"read-only",defaultValue:!1},tipText:{attribute:"tip-text",defaultValue:""},unit:{attribute:"unit",defaultValue:""},addon:{attribute:"add-on",defaultValue:""},hint:{attribute:"hint",defaultValue:null},prefix:{attribute:"prefix",defaultValue:null},autoTrim:{attribute:"auto-trim",defaultValue:null},emitEnter:{attribute:"emit-enter",defaultValue:!1}},listeners:[{selector:".text-wrap-inner input",event:"keyup",callback:function(e,t){var i=t.getValue();t.dom().find(".text-hint-inner").hide(),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}]),t.settings.emitEnter&&13==e.keyCode&&t.dom().triggerHandler("ev_input_enter")}},{selector:".text-wrap-inner input",event:"click",callback:function(e,t){var i=t.getValue();t.dom().addClass("focus"),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}]),t.dom().find(".text-hint-inner").hide()}},{selector:"div.text-wrap",event:"mouseenter",callback:function(e,t){t.dom().addClass("hover")}},{selector:"div.text-wrap",event:"mouseleave",callback:function(e,t){t.dom().removeClass("hover")}},{selector:".text-wrap-inner input",event:"blur",callback:function(e,t){var i=t.getValue();!0===t.settings.autoTrim&&(i=$.trim(i)),t.dom().find("div.widget-addon").hide(),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}]),t.dom().triggerHandler("ev_view_change",[{"type":"valid","value":i}]),t.dom().triggerHandler("ev_textbox_blur"),t.dom().removeClass("focus"),""==i&&t.settings.hint&&t.dom().find(".text-hint-inner").show()}},{selector:".text-wrap input",event:"focus",callback:function(e,t){t.setAddon(),t.dom().addClass("focus"),t.dom().triggerHandler("ev_textbox_focus")}},{selector:".text-hint-inner input.text-hint",event:"click",callback:function(e,t){t.dom().hasClass("disabled")||t.dom().find(".text-wrap-inner input").click().focus()}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=t.readOnly?'readonly="readonly"':"",s=t.readOnly?" readonly":"",a=!1===t.labelField?"label-empty":"",n=""===t.addon?"":" addon",r=""===t.unit?"":" unit",o=""===t.tips?"":" tips",d=""===t.shortTips?"":" short-tips",l=null==t.prefix?"":" prefix",a=(e.addClass(t.cls+"text-container "+a+n+r+o+d+l+s),"");null!==t.labelField&&(a=(a+='<div class="widget-fieldlabel-wrap'+t.labelCls+(""==t.labelField?" empty":"")+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",t.labelField&&(a+='<span class="widget-separator">'+t.separator+"</span>"),a+="</div></div>"),a+='<div class="widget-wrap-outer text-wrap-outer"><div class="widget-wrap text-wrap">',(t.prefix||t.unit)&&(a+='<div class="widget-table-wrap text-table-wrap">'),a+='<span class="text-wrap-before"></span>',a=(a=t.prefix?(a+='<div class="text-wrap-prefix">')+'<span class="text-prefix">'+t.prefix+"</span></div>":a)+'<span class="text-wrap-inner"><input type="text" '+i+'/></span><span class="text-wrap-after"></span>',t.unit&&(a+='<span class="text-wrap-unit">'+t.unit+"</span>"),t.hint&&(a=(a+='<span class="hint text-hint-inner">')+'<input class="text-hint" value="'+t.hint+'" tabindex="-1" contenteditable="false" readonly="readonly"/></span>'),(t.prefix||t.unit)&&(a+="</div>"),a+="</div>",""!=t.shortTips&&null!=t.shortTips&&t.shortTips!=undefined&&(a=(a+='<div class="widget-short-tips textbox-short-tips">')+'<div class="content short-tips-content">'+t.shortTips+"</div></div>"),a=(a=""!=t.tips&&null!=t.tips&&t.tips!=undefined?(a+='<div class="widget-tips textbox-tips '+t.tipsCls+'">')+'<div class="content tips-content">'+t.tips+"</div></div>":a)+('<div widget="errortip" error-cls="'+t.errorTipsCls)+'"></div>',t.addon&&(a=(a+='<div class="widget-addon">')+'<span class="addon-content">'+t.addon+"</span></div>"),a+="</div>",t.tipText&&(a+='<div widget="toolTip"></div>',e.addClass("has-tool-tip")),e.empty().append(a)},setMaxLength:function(e){var t=this.dom();e=parseInt(e),"number"===$.type(e)&&t.find(".text-wrap-inner input").attr("maxlength",e)},focus:function(){this.dom().find(".text-wrap-inner input").focus()},disable:function(e){var t=this.dom(),i=this.getContainer();i.addClass("disabled"),t.find(".text-wrap-inner input").prop("disabled",!0),e?i.addClass("visual-disabled"):t.triggerHandler("ev_view_disable")},enable:function(){var e=this.dom();this.getContainer().removeClass("disabled"),e.find(".text-wrap-inner input").prop("disabled",!1),e.triggerHandler("ev_view_enable")},setValue:function(e){var t;this.getValue()!==e&&((t=this.dom()).find(".text-wrap-inner input").val(e),""!=e&&null!=e&&t.find(".text-hint-inner").hide())},getValue:function(){var e,t=this.dom().find(".text-wrap-inner input");return 1<t.length?(e=[],t.each(function(){e.push($(this).val())}),e):t.val()},setAddon:function(e){var e=e||this.settings.addon,t=this.dom().find("div.widget-addon"),i=this.getContainer()||this.dom(),s=this.dom().find(".widget-tips");i.removeClass("error dirty correct"),this.errortip&&this.errortip.hide(),""!=e&&e?(s.hide(),$.su.isIe?t.show():t.fadeIn(150)):s.show()},setError:function(e){var t=this.dom(),i=this.getContainer(),s=t.find("div[widget=errortip]"),t=t.find(".widget-tips");i&&!this.isDisabled()&&(t.hide(),this.errortip?e&&this.errortip.show(e):0<s.length&&i&&((t=i.children(".widget-wrap-outer").children("div[widget=errortip]")).get(0)&&($(t[0]).attr("id",this.domId+"_errortip"),this.errortip=$(t[0]).errortip({type:this.type})[0],this.errortip.render(),e&&this.errortip.show(e))),i.removeClass("valid").addClass("error"),i.find("span.widget-validate-icon").css({"display":"inline-block"}))},setNormal:function(){var e=this.dom(),t=(this.settings,this.getContainer()||e),e=(e.find("div[widget=errortip]"),e.find(".widget-tips"));t&&(t.removeClass("error disable dirty correct"),t.find("span.widget-validate-icon").css({"display":"none"}),t.find("div.widget-addon").hide(),this.errortip&&this.errortip.hide(),0<e.length&&($.su.isIe?e.show():e.fadeIn(150)))},setPrefix:function(e){this.dom().find(".text-prefix").html(e)}}),function(n){var t=n.su.Widget.register("ip",{extend:"textbox",settings:{},listeners:[{selector:".text-wrap-inner input",event:"keydown",callback:function(e,t){var i,s,a=n(this);parseInt(a.attr("data-index"),10);t.dom().hasClass("disabled")||37===e.keyCode||39===e.keyCode||9===e.keyCode||17===e.keyCode||!0===e.ctrlKey&&65===e.keyCode||((48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||8==e.keyCode||46==e.keyCode||190==e.keyCode||110==e.keyCode||e.ctrlKey||e.metaKey)&&!0!==e.shiftKey?(t=a.val(),s=a.get(0).selectionStart,a=a.get(0).selectionEnd,t.slice(s,a),i=t.split(".").length-1,s=t.slice(0,s),a=t.slice(a),190===e.keyCode&&(s.lastIndexOf(".")===s.length-1||0===a.indexOf(".")||2<i)&&e.preventDefault()):e.preventDefault())}}],init:function(){},render:function(){var e=this.dom();t.superclass.render.call(this),e.addClass("ip-container")},setMaxLength:function(){return!1}})}(jQuery),function(r){var s=r.su.Widget.register("mac",{extend:"textbox",settings:{connector:{attribute:"connector",defaultValue:"-"}},listeners:[{selector:"span.mac-input input",event:"keypress",callback:function(e,t){switch(e.charCode){case 64:case 33:case 35:case 36:case 37:case 94:case 38:case 42:case 40:case 41:e.preventDefault()}}},{selector:"span.mac-input input",event:"keyup",callback:function(e,t){var i=r(this),s=parseInt(i.attr("data-index"),10);i.get(0).selectionStart,i.get(0).selectionEnd;this.value=this.value.toUpperCase(),37!==e.keyCode&&39!==e.keyCode&&8!==e.keyCode&&this.value&&2===this.value.length&&s<5&&t.dom().find("span.mac-input input[data-index="+(s+1)+"]").focus()}},{selector:"span.mac-input input",event:"keydown",callback:function(e,t){var i,s=r(this),a=t.settings,n=parseInt(s.attr("data-index"),10),a="-"===a.connector?189:186;if(9!==e.keyCode&&17!==e.keyCode)if(48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||65<=e.keyCode&&e.keyCode<=70||8==e.keyCode||e.keyCode===a||39===e.keyCode||37===e.keyCode){if(e.keyCode===a||39===e.keyCode)return n<5&&t.dom().find("span.mac-input input[data-index="+(n+1)+"]").focus().select(),void e.preventDefault();if(37!==e.keyCode){if(8===e.keyCode)if(""===s.val()&&0<n)return(i=t.dom().find("span.mac-input input[data-index="+(n-1)+"]")).val(i.val().slice(0,-1)),i.focus(),void e.preventDefault()}else 0<n&&((i=t.dom().find("span.mac-input input[data-index="+(n-1)+"]")).focus(),e.preventDefault())}else e.preventDefault()}},{selector:"span.mac-input input",event:"blur",callback:function(e,t){this.value=this.value.toUpperCase()}}],init:function(){},render:function(){var e="",t=this.dom(),i=this.settings.connector;s.superclass.render.call(this),t.addClass("mac-container"),e=(e=(e=(e=(e=(e+='<span class="mac-input first"><input type="text" maxlength="2" data-index="0" /></span>')+'<span class="mac-dot">'+i+'</span><span class="mac-input"><input type="text" maxlength="2" data-index="1" /></span>')+'<span class="mac-dot">'+i+'</span><span class="mac-input"><input type="text" maxlength="2" data-index="2" /></span>')+'<span class="mac-dot">'+i+'</span><span class="mac-input last"><input type="text" maxlength="2" data-index="3" /></span>')+'<span class="mac-dot">'+i+'</span><span class="mac-input last"><input type="text" maxlength="2" data-index="4" /></span>')+'<span class="mac-dot">'+i+'</span><span class="mac-input last"><input type="text" maxlength="2" data-index="5" /></span>',t.find(".text-wrap-inner").html(e)},getValue:function(){var e=s.superclass.getValue.call(this);return""===e.join("")?"":e.join(this.settings.connector)},setValue:function(e){if(null==e)e="";else if("string"!==r.type(e))return;var t=this.dom().find("span.mac-input input"),i=e.split(this.settings.connector);t.each(function(e,t){r(t).val(i[e])})},setMaxLength:function(){return!1}})}(jQuery),$.su.Widget.register("textarea",{settings:{readOnly:{attribute:"read-only",defaultValue:!1},datePicker:{attribute:"date-picker",defaultValue:""},tipText:{attribute:"tip-text",defaultValue:""},textareaCls:{attribute:"textarea-cls",defaultValue:""}},listeners:[{selector:".text-wrap textarea",event:"keyup",callback:function(e,t){var i=$(this).val();t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}])}},{selector:".text-wrap textarea",event:"blur",callback:function(e,t){var i=$(this).val();t.dom().triggerHandler("ev_view_change",[{"type":"valid","value":i}]),t.dom().triggerHandler("ev_textbox_blur")}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=t.readOnly?'readonly="readonly"':"",s=!1===t.labelField?"label-empty":"",s=(e.addClass(t.cls+"text-container "+s+" "+(t.readOnly?"readOnly":"")),"");null!==t.labelField&&(s=(s+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",t.labelField&&(s+='<span class="widget-separator">'+t.separator+"</span>"),s+="</div></div>"),s=(s+='<div class="widget-wrap-outer text-wrap-outer"><div class="widget-wrap text-wrap"><span class="text-wrap-before"></span>')+'<span class="text-wrap-inner"><textarea type="text" class="'+t.textareaCls+'" '+i+'></textarea></span><span class="text-wrap-after"></span>',t.hint&&(s=(s+='<span class="hint text-hint">')+'<input class="text-hint" value="'+t.hint+'" tabindex="-1" contenteditable="false" readonly="readonly"/></span>'),""!=t.datePicker&&(s+='<div widget="datepicker" id="'+this.domId+'_date_picker" class="datepicker-widget"></div>'),s=(s+="</div>")+'<div widget="errortip" error-cls="'+t.errorTipsCls+'"></div>',null!=t.tips&&t.tips!=undefined&&(s=(s+='<div class="widget-tips textbox-tips '+t.tipsCls+'">')+'<div class="content tips-content">'+t.tips+"</div></div>"),s+="</div>",t.tipText&&(s+='<div widget="toolTip"></div>'),e.empty().append(s),""!=t.datePicker&&(e.addClass("textbox-datepicker"),e.find("div[widget=datepicker]").datepicker({textbox:this})[0].render())},setMaxLength:function(e){var t=this.dom();e=parseInt(e),"number"===$.type(e)&&t.find("textarea").attr("maxlength",e)},setReadonly:function(e){var t=this.dom(),i=t.find(".text-wrap-inner textarea");e?(i.prop("readonly",!0),t.addClass("readonly")):(i.prop("readonly",!1),t.removeClass("readonly"))},focus:function(){this.dom().find("textarea").focus()},setValue:function(e){this.getValue()!==e&&this.dom().find("textarea").val(e)},getValue:function(){return this.dom().find("textarea").val()}}),$.su.Widget.register("displaylabel",{settings:{readOnly:{attribute:"read-only",defaultValue:!1},tipText:{attribute:"tip-text",defaultValue:""},renderer:{attribute:"renderer",defaultValue:function(e){return null==e?"":e}}},init:function(){},render:function(){var e=this.dom(),t=this.settings,i=!1===t.labelField?"label-empty":"",i=(e.addClass(t.cls+"displaylabel-container "+i),"");null!==t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div></div>"),i=(i+='<div class="widget-wrap-outer text-wrap-outer"><div class="widget-wrap text-wrap"><span class="text-wrap-before"></span><span class="text-wrap-display"></span><span class="text-wrap-after"></span></div>')+'<div widget="errortip" error-cls="'+t.errorTipsCls+'"></div>',null!=t.tips&&t.tips!=undefined&&(i=(i+='<div class="widget-tips textbox-tips '+t.tipsCls+'">')+'<div class="content tips-content">'+t.tips+"</div></div>"),i+="</div>",t.tipText&&(i+='<div widget="toolTip"></div>'),e.append(i)},setValue:function(e){var t=this.dom();e=this.settings.renderer(e),t.find("span.text-wrap-display").text(e)},getValue:function(){return this.dom().find("span.text-wrap-display").text()}}),$.su.Widget.register("combobox",{settings:{name:{attribute:"name",defaultValue:""},labelField:{attribute:"label-field",defaultValue:""},multiSelect:{attribute:"multi-select",defaultValue:"single"},displayField:{attribute:"display-field",defaultValue:"name"},valueField:{attribute:"value-field",defaultValue:"value"},tipText:{attribute:"tip-text",defaultValue:""},editable:{attribute:"editable",defaultValue:!1},readOnly:{attribute:"read-only",defaultValue:!1},noneSelectedRemind:{attribute:"none-selected-remind",defaultValue:!0},noneSelectedText:{attribute:"none-selected-text",defaultValue:$.su.CHAR.COMMON.PLEASE_SELECT},spanText:{attribute:"span-text",defaultValue:!1},optionWidth:{attribute:"option-width",defaultValue:"auto"}},listeners:[{selector:"a.combobox-switch",event:"click",callback:function(e,t){t.dom().find("input.combobox-text").focus()}},{selector:"div.combobox-wrap",event:"click",callback:function(e,t){e.stopPropagation(),$.su.isMobile()||t._handleToggle()}},{selector:"div.combobox-wrap",event:"mousedown",callback:function(e,t){e.stopPropagation()}},{selector:"div.combobox-wrap",event:"mouseenter",callback:function(e,t){t.dom().addClass("hover")}},{selector:"div.combobox-wrap",event:"mouseleave",callback:function(e,t){t.dom().removeClass("hover")}},{selector:"input.combobox-text",event:"click",callback:function(e){e.preventDefault()}},{selector:"span.combobox-text",event:"click",callback:function(e){e.preventDefault()}},{selector:"input.combobox-text",event:"focus",callback:function(e,t){var i=t.getContainer();i.hasClass("disabled")||i.hasClass("none-items")||(t.setFocus(),i.addClass("focus"))}},{selector:"input.combobox-text",event:"keyup",callback:function(e,t){var t=t.getContainer(),i=t.find("input.combobox-text").val(),s=t.find("input.combobox-checkbox");t.find("li").removeClass("selected"),s.prop("checked",!1),s.each(function(e,t){if($(t).val()==i)return $(t).prop("checked",!0),$(t).closest("li.combobox-list").addClass("selected"),!1})}},{selector:"input.combobox-text",event:"keyup",callback:function(e,t){var i;t.settings.editable&&(i=t.dom().find("input.combobox-text").val(),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}]))}},{selector:"input.combobox-text",event:"blur",callback:function(e,t){t.dom().find("input.combobox-text").val();t.dom().removeClass("focus")}}],init:function(){this._defaultValue=null,this._dataMap={},this._displayMap={},this._value=[]},render:function(){var e=this.dom(),t=this.settings,i=!0===t.editable&&"single"===t.multiSelect?"":'readonly="true"',s=!1===t.labelField?" label-empty":"",a=t.readOnly?" readonly":"",n=t.tips?" tips":"",r=""===t.shortTips?"":" short-tips",o=t.spanText?" span-text-combobox":"",s=(e.addClass(t.cls+"combobox-container "+t.multiSelect+s+a+n+r+o),""),a=(null!==t.labelField&&(s=(s+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel combobox-fieldlabel">'+("false"===t.labelField?"":t.labelField)+"</label>",t.labelField&&(s+='<span class="widget-separator">'+t.separator+"</span>"),s+="</div></div>"),s=(s=s+'<div class="widget-wrap-outer combobox-wrap-outer">'+'<div class="widget-wrap combobox-wrap">')+'<span class="text-wrap-before"></span>'+'<span class="combobox-wrap-inner">',t.spanText?s+='<span class="combobox-text '+t.inputCls+'">'+(t.noneSelectedRemind?t.noneSelectedText:"")+"</span>":s+='<input class="combobox-text '+t.inputCls+'" type="text" tabindex="-1" '+i+' value="'+(t.noneSelectedRemind?t.noneSelectedText:"")+'" />',s=(s=s+"</span>"+('<a class="combobox-switch" href="javascript:void(0);" tabindex="'+t.tabindex+'">'))+'<span class="icon"></span>'+"</a>",0===$("#global-combobox-options").children().length&&$("#global-combobox-options").append('<div class="combobox-list-wrap"><div class="position-top-left"></div><div class="position-top-center"></div><div class="position-center-left"><div class="position-center-right"><div class="combobox-list-content-wrap"><ul class="combobox-list"></ul></div></div></div><div class="position-bottom-left"></div><div class="position-bottom-center"></div></div>'),s=(s+='<div class="hidden combobox-lists"></div>')+'<span class="text-wrap-after"></span>'+"</div>",s=(s=""!=t.shortTips&&null!=t.shortTips&&t.shortTips!=undefined?(s+='<div class="widget-short-tips combobox-short-tips">')+'<div class="content short-tips-content">'+t.shortTips+"</div></div>":s)+('<div widget="errortip" error-cls="'+t.errorTipsCls+'">')+"</div>",""!=t.tips&&null!=t.tips&&t.tips!=undefined&&(s=(s+='<div class="widget-tips combobox-tips '+t.tipsCls+'">')+'<div class="content tips-content">'+t.tips+"</div></div>"),s+="</div>",t.tipText&&(s+='<div widget="toolTip"></div>'),e.append(s),t.items&&0<t.items.length&&this.loadItems(t.items),$("#global-combobox-options .combobox-list-content-wrap"));0===a.find(".ps__rail-y").length&&$.su.scrollbar({ele:a[0]})},loadItems:function(e){for(var t,i=this.dom(),s=this.settings,a=this.getContainer(),n=($.isArray(e)||(e=[]),""),r=0,o=(s.items=e).length;r<o;r++)e[r]&&(n+=this.initItemHtml(r,e[r]),e[r].selected&&(t=e[r][s.valueField],t=this.convertValue(t),this._defaultValue=t));i.find("div.combobox-lists").html(n),this.setValue(t),0==e.length?a.addClass("none-items"):a.removeClass("none-items"),i.triggerHandler("ev_view_update")},initItemHtml:function(e,t){var i=this.settings,s=(this.dom(),i.multiSelect),a=this.domId+"-"+$.su.randomId("option"),n=t[i.displayField],r=t[i.valueField],o=!!t["disabled"],d=!!t.selected,t=t.cls||"",r=(this._dataMap[e]=r,this._displayMap[r]=n,"");return(r+='<li class="combobox-list '+t+" "+(o?"disabled":"")+" "+(d?"selected":"")+'">')+('<label for="'+a+'" type="'+s+'" class="combobox-label '+s+'">')+('<input id="'+a+'" name="'+i.name+'" display="'+n+'" class="combobox-checkbox" type="checkbox" data-index="'+e+'" '+(d?' checked="checked"':"")+" "+(o?'disabled="disabled"':"")+" />")+'<span class="icon"></span>'+('<span class="text">'+n+"</span>")+"</label>"+"</li>"},getLiIndex:function(e){for(var t in this._dataMap)if(this._dataMap.hasOwnProperty(t)&&e===this._dataMap[t])return t;return!1},setValue:function(e){var t,i=$("#global-combobox-options"),s=this.settings;if(null===e){if(this._defaultValue!==undefined&&null!==this._defaultValue)return void this.dom().triggerHandler("ev_view_change",[{"type":"record","value":this._defaultValue}]);e=this._defaultValue}if(e=this.convertValue(e),this._value=$.su.clone(e),"multiple"===s.multiSelect){for(var a=[],n=0;n<e.length;n++)t=this._displayMap[e[n]]||e[n],a.push(t);a=a.join(",")}else"single"===s.multiSelect&&(a=this._displayMap[e]||s.noneSelectedText);this.setText(a),i.attr("data-shown")===this.domId&&this.setOptionsSelected()},setOptionsSelected:function(){this.dom();var a,n=this,e=this.settings,t=$("#global-combobox-options").find("input.combobox-checkbox"),r=$.isArray(this._value)?this._value:[this._value];"multiple"===e.multiSelect?(a=function(){for(var e={},t=0;t<r.length;t++)e[r[t]]=!0;return e}(),t.each(function(e,t){var i=$(t),s=i.attr("data-index");n._dataMap[s]in a?(i.closest("li.combobox-list").addClass("selected"),t.checked=!0):(i.closest("li.combobox-list").removeClass("selected"),t.checked=!1)})):"single"===e.multiSelect&&(r=r[0],t.each(function(e,t){var i=$(t),s=i.attr("data-index");n._dataMap[s]===r?(i.closest("li.combobox-list").addClass("selected"),t.checked=!0):(i.closest("li.combobox-list").removeClass("selected"),t.checked=!1)}))},convertValue:function(e){var t=this.settings;return e="array"!==$.type(e)&&"multiple"===t.multiSelect?null==e?[]:[e]:e},setText:function(e){var t=this.getContainer();this.settings.spanText?t.find("span.combobox-text").text(e):t.find("input.combobox-text").val(e)},getText:function(){var e,t=this.getContainer();return this.settings.spanText?(e=t.find("span.combobox-text")).text()===undefined?"":e.text():(e=t.find("input.combobox-text")).val()===undefined?"":e.val()},setReadOnly:function(e){var t=this.getContainer();e?t.addClass("readonly"):t.removeClass("readonly")},enable:function(){var e=this.getContainer();e.removeClass("disabled"),e.find("input.combobox-text").removeAttr("disabled"),e.find("input.combobox-checkbox").prop("disabled",!1),e.triggerHandler("ev_view_enable")},disable:function(){var e=this.getContainer();e.addClass("disabled"),e.find("input.combobox-text").attr("disabled",!0),e.find("input.combobox-checkbox").prop("disabled",!0),e.triggerHandler("ev_view_disable")},enableItems:function(e){this.toggleItems(e,!0)},disableItems:function(e){this.toggleItems(e,!1)},hideItems:function(e){if(e===undefined)return this.disable();for(var t,i,s=this.dom(),a=$("#global-combobox-options"),n=s.find("div.combobox-lists"),r=0,o=(e=$.isArray(e)?e:[e]).length;r<o;r++)!1!==(i=this.getLiIndex(e[r]))&&((t=(i=n.find("input.combobox-checkbox[data-index="+i+"]")).closest("li")).addClass("hidden"),t.addClass("disabled"),i.attr("disabled","disabled"));a.attr("data-shown")===this.domId&&(s=n.eq(0).html(),a.find("ul.combobox-list").html(s),this.setOptionsSelected())},showItems:function(e){if(e===undefined)return this.enable();for(var t,i,s=this.dom(),a=$("#global-combobox-options"),n=s.find("div.combobox-lists"),r=0,o=(e=$.isArray(e)?e:[e]).length;r<o;r++)!1!==(i=this.getLiIndex(e[r]))&&((t=(i=n.find("input.combobox-checkbox[data-index="+i+"]")).closest("li")).removeClass("hidden"),t.removeClass("disabled"),i.removeAttr("disabled"));a.attr("data-shown")===this.domId&&(s=n.eq(0).html(),a.find("ul.combobox-list").html(s),this.setOptionsSelected())},toggleItems:function(e,t){if(e===undefined)return this.disable();for(var i,s,a=this.dom(),n=$("#global-combobox-options"),r=a.find("div.combobox-lists"),o=0,d=(e=$.isArray(e)?e:[e]).length;o<d;o++)!1!==(s=this.getLiIndex(e[o]))&&(i=(s=r.find("input.combobox-checkbox[data-index="+s+"]")).closest("li"),t?(i.removeClass("disabled"),s.removeAttr("disabled")):(i.addClass("disabled"),s.attr("disabled","disabled")));n.attr("data-shown")===this.domId&&(a=r.eq(0).html(),n.find("ul.combobox-list").html(a),this.setOptionsSelected())},getValue:function(){var e=this.dom(),t=this.settings,i=(e.find("input.combobox-checkbox"),$.isArray(this._value)?$.su.clone(this._value):[this._value]);return"single"===t.multiSelect&&(i=0<i.length?i[0]:t.noneSelectedText,1==t.editable&&(i=e.find("input.combobox-text").val())),i},_handleToggle:function(){var a=this,e=a.dom(),t=e.find("a.combobox-switch"),t=(e.find(".widget-wrap.combobox-wrap"),t.next("div.combobox-list-wrap"),a.getContainer()),n=$("#global-combobox-options"),i=n.attr("data-shown")===a.domId?"shown":"hidden";if(t.hasClass("disabled")||t.hasClass("none-items")||t.hasClass("readonly"))return!1;a.setFocus(),t.addClass("focus"),t.removeClass("error"),"hidden"==i?("single"==a.settings.multiSelect?n.addClass("single"):n.removeClass("single"),"single"===a.settings.multiSelect?e.off("focusout","div.combobox-wrap-outer").on("focusout","div.combobox-wrap-outer",function(e){var t=n.offset(),i=n.find(".combobox-list-wrap").width(),s=n.find(".combobox-list-wrap").height();(a._xx<t.left||a._xx>t.left+i||a._yy<t.top||a._yy>t.top+s)&&a.hideGlobalOptions()}):$("html").on("click","div:not(.combobox-list-wrap)",a.hideGlobalOptions),a._bindGlobalEvent(),a.showGlobalOptions()):a.hideGlobalOptions()},_bindGlobalEvent:function(){var d=this;$("#global-combobox-options").off("click","label.combobox-label").on("click","label.combobox-label",function(e){e.stopPropagation(),e.preventDefault();var e=$(this),t=e.closest("li.combobox-list"),i=d.getContainer(),s=e.find("input.combobox-checkbox"),a=d._dataMap[s.attr("data-index")],n=d.getValue(),r=[];if(!t.hasClass("disabled")&&!i.hasClass("readonly")){switch(d.settings.multiSelect){case"multiple":if(s.prop("checked")){if(0<n.length)for(var o=n.length-1;0<=o;o--)if(n[o]==a){n.splice(o,1);break}}else n.push(a);r=n;break;case"single":r=a,d.hideGlobalOptions(),i.addClass("selected"),i.removeClass("focus")}d.dom().triggerHandler("ev_view_change",[{"type":"value","value":r},d.getValue()])}})},showGlobalOptions:function(){var t=this,e=t.dom(),i=e.find(".widget-wrap.combobox-wrap"),s=$("#global-combobox-options"),a=i.offset(),n=$("body").offset(),r=e.find("div.combobox-lists").eq(0).html(),o=s.find("div.combobox-list-wrap"),r=(s.find("ul.combobox-list").html(r),"auto"==this.settings.optionWidth?i.outerWidth()+"px":this.settings.optionWidth),r=(a.top+i.height()+o.outerHeight()+10>$(window).height()&&0<a.top-o.height()?s.css({"position":"absolute","width":r,"left":a.left-n.left+"px","top":"auto","bottom":$(window).height()-a.top,"z-index":$.su.getMaxZIndex()+1}).addClass("down-to-up"):s.css({"position":"absolute","width":r,"left":a.left-n.left+"px","top":a.top+i.height()+2+"px","bottom":"auto","z-index":$.su.getMaxZIndex()+1}).removeClass("down-to-up"),$.su.isIe?o.show():o.slideDown(150),s.attr("data-shown",t.domId),$("body").on("mousemove",t.getComboboxXy),t.toggleFlag="shown",t.setOptionsSelected(),s.find("li.selected")),n=$(s.find("li").get(0)),i=(0<r.length?(a=r.offset().top-n.offset().top,s.find("div.combobox-list-content-wrap").scrollTop(a)):s.find("div.combobox-list-content-wrap").scrollTop(0),s.find(".combobox-list-content-wrap").data("ps"));i&&i.update(),$("div").not(function(){return $(s).find(this).length||$(s).is(this)||$(this).closest(".combobox-wrap-outer",e).length}).off(".combobox").one("scroll.combobox, mousedown.combobox",function(e){t.hideGlobalOptions(),$("div").off(".combobox")})},hideGlobalOptions:function(e){var t=this,i=$("#global-combobox-options");function s(){t.dom().triggerHandler("ev_view_change",[{"type":"valid","value":t._value}])}t.toggleFlag="hidden",t.dom().removeClass("focus"),i.attr("data-shown")===t.domId&&(!1===e||$.su.isIe?(i.find("div.combobox-list-wrap").hide(),s()):i.find("div.combobox-list-wrap").slideUp(150,s),i.attr("data-shown","_hidden_"),i.off("click","label.combobox-label"),$("body").off("mousemove",t.getComboboxXy))},getComboboxXy:function(e){e=e||window.event;this._xx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this._yy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop},calculatePosition:function(){var e=this.dom(),t=$("#global-combobox-options"),e=e.find(".combobox-wrap"),i=e.offset(),s=$("body").offset(),a=t.find("div.combobox-list-wrap"),n="auto"==this.settings.optionWidth?e.outerWidth()+"px":this.settings.optionWidth;i.top+e.height()+a.outerHeight()+10>$(window).height()?t.css({"position":"absolute","width":n,"left":i.left-s.left+"px","top":i.top-a.height()-2+"px","z-index":$.su.getMaxZIndex()+1}):t.css({"position":"absolute","width":n,"left":i.left-s.left+"px","top":i.top+e.height()+2+"px","z-index":$.su.getMaxZIndex()+1})}}),$.su.Widget.register("lrselect",{settings:{readOnly:{attribute:"read-only",defaultValue:!1},labelField:{attribute:"label-field",defaultValue:""},displayField:{attribute:"display-field",defaultValue:"name"},valueField:{attribute:"value-field",defaultValue:"value"},tipText:{attribute:"tip-text",defaultValue:""}},listeners:[{selector:"a.lrselect-switch",event:"click",callback:function(e,t){var i=t.getContainer(),s=$(this),a=t.settings;if(i.hasClass("disabled")||i.hasClass("none-items")||s.hasClass("disabled"))return!1;i=t._curIndex;s.hasClass("left-switch")?--i:s.hasClass("right-switch")&&++i,(i=i<0?0:i)>=t._items.length&&(i=t._items.length-1),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t._items[i][a.valueField]}])}}],init:function(){this._value=null,this._curIndex=-1,this._valueMap={},this._items=[]},render:function(){var e=this.dom(),t=this.settings,i=!1===t.labelField?" label-empty":"",s=t.readOnly?" readonly":"",i=(e.addClass(t.cls+"lrselect-container "+ +i+s),"");null!==t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel combobox-fieldlabel">'+("false"===t.labelField?"":t.labelField)+"</label>",t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div></div>"),e.append(i=(i=(i=(i=(i=(i+='<div class="widget-wrap-outer lrselect-wrap-outer">')+'<div class="widget-wrap lrselect-wrap">'+'<span class="text-wrap-before"></span>')+'<a class="lrselect-switch left-switch" href="javascript:void(0);">'+'<span class="icon"></span>')+"</a>"+"<span class='lrselect-text'></span>")+'<a class="lrselect-switch right-switch" href="javascript:void(0);">'+'<span class="icon"></span>')+"</a>"+"</div>"),t.items&&0<t.items.length&&this.loadItems(t.items)},loadItems:function(e){var t=this.settings,i=this.getContainer(),s=($.isArray(e)||(e=[]),this._items=e,this._curIndex=-1,e.length);0==s?i.addClass("none-items"):i.removeClass("none-items");for(var a,n,r=0,o={};r<s;r++)o[(a=e[r])[t.valueField]]={dispaly:a[t.displayField],index:r},!0===a.selected&&(n=a[t.valueField]);this._valueMap=o,n!==undefined&&this.setValue(n)},setValue:function(e){var t,i=this.dom(),s=this._items.length;0<s&&((t=this._valueMap[e])&&(this._curIndex=t.index,this.value=e,i.find("span.lrselect-text").text(t.dispaly),e=i.find(".left-switch"),t=i.find(".right-switch"),0===this._curIndex?e.addClass("disabled"):e.removeClass("disabled"),this._curIndex===s-1?t.addClass("disabled"):t.removeClass("disabled")))},getValue:function(){return this._value},disable:function(){this.getContainer().addClass("disabled")},enable:function(){this.getContainer().removeClass("disabled")}}),$.su.Widget.register("radio",{settings:{name:{attribute:"name",defaultValue:""},columns:{attribute:"columns",defaultValue:1},tipText:{attribute:"tip-text",defaultValue:""},toggleContent:{attribute:"toggle-content",defaultValue:!1},toggleText:{attribute:"toggle-text",defaultValue:!1},checkedText:{attribute:"checked-text",defaultValue:""},unCheckedText:{attribute:"unchecked-text",defaultValue:""}},listeners:[{selector:".radio-label",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation(),$(this).hasClass("disabled")||(e=$(this).find("input").attr("data-index"),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.dataMap[e]}]),t.setStatus("checked",!0))}}],init:function(){this._defaultValue=null,this.dataMap={},this._status.checked=!1},render:function(){var e=this.dom(),t=this.settings,i=!1===t.labelField?"label-empty":"",i=(e.addClass(t.cls+"radio-group-container "+i),"");null!==t.labelField&&"false"!==t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel radio-group-fieldlabel">'+t.labelField+"</label>",t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div></div>"),i=(i+='<div class="widget-wrap-outer radio-group-wrap-outer"><div class="radio-group-wrap"></div>')+'<div widget="errortip" error-cls="'+t.errorTipsCls+'"></div>',null!=t.tips&&t.tips!=undefined&&(i=(i+='<div class="widget-tips textbox-tips '+t.tipsCls+'">')+'<div class="widget-tips-wrap"><div class="content tips-content">'+t.tips+"</div></div></div>"),i+="</div>",t.tipText&&(i+='<div widget="toolTip"></div>'),e.append(i),t.items&&0<t.items.length&&this.loadItems(t.items)},loadItems:function(e){var c=this.dom(),r=this.settings,u=r.toggleText,h=Math.ceil(e.length/r.columns),t=0,i=!1,s=!1;if($.isArray(e)&&!(e.length<=0)){r.items=e,r.name=e[0].name;for(var o='<ul class="radio-group-list-wrap">',p=function(e,t,i,s,a,n){o=(o+='<li class="radio-list"><div class="widget-wrap">')+'<label class="radio-label '+a+" "+w+'" for="'+i+'"><input class="radio-radio" type="radio" data-text="'+s+'" name="'+e+'" data-index="'+t+'" id="'+i+'" '+b+" />",n?o+='<div class="radio-custom-label-wrap"></div>':(o=(o+='<span class="icon"></span>')+'<span class="text">'+d.boxlabel+"</span>",u&&(o=(o+='<span class="extra-text checked">'+r.checkedText+"</span>")+'<span class="extra-text unchecked">'+r.unCheckedText+"</span>")),o+='</label></div><div class="radio-content-wrap hidden"></div></li>'},a=0;a<e.length;a++){var d=e[a],f=d.name||"",g=d.value==undefined?"":d.value,v=d.id||$.su.randomId("radio"),m=d.itemCls||"",b="",w="";this.dataMap[a]=g,i=!!d.content||i,s=!!d.customLabel||s,"checked"!==d.checked&&!0!==d.checked||(b='checked="checked"',w="checked",this._defaultValue=g),t<h?p(f,a,v,d.boxlabel,m,s):(o+='</ul><ul class="radio-group-list-wrap">',p(f,a,v,d.boxlabel,m,s),t=0),t++}o+="</ul>";var n,l=this.getContainer();if(l.find("div.radio-group-wrap").empty().append($(o)),i||s)for(a=0;a<e.length;a++)(d=e[a]).customLabel?(n=$(d.customLabel),l.find("li.radio-list").eq(a).find("div.radio-custom-label-wrap").show().append(n)):l.find("li.radio-list").eq(a).find("div.radio-custom-label-wrap").hide(),d.content?(n=$(d.content),l.find("li.radio-list").eq(a).find("div.radio-content-wrap").show().append(n)):l.find("li.radio-list").eq(a).find("div.radio-content-wrap").hide();c.triggerHandler("ev_view_update")}},getSelectedText:function(){var e=this.dom();this.settings;return e.find("input.radio-radio:checked").attr("data-text")},getValue:function(){var e;return this.dom().find("input[type=radio]").each(function(){$(this).prop("checked")&&(e=$(this).attr("data-index"))}),e!==undefined?this.dataMap[e]:e},setStyle:function(e){var t,i,s,a=this.dom(),n=this.settings,r=a.find("input.radio-radio").removeAttr("checked");for(t in a.find("label.radio-label").removeClass("checked"),this.dataMap)this.dataMap.hasOwnProperty(t)&&this.dataMap[t]===e?((i=r.filter("[data-index="+t+"]")).prop("checked",!0),i.closest("label.radio-label").addClass("checked"),n.toggleContent&&i.closest("li.radio-list").find(".radio-content-wrap").show(),n.toggleText&&((s=i.closest("li.radio-list")).find(".extra-text.checked").show(),s.find(".extra-text.unchecked").hide())):((i=r.filter("[data-index="+t+"]")).prop("checked",!1),n.toggleContent&&i.closest("li.radio-list").find(".radio-content-wrap").hide(),n.toggleText&&((s=i.closest("li.radio-list")).find(".extra-text.checked").hide(),s.find(".extra-text.unchecked").show()))},setValue:function(e){if(null===(e=e===undefined?"":e)){if(this._defaultValue!==undefined&&null!==this._defaultValue)return void this.dom().triggerHandler("ev_view_change",[{"type":"record","value":this._defaultValue}]);e=""}this.setStyle(e)},disableItem:function(i){var e=this.dom(),s=this,e=e.find("input.radio-radio"),a=("string"!==$.type(i)&&"number"!==$.type(i)||(i=[i]),function(){for(var e={},t=0;t<i.length;t++)e[i[t]]=!0;return e}());e.each(function(e,t){var i=$(t).attr("data-index");s.dataMap[i]in a&&($(t).closest("li.radio-list").addClass("disabled"),$(t).closest("label.radio-label").addClass("disabled"),t.disabled=!0)})},enableItem:function(i){var e=this.dom(),s=this,e=e.find("input.radio-radio"),a=("string"!==$.type(i)&&"number"!==$.type(i)||(i=[i]),function(){for(var e={},t=0;t<i.length;t++)e[i[t]]=!0;return e}());e.each(function(e,t){var i=$(t).attr("data-index");s.dataMap[i]in a&&($(t).closest("li.radio-list").removeClass("disabled"),$(t).closest("label.radio-label").removeClass("disabled"),t.disabled=!1)})},showItemContent:function(i){var e=this.dom(),s=this,e=e.find("input.radio-radio"),a=("string"!==$.type(i)&&"number"!==$.type(i)||(i=[i]),function(){for(var e={},t=0;t<i.length;t++)e[i[t]]=!0;return e}());e.each(function(e,t){var i=$(t).attr("data-index");s.dataMap[i]in a&&$(t).closest("li.radio-list").find(".radio-content-wrap").show()})},hideItemContent:function(i,s){var e=this.dom(),a=this,e=e.find("input.radio-radio"),n=("string"!==$.type(i)&&"number"!==$.type(i)||(i=[i]),function(){for(var e={},t=0;t<i.length;t++)e[i[t]]=!0;return e}());e.each(function(e,t){var i=$(t).attr("data-index");a.dataMap[i]in n&&(!0===s?$(t).closest("li.radio-list"):$(t).closest("li.radio-list").find(".radio-content-wrap")).hide()})},disable:function(){var e=this.dom(),t=this.getContainer(),i=e.find("input.radio-radio");t.addClass("disabled"),i.each(function(e,t){t=$(t);t.closest("li.radio-list").addClass("disabled"),t.closest("label.radio-label").addClass("disabled"),t.prop("disabled",!0)}),e.triggerHandler("ev_view_disable"),this.setStatus("disabled",!0)},enable:function(){var e=this.dom(),t=this.getContainer(),i=e.find("input.radio-radio");t.removeClass("disabled"),i.each(function(e,t){t=$(t);t.closest("li.radio-list").removeClass("disabled"),t.closest("label.radio-label").removeClass("disabled"),t.prop("disabled",!1)}),e.triggerHandler("ev_view_enable"),this.setStatus("disabled",!1)},getBoxlabel:function(e){var t,i=this.dom();for(t in this.dataMap)if(this.dataMap.hasOwnProperty(t)&&this.dataMap[t]===e)return i.find("input.radio-radio[data-index="+t+"]").siblings("span.text").html();return""},setBoxlabel:function(e,t){if("number"===$.type(e)||"string"===$.type(e)){var i,s=this.dom();for(i in this.dataMap)if(this.dataMap.hasOwnProperty(i)&&this.dataMap[i]===e)return void s.find("input.radio-radio[data-index="+i+"]").attr("data-text",t).siblings("span.text").html(t)}}}),$.su.Widget.register("checkbox",{settings:{name:{attribute:"name",defaultValue:""},trueValue:{attribute:"true-value",defaultValue:!0},falseValue:{attribute:"false-value",defaultValue:!1},columns:{attribute:"columns",defaultValue:1},tipText:{attribute:"tip-text",defaultValue:""},boxLabel:{attribute:"box-label",defaultValue:""}},listeners:[{selector:".checkbox-label",event:"click",callback:function(e,t){e.preventDefault();var e=$(this),i=t.settings,s=(e.find("input[type=checkbox]").attr("name"),e.find("input[type=checkbox]").prop("checked"),t.getValue());e.hasClass("disabled")||(s=s===i.trueValue?i.falseValue:i.trueValue,t.dom().triggerHandler("ev_view_change",[{"type":"value","value":s}]),t.setStatus("checked",s===i.trueValue))}}],init:function(){this._status.disabled=!1,this._status.checked=!1},render:function(){var e=this.dom(),t=this.settings,i=!1===t.labelField?"label-empty":"",s=this.domId+"-checkbox-"+parseInt(1e3*Math.random()*1e3*1e3,10).toString(),i=(e.addClass(t.cls+"checkbox-container "+i),"");null!==t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel checkbox-group-label">'+t.labelField+"</label>",t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div></div>"),i=(i=(i=(i+='<div class="widget-wrap-outer checkbox-group-wrap-outer"><div class="checkbox-group-wrap"><ul><li class="checkbox-list">')+'<div class="widget-wrap"><label class="checkbox-label " for="'+s+'">')+'<input class="checkbox-checkbox" type="checkbox" id="'+s+'" /><span class="icon"></span>')+'<span class="text">'+t.boxLabel+"</span></label></div></li></ul></div>",null!=t.tips&&t.tips!=undefined&&(i=(i+='<div class="widget-tips textbox-tips '+t.tipsCls+'">')+'<div class="widget-tips-wrap"><div class="content tips-content">'+t.tips+"</div></div></div>"),i=i+('<div widget="errortip" error-cls="'+t.errorTipsCls)+'"></div></div>',t.tipText&&(i+='<div widget="toolTip"></div>',e.addClass("has-tool-tip")),e.append(i)},setValue:function(e){var t=this.dom(),i=this,s=this.settings,t=t.find("input[type=checkbox]");t=t.eq(0),(e=e)===s.trueValue||!0===e||1===e?(t.closest("label.checkbox-label").addClass("checked"),t.prop("checked",!0),i.setStatus("checked",!0)):e!==s.falseValue&&!1!==e&&0!==e||(t.closest("label.checkbox-label").removeClass("checked"),t.prop("checked",!1),i.setStatus("checked",!1))},getValue:function(){var e=this.dom(),t=this.settings;return e.find("input[type=checkbox]").eq(0).prop("checked")?t.trueValue:t.falseValue},disable:function(e){var t=this.dom(),i=t.find("input.checkbox-checkbox");this.getContainer().addClass("disabled"),i.each(function(e,t){t=$(t);t.closest("li.checkbox-list").addClass("disabled"),t.closest("label.checkbox-label").addClass("disabled"),t.prev("input[type=hidden]").prop("disabled",!0),t.prop("disabled",!0)}),e||(t.triggerHandler("ev_view_disable"),this.setStatus("disabled",!0))},enable:function(){var e=this.dom(),t=e.find("input.checkbox-checkbox");this.getContainer().removeClass("disabled"),t.each(function(e,t){t=$(t);t.closest("li.checkbox-list").removeClass("disabled"),t.closest("label.checkbox-label").removeClass("disabled"),t.prev("input[type=hidden]").prop("disabled",!1),t.prop("disabled",!1)}),e.triggerHandler("ev_view_enable"),this.setStatus("disabled",!1)}}),$.su.Widget.register("checkboxGroup",{settings:{trueValue:{attribute:"true-value",defaultValue:!0},falseValue:{attribute:"false-value",defaultValue:!1},columns:{attribute:"columns",defaultValue:1},tipText:{attribute:"tip-text",defaultValue:""}},listeners:[{selector:".checkbox-label",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();var e=$(this),i=t.settings,s=e.find("input[type=checkbox]").attr("name"),a=(e.find("input[type=checkbox]").prop("checked"),t.getValue());e.hasClass("disabled")||("object"==$.type(a)&&a[s]!==undefined?a[s]=a[s]===i.trueValue?i.falseValue:i.trueValue:a=a===i.trueValue?i.falseValue:i.trueValue,t.dom().triggerHandler("ev_view_change",[{"type":"value","value":a}]))}}],init:function(){this._status.disabled=!1},render:function(){var e=this.dom(),t=this.settings,i=(e.addClass(t.cls+"checkbox-group-container"),"");null!==t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel checkbox-group-label">'+t.labelField+"</label>",""!==t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div></div>"),i+='<div class="widget-wrap-outer checkbox-group-wrap-outer"><div class="checkbox-group-wrap"></div>',null!=t.tips&&t.tips!=undefined&&(i=i+('<div class="widget-tips textbox-tips '+t.tipsCls)+'"><div class="widget-tips-wrap"><div class="content tips-content"></div></div></div>'),i=i+('<div widget="errortip" error-cls="'+t.errorTipsCls)+'"></div></div>',t.tipText&&(i+='<div widget="toolTip"></div>'),e.append(i),t.items&&0<t.items.length&&this.loadItems(t.items)},loadItems:function(e){var c=this.dom(),t=this.settings,u=Math.ceil(e.length/t.columns),i=0;if($.isArray(e)||"object"!=typeof e||(e=[e]),$.isArray(e)&&!(e.length<0)){t.items=e;for(var n='<ul class="checkbox-group-list-wrap">',s=function(e,t,i,s,a){n=(n=(n=(n+='<li class="checkbox-list"><div class="widget-wrap">')+'<label class="checkbox-label '+t+" "+f+'" for="'+s+'"><input class="hidden" type="hidden" name="'+e+'" data-checked="'+i+'" '+p+" />")+'<input class="checkbox-checkbox" type="checkbox" name="'+e+'" value="'+i+'" data-checked="'+i+'" data-index="'+r+'" id="'+s+'" '+h+' /><span class="icon"></span>')+'<span class="text">'+a+"</span></label></div></li>"},r=0;r<e.length;r++){var a=e[r].name||"",o=e[r].value||!1,d=e[r].itemCls||"",l=(0==r&&(d+=" first"),r==e.length-1&&(d+=" lst"),e[r].id||"checkbox-"+parseInt(1e3*Math.random()*1e3*1e3,10).toString()),h="",p="",f="";"checked"!==e[r].checked&&!0!==e[r].checked||(h='checked="checked"',p='disabled="disabled"',f="checked"),i<u?s(a,d,o,l,e[r].boxlabel||""):(n+='</ul><ul class="checkbox-group-list-wrap">',s(a,d,o,l,e[r].boxlabel||""),i=0),i++}n+="</ul>",c.find("div.checkbox-group-wrap").empty().append($(n))}},setValue:function(e){var t,i=this.dom(),s=this.settings,a=i.find("input[type=checkbox]"),n=function(e,t){t===s.trueValue?(e.closest("label.checkbox-label").addClass("checked"),e.prop("checked",!0)):t===s.falseValue&&(e.closest("label.checkbox-label").removeClass("checked"),e.prop("checked",!1))};if(""!==e){if(1===a.length)n(a.eq(0),e);else if(1<a.length)for(var r in e)!e.hasOwnProperty(r)||0!==(t=i.find('input[type=checkbox][name="'+r+'"]')).length&&n(t.eq(0),e[r])}else a.each(function(e,t){n($(t),s.falseValue)})},getValue:function(){var e=this.dom(),s=this.settings,a={},e=e.find("input[type=checkbox]");return 1===e.length?e.eq(0).prop("checked")?s.trueValue:s.falseValue:1<e.length&&(e.each(function(e,t){var i=$(t).attr("name");a[i]=$(t).prop("checked")?s.trueValue:s.falseValue}),a)},disable:function(){var e=this.dom(),t=e.find("input.checkbox-checkbox");this.getContainer().addClass("disabled"),t.each(function(e,t){t=$(t);t.closest("li.checkbox-list").addClass("disabled"),t.closest("label.checkbox-label").addClass("disabled"),t.prev("input[type=hidden]").prop("disabled",!0),t.prop("disabled",!0)}),e.triggerHandler("ev_view_disable"),this.setStatus("disabled",!0)},enable:function(){var e=this.dom(),t=e.find("input.checkbox-checkbox");this.getContainer().removeClass("disabled"),t.each(function(e,t){t=$(t);t.closest("li.checkbox-list").removeClass("disabled"),t.closest("label.checkbox-label").removeClass("disabled"),t.prev("input[type=hidden]").prop("disabled",!1),t.prop("disabled",!1)}),e.triggerHandler("ev_view_enable"),this.setStatus("disabled",!1)},disableItem:function(i){this.dom().find("input.checkbox-checkbox").each(function(e,t){t=$(t);e===i&&(t.closest("li.checkbox-list").addClass("disabled"),t.closest("label.checkbox-label").addClass("disabled"),t.prev("input[type=hidden]").prop("disabled",!0),t.prop("disabled",!0))})},enableItem:function(i){this.dom().find("input.checkbox-checkbox").each(function(e,t){t=$(t);e===i&&(t.closest("li.checkbox-list").removeClass("disabled"),t.closest("label.checkbox-label").removeClass("disabled"),t.prev("input[type=hidden]").prop("disabled",!1),t.prop("disabled",!1))})}}),$.su.Widget.register("button",{settings:{text:{attribute:"text",defaultValue:""},iconCls:{attribute:"icon-cls",defaultValue:""},enableToggle:{attribute:"enable-toggle",defaultValue:!1},toggleHander:{attribute:"toggle-hander",defaultValue:null},pressedCls:{attribute:"pressed-cls",defaultValue:"pressed"},pressed:{attribute:"pressed",defaultValue:!1},btnCls:{attribute:"btn-cls",defaultValue:"button-button"},handler:{attribute:"handler",defaultValue:null},tipText:{attribute:"tip-text",defaultValue:""}},listeners:[{selector:"",event:"click",condition:function(e){e=e.settings.enableToggle;return"true"===e||!0===e},callback:function(e,t){e.preventDefault();var e=$(this),t=t.settings,i="false"===(i=t.pressed).toString()?(e.addClass(t.pressedCls),!0):(e.removeClass(t.pressedCls),!1);e.attr("pressed",i),t.pressed=i,"function"===$.type(t.toggleHander)&&t.toggleHander.call(this,i)}},{selector:"a.button-button",event:"mousedown touchstart",callback:function(e,t){var i,s;e.stopPropagation(),t.getContainer().hasClass("disabled")||t.getContainer().hasClass("clicked")||(t.getContainer().addClass("clicked"),i=(t=$(this)).find(".button-moire"),s=t.outerWidth(),t=t.outerHeight(),s=Math.sqrt(s*s+t*t),i.css({width:2*s,height:2*s,left:e.offsetX-s,top:e.offsetY-s}))}},{selector:"a.button-button",event:"mouseup mouseleave touchend touchcancel",callback:function(e,t){e.stopPropagation(),t.getContainer().hasClass("clicked")&&setTimeout(function(){var e=t.getContainer();e&&e.removeClass("clicked")},200)}},{selector:"a.button-button",event:"click",callback:function(e,t){e.preventDefault(),t.getContainer().hasClass("disabled")?e.stopPropagation():t.dom().triggerHandler("ev_button_click")}}],init:function(e){},render:function(){var e=this.dom(),t=this.settings,i=t.btnCls||"",s=t.text||"",a=!1===t.labelField?"label-empty":"",a=(e.addClass(t.cls+"button-container "+a),"");null!==t.labelField&&(a=(a+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",t.labelField&&(a+='<span class="widget-separator">'+t.separator+"</span>"),a+="</div></div>"),a=(a+='<div class="widget-wrap-outer button-wrap-outer"><div class="widget-wrap button-wrap">')+'<a href="javascript:void(0);" class="'+i+'" type="button" title="'+s+'"><span class="button-button-before"></span>',""!==t.iconCls&&(a+='<span class="icon button-icon '+t.iconCls+'"></span>'),a=a+'<span class="text button-text">'+s+'</span><span class="icon button-loading"></span><span class="button-moire"></span></a></div>',null!=t.tips&&t.tips!=undefined&&(a=a+('<div class="widget-tips textbox-tips '+t.tipsCls)+'"><div class="content tips-content"></div></div>'),a=a+('<div widget="errortip" error-cls="'+t.errorTipsCls)+'"></div></div>',t.tipText&&(a+='<div widget="toolTip"></div>'),e.empty().append(a),!0===t.enableToggle&&(i=t.pressed,e.attr("pressed",i),"true"===i.toString()&&e.addClass(t.pressedCls)),this.setTips(t.tips)},setText:function(e){var t=this.settings,i=this.getContainer(),s=i.find("a.button-button"),i=i.find("a.button-button span.button-text");e&&(t.text=e,i.html(e),s.attr("title",e))},getText:function(){return this.settings.text},setValue:function(e){},loading:function(e){var t=this.dom();!1===e?(t.removeClass("loading"),this.enable()):(t.addClass("loading"),this.disable())},setIconCls:function(e){this.dom().find(".button-icon").removeClass().addClass("icon button-icon "+e)},status:function(e){return e!==undefined&&(this.dom().removeClass(this.dom().data("status")),this.dom().data("status",e),this.dom().addClass(e)),this.dom().data("status")},textAnimate:function(e){var t=this,i=(this.dom(),this.getContainer().find("a.button-button span.button-text"));!1!==e?(clearInterval(this.underTextTimer),this.underTextTimer=setInterval(function(){var e;t.dom().is(":visible")?(e=i.text(),/\.\.\.$/.test(e)?e=e.replace(/\.\.\.$/,""):e+=".",e=e.replace(/(\.*$)/,'<span class="dots">$1</span>'),i.html(e)):clearInterval(t.underTextTimer)},500)):clearInterval(this.underTextTimer)}}),$.su.Widget.register("file",{settings:{inputCls:{attribute:"input-cls",defaultValue:"l"},buttonCls:{attribute:"button-cls",defaultValue:"inline-block"},buttonText:{attribute:"button-text",defaultValue:$.su.CHAR.OPERATION.FILEBUTTONTEXT},blankText:{attribute:"blank-text",defaultValue:$.su.CHAR.OPERATION.FILEBLANKTEXT},extension:{attribute:"extension",defaultValue:"txt, ai, docx"},extensionErrorText:{attribute:"extension-error-text",defaultValue:$.su.CHAR.ERROR["00000074"]},tipText:{attribute:"tip-text",defaultValue:""},paramName:{attribute:"param-name",defaultValue:"file"},note:{attribute:"note",defaultValue:""}},listeners:[{selector:"div.file-button",event:"click",callback:function(e,t){t=t.getContainer();e.preventDefault(),e.stopPropagation(),t.find("input.file-input").click()}},{selector:"label.file-text",event:"click",callback:function(e,t){t=t.getContainer();e.preventDefault(),e.stopPropagation(),t.hasClass("disabled")||t.find("div.file-button").click()}},{selector:function(){return{parent:this.dom().find("input.file-input")}},event:"change",callback:function(e,t){var i=t.getContainer(),s=$(this).val(),a=(a=s.toString().match(/.+(?=\\)/g))&&a[0]&&a[0].length?s.substring(a[0].length+1):s;t.dom().triggerHandler("ev_file_change",[a]),i.find("label.file-text").html(a),i.find("label.file-text").attr("title",a)}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=(e.addClass(t.cls+"text-container file-container"),""),i=(null!==t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",""!==t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div></div>"),i=(i=(i=(i=(i+='<div class="file-wrap-outer widget-wrap-outer">')+'<div class="file-wrap widget-wrap">'+'<div class="widget-wrap text-wrap">')+'<span class="text-wrap-before"></span>'+'<span class="text-wrap-inner">')+('<label class="file-text text-text '+t.inputCls+'"></label>')+"</span>")+'<span class="text-wrap-after"></span>'+"</div>",t.note&&(i+='<div class="note"><span>'+t.note+"</span></div>"),i=(i=(i=i+"</div>"+('<div widget="errortip" error-cls="'+t.errorTipsCls+'">'))+"</div>"+('<div class="button-container file-button-container '+t.buttonCls+'">'))+('<div widget="button" id="'+this.domId+'-btn" class="file-button" type="button" text="'+t.buttonText+'"></div>')+"</div>",t.tips&&(i=(i+='<div class="widget-tips textbox-tips '+t.tipsCls+'">')+'<div class="content tips-content">'+t.tips+"</div></div>"),i+="</div>",t.tipText&&(i+='<div widget="toolTip"></div>'),e.append(i),this.getContainer()),s='<form method="post" id="'+this.domId+'_form" class="hidden" name="form" enctype="multipart/form-data"><input type="file" name="'+t.paramName+'" class="file-input"></form>',s=(i.find("div.file-wrap").append($(s).prop("single",!0)),i.find("div.file-wrap").append('<div class="file-text-hover"></div>'),e.find("div[widget=button]")[0]);this.btn=new $.su.widgets.button({id:$(s)}),this.btn.render(),this.setTips(t.tips)},getFile:function(){return this.dom().find("input.file-input")[0]},getFileName:function(){var e=this.dom().find("input.file-input");return e.val()===undefined?"":e.val()},getFileSize:function(){var e=this.dom().find("input.file-input");return Math.round(e[0].files[0].size/1024*100)/100},startUpload:function(){this.dom().addClass("disabled"),this.btn.loading(!0)},endUpload:function(){this.dom().removeClass("disabled"),this.btn.loading(!1)},resetFile:function(){var e=this.dom(),t=e.find("input.file-input"),e=e.find("label.file-text");t.val(""),e.html("")},getFileValue:function(){return this.dom().find("input.file-input").val()}}),$.su.Widget.register("progressbar",{settings:{text:{attribute:"text",defaultValue:""},unit:{attribute:"unit",defaultValue:"%"},_timeout:{attribute:"timeout",defaultValue:"0"},duration:{attribute:"duration",defaultValue:1e3},value:{attribute:"value",defaultValue:0},url:{attribute:"url",defaultValue:null},animate:{attribute:"animate",defaultValue:!0},showPercentage:{attribute:"show-percentage",defaultValue:!0},underText:{attribute:"under-text",defaultValue:null},infinite:{attribute:"infinite",defaultValue:!1},circle:{attribute:"circle",defaultValue:!1},fn:{attribute:"fn",defaultValue:null},ptype:{attribute:"ptype",defaultValue:"horizontal"},tipText:{attribute:"tip-text",defaultValue:""},step:{attribute:"step",defaultValue:!1},animateText:{attribute:"animate-text",defaultValue:""}},init:function(){var e=this.settings;!1!==e.step&&(e.step=parseInt(e.step,10))},render:function(){var e=this.dom(),t=this.settings,i=t.ptype,s=t.value,a=t.width,n=t.height,r=!1===t.labelField?"label-empty":"",o=t.infinite?" infinite-progress":"",d=t.circle?" circle-progress":"",i=(e.addClass(t.cls+"progressbar-container progressbar-"+i+" "+r+o+d),"");null!==t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel processbar-fieldlabel">'+t.labelField+"</label>",t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div></div>"),i+='<div class="widget-wrap-outer progressbar-wrap-outer"><div class="widget-wrap progressbar-wrap"><div class="widget-wrap progressbar-content"><div class="progressbar-value"></div></div>',""==t.text&&!t.showPercentage||(i+='<div class="progressbar-text">',""!=t.text&&(i+='<span class="progressbar-text">'+t.text+"</span>"),t.showPercentage&&(i+='<span class="progressbar-percentage">'+s+t.unit+"</span>"),i+="</div>"),i+="</div>",i=(i=null!=t.underText&&t.underText!=undefined?(i+='<div class="progressbar-under-text-wrap">')+'<div class="progressbar-under-text">'+t.underText+"</div></div>":i)+('<div widget="errortip" error-cls="'+t.errorTipsCls)+'"></div>',null!=t.tips&&t.tips!=undefined&&(i=(i+='<div class="widget-tips textbox-tips '+t.tipsCls+'">')+'<div class="content tips-content">'+t.tips+"</div></div>"),i+="</div>",t.tipText&&(i+='<div widget="toolTip"></div>'),e.append(i),e.find("div.progressbar-content").css({width:a,height:n}),this.setTips(t.tips),this.childrenDom={},this.childrenDom.container=this.getContainer(),this.childrenDom.progressbarBox=this.childrenDom.container.find("div.progressbar-content"),this.childrenDom.progressbarBar=this.childrenDom.progressbarBox.children("div.progressbar-value"),this.childrenDom.percentageBox=this.childrenDom.container.find("span.progressbar-percentage")},getValue:function(){return this.settings.value},setValue:function(e,t){var i;e!==undefined&&null!==e&&((i=this.settings).prevValue=i.value,i.value=e,i.animate?this.animate({percentageStart:i.prevValue,percentageEnd:e,duration:t||i.duration}):this.updateViewByPercentageVal(e))},animate:function(e){var i=this,s=this.settings,t=this.getContainer(),a=s.ptype,n=s.unit,r="horizontal"===a?"width":"height",a=null===e.percentageStart?0:e.percentageStart,a=parseInt(a,10),o=parseInt(e.percentageEnd,10),c="number"===$.type(parseInt(e.duration,10))?parseInt(e.duration,10):500,u=e.callback||null,d=a||0,e=t.find("div.progressbar-content"),h=e.children("div.progressbar-value"),p=t.find("span.progressbar-percentage"),l=(e[r](),this.updateViewByPercentageVal(a),parseInt(c/Math.abs(o-a),10)),f=(new Date).getTime();clearInterval(s._timeout),s._timeout=setInterval(function(){var e=(new Date).getTime(),t=e-f,t=Math.round(t/l);f=e,d!=o?(d=o<d?(d-=t)<o?o:d:o<(d+=t)?o:d,s.percentageCurrent=d.toFixed(1)/100,!1!==s.step?i.updateViewByPercentageVal(d):(e="width"==r?{"width":d+n}:{"height":d+n},h.clearQueue().animate(e,l,function(){p.html(d+n)}),i.settings.value=d)):(clearInterval(s._timeout),s._timeout=0,i.updateViewByPercentageVal(o),u&&u.call(this))},l)},animateInfinite:function(e){this.underTextAnimate(e);var t,i=this.settings,s=this.getContainer(),a=(i.ptype,i.unit,s.find("div.progressbar-content").children("div.progressbar-value"));1!=i.circle&&(!1!==e?((t=function(){a.css({left:-a.width()}),a.clearQueue().animate({left:"100%"},4e3)})(),clearInterval(i._timeout),i._timeout=setInterval(function(){t()},4e3)):(a.clearQueue(),clearInterval(i._timeout)))},reset:function(){var e=this.settings,t=this.getContainer(),i=e.unit,e="horizontal"===e.ptype?"width":"height";this.stop();var s=t.find("div.progressbar-content").children("div.progressbar-value"),t=t.find("span.progressbar-percentage"),e="width"==e?{"width":0}:{"height":0};s.stop(),s.css(e),t.html(0+i),this.settings.value=0},stop:function(){clearInterval(this.settings._timeout)},setText:function(e){this.getContainer().find("span.progressbar-text").text(e)},hide:function(){this.getContainer().css("display","none")},show:function(){this.getContainer().fadeIn(150)},hideBar:function(){var e=this.dom();e.find("div.progressbar-content").hide(),e.addClass("hide-bar")},showBar:function(){var e=this.dom();e.find("div.progressbar-content").show(),e.removeClass("hide-bar")},updateViewByPercentageVal:function(e){var t=this.childrenDom,i=this.settings,s=(t.container,i.ptype),a=i.unit,s="horizontal"===s?"width":"height",n=(t.progressbarBox,t.progressbarBar),t=t.percentageBox,r=e+"%";!1!==i.step&&(r=(e*i.step/100).toFixed(0)/i.step+"%"),n.css(s,r),t.text(e+a),this.settings.value=e},setUnderText:function(e){var t=this.dom();null!==e&&e!==undefined&&(t=t.find(".progressbar-under-text-wrap"),""==e?t.hide():t.show().find(".progressbar-under-text").html(e))},underTextAnimate:function(e){var t=this,i=this.dom(),s=this.settings.animateText?$(this.settings.animateText):i.find(".progressbar-under-text");0!=s.length&&(!1!==e?(clearInterval(this.underTextTimer),this.underTextTimer=setInterval(function(){var e;t.dom().is(":visible")?(e=s.text(),/\.\.\.$/.test(e)?e=e.replace(/\.\.\.$/,""):e+=".",s.text(e)):clearInterval(t.underTextTimer)},500)):clearInterval(this.underTextTimer))},destroy:function(){this.stop()}}),$.su.Widget.register("password",{settings:{hint:{attribute:"hint",defaultValue:null},validateIcon:{attribute:"validate-icon",defaultValue:!1},showLevel:{attribute:"show-level",defaultValue:!1},allowBlank:{attribute:"allow-blank",defaultValue:!0},_minLength:{attribute:"min-length",defaultValue:2},_maxLength:{attribute:"max-length",defaultValue:16},vtype:{attribute:"vtype",defaultValue:"password"},invalidText:{attribute:"invalid-text",defaultValue:$.su.CHAR.VTYPETEXT.INVALIDTEXT},blankText:{attribute:"blank-text",defaultValue:$.su.CHAR.VTYPETEXT.BLANKTEXT},allowVisible:{attribute:"allow-visible",defaultValue:!0},visibleDefault:{attribute:"visible-default",defaultValue:!1},readOnly:{attribute:"read-only",defaultValue:!1},tipText:{attribute:"tip-text",defaultValue:""},securityCheck:{attribute:"security-check",defaultValue:!1},autoTrim:{attribute:"auto-trim",defaultValue:null}},listeners:[{selector:"input.password-text",event:"click focus",callback:function(e,t){e.preventDefault(),t.dom().find("input.password-hint").fadeOut(50),t.setFocus(),t.securityCheck(!0,!1)}},{selector:".text-wrap, .allow-visible-wrapper",event:"mouseenter",callback:function(e,t){t.dom().addClass("hover")}},{selector:".text-wrap, .allow-visible-wrapper",event:"mouseleave",callback:function(e,t){t.dom().removeClass("hover")}},{selector:"input.password-text",event:"blur",callback:function(e,t){var i=t.dom(),s=t.settings,a=(s.encrypt,i.find("input.password-visible")),n=i.find("input.password-hidden"),i=i.find("input.password-hint"),s=(s.passwordVisible?a:n).val();!0===t.settings.autoTrim&&(s=$.trim(s),a.val(s),n.val(s)),t.removeFocus(),s||i.css("display","inline"),t.dom().triggerHandler("ev_view_change",[{"type":"valid","value":s}]),t.dom().triggerHandler("ev_password_blur"),t.securityCheck(!1,!0)}},{selector:"input.password-text",event:"keyup",callback:function(e,t){var i=$(this).val();t.levelCheck(),t.securityCheck(!1,!1),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}])}},{selector:"input.password-text",event:"change",callback:function(e,t){var i=t.dom(),s=t.settings,a=i.find("input.password-visible"),i=i.find("input.password-hidden"),s=(s.passwordVisible?a:i).val();t.dom().triggerHandler("ev_view_change",[{"type":"value","value":s}])}},{selector:"span.allow-visible-btn",event:"click",callback:function(e,t){var i=t.dom(),t=t.settings,s=i.find("input.password-visible"),a=i.find("input.password-hidden"),i=i.hasClass("disabled"),n=$(this),r="";i||(t.passwordVisible?(r=s.val(),a.val(r),s.css("display","none"),a.css("display","inline-block"),n.removeClass("visible"),t.passwordVisible=!1):(r=a.val(),s.val(r),a.css("display","none"),s.css("display","inline-block"),n.addClass("visible"),t.passwordVisible=!0))}},{selector:"input.password-hint",event:"click focus",callback:function(e,t){e.preventDefault();var e=t.dom(),i=t.settings,s=e.find("input.password-visible"),a=e.find("input.password-hidden");return e.fadeOut(50,function(){(i.passwordVisible?s:a).focus()}),!1}}],init:function(){var e,t=this.settings;t.vtype&&(e=t.vtype,t.vtypeText&&(t.vtype.vtypeText=t.vtypeText),t.vtype=e)},render:function(){var e=this.dom(),t=this.settings,i=""===t.tips?"":" tips",s=(t.shortTips,t.readOnly?'readonly="readonly"':""),a=t.allowVisible?" visible":"",i=(e.addClass(t.cls+"text-container password-container "+i+a),""),a=(null!==t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel text-fieldlabel password-fieldlabel">'+t.labelField+"</label>",""!==t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div></div>"),i=(i=(i+='<div class="widget-wrap-outer text-wrap-outer password-wrap-outer '+(t.allowVisible?"allow-visible":"")+'">')+'<div class="widget-wrap text-wrap password-wrap">'+'<span class="text-wrap-before"></span>')+'<span class="text-wrap-inner password-wrap ">'+('<input type="password" '+s+' class="text-text password-text password-hidden '+(t.visibleDefault?"hidden ":" ")+t.inputCls+'"/>'),t.allowVisible&&(t.passwordVisible=t.visibleDefault,i+='<input type="text" '+s+' class="text-text password-text password-visible '+(t.visibleDefault?" ":"hidden ")+t.inputCls+'"/>'),i+="</span>",t.hint&&(i=(i+='<span class="hint text-hint password-hint">')+'<input class="text-hint password-hint '+t.inputCls+'" value="'+t.hint+'" contenteditable="false" readonly="readonly"/></span>'),i=(i=t.showLevel?(i=(i=(i+='<div class="password-level hidden '+t.inputCls+'">')+'<span class="level low">'+$.su.CHAR.OPERATION.LOW+"</span>")+'<span class="level middle">'+$.su.CHAR.OPERATION.MIDDLE+"</span>")+'<span class="level high">'+$.su.CHAR.OPERATION.HIGH+"</span></div>":i)+'<span class="text-wrap-after"></span>'+"</div>",t.validateIcon&&(i+='<span class="widget-validate-icon"></span>'),""!=t.shortTips&&null!=t.shortTips&&t.shortTips!=undefined&&(i=(i+='<div class="widget-short-tips textbox-short-tips">')+'<div class="content short-tips-content">'+t.shortTips+"</div></div>"),""!=t.tips&&null!=t.tips&&t.tips!=undefined&&(i=(i+='<div class="widget-tips textbox-tips '+t.tipsCls+'">')+'<div class="content tips-content">'+t.tips+"</div></div>"),i=(i=t.allowVisible?(i=i+'<div class="allow-visible-wrapper"><span class="icon allow-visible-btn '+(t.visibleDefault?"visible":"")+'"></span>')+'<span class="text allow-visible-text">'+$.su.CHAR.OPERATION.SHOW+"</span></div>":i)+('<div widget="errortip" error-cls="'+t.errorTipsCls+'">')+"</div>",t.securityCheck&&(i=(i=(i=(i+='<div class="pw-secure-check hidden"><ul class="pw-secure-check-ls">')+'<li class="pw-nospace-hint"><div>'+$.su.CHAR.VTYPETEXT.PWD_NOSPACE_CHECK+"</div></li>")+'<li class="pw-length-hint"><div>'+$.su.CHAR.VTYPETEXT.PWD_LENGTH_CHECK+"</div></li>")+'<li class="pw-symbol-hint"><div>'+$.su.CHAR.VTYPETEXT.PWD_SYMBOL_CHECK+"</div></li></ul></div>"),i+="</div>",t.tipText&&(i+='<div widget="toolTip"></div>'),e.append(i),e.find("div.progressbar-container").addClass("hidden"),this.getContainer()),n=a.find("input.password-hidden"),s=a.find("input.password-visible"),r=a.find("input.password-hint");a.find("input.password-level");t.visibleDefault?(s.css("display","inline-block"),n.css("display","none")):(s.css("display","none"),n.css("display","inline-block")),setTimeout(function(){""!=n.val()&&r.css("display","none")},100),this.setTips(t.tips)},securityCheck:function(e,t){var i,s,a,n,r,o,d,l=this.settings;l.securityCheck&&(s=(i=this.getContainer()).find("input.password-visible"),a=i.find("input.password-hidden"),n="",n=(l.passwordVisible?s:a).val(),l=!/[\s]/i.test(n),s=6<=n.length&&n.length<=32,a=2<=Boolean(/[a-zA-Z]/g.test(n))+Boolean(/[0-9]/g.test(n))+Boolean(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\x20]/g.test(n)),n=i.find("div.pw-secure-check"),r=i.find("li.pw-nospace-hint"),o=i.find("li.pw-length-hint"),d=i.find("li.pw-symbol-hint"),r.removeClass("warning error passed"),o.removeClass("warning error passed"),d.removeClass("warning error passed"),t?(l?r.hide():r.addClass("error"),s?o.hide():o.addClass("error"),a?d.hide():d.addClass("error"),l&&s&&a?i.removeClass("error").addClass("valid"):i.removeClass("valid").addClass("error")):!e&&n.hasClass("hidden")||(r.addClass(l?"passed":"warning"),o.addClass(s?"passed":"warning"),d.addClass(a?"passed":"warning"),r.show(),o.show(),d.show(),e&&n.removeClass("hidden").fadeIn(100)))},levelCheck:function(){var e,t,i,s,a,n=this.settings;n.showLevel&&(s=(e=this.getContainer()).find("input.password-visible"),a=e.find("input.password-hidden"),t="",i=0,n=(t=(n.passwordVisible?s:a).val()).length,i=(/[A-Z]/g.test(t)?1:0)+(/[a-z]/g.test(t)?1:0)+(/[0-9]/g.test(t)?1:0)+(10<=n?1:0)+(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\x20]/g.test(t)?1:0),s=0,n<=5?i<=2?s=1:3!=i&&4!=i||(s=2):i<=1?s=1:2==i||3==i?s=2:4<=i&&(s=3),(a=e.find("div.password-level")).removeClass("level-0 level-1 level-2 level-3"),""!==t?(a.fadeIn(100).addClass("level-"+s).removeClass("hidden"),e.addClass("level")):(a.hide().addClass("hidden"),e.removeClass("level")))},setValue:function(e){this.dom().find("span.password-wrap input").val(e),this.levelCheck(),this.securityCheck(!1,!1)},getValue:function(){return this.dom().find("span.password-wrap input").val()},setMaxLength:function(e){var t=this.dom();e=parseInt(e),"number"===$.type(e)&&t.find("span.password-wrap input").attr("maxlength",e)},disable:function(){var e=this.getContainer(),t=e.find("input.password-text");e.addClass("disabled"),t.prop("disabled",!0),e.triggerHandler("ev_view_disable")},enable:function(){var e=this.getContainer(),t=e.find("input.password-text");e.removeClass("disabled"),t.prop("disabled",!1),e.triggerHandler("ev_view_enable")},setCorrect:function(){this.setNormal(),this.getContainer().addClass("correct")},setError:function(e){var t=this.dom(),i=this.getContainer(),s=t.find("div[widget=errortip]"),t=t.find(".widget-tips");i&&!this.isDisabled()&&e&&(t.hide(),this.settings.securityCheck?this.securityCheck(!1,!0):this.errortip?this.errortip.show(e):0<s.length&&i&&((t=i.children(".widget-wrap-outer").children("div[widget=errortip]")).get(0)&&($(t[0]).attr("id",this.domId+"_errortip"),this.errortip=$(t[0]).errortip({type:this.type})[0],this.errortip.render(),this.errortip.show(e))),i.removeClass("valid").addClass("error"),i.find("span.widget-validate-icon").css({"display":"inline-block"}))},setNormal:function(){var e=this.dom(),t=(this.settings,this.getContainer()||e),e=(e.find("div[widget=errortip]"),e.find(".widget-tips"));t&&(t.removeClass("focus error disable dirty correct"),t.find("span.widget-validate-icon").css({"display":"none"}),this.errortip&&this.errortip.hide(),0<e.length&&($.su.isIe?e.show():e.fadeIn(150)))}}),$.su.Widget.register("slider",{settings:{showPercentage:{attribute:"show-percentage",defaultValue:!0},_width:{attribute:"width",defaultValue:255},inputBox:{attribute:"input-box",defaultValue:!1},increment:{attribute:"increment",defaultValue:1},minValue:{attribute:"min-value",defaultValue:0},maxValue:{attribute:"max-value",defaultValue:100},range:{attribute:"range",defaultValue:null},unit:{attribute:"unit",defaultValue:""},value:{attribute:"value",defaultValue:0},tipText:{attribute:"tip-text",defaultValue:""},rangeSlider:{attribute:"range-slider",defaultValue:!1},poleValue:{attribute:"pole-value",defaultValue:!1},displayValue:{attribute:"display-value",defaultValue:!1},valueMarker:{attribute:"value-marker",defaultValue:!1},valueMarkerPos:{attribute:"value-marker-pos",defaultValue:"top"},disablePole:{attribute:"disable-pole",defaultValue:!1}},listeners:[{selector:"div.left-box input[type=text]",event:"keyup",callback:function(e,t){var i=$.su.clone(t.settings.value),s=$(this).val(),s=t.formatType(s);s&&($(this).val(s),s<=(i[0]>i[1]?i[0]:i[1])&&(i[0]<i[1]?i[0]=s:i[1]=s,t.setValue(i)))}},{selector:"div.right-box input[type=text]",event:"keyup",callback:function(e,t){var i=$.su.clone(t.settings.value),s=$(this).val(),s=t.formatType(s);s&&($(this).val(s),t.settings.rangeSlider?(i[0]<i[1]?i[0]:i[1])<=s&&(i[0]>i[1]?i[0]=s:i[1]=s,t.setValue(i)):t.setValue(s))}},{selector:"div.widget-wrap.slider-wrap",event:"click",callback:function(e,t){t.dom().hasClass("disabled")||t.dragingHandler(e)}}],init:function(){var e,t,i=this.settings;i.value=i.rangeSlider?[0,0]:0,this.leftBox=undefined,this.rightBox=undefined,i.configs&&"function"===$.type(i.configs.convertValue)&&(this.convertValue=i.configs.convertValue),i.width&&(i._width=i.width,delete i.width),i._splitorWidth=2,"s"!=$.su.widgetSize||(t=.75*document.body.clientWidth)<i._width&&(e=Math.round((i.maxValue-i.minValue)/i.increment),t=Math.floor(t/e)*e,i._width=t,i._splitorWidth=1),i._splitorAll=Math.round(i._width/Math.round((i.maxValue-i.minValue)/i.increment))},render:function(){var e,t,h,i=this.dom(),s=this.settings,a=(i.addClass(s.cls+"slider-container"+(s.rangeSlider?" range":"")),""),n=(null!==s.labelField&&!1!==s.labelField&&(a=(a+='<div class="widget-fieldlabel-wrap '+s.labelCls+'">')+'<label class="widget-fieldlabel slider-fieldlabel">'+s.labelField+"</label>",""!==s.labelField&&(a+='<span class="widget-separator">'+s.separator+"</span>"),a+="</div>"),a+='<div class="widget-wrap-outer slider-wrap-outer">',s.inputBox&&s.rangeSlider&&(a+='<div widget="textbox" id="'+this.domId+'_left_textbox" class="left-box"></div>'),!s.inputBox&&s.rangeSlider&&s.displayValue&&(a+='<div class="display-value-container left-value"><span class="content"></span></div>'),a=(a=(a=a+'<div class="widget-wrap slider-wrap">'+'<div class="widget-wrap slider-content-left">')+'<div class="widget-wrap slider-content-right">'+'<div class="widget-wrap slider-content">')+'<div class="widget-value slider-value"></div>'+'<div class="split-background"></div>',this.convertValue?this.convertValue(s.value[0]):s.value[0]);a+='<div data-tip="'+n+'" data-pointer="top" class="widget-value-outer slider-value-outer left">',s.valueMarker&&(a+="<span class='slider-value-marker %pos'>%value</span>".replace("%pos","top"===s.valueMarkerPos?"top":"bottom").replace("%value",n)),a+="</div>",s.rangeSlider&&(n=s.rangeSlider?s.value[1]:s.value,a+='<div data-tip="'+(n=this.convertValue?this.convertValue(n):n)+'" data-pointer="top" class="widget-value-outer slider-value-outer right"></div>'),a+="</div></div></div>",s.poleValue&&(n=s.minValue,e=s.maxValue,t=s.anchors,$.isArray(t)&&t.length<=2&&(n=t[0]||n,e=t[1]||e),a=(a=a+'<div class="pole-tips-container"><span class="pole-tips left-tip">'+(this.convertValue?this.convertValue(n):n)+"</span>")+'<span class="pole-tips right-tip">'+(this.convertValue?this.convertValue(e):e)+"</span></div>"),a+="</div>",s.inputBox&&(a+='<div widget="textbox" id="'+this.domId+'_right_textbox" class="right-box"></div>'),!s.inputBox&&s.displayValue&&(a+='<div class="display-value-container right-value"><span class="content"></span></div>'),s.tipText&&(a+='<div widget="toolTip"></div>'),a+='<div widget="errortip"></div></div>',i.append($(a)),this.leftBox=new $.su.widgets.textbox({id:this.domId+"_left_textbox"}),this.rightBox=new $.su.widgets.textbox({id:this.domId+"_right_textbox"}),this.leftBox.render(),this.rightBox.render(),s.maxValue<=s.minValue||(s.range||(s.range=[s.minValue,s.maxValue]),i.find("div.slider-content").css({"width":s._width}),i.find(".split-background").css({"right":s._splitorWidth,"background":"repeating-linear-gradient(to right, transparent 0 "+(s._splitorAll-s._splitorWidth)+"px, white "+(s._splitorAll-s._splitorWidth)+"px "+s._splitorAll+"px)"}),i.find("span.slider-percentage").text(s.value+s.unit),h=this,i.find("div.slider-value-outer").on("mousedown touchstart",function(e){var u,t,i;h.dom().hasClass("disabled")||($(this).parent().find("div.slider-mask").remove(),$(this).before('<div class="slider-mask"></div>'),u=$(this).hasClass("left"),t=function(e){var t,c=h.dom(),i=h.settings,s=("mousemove"===e.type&&e.preventDefault(),h.dom().find("div.slider-wrap")),a=(h.dom().find("div.slider-value-outer"+(u?".left":".right")).trigger("mouseenter"),parseInt(i.maxValue,10)),n=parseInt(i.minValue,10),r=parseInt(i._width,10),o=parseInt(i.increment,10),e="mousemove"===e.type?e.pageX||e.screenX:e.originalEvent.changedTouches[0].pageX,d=e-s.offset().left,d=Math.round(d/r*(a-n))+n,l=Math.round(d/o)*o,i=(a<l?l=a:l<n&&(l=n),i.disablePole);i&&(l!=n||"both"!=i&&"min"!=i||(l+=o),l!=a||"both"!=i&&"max"!=i||(l-=o)),u||(i=e-s.offset().left,d=Math.round(i/r*a),a<(t=Math.round(d/o)*o)?t=a:t<n&&(t=n)),c.triggerHandler("ev_view_change",[{"type":"value","value":h.settings.rangeSlider?[u?l:h.settings.value[0],u?h.settings.value[1]:t]:l}])},i=function(){$("html").off("mousemove touchmove",t).off("mouseup touchend",i)},$("html").on("mousemove touchmove",t),$("html").on("mouseup touchend",i))}))},dragingHandler:function(e){var t=this.dom(),i=this.settings,c=(e.preventDefault(),t.find("div.slider-wrap")),s=parseInt(i.maxValue,10),a=parseInt(i.minValue,10),n=parseInt(i._width,10),r=parseInt(i.increment,10),e=(e.pageX||e.screenX)-c.offset().left,c=Math.round(e/n*(s-a))+a,e=Math.round(c/r)*r,n=(s<e?e=s:e<a&&(e=a),i.disablePole),o=(n&&(e!=a||"both"!=n&&"min"!=n||(e+=r),e!=s||"both"!=n&&"max"!=n||(e-=r)),$.isArray(this.settings.value)?$.su.clone(this.settings.value):this.settings.value),d=($.isArray(o)&&(Math.abs(e-o[0])<Math.abs(e-o[1])?o[0]=e:o[1]=e),i.configs&&i.configs.values||[]);if(0<d.length&&!this.settings.rangeSlider){for(var o=i.value,l=0,u=d.length-1;l<u;l++)if(d[l]<o&&o<d[l+1]){t.triggerHandler("ev_view_change",[{"type":"value","value":o-d[l]<=d[l+1]-o?d[l]:d[l+1]}]);break}}else this.setDisplay(this.settings.rangeSlider?o:e),t.triggerHandler("ev_view_change",[{"type":"value","value":this.settings.rangeSlider?o:e}])},getValue:function(){return this.settings.value},setRangeSytle:function(e,t){var i=this.dom(),s=this.settings,a=i.find("div.slider-value"),n=i.find("div.slider-value-outer.left"),c=i.find("div.slider-value-outer.right"),r=parseInt(s.maxValue,10),o=parseInt(s.minValue,10),d=parseInt(s.range[1],10),l=parseInt(s.range[0],10),s=parseInt(s._width,10),d=(d<e?e=d:e<l&&(e=l),d<t?t=d:t<l&&(t=l),s/(r-o)*(e-o)),l=s/(r-o)*(t-o),s=s/(r-o)*Math.abs(t-e);a.css({"left":d<l?d:l,"width":s}),n.css({"left":d}),c.css({"left":l}),e=this.convertValue?this.convertValue(e):e,t=this.convertValue?this.convertValue(t):t,i.find(".slider-value-outer.left").attr("data-tip",e),i.find(".slider-value-outer.right").attr("data-tip",t)},setStyle:function(e){var t=this.dom(),i=this.settings,s=t.find("div.slider-value"),a=t.find("div.slider-value-outer.left"),n=parseInt(i.maxValue,10),r=parseInt(i.minValue,10),o=parseInt(i.range[1],10),d=parseInt(i.range[0],10),o=(o<e?e=o:e<d&&(e=d),parseInt(i._width,10)),d=Math.round(o/(n-r)*(e-r));s.css({"width":d}),a.css({"left":d}),t.find("span.slider-percentage").html(e+i.unit),e=this.convertValue?this.convertValue(e):e,t.find(".slider-value-outer.left").attr("data-tip",e),i.valueMarker&&t.find(".slider-value-marker").html(e)},setValue:function(e){var t=this.settings;if(e=e||(t.rangeSlider?[0,0]:0),t.value=e,$.isArray(e))this.leftBox&&this.leftBox.setValue(e[0]<e[1]?e[0]:e[1]),this.rightBox&&this.rightBox.setValue(e[0]<e[1]?e[1]:e[0]),this.setRangeSytle(e[0],e[1]);else{if(t.disablePoints&&0<t.disablePoints.length&&-1!==t.disablePoints.indexOf(e))for(var i=t.enableValue,s=0,a=i.length;s<a;s++)if(i[s]>e){e=0!==s&&e-i[s-1]<=i[s]-e?i[s-1]:i[s],t.value=e;break}this.rightBox&&this.rightBox.setValue(e),this.setStyle(e)}this.setDisplay(e)},setDisplay:function(e){var t,i,s,a=this.settings;!a.inputBox&&a.displayValue&&(t=(a=this.dom().find(".display-value-container")).filter(".left-value").find(".content"),a=a.filter(".right-value").find(".content"),$.isArray(e)?(i=e[0]<e[1]?e[0]:e[1],s=e[0]<e[1]?e[1]:e[0],this.convertValue&&(i=this.convertValue(i),s=this.convertValue(s)),0<t.length&&t.text(i),0<a.length&&a.text(s)):(e=this.convertValue?this.convertValue(e):e,a.text(e)))},setRange:function(e){var t=this.settings;e[0]<t.minValue&&(e[0]=t.minValue),e[1]>t.maxValue&&(e[1]=t.maxValue),e[0]>e[1]&&(e[1]=e[0]-e[1],e[0]=e[0]-e[1],e[1]=e[0]+e[1]),t.range=e},setMaxValue:function(e){e=parseInt(e),"number"===$.type(e)&&(this.settings.maxValue=e)},setMinValue:function(e){e=parseInt(e),"number"===$.type(e)&&(this.settings.minValue=e)},formatType:function(e){var t=parseFloat(e,10);return/^\d+$/.test(e)&&$.isNumeric(t)?t:!(!isNaN(t)&&(t+"").length===(e+"").length)&&e},disable:function(){this.dom().addClass("disabled"),this.leftBox&&this.leftBox.disable(),this.rightBox&&this.rightBox.disable()},enable:function(){this.dom().removeClass("disabled"),this.leftBox&&this.leftBox.enable(),this.rightBox&&this.rightBox.enable()},setDisablePoints:function(e){var t=this.settings;if(t.configs&&t.configs.values){var i=t.configs.values.slice(),s=(e="array"===$.type(e)?e:[e],this.getValue()),a=e.indexOf(s);t.disablePoints=e.slice();for(var n=0,r=e.length;n<r;n++){var o=i.indexOf(e[n]);-1!==o&&i.splice(o,1)}i.sort(function(e,t){return e-t}),t.enableValue=i,-1!==a&&this.setValue(s)}}}),$.su.Widget.register("switch",{settings:{name:{attribute:"name",defaultValue:""},trueValue:{attribute:"true-value",defaultValue:1},falseValue:{attribute:"false-value",defaultValue:0},columns:{attribute:"columns",defaultValue:1},tipText:{attribute:"tip-text",defaultValue:""},animateTime:{attribute:"animate-time",defaultValue:300}},listeners:[{selector:".switch-label",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();var e=$(this),i=t.settings,s=t.getValue(),a=e.closest(".switch-container");e.hasClass("disabled")||a.hasClass("loading-on")||a.hasClass("loading-off")||(s=s===i.trueValue?i.falseValue:i.trueValue,e=$.su.getDefaultEvent(t,function(){t.dom().triggerHandler("ev_view_change",[{"type":"value","value":s}])}),t.dom().trigger("ev_view_will_change",[e.ev]),e.exe())}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=(this.value=null,e.addClass(t.cls+"switch-container"),"");null!==t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel switch-fieldlabel">'+t.labelField+"</label>",""!==t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div></div>"),i+='<div class="widget-wrap-outer switch-wrap-outer"><div class="switch-wrap"><div class="widget-wrap"><label class="switch-label"><span class="icon-bg"></span><span class="icon-ball"></span><span class="icon-loading"></span></label></div></div>',null!=t.tips&&t.tips!=undefined&&(i=(i+='<div class="widget-tips textbox-tips '+t.tipsCls+'">')+'<div class="widget-tips-wrap"><div class="content tips-content">'+t.tips+"</div></div></div>"),i=i+('<div widget="errortip" error-cls="'+t.errorTipsCls)+'"></div></div>',t.tipText&&(i+='<div widget="toolTip"></div>'),e.empty().append(i)},setValue:function(e){var t=this.dom(),i=this.settings,t=t.find("label.switch-label"),s=this;t=t.eq(0),(e=e)===i.trueValue?(t.addClass("checked"),s.value=e):e===i.falseValue&&(t.removeClass("checked"),s.value=e)},getValue:function(){var e=this.settings;return this.value===e.trueValue?e.trueValue:e.falseValue},disable:function(){this.getContainer().addClass("disabled"),this.dom().find("label.switch-label").addClass("disabled"),this.setStatus("disabled",!0)},enable:function(){this.getContainer().removeClass("disabled"),this.dom().find("label.switch-label").removeClass("disabled"),this.setStatus("disabled",!1)},showTips:function(){this.dom().find(".widget-tips").removeClass("hidden")},hideTips:function(){this.dom().find(".widget-tips").addClass("hidden")},showLoading:function(e){"on"==e?this.dom().removeClass("loading-off").addClass("loading-on"):this.dom().removeClass("loading-on").addClass("loading-off")},hideLoading:function(){this.dom().removeClass("loading-on loading-off")}}),$.su.Widget.register("time",{settings:{format:{attribute:"format",defaultValue:"h:i:s"},hourSystem:{attribute:"hour-system",defaultValue:"24"},subLabelField:{attribute:"sub-label-field",defaultValue:""},shortTips:{attribute:"short-tips",defaultValue:null}},listeners:[{selector:function(){return{parent:this.timers.hour.dom()}},condition:function(e){return!!e.timers.hour},event:"ev_view_change",callback:function(e,t){var i=Array.prototype.slice.call(arguments,0).reverse()[0];"value"===t.type&&(i.timers.hour.setValue(t.value),i.viewChange(i.getValue()))}},{selector:function(){return{parent:this.timers.minute.dom()}},condition:function(e){return!!e.timers.minute},event:"ev_view_change",callback:function(e,t){var i=Array.prototype.slice.call(arguments,0).reverse()[0];"value"===t.type&&(i.timers.minute.setValue(t.value),i.viewChange(i.getValue()))}},{selector:function(){return{parent:this.timers.second.dom()}},condition:function(e){return!!e.timers.second},event:"ev_view_change",callback:function(e,t){var i=Array.prototype.slice.call(arguments,0).reverse()[0];"value"===t.type&&(i.timers.second.setValue(t.value),i.viewChange(i.getValue()))}},{selector:function(){return{parent:this.timers.ampm.dom()}},condition:function(e){return!!e.timers.ampm},event:"ev_view_change",callback:function(e,t){var i=Array.prototype.slice.call(arguments,0).reverse()[0];"value"===t.type&&(i.timers.ampm.setValue(t.value),i.viewChange(i.getValue()))}}],init:function(){this.timers={hour:null,minute:null,second:null,ampm:null}},destroy:function(){var e,t=this.dom();for(e in t.removeClass(),t.empty(),this.timers)this.timers.hasOwnProperty(e)&&this.timers[e]&&this.timers[e].dom().remove()},render:function(){for(var e,t=this.dom(),i=this.settings,s=" hour-"+i.hourSystem,c=""===i.shortTips?"":" short-tips",a=(t.addClass(i.cls+"combobox-container time-container"+s+c),""),s=(!1===i.labelField&&!i.subLabelField||(a=(a+='<div class="widget-fieldlabel-wrap '+i.labelCls+(i.labelField?" has-main-label":"")+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel time-fieldlabel">'+i.labelField+"</label>",""!==i.labelField&&(a+='<span class="widget-separator">'+i.separator+"</span>"),""!==i.subLabelField&&(a+='<span class="widget-sub-fieldlabel time-sub-fieldlabel">'+i.subLabelField+"</span>"),a+="</div></div>"),i.format),n=s.charAt(1)||" ",r=s.split(n),o=(i.sepMark=n,0),a=a+'<div class="widget-wrap-outer time-wrap-outer">'+'<div class="widget-wrap time-wrap">',d=0,l=r.length;d<l;d++){switch(o++,r[d]){case"H":case"h":a+='<div widget="combobox" id="'+this.domId+'_hour" class="label-empty combobox-hour combobox-'+d+'"></div>',this.timers.hour=this.domId+"_hour";break;case"I":case"i":a+='<div widget="combobox" id="'+this.domId+'_minute" class="label-empty combobox-minute combobox-'+d+'"></div>',this.timers.minute=this.domId+"_minute";break;case"S":case"s":a+='<div widget="combobox" id="'+this.domId+'_second" class="label-empty combobox-second combobox-'+d+'"></div>',this.timers.second=this.domId+"_second"}d<l-1&&(a+='<span class="separator separator-'+d+'">'+n+"</span>")}for(e in"12"===i.hourSystem&&(o++,a=a+'<span class="separator separator-'+(d-1)+'"> </span><div widget="combobox" id="'+this.domId+'_ampm" class="label-empty combobox-ampm combobox-'+d+'"></div>',this.timers.ampm=this.domId+"_ampm"),a+="</div>",a=(a=null!=i.shortTips&&i.shortTips!=undefined?(a+='<div class="widget-short-tips textbox-short-tips">')+'<div class="content short-tips-content">'+i.shortTips+"</div></div>":a)+('<div widget="errortip" error-cls="'+i.errorTipsCls+'">')+"</div>",null!=i.tips&&i.tips!=undefined&&(a=a+('<div class="widget-tips textbox-tips '+i.tipsCls)+'"><div class="content tips-content"></div></div>'),a+="</div>",i.tipText&&(a+='<div widget="toolTip"></div>'),t.append($(a)),t.addClass("total-"+o),this.timers)this.timers.hasOwnProperty(e)&&this.timers[e]&&(this.timers[e]=new $.su.widgets.combobox({id:this.timers[e]}),this.timers[e].render(),this.timers[e].loadItems(this.getOptions(e)))},getHour:function(){return this.timers.hour&&this.timers.hour.getValue()||0},getMinute:function(){return this.timers.minute&&this.timers.minute.getValue()||0},getSecond:function(){return this.timers.second&&this.timers.second.getValue()||0},setValue:function(e){this.dom();var t=this.settings,i=t.format,s=t.sepMark;if("string"===$.type(e)&&(e=e.split(s)),"array"===$.type(e)){this._value=e;for(var a=i.split(s),n=0,r=a.length;n<r;n++){var o=a[n],d=parseInt(e[n],10);switch(o){case"H":case"h":"12"===t.hourSystem&&(d<12?this.timers.ampm.setValue(0):this.timers.ampm.setValue(1),0===(d%=12)&&(d=12)),this.timers.hour.setValue(d);break;case"i":this.timers.minute.setValue(d);break;case"s":this.timers.second.setValue(d)}}}},getValue:function(){var e=[],t=this.settings.format,i=this.getHour(),s=this.getMinute(),a=this.getSecond();return"number"===$.type(i)&&"12"===this.settings.hourSystem&&(1===this.timers.ampm.getValue()?12!==i&&(i+=12):12===i&&(i=0)),/[hH]/.test(t)&&e.push(i<10?"0"+i:i),/[iI]/.test(t)&&e.push(s<10?"0"+s:s),/[sS]/.test(t)&&e.push(a<10?"0"+a:a),e.join(this.settings.sepMark)},viewChange:function(e){this.dom().triggerHandler("ev_view_change",[{type:"value",value:e}])},getOptions:function(e){var t=0,i=0,s=[],a=this.settings;if("ampm"===e)return[{name:"AM",value:0,boxlabel:"AM",selected:!0},{name:"PM",value:1,boxlabel:"PM"}];switch(e){case"hour":t="12"===a.hourSystem?1:0,i="12"===a.hourSystem?12:23;break;case"minute":case"second":i=59}for(var n=t;n<=i;n++){var r=n<10&&("24"===a.hourSystem||"hour"!==e)?"0"+n:""+n;s.push({name:r,value:n,boxlabel:r,selected:n===t})}return s},setSubLabel:function(e){e!==undefined&&null!==e&&this.dom().find(".time-sub-fieldlabel").html(e)},setHourSystem:function(e){if("12"!==e&&"24"!==e)return!1;var t=this.settings,i=this.getValue();e!==t.hourSystem&&(t.hourSystem=e,this.destroy(),this.init(),this.render(),this.setValue(i))}}),$.su.Widget.register("datepicker",{settings:{format:{attribute:"format",defaultValue:"yyyy/mm/dd"},startDay:{attribute:"start-day",defaultValue:0},blankFilling:{attribute:"blank-filling",defaultValue:1},labelField:{attribute:"label-field",defaultValue:""}},listeners:[{selector:".datepicker-input-container .display-area",event:"click",callback:function(e,t){var i=t.settings,s=t.dom().find(".text-container");i.pickerShow?(t.showDatepicker(),i.pickerShow=!1,s.addClass("focus")):(t.hideDatepicker(),i.pickerShow=!0,s.removeClass("focus"))}},{selector:".date-calendar tbody a",event:"click",callback:function(e,t){e=e.target||e.srcElement;t.selectDate(e),$(e).closest("td").hasClass("current-month-date")&&(t.hideDatepicker(),t.settings.pickerShow=!0)}},{selector:"div.text-wrap",event:"mouseenter",callback:function(e,t){t.dom().find(".text-container").addClass("hover")}},{selector:"div.text-wrap",event:"mouseleave",callback:function(e,t){t.dom().find(".text-container").removeClass("hover")}},{selector:function(){return{parent:"div",target:""}},event:"click",callback:function(e,t){var i=t.settings,e=e.target||e.srcElement,e=$(e).closest(".date-picker");i.pickerShow||0!==e.length||(t.dom().find(".text-container").removeClass("focus"),t.hideDatepicker(),i.pickerShow=!0)}}],init:function(e){},render:function(){var e=this.dom(),t=this.settings,i=(e.addClass(t.cls+"datepicker-container"),"");null!==t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel combobox-fieldlabel">'+("false"===t.labelField?"":t.labelField)+"</label>",t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div></div>"),i=i+'<div class="widget-wrap-outer datepicker-wrap-outer"><div id="'+this.domId+'_picker" class="date-picker">',e.append(i=(i=(i=(i=(i=(i+='<div class="datepicker-input-container text-container">')+'<div class="widget-wrap text-wrap">'+'<span class="text-wrap-before"></span>')+'<span class="text-wrap-inner">'+'<input type="text" class="display-area" readonly>')+"</span>"+'<span class="text-wrap-after"></span>')+"</div>"+"</div>")+"</div>"+"</div>"),t.picker=$("#"+this.domId+"_picker"),t.pickerShow=!0,e.on("selectstart",function(){return!1}),this.initCalendar()},initCalendar:function(){this.datepickerInfo={},this.datepickerInfo.today=new Date,this.datepickerInfo.date=this.datepickerInfo.today,this.datepickerInfo.lastDate=this.datepickerInfo.date,this.datepickerInfo.selected=this.datepickerInfo.date.getMonth()+1+"/"+this.datepickerInfo.date.getDate()+"/"+this.datepickerInfo.date.getFullYear(),this.renderCalendarHead(),this.syncCalendar(this.datepickerInfo.date),this.setSelectDate(this.datepickerInfo.date),this.dom().find(".datepicker-calendar-container").hide()},renderCalendarHead:function(e){var t=$('<div class="datepicker-calendar-container"></div>'),i=$.su.CHAR.DATEPICKER,s=this.sortWeek().join(",").replace(/\d/g,function(e,t){switch(e){case"0":return i.SUNDAY;case"1":return i.MONDAY;case"2":return i.TUESDAY;case"3":return i.WEDNESDAY;case"4":return i.THURSDAY;case"5":return i.FRIDAY;case"6":return i.SATURDAY}}).split(","),a="<div class='date-calendar-container'>",a=(a+="<table class='date-calendar calendar-body'>")+"<thead class='calendar-days-container'>"+"<tr>";$.each(s,function(e,t){a=(a+="<th>")+"<span>"+t+"</span></th>"}),a+="</tr></thead></table></div>",t.append($(a)).appendTo(this.dom().find(".date-picker"))},syncCalendar:function(l){var d=this,c=parseInt(this.settings.blankFilling),e=(this.settings,this.datepickerInfo),t="<tbody>",i=new Date(l),u=this.getDays(l),s=e.selected.split("/"),h=new Date(s[2],s[0]-1,s[1],e.date.getHours()),p=(new Date(e.today),this.sortWeek()),a=1,s=this.dom().find(".date-calendar");s.find("tbody").remove();for(var n=0;n<6;n++){var r="<tr>";for(0==n&&(r+=function(e){var t="",i=l.getFullYear(),s=l.getMonth()-1,a=l.getDate(),i=new Date(i,s,a),n=d.getDays(i);0==e&&(e=7);if(0==c)for(var r=0;r<e;r++)t='<td class="prev-month-date other-selection" item-value="'+n+'"><a>'+n+"</a></td>"+t,--n;else{var o;o=1==c?"-":"";for(r=0;r<e;r++)t='<td class="other-selection stroke-selection"><span>'+o+"</span></td>"+t}return t}($.inArray(i.getDay(i.setDate(1)),p)));a<=u;){i.setDate(a);var o=$.inArray(i.getDay(),p);if(0==o&&0==n){r+="</tr>";break}if(o<=6&&(r=i.getTime()==h.getTime()?(r+='<td class="date-selected current-month-date datepicker-selected" item-value="'+a+'">')+"<a>"+a+"</a></td>":(r+='<td class="current-month-date" item-value="'+a+'">')+"<a>"+a+"</a></td>",a+=1,6==o)){r+="</tr>";break}}u<a&&(r+=function(e,t){var i=7*t+e+1,s=42-i,t=l.getFullYear(),e=l.getMonth()+1,a=l.getDate(),n=(new Date(t,e,a),1),r="";if(0==c)for(var o=0;o<s;o++)(o+i)%7==0&&o!=s-1&&(r+="</tr><tr>"),r+='<td class="next-month-date other-selection" item-value="'+n+'"><a>'+n+"</a></td>",n+=1;else{var d;d=1==c?"-":"";for(o=0;o<s;o++)(o+i)%7==0&&o!=s-1&&(r+="</tr><tr>"),r+='<td class="other-selection stroke-selection"><span>'+d+"</span></td>"}return r+="</tr>"}(o,n),n=6),t+=r}s.append(t+="</tbody>")},getDays:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},deformatDate:function(e){var t,i,s=this.settings.format,a=parseInt(e.substring(s.indexOf("y"),s.lastIndexOf("y")+1)),n=parseInt(e.substring(s.indexOf("m"),s.lastIndexOf("m")+1)),s=parseInt(e.substring(s.indexOf("d"),s.lastIndexOf("d")+1));return i=-1!=e.indexOf(":")?(i=e.indexOf(":"),t=parseInt(e.substr(i-2,2)),parseInt(e.substr(i+1,2))):(t=this.datepickerInfo.date.getHours(),this.datepickerInfo.date.getMinutes()),new Date(a,n-1,s,t,i)},formatDate:function(e){var t=this.settings.format,e=e?new Date(e):new Date,i=e.getFullYear(),s=1==(e.getMonth()+1+"").length?"0"+(e.getMonth()+1)+"":e.getMonth()+1+"",e=1==(e.getDate()+"").length?"0"+e.getDate()+"":e.getDate()+"";return t.replace("yyyy",i).replace("mm",s).replace("dd",e)},updateCalendar:function(e){var t=e.getFullYear(),i=e.getMonth(),s=(e.getDate(),this.datepickerInfo.selected.split("/"));t==s[2]&&i==s[0]-1?this.setSelectDate(e):(this.updateSelectedInfo(e),this.syncCalendar(e))},setSelectDate:function(e){var t=e.getFullYear(),i=e.getMonth(),s=e.getDate(),t=new Date(t,i,1).getDay(),i=this.sortWeek(),a=$.inArray(t,i),n=Math.floor((s+a)/7),s=(s+a)%7;t==i[0]&&n++,0==s&&(n--,s=7),$("#"+this.domId+" .date-selected").removeClass("date-selected datepicker-selected"),this.dom().find(".date-calendar").find("tbody tr").eq(n).find("td").eq(s-1).addClass("date-selected datepicker-selected"),this.updateSelectedInfo(e)},sortWeek:function(){var e=parseInt(this.settings.startDay),t=[0,1,2,3,4,5,6],e=$.inArray(e,t),i=t.slice(0,e);return t=t.slice(e).concat(i)},showDatepicker:function(){var e=this.datepickerInfo,t=this.dom().find(".date-picker");0<t.find(".datepicker-calendar-container").size()&&(e.lastDate.getTime()!=e.date.getTime()?this.updateCalendar(e.date):($.su.isIe?t.children().not(".datepicker-input-container").show():t.children().not(".datepicker-input-container").slideDown(150),$("#"+this.domId+" .display-area").val(this.formatDate(this.datepickerInfo.date)))),$.su.isIe?t.children().not(".datepicker-input-container").show():t.children().not(".datepicker-input-container").slideDown(150)},selectDate:function(e){var t,e=$(e).closest("td"),i=parseInt(e.attr("item-value")),s=this.datepickerInfo.date;e.hasClass("current-month-date")?(t=new Date(s.getFullYear(),s.getMonth(),i,s.getHours()),this.setSelectDate(t)):(e.hasClass("prev-month-date")||e.hasClass("next-month-date"))&&(t=function(e){var t;e=e.hasClass("prev-month-date")?s.getMonth()-1:s.getMonth()+1;return t=s.getFullYear(),new Date(t,e,i,s.getHours())}(e),this.updateCalendar(t))},updateSelectedInfo:function(e){$("#"+this.domId+" .display-area").val(this.formatDate(e)),e.getTime()!=this.datepickerInfo.date.getTime()&&(this.datepickerInfo.lastDate=this.datepickerInfo.date,this.datepickerInfo.date=e,this.datepickerInfo.today=new Date,this.datepickerInfo.selected=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear())},hideDatepicker:function(){var e=this.dom().find(".date-picker").children().not(".datepicker-input-container");$.su.isIe?e.hide():e.slideUp(150)}}),function(){var t=$.su.Widget.register("simpleDatepicker",{extend:["datepicker"],settings:{},listeners:[{selector:".display-area",event:"click",callback:function(e,t){0==t.dom().find(".calendar-bar-month").size()&&t.renderDateCalendarBar()}},{selector:".date-calendar-container a",event:"click",callback:function(e,t){var i,s,e=$(e.target);e.closest("table").hasClass("calendar-bar-month")?(i=e.closest("th")).hasClass("displayed-month")?(t.dom().find(".date-calendar-container").hide(),0<(s=t.dom().find(".month-calendar-container")).size()?(s.show(),t.updateMonthCalendar()):t.syncMonthCalendar()):(t.changeMonth(i),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.getValue()}])):(t.updateDateCalendarBar(t.datepickerInfo.date),$(e).closest("td").hasClass("stroke-selection")||t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.getValue()}]))}},{selector:".month-calendar-container a",event:"click",callback:function(e,t){e.stopPropagation();var i,e=$(e.target);e.closest("table").hasClass("calendar-bar-year")?(i=e.closest("th")).hasClass("displayed-year")?(t.dom().find(".month-calendar-container").hide(),t.syncYearCalendar()):t.changeYear(i):(i=e.closest("td"),t.selectMonth(i)),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.getValue()}])}},{selector:".year-calendar-container a",event:"click",callback:function(e,t){var i,e=$(e.target);e.closest("table").hasClass("calendar-bar-yearslot")?(i=e.closest("th")).hasClass("displayed-yearslot")?(t.dom().find(".year-calendar-container").hide(),t.syncYearslotCalendar()):t.changeYearslot(i):(i=e.closest("td"),t.selectYear(i)),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.getValue()}])}},{selector:".yearslot-calendar-container a",event:"click",callback:function(e,t){var i,e=$(e.target);e.closest("table").hasClass("calendar-bar-century")?(i=e.closest("th")).hasClass("displayed-century")||t.changeCentury(i):(i=e.closest("td"),t.selectYearslot(i)),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.getValue()}])}}],init:function(e){t.superclass.init.call(this,e)},render:function(){t.superclass.render.call(this)},renderDateCalendarBar:function(){var e=this.dom().find(".date-calendar-container"),t=this.datepickerInfo.date,i=this.getMonths("whole"),s=t.getMonth(),t=t.getFullYear(),a=(a=(a=(a=(a=(a=(a='<table class="calendar-bar-month calendar-head">')+"<tr>"+'<th class="prev-month-icon left-icon datepicker-icon">')+'<a href="javascript:void(0);"><</a>'+"</th>")+('<th class="displayed-month calendar-time-th" colspan="5" item-value="'+s+"-"+t+'">')+('<a href="javascript:void(0);">'+i[s]+" "+t+"</a>"))+"</th>"+'<th class="next-month-icon right-icon datepicker-icon">')+'<a href="javascript:void(0);">></a>'+"</th>")+"</tr>"+"</table>";e.prepend($(a))},changeMonth:function(e){var t=this.datepickerInfo.date,i=t.getFullYear(),s=t.getMonth(),t=t.getDate(),e=(e.hasClass("prev-month-icon")?s-=1:s+=1,new Date(i,s,t));this.updateDateCalendarBar(e),this.updateCalendar(e)},updateDateCalendarBar:function(e){var t=this.getMonths("whole"),i=e.getMonth(),e=e.getFullYear();this.dom().find(".displayed-month").attr("item-value",i+"-"+e).find("a").text(t[i]+" "+e)},getMonths:function(e){var t=$.su.CHAR.DATEPICKER,e="simplified"==e?[t.JAN,t.FEB,t.MAR,t.APR,t.MAY,t.JUN,t.JUL,t.AUG,t.SEP,t.OCT,t.NOV,t.DEC]:[t.JANUARY,t.FEBRUARY,t.MARCH,t.APRIL,t.MAY,t.JUNE,t.JULY,t.AUGUST,t.SEPTEMBER,t.OCTOBER,t.NOVEMBER,t.DECEMBER];return e},syncMonthCalendar:function(){for(var e=this.datepickerInfo.date,t=this.getMonths("simplified"),i=(i=(i=(i=(i=(i=(i=(i=(i='<div class="month-calendar-container">')+"<div>"+'<table class="calendar-bar-year calendar-head">')+"<tr>"+'<th class="prev-year-icon left-icon datepicker-icon">')+'<a href="javascript:void(0);"><</a>'+"</th>")+('<th class="displayed-year calendar-time-th" colspan="2" item-value="'+e.getFullYear()+'">'))+('<a href="javascript:void(0);">'+e.getFullYear()+"</a>")+"</th>")+'<th class="next-year-icon right-icon datepicker-icon">'+'<a href="javascript:void(0);">></a>')+"</th>"+"</tr>")+"</table>"+'<table class="month-calendar calendar-body">',s=0;s<3;s++){i+="<tr>";for(var a=0;a<4;a++)e.getMonth()==4*s+a?i+='<td class="current-month month-selected datepicker-selected" item-value="'+(4*s+a)+'"><a>'+t[4*s+a]+"</a></td>":i+='<td class="current-month" item-value="'+(4*s+a)+'"><a>'+t[4*s+a]+"</a></td>";i+="</tr>"}i+="</table></div></div>",this.dom().find(".datepicker-calendar-container").append($(i))},changeYear:function(e){var t=this.dom().find(".displayed-year"),i=parseInt(t.attr("item-value")),s=this.datepickerInfo.date,i=(e=$(e).hasClass("prev-year-icon")?i-1:i+1,t.attr("item-value",e),t.find("a").text(e),new Date(e,s.getMonth(),s.getDate()));this.updateSelectedInfo(i),this.setSelectMonth(i)},selectMonth:function(e){var t=this.dom(),e=(this.getMonths("simplified"),parseInt(e.attr("item-value"))),i=this.datepickerInfo,s=parseInt(this.dom().find(".displayed-year").attr("item-value")),i=i.date.getDate(),s=new Date(s,e,i);this.setSelectMonth(s),t.find(".month-calendar-container").hide(),t.find(".date-calendar-container").show(),this.updateDateCalendarBar(s),this.updateCalendar(s)},setSelectMonth:function(e){var e=e.getMonth(),t=this.dom(),i=Math.floor(e/4),e=e%4;t.find(".month-selected").removeClass("month-selected datepicker-selected"),t.find(".month-calendar tr").eq(i).find("td").eq(e).addClass("month-selected datepicker-selected")},updateMonthCalendar:function(){var e=this.datepickerInfo.date;this.dom().find(".displayed-year").attr("item-value",e.getFullYear()).find("a").text(e.getFullYear()),this.setSelectMonth(e)},syncYearCalendar:function(e){var t=this.dom(),i=(e||this.datepickerInfo.date).getFullYear()+"",e=i.slice(-1),s=i-e,a=(t.find(".year-calendar-container").remove(),'<div class="year-calendar-container">'),a=(a=(a=(a=(a=(a=(a=(a=(a=(a+="<div>")+'<table class="calendar-bar-yearslot calendar-head">'+"<tr>")+'<th class="prev-yearslot-icon left-icon datepicker-icon">'+'<a href="javascript:void(0);"><</a>')+"</th>"+('<th class="displayed-yearslot calendar-time-th" colspan="2" item-value="'+s+" - "+(s+9)+'">'))+("<span>"+s+" - "+(s+9)+"</span>")+"</th>")+'<th class="next-yearslot-icon right-icon datepicker-icon">'+'<a href="javascript:void(0);">></a>')+"</th>"+"</tr>")+"</table>"+'<table class="year-calendar calendar-body">')+"<tr>"+('<td class="prev-year" item-value="'+--s+'">'))+("<a>"+s+"</a>")+"</td>";s+=1;for(var n=1;n<11;n++)a=i==s?(a+='<td class="current-year year-selected datepicker-selected" item-value="'+s+'">')+"<a>"+s+"</a></td>":(a+='<td class="current-year" item-value="'+s+'">')+"<a>"+s+"</a></td>",s+=1,(n+1)%4==0&&(a+="</tr><tr>");a=(a+='<td class="next-year" item-value="'+s+'">')+"<a>"+s+"</a></td></tr></table></div></div>",s+=1,t.find(".datepicker-calendar-container").append($(a))},changeYearslot:function(e){var t=this.datepickerInfo.date,i=t.getFullYear(),s=t.getMonth(),t=t.getDate(),e=(e.hasClass("prev-yearslot-icon")?i-=10:i+=10,new Date(i,s,t));this.syncYearCalendar(e),this.updateSelectedInfo(e)},selectYear:function(e){var t=this.dom(),i=this.datepickerInfo.date,s=parseInt(e.attr("item-value")),s=new Date(s,i.getMonth(),i.getDate());this.updateSelectedInfo(s),e.hasClass("current-year")?(t.find(".month-calendar-container").show(),t.find(".year-calendar-container").hide(),this.updateMonthCalendar()):this.syncYearCalendar(s)},syncYearslotCalendar:function(){var e=this.dom(),t=this.datepickerInfo.date.getFullYear()+"",i=t.slice(-1),t=t-i,s=t-(t+"").slice(-2)-10,a=t+" - "+(9+t),n=(e.find(".yearslot-calendar-container").remove(),'<div class="yearslot-calendar-container">');n=(n=(n=(n=(n+='<div><table class="calendar-bar-century calendar-head"><tr><th class="prev-century-icon left-icon datepicker-icon"><a href="javascript:void(0);"><</a>')+'</th><th class="displayed-century calendar-time-th" colspan="2" item-value="'+(s+10)+" - "+(s+109)+'">')+"<span>"+(s+10)+" - "+(s+109)+'</span></th><th class="next-century-icon right-icon datepicker-icon"><a href="javascript:void(0);">></a></th></tr></table><table class="yearslot-calendar calendar-body">')+'<tr><td class="prev-yearslot" item-value="'+s+" - "+(s+9)+'">')+"<a>"+s+" - "+(s+9)+"</a></td>",s+=10;for(var r=1;r<11;r++){var o=s+" - "+(s+9),n=o==a?(n+='<td class="current-yearslot yearslot-selected datepicker-selected" item-value="'+o+'">')+"<a>"+o+"</a></td>":(n+='<td class="current-yearslot" item-value="'+o+'">')+"<a>"+o+"</a></td>";(r+1)%4==0&&(n+="</tr><tr>"),s+=10}n=(n+='<td class="next-yearslot" item-value="'+s+" - "+(s+9)+'">')+"<a>"+s+" - "+(s+9)+"</a></td></tr></table></div></div>",e.find(".datepicker-calendar-container").append($(n))},selectYearslot:function(e){var t=this.dom(),i=this.datepickerInfo.date,s=+e.attr("item-value").split(" - ")[0]+ +(i.getFullYear()+"").slice(-1),s=new Date(s,i.getMonth(),i.getDate());this.updateSelectedInfo(s),e.hasClass("current-yearslot")?(t.find(".year-calendar-container").show(),t.find(".yearslot-calendar-container").hide(),this.syncYearCalendar()):this.syncYearslotCalendar()},changeCentury:function(e){var t=this.datepickerInfo.date,i=this.dom().find(".displayed-century").attr("item-value").split(" - ")[0],e=(e.hasClass("prev-century-icon")?i-=100:i=+i+100,i=+i+ +(t.getFullYear()+"").slice(-1),new Date(i,t.getMonth(),t.getDate()));this.updateSelectedInfo(e),this.syncYearslotCalendar()},getText:function(){return this.dom().find(".display-area").val()},getValue:function(){return this.formatDate(this.datepickerInfo.date)},setValue:function(e){if(e){if("date"===$.type(e))var t=e;else{if("string"!==$.type(e))return;t=this.deformatDate(e)}this.updateCalendar(t),this.updateDateCalendarBar(t),this.setSelectDate(t)}}})}(),function(_){function t(e){var t=e.toString();return(1===t.length?"0"+e:t)+":00"}function i(e){var t=e%12;return(0==t?12:t)+(1<=e/12&&e/12<2?" PM":" AM")}function C(e,t,i,s){s=s(t)+" - "+s(i),t="<div class='time-range' data-week='"+e+"' data-start='"+t+"' data-end='"+i+"'>";return t+("<span class='week'>"+c[e]+"</span>")+("<span class='hour'>"+s+"</span>")+"<span class='del-icon'></span>"+"</div>"}function k(e,t,i,s,a){s=s(t)+" - "+s(i);e.find(".hour").text(s),e.attr("data-start",t).attr("data-end",i),a&&(e.find(".week").text(c[a]),e.attr("data-week",a))}function p(e){for(var t,i,s,a,n={},r=e.length;r--;)n[(s=e[r].data()).week]||(n[s.week]=[]),n[s.week].push(s.timeStart);for(a in n)t=Math.min.apply(null,n[a]),i=Math.max.apply(null,n[a]),n[a]=[t,i+1];return n}var c={"mon":_.su.CHAR.DATEPICKER.MONDAY,"tue":_.su.CHAR.DATEPICKER.TUESDAY,"wed":_.su.CHAR.DATEPICKER.WEDNESDAY,"thu":_.su.CHAR.DATEPICKER.THURSDAY,"fri":_.su.CHAR.DATEPICKER.FRIDAY,"sat":_.su.CHAR.DATEPICKER.SATURDAY,"sun":_.su.CHAR.DATEPICKER.SUNDAY},T=["sun","mon","tue","wed","thu","fri","sat"],y=JSON.stringify({"sun":[],"mon":[],"tue":[],"wed":[],"thu":[],"fri":[],"sat":[]});_.su.Widget.register("timepicker",{settings:{viewOnly:{attribute:"view-only",defaultValue:!1},showLegend:{attribute:"show-legend",defaultValue:!0},selLegendText:{attribute:"selected-legend",defaultValue:""},deselLegendText:{attribute:"deselected-legend",defaultValue:""},is24:{attribute:"is-24",defaultValue:!0}},listeners:[{selector:"div.btn-sel",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation(),t.settings.viewOnly||t.getContainer().hasClass("disabled")||(e=t.dom().find(".btn-sel").hasClass("sel")?JSON.stringify({"mon":[[0,24]],"tue":[[0,24]],"wed":[[0,24]],"thu":[[0,24]],"fri":[[0,24]],"sat":[[0,24]],"sun":[[0,24]]}):y,t.dom().triggerHandler("ev_view_change",[{"type":"value","value":e}]))}},{selector:"div.btn-reset",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation(),t.settings.viewOnly||t.getContainer().hasClass("disabled")||(e=(e=t.snapshot)||JSON.stringify({"mon":[],"tue":[],"wed":[],"thu":[],"fri":[],"sat":[],"sun":[]}),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":e}]))}},{selector:".time-range .del-icon",event:"click",callback:function(e,t){if(e.preventDefault(),e.stopPropagation(),!t.settings.viewOnly&&!t.getContainer().hasClass("disabled")){for(var i,e=_(this).parent(),s=e.attr("data-week"),a=parseInt(e.attr("data-start")),n=parseInt(e.attr("data-end")),e=JSON.parse(t.getValue()),r=e[s],o=r.length;o--;)if((i=r[o])[0]==a&&i[1]==n){r.splice(o,1);break}t.dom().triggerHandler("ev_view_change",[{"type":"value","value":JSON.stringify(e)}])}}},{selector:".timepicker-picker",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault()}},{selector:"div.timepicker-container-wrap",event:"mousedown touchstart",callback:function(e,n){var t,i,s;if("mousedown"==e.type&&e.preventDefault(),e.stopPropagation(),!n.settings.viewOnly&&!n.getContainer().hasClass("disabled"))return t=n.dom(),i="mousedown"==e.type?e.pageX||e.screenX:e.originalEvent.changedTouches[0].pageX,posY="mousedown"==e.type?e.pageY||e.screenY:e.originalEvent.changedTouches[0].pageY,e=_(this),i-=e.offset().left,posY-=e.offset().top,s=e.find("div.timepicker-select-wrap"),0==s.length&&(s=_('<div class="timepicker-select-wrap"></div>'),e.append(s)),s.attr("fl",i),s.attr("ft",posY),s.css({"left":i,"top":posY,"display":"block"}),t.attr("dragFlag",!0),t.on("mousemove touchmove",a).on("mouseup touchend",function h(e){if(e.preventDefault(),e.stopPropagation(),!n.settings.viewOnly&&!n.getContainer().hasClass("disabled")){var t=(e=n.dom()).find("div.timepicker-select-wrap");if(0<t.length){var i,r=t.offset().left,o=t.offset().top,d=r+t.width(),l=o+t.height(),s=_(this).find("div.timepicker-picker"),c=!1,u=[];if(0==r&&0==o&&0==d&&0==l)return;s.each(function(e,t){var i=(t=_(t)).offset().left,s=t.offset().top,a=i+t.width(),n=s+t.height();(i<=r&&r<=a||r<=i&&a<=d||i<=d&&d<=a)&&(s<=o&&o<=n||o<=s&&n<=l||s<=l&&l<=n)&&(u.push(t),t.hasClass("selected")||(c=!0))}),0<u.length&&(s="",s=c?(i=p(u),n._getAfterValue(i,"add")):(i=p(u),n._getAfterValue(i,"remove")),e.triggerHandler("ev_view_change",[{"type":"value","value":s}])),t.css({"display":"none","width":0,"height":0}),e.removeAttr("dragFlag")}e.off("mouseup touchend",h).off("mousemove touchmove",a)}}),!1;function a(e){var t,i,s,a;"mousemove"==e.type&&e.preventDefault(),e.stopPropagation(),n.settings.viewOnly||n.getContainer().hasClass("disabled")||(t="mousemove"==e.type?e.pageX||e.screenX:e.originalEvent.changedTouches[0].pageX,e="mousemove"==e.type?e.pageY||e.screenY:e.originalEvent.changedTouches[0].pageY,t-=(i=_(this)).offset().left,e-=i.offset().top,(i=n.dom()).attr("dragFlag")&&(i=i.find("div.timepicker-select-wrap"),a=parseInt(i.attr("fl"),10),s=parseInt(i.attr("ft"),10),0<(a=t-a)?i.css({"width":a}):(a=Math.abs(a),i.css({"width":a,"left":t})),0<(a=e-s)?i.css({"height":a}):(a=Math.abs(a),i.css({"height":a,"top":e}))))}}}],init:function(){this.snapshot=null,this._value="",this.transHour=this.settings.is24?t:i},render:function(){var e=this.dom(),t=this.settings,i=t.viewOnly?" view-only":"",s=(e.addClass(t.cls+"timepicker-container"+i),"");s+='<div class=\'timepicker-layout\'><div class="canvas"><div class="timepicker-container-wrap"><table class="timepicker"><thead><tr><th class="fst"></th>';for(var a,n=0,r=T.length;n<r;n++)s+='<th class="week-picker" data-week="'+(a=T[n])+'">'+c[a]+"</th>";s+="</tr></thead><tbody>";for(var o=0;o<24;o++){for(var s=s+"<tr>"+'<td class="fst"><div class="row-picker"></div></td>',d=0;d<7;d++)s+='<td><div data-time-start="'+o+'" data-time-end="'+(o+1)+'" data-week="'+T[d]+'" class="timepicker-picker"></div></td>';s+="</tr>"}s+='</tbody></table></div><div class="x-axis"><div class="x-axis-wrap">';for(o=0;o<=24;o++)s+="<span>"+this.transHour(o)+"</span>";s=(s+='</div></div><div class="legend-container">')+'<span class="icon selected"></span><span class="text">'+t.selLegendText+"</span>",null!==t.deselLegendText&&("s"==_.su.widgetSize&&(s+="<br>"),s=s+'<span class="icon nonselect"></span><span class="text">'+t.deselLegendText+"</span>"),s+="</div></div>",t.viewOnly||(s=(s=(s=(s+="<div class='timepicker-right'>")+'<div class=\'right-btn-container\'><div widget="button" id="'+this.domId+'-sel-all" class="btn-sel sel" label-field="{false}" text="'+_.su.CHAR.OPERATION.SELECT_ALL+'"></div>')+'<div widget="button" id="'+this.domId+'-reset" class="btn-reset btn-msg-no" label-field="{false}" text="'+_.su.CHAR.OPERATION.REVERT+'"></div>')+"</div><div class='timepicker-labels su-scroll empty'><div class='empty-note'>"+_.su.CHAR.OPERATION.SELECT_TIME_SLOT+"</div><div class='range-btn-container'></div></div></div></div>"),e.append(s+="</div>");for(var l=e.find(".right-btn-container").find("div[widget=button]"),o=0,r=l.length;o<r;o++)new _.su.widgets.button({id:_(l[o])}).render()},enable:function(){var e=this.dom();e.removeClass("disabled"),e.find("a.timepicker-switch, .time-range").removeClass("disabled")},disable:function(){var e=this.dom();e.addClass("disabled"),e.find("a.timepicker-switch, .time-range").addClass("disabled")},setValue:function(e){this._value=e=e||y;for(var t,i=JSON.parse(e),s=!0,a=this.dom().find(".btn-sel"),n=a.data("viewObj"),r=T.length;r--;)if(!((t=i[T[r]])&&1===t.length&&0===t[0][0]&&24===t[0][1])){s=!1;break}a.hasClass("sel")&&s?(n.setText(_.su.CHAR.OPERATION.DESELECT_ALL),a.removeClass("sel").addClass("desel")):a.hasClass("desel")&&!s&&(n.setText(_.su.CHAR.OPERATION.SELECT_ALL),a.removeClass("desel").addClass("sel")),this.setStyle(e||y)},setStyle:function(e){var t=this.dom(),c=this.transHour,u=t.find("div.timepicker-picker").removeClass("selected"),i="";e=JSON.parse(e);for(var s=0,h=T.length;s<h;s++){var a,n=e[a=T[s]];if(n)for(var p=u.filter("[data-week="+a+"]"),r=0,f=n.length;r<f;r++){for(var o=n[r],d=o[0],g=o[1],l=d;l<g;l++)p.filter('[data-time-start="'+l+'"]').addClass("selected");i+=C(a,d,g,c)}}t=t.find(".range-btn-container");t.empty().html(i),0<i.length?t.parent().removeClass("empty"):t.parent().addClass("empty")},getValue:function(){return this._value},setSnapshot:function(e){this.snapshot=e},setIs24:function(e){e=Boolean(e),this.settings.is24=e,this.transHour=e?t:i,(context=this).dom().find(".x-axis-wrap").children().each(function(e,t){_(t).text(context.transHour(e))})},_getAfterValue:function(c,u){var e,h=JSON.parse(this._value||y);if("add"===u)for(var t in c){e=c[t],_.isArray(h[t])||(h[t]=[]);for(var i,s,a=h[t],n=[i=e[0],s=e[1]],p=[],r=a.length;r--;)o=(g=a[r])[0],(d=g[1])<i||s<o||(p.push(r),o<n[0]&&(n[0]=o),d>n[1]&&(n[1]=d));if(0===p.length){for(var r=a.length,f=-1;r--;)if(a[r][1]<i){f=r;break}a.splice(f+1,0,n)}else a.splice(p[p.length-1],p.length,n)}else for(var t in c){e=c[t],a=h[t],i=e[0],s=e[1];for(var g,o,d,v=a.length,l=-1;v--;)if(o=(g=a[v])[0],d=g[1],o<=i&&s<=d){l=v;break}0<=l&&(o==i&&d==s?a.splice(l,1):o==i?a[l][0]=s:d==s?a[l][1]=i:a.splice(l,1,[o,i],[s,d]))}for(var m=0,b=T.length,w={};m<b;m++)w[t=T[m]]=h[t]||[];return JSON.stringify(w)},_table2label:function(c,e){var t=this.dom();if("add"===e)for(var i in c){for(var u,s=[d=(u=c[i])[0],l=u[1]],h=[],p=(btns=t.find(".time-range[data-week='"+i+"']")).length;p--;)a=_(btns[p]),n=parseInt(a.attr("data-start")),(r=parseInt(a.attr("data-end")))<d||l<n||(h.push(a),n<s[0]&&(s[0]=n),r>s[1]&&(s[1]=r));if(0===h.length){for(var a,f=null,g=C(i,d,l,this.transHour),p=btns.length;p--;)if((a=_(btns[p])).attr("data-end")<d){f=a;break}var v=T.indexOf(i);if(null===f&&1<v){for(var m=T.slice(0,v),b=m.length;b--;)m[b]=".time-range[data-week='"+m[b]+"']";v=t.find(m.join(",")),f=0<v.length?v.last():null}null!==f?_(g).insertAfter(f):t.find(".range-btn-container").prepend(g)}else{k(h[0],s[0],s[1],this.transHour);for(var w=h.length;1<w--;)h[w].remove()}}else if("remove"===e)for(var i in c){for(var y,n,r,o,d=(u=c[i])[0],l=u[1],x=(btns=t.find(".time-range[data-week='"+i+"']")).length;x--;)if(y=_(btns[x]),n=parseInt(y.attr("data-start")),r=parseInt(y.attr("data-end")),n<=d&&l<=r){o=y;break}o&&(n==d&&r==l?o.remove():n==d?k(o,l,r,this.transHour):(k(o,n,d,this.transHour),r!=l&&_(C(i,l,r,this.transHour)).insertAfter(o)))}e=t.find(".range-btn-container");0<e.find(" .time-range").length?e.parent().removeClass("empty"):e.parent().addClass("empty")}})}(jQuery),$.su.Widget.register("fieldset",{settings:{legend:{attribute:"legend",defaultValue:""},disableOnHide:{attribute:"disable-on-hide",defaultValue:!0},enableOnShow:{attribute:"enable-on-show",defaultValue:!0},showValue:{attribute:"show-value",defaultValue:null},enableValue:{attribute:"enable-value",defaultValue:null},parentEnabled:{defaultValue:!0},selfEnabled:{defaultValue:!0},autoExpand:{attribute:"auto-expand",defaultValue:!0}},listeners:[{selector:"div.legend",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();e=t.getContainer();e.hasClass("expand")?e.removeClass("expand").addClass("collapse"):e.hasClass("collapse")?e.removeClass("collapse").addClass("expand"):e.addClass("collapse")}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=(e.addClass(t.cls+"fieldset-container"),t.autoExpand?e.addClass("expand"):e.addClass("collapse"),""),t=(i=(i=(i+='<div class="legend">')+'<div class="fieldset-img"></div>'+('<div class="fieldset-text">'+t.legend+"</div>"))+"</div>"+'<div class="fieldset-content"></div>',e.children("div")),n=(e.append(i),e.find("div.fieldset-content").eq(0).append(t),[]);!function r(e){for(var t,i=$(e).children("div"),s=0,a=i.length;s<a;s++)$(i[s]).attr("widget")?(t={id:$(i[s]).attr("id"),type:$(i[s]).attr("widget")},n.push(t)):r(i[s])}(e.find("div.fieldset-content").get(0)),this.fields=n},hide:function(e){var t=this.dom(),i=this.settings;"true"!==i.disableOnHide&&!0!==i.disableOnHide||this.disable(),t.stop(!0).hide(),this.setStatus("shown",!1),e&&e.call(t)},show:function(e){var t=this.dom(),i=this.settings;this.setStatus("shown",!0),$.su.isIe?(t.show(),"true"!==i.enableOnShow&&!0!==i.enableOnShow||this.enable(),e&&e()):(t.fadeIn(200,e),"true"!==i.enableOnShow&&!0!==i.enableOnShow||this.enable())},setValue:function(e){var t=this.settings;t.data=e,null!==t.showValue&&(e==t.showValue?this.show():this.hide()),null!==t.enableValue&&(e==t.enableValue?this.enable():this.disable())},getValue:function(){return this.settings.data},disable:function(e,t){var i=this.getContainer(),s=this.fields;!0===e||e===undefined?this.settings.selfEnabled=!1:this.settings.parentEnabled=!1,i.addClass("disabled");for(var a=0,n=s.length;a<n;a++){var r=s[a];if(r){var o=$("#"+r.id);r.type;if(0<o.length)try{o.data("viewObj").disable(!1)}catch(d){}}}t&&t.call(this)},enable:function(e,t){var i=this.getContainer(),s=this.fields;if(!1===e?this.settings.parentEnabled=!0:this.settings.selfEnabled=!0,!1!==this.settings.parentEnabled&&(!1!==this.settings.selfEnabled||!1!==e)){i.removeClass("disabled");for(var a=0,n=s.length;a<n;a++){var r=s[a];if(r){var o=$("#"+r.id);r.type;if(0<o.length)try{o.data("viewObj").enable(!1)}catch(d){}}}this.setStatus("disabled",!1),t&&t.call(this)}},expand:function(e){var t=this.getContainer();e?t.removeClass("collapse").addClass("expand"):t.removeClass("expand").addClass("collapse")},remove:function(){this.dom().remove()}}),$.su.Widget.register("toolTip",{settings:{tipPrefix:{attribute:"tip-prefix",defaultValue:""},tipTitle:{attribute:"tip-title",defaultValue:""},tipText:{attribute:"tip-text",defaultValue:""},tipPosition:{attribute:"tip-position",defaultValue:""},iconCls:{attribute:"icon-cls",defaultValue:""},sizeMapping:{attribute:"size-mapping",defaultValue:{}},globalCls:{attribute:"global-cls",defaultValue:""}},listeners:[{selector:"span.tooltip-icon, div.tip-text-container, span.tooltip-title, span.tooltip-prefix",event:"click",callback:function(e,t){e.stopPropagation(),$("#global-tips-text").hasClass("show")?t.hideTips():t.showTips()}}],init:function(e){$.extend(this.settings,e)},render:function(){var e=this.dom(),t=this.settings,i=(e.addClass(t.cls+"tooltip-container"),""),t=(i=(i=i+'<div class="widget-wrap-outer tooltip-wrap-outer">'+'<div class="widget-wrap tooltip-wrap">')+'<div class="tooltip-icon-container">'+'<span class="tooltip-icon-mask"></span>',t.tipPrefix&&(i+='<span class="tooltip-prefix">'+t.tipPrefix+"</span>"),i=(i+='<span class="tooltip-icon '+t.iconCls+'"></span>')+('<span class="tooltip-title">'+t.tipTitle+"</span>"),e.append(i=(i=(i=(i=(i=(i+="</div>")+'<div class="tip-text-container">'+'<div class="tip-text-delta-container">')+'<span class="icon-delta"></span>'+"</div>")+'<div class="tip-text-box">'+'<p class="tip-text"></p>')+"</div>"+"</div>")+"</div>"+"</div>"),e.find("div.tip-text-container")),i=this.settings.tipText||e.find(".tip-text-content").get(0);t.find("p.tip-text").html(i)},showTips:function(){var t=this,e=$("#global-tips-text");e.attr("data-shown",this.domId),this.settings.globalCls&&e.addClass(this.settings.globalCls),$("div:not(.tooltip-container,.tooltip-container div, .global-tips-text, .global-tips-text div)").off(".toolTip").on("click.toolTip scroll.toolTip",function(e){t.hideTips(),$("div").off(".toolTip")}),e.empty().append(this.dom().find("div.tip-text-container").clone()),($.su.isIe?e.show():e.fadeIn(150)).addClass("show"),this.adjustLayout($.su.widgetSize)},hideTips:function(){var e=this,t=$("#global-tips-text");$.su.isIe?(e.settings.globalCls&&t.removeClass(e.settings.globalCls),t.hide().removeClass("show").attr("data-shown","_hidden_")):t.fadeOut(150,function(){e.settings.globalCls&&t.removeClass(e.settings.globalCls),t.removeClass("show").attr("data-shown","_hidden_")})},adjustLayout:function(e){var t=$("#global-tips-text");if(t.hasClass("show")){e=this.settings.sizeMapping[e]||e;var i,s,a,n,c=this.settings.tipPosition||{s:"bottom",m:"top",l:"right",xl:"right"}[e],u=(t.css({width:"auto",left:-9999,top:-9999}),t.height()),h=t.width(),r=(t.removeClass("s m l xl").addClass(e),this.dom()),o=t.find("div.tip-text-container"),p=(o.removeClass("top bottom right").addClass(c),o.height()),f=o.width(),d=r.find(".tooltip-icon-container"),l=d.offset(),g=d.height(),v=d.width(),d=t.find(".tip-text-delta-container"),m=d.height(),b=d.width(),r=$(r).closest(".panel-container"),w=r.offset();switch(c){case"right":i=l.top-(u-g)/2,s=l.left+v,a=(p-m)/2,n=-b;break;case"top":i=l.top-u,s=l.left-(h-v)/2,a=p,n=(f-b)/2;break;case"bottom":i=l.top+g,s=w.left,a=1-m,n=l.left-w.left+(v-b)/2}d.css({top:a,left:n}),t.css({top:i,left:s}),"top"===c&&(t.css({top:l.top-t.height()}),d.css({top:o.height()})),"s"===e&&t.css({width:r.outerWidth()||$("body").width()-50})}}}),$.su.Widget.register("paragraph",{settings:{text:{attribute:"text",defaultValue:""}},init:function(){},render:function(){var e=this.dom(),t=this.settings,i=t.labelField?"":"label-empty",i=(e.addClass(t.cls+" "+i+" paragraph-container"),"");t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+(0==/\S/.test(t.labelField)?" empty":"")+'">')+'<label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div>"),i=i+'<div class="widget-wrap-outer paragraph-wrap-outer">'+t.text,e.html(i+="</div>")},setText:function(e){var t=this.settings,i=this.getContainer().find("div.paragraph-wrap-outer");e&&(t.text=e,i.html(e))},getText:function(){return this.getContainer().find("div.paragraph-wrap-outer").text()},setStatus:function(e,t){var i=this.getContainer();i.removeClass("error link correct"),i.addClass(e),this.setText(t)},setHtml:function(e){this.dom().find("div.paragraph-wrap-outer").html(e)},hide:function(){this.dom().css("display","none")},show:function(){this.dom().css("display","block")},textAnimate:function(e){var t=this;!1!==e?(clearInterval(this.underTextTimer),this.underTextTimer=setInterval(function(){var e;t.dom().is(":visible")?(e=t.getText(),/\.\.\.$/.test(e)?e=e.replace(/\.\.\.$/,""):e+=".",t.setText(e)):clearInterval(t.underTextTimer)},500)):clearInterval(this.underTextTimer)}}),$.su.Widget.register("errortip",{settings:{errorCls:{attribute:"error-cls",defaultValue:""}},listeners:[{selector:"span.widget-error-tips-delta",event:"mouseenter",callback:function(e,t){t.dom().find("div.widget-error-tips-wrap").addClass("hover"),t.animate()}},{selector:"span.widget-error-tips-delta",event:"mouseleave",callback:function(e,t){t.dom().find("div.widget-error-tips-wrap").removeClass("hover")}}],init:function(e){var t=this.dom();switch(e.type){case"errortip":case"fieldset":case"form":case"msg":return!1;case"textbox":case"password":t.addClass("textbox-error-tips");break;case"button":case"checkbox":case"combobox":case"displaylabel":case"radio":t.addClass(e.type+"-error-tips")}},render:function(){var e=this.dom(),t=this.settings;e.append('<span class="widget-error-tips-delta"></span><div class="widget-error-tips-wrap"><span class="widget-error-tips-delta"></span><div class="content error-tips-content"></div></div>'),e.addClass(t.errorCls+" widget-error-tips")},show:function(e){var t=this.dom();t.find("div.widget-error-tips-wrap"),t.find("div.error-tips-content");""==e||this.animate(e)},showHtml:function(e){var t=this.dom();t.find("div.widget-error-tips-wrap"),t.find("div.error-tips-content");""==e||this.animate(e,!0)},animate:function(e,t){var i=this.dom(),s=(i.find("div.widget-error-tips-wrap"),i.find("div.error-tips-content"));"string"===$.type(e)&&(t?s.html(e):s.text(e)),i.addClass("show"),$.su.isIe?i.show():i.fadeIn(150)},hide:function(){var e=this.dom();e.find("div.widget-error-tips-wrap"),e.find("div.error-tips-content");e.removeClass("show").stop(!0).hide()}}),function(s){s.su.Widget.register("status",{settings:{loadingText:{attribute:"loading-text",defaultValue:""},successText:{attribute:"success-text",defaultValue:""},failedText:{attribute:"fail-text",defaultValue:""},showText:{attribute:"show-text",defaultValue:!0}},render:function(){var e=this.settings,t=this.dom(),i=(t.addClass("status-container widget-container"),"");null!==e.labelField&&"false"!==e.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap '+e.labelCls+'">')+'<label class="widget-fieldlabel status-fieldlabel">'+e.labelField+"</label>",e.labelField&&(i+='<span class="widget-separator">'+e.separator+"</span>"),i+="</div>"),t.append(s(i=(i=(i+='<div class="widget-wrap status-wrap">')+'<span class="icon"></span>'+'<span class="text"></span>')+"</div>"+"</div>")).hide(),e.showText||container.find("span.text").css("display","none"),this.setNormal()},reset:function(){var e=this.dom();e.closest("div.status-container").removeClass("loading failed success normal"),e.find("div.status-wrap span.text").empty()},setNormal:function(e){var t=this.dom();this.reset(),t.addClass("normal"),this.setText(e)},setSuccess:function(e){var t=this.dom();this.reset(),t.addClass("success"),this.setText(e)},setFailed:function(e){var t=this.dom();this.reset(),t.addClass("failed"),this.setText(e)},setLoading:function(e){var t=this.dom();this.reset(),t.addClass("loading"),this.setText(e)},setText:function(e){this.dom().find("div.status-wrap span.text").empty().html(e)}})}(jQuery),$.su.Widget.register("tip",{settings:{},listeners:[{selector:function(){return{parent:"body",target:"[data-tip]"}},event:"mouseenter",callback:function(e,c){null!==c.timer&&(clearTimeout(c.timer),c.timer=null);var u=this;function t(){var e=$.su.escapeHtml($(u).attr("data-tip")),t=$(u).data("tleft"),i=$(u).data("ttop"),s=$(u).data("pointer"),a=$(u).attr("tip-width"),n=$(u).attr("tip-max-width"),r=$(u).attr("tip-wrap"),o="html"===$(u).attr("tip-html"),d="other"===$(u).attr("tip-target"),l="";$(u).attr("tip-class")&&(l=$(u).attr("tip-class").split(" ")),e&&c.setTip($(u),e,{left:t,top:i,pointer:s,width:a,wrap:r,tipClass:l,maxWidth:n,html:o,target:d})}var i=$(this).attr("time-delay");i===undefined?t():c.timer=setTimeout(t,parseInt(i)),$(this).one("mouseleave click",function(){c.removeTip(),clearTimeout(c.timer),c.timer=null}),"close"===$(this).attr("click-operation")&&$(this).off("click").on("click",function(e){c.removeTip(),clearTimeout(c.timer),c.timer=null})}}],init:function(){this.timer=null},render:function(){this.dom().addClass("title-tip"),this.dom().append('<span class="title-tip-text"></span><span class="tip-pointer"></span>')},setTip:function(e,t,i){i.html||i.target,s=i.target?$("#"+t):this.dom();var s,a=e.offset(),c=e.width(),u=e.height(),n="bottom",r=0;if(i.target||s.find(".title-tip-text").html(t),s.css({position:"absolute","display":"inline-block","visibility":"hidden","width":i.width||"","white-space":i.wrap||"normal","max-width":i.maxWidth||"auto"}),s.removeClass().addClass("title-tip"),"array"===$.type(i.tipClass))for(var h=0;h<i.tipClass.length;h++)s.addClass(i.tipClass[h]);else"string"===$.type(i.tipClass)&&s.addClass(i.tipClass);i&&i.pointer&&(n=i.pointer);var t=s.outerWidth(),o=s.outerHeight(),d=t/2,l=$("body").width()-a.left-c/2,p=a.left+c/2-t/2,d=("nowrap"===i.wrap?r=l-d:l<d?i.width?(s.outerWidth(i.width),r=l-d):s.outerWidth(t=2*l-2):p<=0?r=-p:i.width||s.css("width",""),(t-c)/2),l=(o-u)/2;"bottom"===n&&(i.top===undefined?a.top+e.height():i.top)+10+o>$(window).height()&&(n="top"),s.addClass(n),"bottom"===n?s.css({"visibility":"visible","left":(i.left===undefined?a.left-d:i.left-t/2)+r+"px","top":(i.top===undefined?a.top+e.height():i.top)+10+"px"}):"top"===n?s.css({"visibility":"visible","left":(i.left===undefined?a.left-d:i.left-t/2)+r+"px","top":(i.top===undefined?a:i).top-o-10+"px"}):"left"===n?s.css({"visibility":"visible","left":(i.left===undefined?a:i).left-t-10+"px","top":(i.top===undefined?a.top-l:i.top-o/2)+"px"}):"right"===n&&s.css({"visibility":"visible","left":(i.left===undefined?a.left+d:i.left)+"px","top":(i.top===undefined?a.top-l:i.top-o/2)+"px"}),"nowrap"===i.wrap||r?(p=s.offset(),u=a.left-p.left+c/2,s.find(".tip-pointer").css("left",u)):"bottom"===n||"top"===n?s.find(".tip-pointer").css({left:"50%",right:""}):"left"===n?s.find(".tip-pointer").css({right:"-5px",left:""}):"right"===n&&s.find(".tip-pointer").css({right:"",left:"-5px"})},setText:function(e,t){e="string"===$.type(e)?$("#"+e):$(e);e.attr("data-tip",t)},removeTip:function(){this.dom().css("display","none")}}),$.su.Widget.register("grid",{settings:{operation:{attribute:"operation",defaultValue:null},plugins:{attribute:"plugins",defaultValue:""},minLines:{attribute:"min-lines",defaultValue:0},multiSelect:{attribute:"multi-select",defaultValue:!1},selectAll:{attribute:"select-all",defaultValue:!1},selectType:{attribute:"select-type",defaultValue:"row"},xScroll:{attribute:"x-scroll",defaultValue:!1},maxLines:{attribute:"max-lines",defaultValue:!1},showPrompt:{attribute:"show-prompt",defaultValue:!0},configs:{attribute:"configs",defaultValue:null},delAllText:{attribute:"del-all-text",defaultValue:$.su.CHAR.COMMON.DELETE_CONFIRM_CONTENT},maxRulesText:{attribute:"max-rules-text",defaultValue:$.su.CHAR.GRID.MAX_RULES_TIPS},autoMinHeight:{attribute:"auto-min-height",defaultValue:!1}},listeners:[{selector:"td.grid-content-td-check-column label.checkbox-label",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var i,s=t.dom(),a=(e=$(this)).closest("tr.grid-content-tr"),n=t.getKeyById(a.attr("id")),r=e.find("input[type=checkbox]");if(!a.hasClass("disabled")){!1===t.settings.multiSelect?(d=s.find("tr.grid-content-tr").find("input[type=checkbox]"),s.find("tr.grid-content-tr").each(function(){var e=t.getKeyById($(this).attr("id"));$(this).hasClass("selected")&&s.triggerHandler("ev_grid_row_unselected",[e])}),d.each(function(){$(this).prop("checked",!1),$(this).closest("label.checkbox-label").removeClass("checked"),$(this).closest("tr.grid-content-tr").removeClass("selected")}),r.prop("checked",!0),e.addClass("checked"),a.addClass("selected"),t.dom().triggerHandler("ev_grid_row_selected",[n])):!0===t.settings.multiSelect&&(a.toggleClass("selected"),a.hasClass("selected")?(r.prop("checked",!0),e.addClass("checked"),t.dom().triggerHandler("ev_grid_row_selected",[n])):(r.prop("checked",!1),e.removeClass("checked"),t.dom().triggerHandler("ev_grid_row_unselected",[n]))),s.triggerHandler("ev_grid_row_clicked",[n]),t.checkSelected();var o=s.find("tr.grid-content-tr"),d=(e=s.find("tr.grid-header-tr label.checkbox-label")).closest("div.checkbox-group-container");if(0<o.length){for(i=0;i<o.length&&($(o[i]).hasClass("disabled")||$(o[i]).hasClass("selected"));++i);for(i!=o.length&&(d.removeClass("selected"),e.removeClass("checked")),i=0;i<o.length&&($(o[i]).hasClass("disabled")||$(o[i]).hasClass("selected"));++i);i==o.length&&(d.addClass("selected"),e.addClass("checked"))}}}},{selector:"th.grid-header div.checkcolumn label.checkbox-label",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var e=t.dom(),i=$(this),s=$(this).closest("div.checkbox-group-container"),e=e.find("tr.grid-content-tr:not(.disabled)");if(e.hasClass("empty"))return!1;s.hasClass("selected")?(s.removeClass("selected"),e.removeClass("selected"),e.find("label.checkbox-label").removeClass("checked"),e.find("input[type=checkbox]").prop("checked",!1),i.find("input[type=checkbox]").prop("checked",!1),i.removeClass("checked"),t.dom().triggerHandler("ev_grid_row_unselected_all",["all"])):(s.addClass("selected"),e.addClass("selected"),e.find("input[type=checkbox]").prop("checked",!0),e.find("label.checkbox-label").addClass("checked"),i.find("input[type=checkbox]").prop("checked",!0),i.addClass("checked"),t.dom().triggerHandler("ev_grid_row_selected_all",["all"])),t.checkSelected()}},{selector:"td.grid-content-td-action-column a, td.custom-action-column a",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();e=$(this).closest("tr.grid-content-tr"),e=t.getKeyById(e.attr("id"));$(this).trigger("ev_grid_action_click",[e])}},{selector:"td.grid-content-td",event:"click",callback:function(e,t){e.preventDefault();var i=$(this).parent().attr("data-key");$(e.target).hasClass("grid-content-td")||$(e.target).hasClass("content")?$(this).trigger("ev_grid_td_click",[i]):$(this).trigger("ev_grid_action_click",[i])}},{selector:".grid-content-btn-edit",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var e=$(this).closest("tr.grid-content-tr"),i=t.getKeyById(e.attr("id")),s=t.getPlugin("editor");!s||s.isEditing()||!1===i||e.hasClass("disabled")||(e=$.su.getDefaultEvent(t,function(){s.startEdit(i),t.dom().triggerHandler("ev_grid_edit",[i])}),t.dom().triggerHandler("ev_grid_before_edit",[e.ev,i]),e.exe())}},{selector:".grid-content-btn-delete",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();var e=$(this),i=e.closest("tr.grid-content-tr"),s=t.getPlugin("editor"),a=t.getKeyById(i.attr("id"));i.hasClass("disabled")||e.hasClass("disabled")||!1===a||(s&&!1!==s.isEditing()?s.shake():(i=$.su.getDefaultEvent(t,function(){t.dom().triggerHandler("ev_grid_delete",[[a]])}),t.dom().triggerHandler("ev_grid_before_item_delete",[i.ev,a]),i.exe()))}},{selector:"",event:"ev_widget_show",callback:function(e,t){t.setGridHeight()}}],init:function(){this.objs={},(this.objs.grid=this).objs.modelMap={};var e=$('<tr id="'+$.su.randomId("trTool")+'"></tr>'),t=$('<td id="'+$.su.randomId("tdTool")+'"></td>');this.objs.row=new $.su.widgets.row({id:e,objs:this.objs}),this.objs.cell=new $.su.widgets.cell({id:t}),this._keys=[],this._renderMap={},this.objs.rows=[]},render:function(){var e=this.dom(),t=this.settings,i=t.configs.columns,s='<style type="text/css" name="column">',a=!1;e.addClass(t.cls+"grid-container");for(var n=this.columnOffset=0,c=i.length;n<c;n++)"row"===t.selectType&&i[n]&&"checkcolumn"===i[n].xtype&&(i.splice(n,1),--this.columnOffset),i[n]&&"btn"===i[n].xtype&&(a=!0);a||(i.unshift({width:0,xtype:"btn"}),this.columnOffset+=1);var r="";r=(r+='<div  id="'+this.domId+'-panel" class="grid-panel">')+'<div class="container widget-container grid-panel-container'+t.cls+'"><div class="grid-panel-wrap"><div class="grid-panel-content"><div class="grid-status-container hidden"></div><div class="grid-limit-container hidden"></div><div class="grid-panel-tbar-container tbar-container hidden"></div><div class="grid-panel-content-container"><div class="container grid-container"><div class="scroll-x-container"><div class="container grid-header-container"><table border="0" cellspacing="0" cellpadding="0"><tr class="grid-header-tr">';for(var o=0;o<i.length;o++){var d=i[o];if(d.cls=d.cls||"",d.dataIndex=d.dataIndex||"",!1!==d.colspan){d.width!==undefined&&("number"==typeof d.width&&(d.width=d.width+"px"),s=(s=(s=(s+="div#"+this.domId+" th.grid-header-"+o+",")+"div#"+this.domId+" td.grid-tool-td-"+o+",")+"div#"+this.domId+" td.grid-content-td-"+o)+"{width:"+d.width+";",0===d.width&&(s+="padding: 0;"),s+="}");var u,h="";switch(d.xtype){case"checkcolumn":!1!==t.selectAll&&(h+='<div class="checkbox-group-container grid-header-checkbox checkcolumn inline"><div class="widget-wrap"><label class="checkbox-label"><input class="checkbox-checkbox" type="checkbox" value=""/><span class="icon"></span></label></div></div>'),d.text=d.text||"",d.name=d.name||"select";break;case"rownumberer":d.text=d.text||$.su.CHAR.GRID.ID,d.name=d.name||"seq";break;case"settings":d.text=d.text||$.su.CHAR.GRID.MODIFY,d.name=d.name||"settings";break;case"statuscolumn":d.text=d.text||$.su.CHAR.GRID.STATUS,d.dataIndex=d.dataIndex||"",d.name=d.name||d.dataIndex;break;default:d.text=d.text||"",d.name=d.name||d.dataIndex}d.thRenderer?r+=d.thRenderer():(u="grid-header-"+(d.xtype||"other")+(d.cls?" "+d.cls:""),r=(r=r+('<th class="grid-header grid-header-'+o+" "+d.dataIndex+(o==i.length-1?" lst":"")+" "+u+'" '+(d.colspan?'colspan="'+d.colspan+'"':"")+' name="'+d.dataIndex)+'">'+h)+'<span class="content '+(d.xtype||"")+'">'+d.text+"</span>",d.tipText&&(r+='<div widget="toolTip" data-index="'+o+'" class="grid-header-toolTip"></div>'),r+="</th>")}}r+='</tr></table></div><div class="grid-tool-container hidden"></div><div class="grid-content-container-outer"><div class="grid-content-container"><table border="0" cellspacing="0" cellpadding="0"><tbody class="grid-content-data"></tbody></table></div></div></div></div></div><div class="grid-panel-fbar-container"></div></div></div></div></div>';var l=$(r);e.find(".grid-panel, .grid-prompt-msg").remove(),e.append(l),e[0]&&(this.msgId=e[0].id+"-prompt-msg",this.confirmId=e[0].id+"-confirm-msg",e.append($('<div class="grid-prompt-msg global-alert" widget="msg" type="alert" id = "'+this.msgId+'"></div>')),e.append($('<div class="grid-confirm-msg global-confirm" widget="msg" type="confirm" id = "'+this.confirmId+'"></div>')),s+="</style>",l.prepend($(s)),t.plugins&&this.initPlugins(t.plugins.split("|")),this.initToolTip(),(l=e.find("div.grid-header-container>table").outerWidth())&&t.xScroll&&((e=e.find(".scroll-x-container")).css("width",l+10+"px"),e.parent().css("overflow-x","auto")))},initToolTip:function(){var s=this;this.dom().find("div[widget=toolTip]").each(function(e,t){var i=$(t).attr("data-index"),i=s.settings.configs.columns[i];new $.su.widgets.toolTip({id:$(t),tipText:i.tipText,sizeMapping:{"l":"m","xl":"m"}}).render()})},initPlugins:function(e){var t=this.dom(),i=this,s=this.settings;i.plugins={};for(var a=0,n=(e=$.isArray(e)?e:[e]).length;a<n;a++){d=d=d=o=r=void 0;var r=e[a],o=$.extend({},s,{objs:i.objs,plugins:i.plugins});switch(r){case"tBar":$.extend(o,{custom:s.configs.tbar});var d=$('<div id="'+i.domId+'_bar" operation="'+s.operation+'"></div>').appendTo(t);i.plugins.tBar=new $.su.widgets.tBar($.extend(o,{id:d})),i.plugins.tBar.render();break;case"rowEditor":d=$('<div id="'+i.domId+'_tr_editor"></div>').appendTo(t);i.plugins.rowEditor=new $.su.widgets.rowEditor($.extend(o,{id:d})),i.plugins.rowEditor.render();break;default:d=$('<div id="'+i.domId+"_"+r+'"></div>').appendTo(t);$.su.widgets[r]&&(i.plugins[r]=new $.su.widgets[r]($.extend(o,{id:d})),i.plugins[r].render())}}},getValue:function(){return this.objs.rows},setValue:function(){return 0},syncData:function(e,t){var i,s=this.dom(),a=this.getPlugin("paging");this.objs.rows=[],this.objs.modelMap={},this._keys=e,this._renderMap={},a?(a.updateRowPage(e),a.updateBtns(e)):s.triggerHandler("ev_store_render_items",[e]),this.settings.autoMinHeight&&(s.css("min-height",0),s.css("min-height",s.outerHeight())),$.su.isIe&&((i=this.dom().find("table")).css("display","inline-table"),setTimeout(function(){i.css("display","")},0))},renderModels:function(c,e,u){for(var h,t=this,i=this.settings,s="",a=[],p=$.extend({},i,{objs:t.objs}),i=this.dom().find("tbody.grid-content-data").eq(0),n=[],f=t.getPlugin("paging"),g=f?f._pageMap:{},v=0,m=e.length;v<m;v++){var b=e[v][c].getValue();t.objs.modelMap[b]=e[v],h=t.objs.row.initRow(b,p),a.push(h),this._renderMap[b]=!0,s+=h.domContent}if(f){if(0<e.length){var w=e[0][c].getValue(),w=$.inArray(w,this._keys);if(-1!==w)if(0===w)i.prepend(s);else{for(var y,x=w-1;0<=x;x--)if(this._renderMap[this._keys[x]]){y=this._keys[x];break}y?i.find('tr[data-key="'+y+'"]').after(s):i.prepend(s)}}}else i.prepend(s);for(var r=0,_=a.length;r<_;r++){var C=a[r].domId,k=a[r].key,o=new $.su.widgets.row({id:C}),d=a[r].settings.cellObjs;f&&o.dom().attr("data-page",g[k]),$.extend(o,a[r]),t.objs.rows.push({key:k,obj:o}),n.push({key:k,obj:o});for(var l=0,T=d.length;l<T;l++){var I=d[l].domId,I=new $.su.widgets.cell({id:I});$.extend(I,d[l]),d[l].callback&&d[l].callback.call(I),o.cells.push(I)}}for(var O=0;O<n.length;O++){var V=n[O].obj,c=n[O].key;V&&V.dom().find("span.grid-row-numberer").html($.inArray(c,this._keys)+1)}this.settings.operation&&-1!==this.settings.operation.indexOf("columns")&&this.objs.tool.renderDefaultCol(this),this.updateRowNumber(),u(n)},addItem:function(e){this._keys.push(e);var t=this.getPlugin("paging");t?(t.updateRowPage(this._keys),t.updateBtns()):this.dom().triggerHandler("ev_store_render_items",[[e]])},deleteItem:function(e){var t=$.inArray(e,this._keys);0<=t&&(this._keys.splice(t,1),this.remove(e),(t=this.getPlugin("paging"))&&(t.updateRowPage(this._keys),t.updateBtns()))},createRow:function(e,t){var i=this,s=this.settings,a={},s=$.extend({},s,{objs:i.objs}),n={},c=i.dom().find("tbody.grid-content-data").eq(0),r=(n[e]=[],i.objs.cells=n,i.objs.modelMap[e]=t,this._keys.push(e),a.key=e,i.objs.row.initRow(e,s));c.append(r.domContent),a.obj=new $.su.widgets.row({id:r.domId}),$.extend(a.obj,r);for(var o=0,u=r.settings.cellObjs.length;o<u;o++){var d=r.settings.cellObjs[o],l=d.domId,l=new $.su.widgets.cell({id:l});$.extend(l,d),d.callback&&d.callback.call(l),a.obj.cells.push(l)}i.objs.rows.push(a),this._renderMap[e]=!0,i.updateRowNumber();n=this.getPlugin("paging");return n&&(n.updateRowPage(this._keys),n.updateBtns()),i.dom().triggerHandler("ev_grid_row_created",[i.objs.rows]),a.obj},updateRowNumber:function(){0<this.dom().length&&this.updateRow()},updateRow:function(){var e,t,i=this.dom(),s=i.find("tbody.grid-content-data"),a=i.find("th.grid-header div.checkcolumn label.checkbox-label"),n=a.closest("div.checkbox-group-container"),r=(this.getPlugin("toolRow"),this.objs.rows),o=r.length;if(0==o){if(0===s.find("tr.grid-content-tr.empty").length)return t=this.objs.row.initEmptyRow(this.getColumns().length,this),s.append(t),n.removeClass("selected"),a.removeClass("checked"),this.setGridHeight(),void this.checkSelected()}else i.find(".grid-content-tr.empty").remove();for(e=0;e<o;e++){var d=r[e].obj,c=r[e].key;d&&d.dom().find("span.grid-row-numberer").html($.inArray(c,this._keys)+1)}var l=i.find("tr.grid-content-tr:not(.disabled)");if(0<l.length){for(e=0;e<l.length&&($(l[e]).hasClass("disabled")||$(l[e]).hasClass("selected"));++e);for(e!=l.length&&(n.removeClass("selected"),a.removeClass("checked")),e=0;e<l.length&&($(l[e]).hasClass("disabled")||$(l[e]).hasClass("selected"));++e);e==l.length&&(n.addClass("selected"),a.addClass("checked"))}this.setGridHeight(),this.checkSelected()},setGridHeight:function(){for(var e=this.settings,t=this.getContainer(),i=t.find(".grid-content-container")[0],c=i.scrollTop,s=(0<t.find("style[name=grid]").length&&t.find("style[name=grid]").remove(),'<style type="text/css" name="grid">'),a=(s+="div#"+this.domId+" div.grid-content-container{",t.find("tr.grid-content-tr")),n=null,r=0,u=a.length;r<u;r++){for(var o=a.eq(r),h=o.find("td"),p=!1,d=0,f=h.length;d<f;d++)if(1<h.eq(d).attr("rowspan")){p=!0;break}if(!p){n=o;break}}var l=0;n&&(l=n.outerHeight()),e.minLines&&(s+="min-height:"+e.minLines*l+"px;"),e.maxLines&&(s+="max-height:"+e.maxLines*l+"px;",t.hasClass("allow-scroll")||$.su.scrollbar({ele:i}),t.addClass("allow-scroll")),s+="}</style>",t.prepend($(s)),i.scrollTop=c,$(i).height()<$(i).find("table").height()?this._resetWidth||($(i).width(),$(i).children("table").width(),this._resetWidth=!0):this._resetWidth&&(this._resetWidth=!1)},setGridColumnName:function(e){var t=this.dom(),i=this.settings.configs.columns;if($.isArray(e))for(var s=0,a=e.length;s<a;s++){var n=parseInt(e[s].index)+this.columnOffset,r=e[s].text,o=t.find(".grid-header-container th").get(n);o&&$(o).find("span.content").text(r),i[n].text=r}},reRenderColumn:function(e){for(var t=this.objs.rows,i=this.objs.modelMap,s=0,a=t.length;s<a;s++)for(var n=t[s].key,r=t[s].obj.cells,o=i[n].getData()[e],d=0,l=r.length;d<l;d++)r[d].field===e&&r[d].setValue(o)},getKeys:function(){var e,t=[],i=this.objs.modelMap;for(e in i)i.hasOwnProperty(e)&&t.push(e);return t},getRow:function(e){var t=this.objs.rows;if(e===undefined)return t;for(var i=0,s=t.length;i<s;i++)if(e===t[i].key)return t[i].obj;return!1},getRows:function(){for(var e=this.objs.rows,t=[],i=0,s=e.length;i<s;i++)t.push(e[i].obj);return t},getPlugin:function(e){var t=this.settings.plugins.split("|");if("editor"===e){if(-1!==$.inArray("editor",t))return this.plugins["editor"];if(-1!==$.inArray("rowEditor",t))return this.plugins["rowEditor"];if(-1!==$.inArray("popEditor",t))return this.plugins["popEditor"]}return-1!==$.inArray(e,t)&&this.plugins[e]},getColumns:function(){return this.settings.configs.columns},getSelected:function(){var i=this,e=this.dom().find("tr.grid-content-tr.selected"),s=[];return e.each(function(e,t){var t=$(t);t.hasClass("empty")||t.hasClass("disabled")||(t=t.attr("id"),t=i.getKeyById(t),s.push(t))}),s},checkSelected:function(){var e=this,t=this.getSelected(),i=this.getPlugin("tBar");i&&(0===t.length?i.disable(["delete","edit"]):1===t.length?i.enable(["delete","edit"]):1<t.length&&(i.disable("edit"),i.enable("delete"))),clearTimeout(this._checkStatusEvent),this._checkStatusEvent=setTimeout(function(){e.dom().triggerHandler("ev_grid_check_status")},10)},setSelected:function(e){var t=this.dom(),i=this.getSelected();e===undefined&&(e=this._keys);for(var s=0,a=(e=$.isArray(e)?e:[e]).length;s<a;s++)-1===$.inArray(e[s],i)&&t.find('tr.grid-content-tr[data-key="'+e[s]+'"]').find("label.checkbox-label").trigger("click")},setUnselected:function(e){var t=this.dom(),i=this.getSelected();e===undefined&&(e=this._keys);for(var s=0,a=(e=$.isArray(e)?e:[e]).length;s<a;s++)-1!==$.inArray(e[s],i)&&t.find('tr.grid-content-tr[data-key="'+e[s]+'"]').find("label.checkbox-label").trigger("click")},getDisplay:function(){var e=this.dom().find("input.grid-display");return 0<e.length?e:null},search:function(e){if(!e)return null},updateRowId:function(){this.dom().find("tbody.grid-content-data tr.grid-content-tr").each(function(e,t){$(t).find("span.grid-row-numberer").text(e+1)})},moveItem:function(e,t){var i=this.dom(),s=i.find("tr.grid-content-tr[data-key="+e+"]");s.index()!==t&&(i=i.find("tbody.grid-content-data tr.grid-content-tr").get(t),$(i).before(s),i=$.inArray(e,this._keys),this._keys.splice(i,1),this._keys.splice(t,0,e),this.updateRowId(),(s=this.getPlugin("paging"))&&(s.updateRowPage(this._keys),s.updateBtns()))},runProgress:function(){var e=this.getPlugin("tBar").dom().find("div.gird-prompt-progressbar"),t=e.find("div.progressbar-value");t.stop(),t.css("width","0px"),e.clearQueue().fadeIn(100,function(){t.animate({width:"50%"},5e3)})},prompt:function(e){var t=$("#"+this.msgId);return t.data("viewObj")?(t.data("viewObj").setContent(e),t.data("viewObj").show(),t.data("viewObj")):((t=new $.su.widgets.msg({id:this.msgId})).render(),t._gridObj=this,t.setContent(e),t.show(),t)},confirm:function(e){var t=$("#"+this.confirmId);return t.data("viewObj")?(t.data("viewObj").setContent(e),t.data("viewObj").show(),t.data("viewObj")):((t=new $.su.widgets.msg({id:this.confirmId})).render(),t._gridObj=this,t.setContent(e),t.show(),t)},insert:function(e,t){var i=this.dom(),s=this.settings,a=i.find("tbody.grid-content-data");e=parseInt(e,10)||0,t=t||[{}],(t=$.isArray(t)?t:[t]).reverse();for(var n=0,r=t.length;n<r;n++){var o=s.row.initRow(e+n,t[n]);0==e?a.prepend(o):o.insertBefore(this.objs.rows[e]),this.objs.rows.splice(e,0,o)}this.updateRowNumber(),i.triggerHandler("ev_insert",[e,t])},remove:function(e){var t,i,s,a=this.objs.rows;if(e){for(t=a.length-1;0<=t;t--)a[t].key===e&&((0<(s=a[t].obj.dom().closest(".row-merge-tr")).length&&1==s.find(".grid-content-tr").length?s:a[t].obj.dom()).remove(),a.splice(t,1));delete this.objs.modelMap[e];var n=$.inArray(e,this._keys);0<=n&&this._keys.splice(n,1)}else{for(t=0,i=a.length;t<i;t++)(0<(s=a[t].obj.dom().closest(".row-merge-tr")).length&&1==s.find(".grid-content-tr").length?s:a[t].obj.dom()).remove();a.length=0,this.objs.modelMap=[],this._keys=[]}this.updateRowNumber();n=this.getPlugin("paging");n&&(n.updateRowPage(this._keys),n.updateBtns())},getEditStatus:function(){var e=this.getPlugin("editor");return!e.isEditing()||""===e.getEditingId()?0:"add"===e.getEditingId()?2:1},getKeyById:function(e){for(var t=this.objs.rows,i=0,s=t.length;i<s;i++)if(e===t[i].obj.domId)return t[i].key;return!1},rowSpan:function(e,t){var i=this.dom(),s={};if(t===undefined)s["0"]=this.objs.rows.length;else for(var a=0,n=t.length;a<n;a++){var r=t[a];s[r[0]]=r.length}i.find("td.grid-content-td-"+e).each(function(e,t){$(t).show(),s[e]?$(t).attr("rowspan",s[e]):$(t).hide()})},rowMerge:function(e){var t=this.dom();if($.isArray(e)){for(var i=0;i<e.length;i++){var s=e[i],a="";if($.isArray(s)&&1<s.length){for(var n=0;n<s.length;n++)a+="tr.grid-content-tr:eq("+s[n]+"),";var a=a.slice(0,a.length-1),r=t.find(a),o=o||r.eq(0).children(".grid-content-td").length;r.wrapAll("<tr class='row-merge-tr'><td class='row-merge-td' colspan='"+o+"'><table class='row-merge-table'></table></td></tr>")}}t.find(".grid-content-data").children("tr.grid-content-tr").each(function(e,t){o=o||$(this).children(".grid-content-td").length,$(this).wrap("<tr class='row-merge-tr'><td class='row-merge-td' colspan='"+o+"'><table class='row-merge-table'></table></td></tr>")})}},colSpan:function(e,t){var c=this.dom(),s={},i=[],a=[];if(t===undefined)for(var n=0,u=this.objs.rows.length;n<u;n++)i.push(this.objs.rows[n].key);else i=$.isArray(t)?t:[t];for(var r=0,h=e.length;r<h;r++){var o=e[r];s[o[0]]=o.length,a=a.concat(o.slice(1))}for(var d=0,p=i.length;d<p;d++){var l=c.find('tr.grid-content-tr[data-key="'+i[d]+'"]');0<l.length&&l.find("td.grid-content-td").each(function(e,t){var i=$(t).attr("name");"btn-column"!==i&&($(t).show(),s[i]?$(t).attr("colspan",s[i]):(-1!==$.inArray(i,a)&&$(t).hide(),$(t).removeAttr("colspan")))})}},enableColumn:function(e){this.dom().find("td.grid-content-td-"+e).removeClass("disabled")},disableColumn:function(e){this.dom().find("td.grid-content-td-"+e).addClass("disabled")},showColumn:function(e){this.dom().find("div.grid-container").children("style.column-hide-style[data-index="+e+"]").remove()},hideColumn:function(e){var t="",i="#"+this.domId+" ";this.dom().find("div.grid-container").append((t+='<style class="column-hide-style" data-index="'+e+'">')+(i+"th.grid-header."+e+", ")+(i+"td.grid-content-td-"+e+", ")+(i+"td.grid-tool-td-"+e)+"{display: none;}</style>")},setMaxRules:function(e,t,i){t=t||!1,i=i||this.settings.maxRulesText,e=parseInt(e,10),(isNaN(e)||e<=0)&&(e=0,t=!1);var s=this.dom().find("div.grid-limit-container"),a="",a=(a+='<div class="grid-limit-bar-container">')+("<span>"+$.su.CHAR.GRID.MAX_LIMIT+': <span class="limit-num"></span></span>');s.append(a+="</div>"),"object"!==$.type(this.objs.maxRulesObj)&&(this.objs.maxRulesObj={}),this.objs.maxRulesObj.maxRules=e,this.objs.maxRulesObj.errorText=i,s.find(".limit-num").text(this.objs.maxRulesObj.maxRules),t?s.removeClass("hidden"):s.addClass("hidden")},getMaxRules:function(){return"object"===$.type(this.objs.maxRulesObj)&&this.objs.maxRulesObj.maxRules||0},isExceeded:function(){return 0<this.getMaxRules()&&this.objs.grid.dataBind[0].getSize()>=this.getMaxRules()},showMaxRulesWarning:function(){this.prompt(this.objs.maxRulesObj.errorText)},destroy:function(){var e=$("#"+this.msgId).data("viewObj"),t=$("#"+this.confirmId).data("viewObj"),i=this.getPlugin("popEditor");e&&e.destroy(),t&&t.destroy(),i&&i.destroy()}}),$.su.Widget.register("tBar",{settings:{operation:{attribute:"operation",defaultValue:""}},listeners:[{selector:"a.btn-add",event:"click",callback:function(e,t){var i,s,a,n;e.stopPropagation(),e.preventDefault(),$(this).hasClass("disabled")||(e=t.settings,(i=e.objs.grid).isExceeded()?i.showMaxRulesWarning():(s=i.getPlugin("editor"))&&!$(this).hasClass("disabled")&&("function"==$.type(e.beforeStartAdd)&&!e.beforeStartAdd()||!1!==s.isEditing()||(a=e.configs.paging,n=i.plugins.paging,e=$.su.getDefaultEvent(t,function(){a&&a.isPaging&&n.goToPage(0),s.startEdit("add"),i.dom().triggerHandler("ev_grid_edit",["add"])}),i.dom().triggerHandler("ev_grid_before_edit",[e.ev]),e.exe())))}},{selector:"a.btn-delete",event:"click",callback:function(e,s){e.stopPropagation(),e.preventDefault();var a=s.settings.objs.grid,n=a.getPlugin("paging"),r=a.objs.rows,e=a.getPlugin("editor"),o=a.getSelected();$(this).hasClass("disabled")||e&&!1===e.isEditing()&&(a.confirm($.su.CHAR.COMMON.DELETE_CONFIRM_CONTENT),$("#"+a.confirmId).one("ev_msg_ok",function(){for(var e=r.length-1;0<=e;e--){var t=r[e].obj;-1!==$.inArray(t.dom().attr("data-key"),o)&&(t.dom().remove(),r.splice(e,1))}a.updateRowNumber(),n&&n.updateBtns();var i=$.su.getDefaultEvent(s,function(){a.dom().triggerHandler("ev_grid_delete",[o])});a.dom().triggerHandler("ev_grid_before_delete",[i.ev]),i.exe(),a.dom().triggerHandler("ev_grid_after_delete"),$(this).off("ev_msg_no")}).one("ev_msg_no",function(){$(this).off("ev_msg_ok")}))}},{selector:"a.btn-edit",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var e=t.settings.objs.grid,t=e.getSelected(),i=e.getPlugin("editor");i&&!$(this).hasClass("disabled")&&0<t.length&&i&&!i.isEditing()&&(i.startEdit(t[0]),e.dom().triggerHandler("ev_grid_edit",[t[0]]))}},{selector:"a.btn-delete-all",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();e=t.settings.objs.grid,t=e.getPlugin("editor");if(t&&!1===t.isEditing()){for(var i=[],t=e.getPlugin("paging"),s=e.objs.rows,a=s.length-1;0<=a;a--)i.push(s[a].key),s[a].obj.dom().remove(),s.splice(a,1);e.updateRowNumber(),t&&t.updateBtns(),e.dom().triggerHandler("ev_grid_delete",[i])}}},{selector:"a.btn-clear",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var e=t.settings,i=e.objs.grid,s=i.getPlugin("editor");i.confirm(e.delAllText).dom().off("ev_msg_ok").on("ev_msg_ok",function(){s&&!1===s.isEditing()&&i.dom().triggerHandler("ev_grid_delete_all")})}},{selector:"input.search-text",event:"focus",callback:function(e){e.stopPropagation(),$(this).closest("div.search-container").addClass("focus")}},{selector:"input.search-text",event:"blur",callback:function(e){e.stopPropagation(),$("div.search-container").removeClass("focus")}},{selector:"a.operation-btn",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation(),$(this).hasClass("disabled")||(!(e=t.settings.objs.grid).isExceeded()||$(this).hasClass("btn-refresh")?(t=$(this).attr("tbar-name"),e.dom().triggerHandler("ev_grid_tbar_"+t)):e.showMaxRulesWarning())}},{selector:"a.search-switch",event:"click",callback:function(e,t){e.stopPropagation();e=t.settings.objs.grid,t=$(this).prevAll("input.search-text").val();e.search(t)}}],init:function(e){this.settings=e},render:function(){var c=this.dom(),u=c.parent().find("div.grid-panel-tbar-container"),e=this.settings,t=$.type(e.operation),i=[];if(e.objs.grid.dom().addClass("grid-tbar"),"string"===t)i=e.operation.split("|");else if("array"===t)i=e.operation;else if(!e.custom)return null;e.operation=i,u.removeClass("hidden");for(var s='<div class="operation-container" id="'+this.domId+'">',a=0,h=i.length;a<h;a++){var n=0===a?"fst":"",r=a===h-1?"lst":"";switch(i[a]){case"add":s=(s=s+('<a href="javascript:void(0);" tbar-name="add" class="operation-btn btn-add '+n+" "+r+'">')+'<span class="icon"></span>')+('<span class="text">'+$.su.CHAR.OPERATION.ADD+"</span>")+"</a>",e.maxRulesMsgText;break;case"edit":s=(s=s+('<a href="javascript:void(0);" tbar-name="edit" class="operation-btn btn-edit '+n+" "+r+'">')+'<span class="icon"></span>')+('<span class="text">'+$.su.CHAR.OPERATION.EDIT+"</span>")+"</a>";break;case"prompt":s=(s=(s=(s=(s+='<div class="grid-prompt hidden widget-container successed inline-block left">')+'<div class="content">'+'<span class="icon"></span>')+('<span class="text text-successed">'+e.promptTextSuccessed+"</span>"))+('<span class="text text-failed">'+e.promptTextFailed+"</span>"))+"</div>"+"</div>",e.showPrompt=!0;break;case"delete":s=(s=s+('<a href="javascript:void(0);" tbar-name="delete" class="operation-btn btn-delete '+n+" "+r+'">')+'<span class="icon"></span>')+('<span class="text">'+$.su.CHAR.OPERATION.DELETE+"</span>")+"</a>",'<div class="grid-warning-msg warning">'+'<h4 class="title">'+'<span class="icon"></span>'+('<span class="text">'+e.noneSelectedMsgText+"</span>")+"</h4>"+"</div>",'<div class="grid-warning-msg warning">'+'<h4 class="title">'+'<span class="icon"></span>'+('<span class="text">'+e.deleteConfirmMsgText+"</span>")+"</h4>"+"</div>";break;case"deleteAll":s=(s=s+('<a href="javascript:void(0);" tbar-name="deleteAll" class="operation-btn btn-delete-all '+n+" "+r+'">')+'<span class="icon"></span>')+('<span class="text">'+$.su.CHAR.OPERATION.DELETE_ALL+"</span>")+"</a>",'<div class="grid-warning-msg warning">'+'<h4 class="title">'+'<span class="icon"></span>'+('<span class="text">'+e.noneSelectedMsgText+"</span>")+"</h4>"+"</div>",'<div class="grid-warning-msg warning">'+'<h4 class="title">'+'<span class="icon"></span>'+('<span class="text">'+e.deleteAllConfirmMsgText+"</span>")+"</h4>"+"</div>";break;case"clear":s=(s=s+('<a href="javascript:void(0);" tbar-name="clear" class="operation-btn btn-clear '+n+" "+r+'">')+'<span class="icon"></span>')+('<span class="text">'+$.su.CHAR.OPERATION.DELETE_ALL+"</span>")+"</a>";break;case"enable":s=(s=s+('<a href="javascript:void(0);" tbar-name="enable" class="operation-btn btn-enable '+n+" "+r+'">')+'<span class="icon"></span>')+('<span class="text">'+$.su.CHAR.OPERATION.ENABLE+"</span>")+"</a>";break;case"disable":s=(s=s+('<a href="javascript:void(0);" tbar-name="disable" class="operation-btn btn-disable '+n+" "+r+'">')+'<span class="icon"></span>')+('<span class="text">'+$.su.CHAR.OPERATION.DISABLE+"</span>")+"</a>";break;case"search":s=(s=(s=(s=s+'<div class="container widget-container text-container search-container inline">'+'<span class="widget-wrap text-wrap search-wrap">')+('<input type="text" class="text-text search-text" value="'+$.su.CHAR.OPERATION.SEARCH+'" />'))+'<span class="pos"></span>'+'<a href="javascript:void(0);" class="search-switch"></a>')+"</span>"+"</div>";break;case"refresh":s=(s=s+('<a href="javascript:void(0);" tbar-name="refresh" class="operation-btn btn-refresh '+n+" "+r+'">')+'<span class="icon"></span>')+('<span class="text">'+$.su.CHAR.OPERATION.REFRESH+"</span>")+"</a>";break;default:var p=i[a].xtype;p&&(s+='<input operation-index="'+a+'" class="operation-user-defined operation-'+a+" "+n+" "+r+" "+p+'"/>')}}s+="</div>";var o,d,f,l,t=$(s);for(o in u.append(t),c.remove(),this.settings.custom)this.settings.custom.hasOwnProperty(o)&&(l='<a href="javascript:void(0);" tbar-name="'+o+'" class="operation-btn btn-'+o+" "+(d=this.settings.custom[o]).cls+'">',l=(l+='<span class="icon"></span>')+'<span class="text">'+d.text+"</span></a>",d.index!==undefined?(f=this.dom().children(),0===d.index?this.dom().prepend($(l)):d.index<=f.length?$(f.get(d.index-1)).after($(l)):this.dom().append($(l))):this.dom().append($(l)));this.disable(["delete","edit"])},disable:function(e){for(var t=0,i=(e=$.isArray(e)?e:[e]).length;t<i;t++){var s=".operation-btn.btn-"+e[t];this.dom().find(s).addClass("disabled")}},enable:function(e){for(var t=0,i=(e=$.isArray(e)?e:[e]).length;t<i;t++){var s=".operation-btn.btn-"+e[t];this.dom().find(s).removeClass("disabled")}}}),$.su.Widget.register("row",{settings:{},init:function(e){this.objs=e.objs,this.cells=[]},render:function(){},initRow:function(e,t){for(var i=t.configs.columns,s={inited:!0,columns:i,objs:t.objs,cells:[],cellObjs:[]},a=t.objs.modelMap[e].selected,n=i.length,i=(s.objs.grid.dom().find("tbody.grid-content-data").eq(0),{domId:s.objs.grid.domId+"_tr_"+$.appUtils.keyHandler(e),key:e,domContent:""}),r="",o=0;o<n;o++)s.cellObjs[o]=s.objs.cell.initCell(e,o,t),r+=s.cellObjs[o].domContent;return r+="<td class='ghost-td'><div class='head'></div><div class='foot'></div></td>",i.domContent='<tr id="'+i.domId+'" class="grid-content-tr '+(a?"selected":"")+" grid-content-tr-"+$.appUtils.keyHandler(e)+'" data-key="'+e+'">'+r+"</tr>",i.settings=s,i},getAllFields:function(){return this.cells},initEmptyRow:function(e,t){this.objs.grid.columnOffset!==undefined&&this.objs.grid.columnOffset;var i='<tr class="grid-content-tr empty">',i=(t.dom().find("tr.grid-header-tr th"),(i+='<td colspan="'+e+'">'+$.su.CHAR.COMMON.NO_ENTRY+"</td>")+'<td class="ghost-td"><div class="head"></div><div class="foot"></div></td>'+"</tr>");return $(i)},disableRow:function(e){var c=this.dom(),t=this.settings.columns,i=c;if(i){i.addClass("disabled");for(var s=0,u=t.length;s<u;s++){var a,n=t[s],r=n.items;if("actioncolumn"===n.xtype)for(var o=0,h=r.length;o<h;o++){var d=r[o].xtype,l=n.dataIndex,l=i.find("input[data-property="+l+"][data-type="+d+"]");l&&"function"==$.type(l[d])&&l[d]("disable")}else!e||"customWidget"!==n.xtype||(a=0<(a=i.find("[widget="+n.widgetName+"]")).length&&a.data("viewObj"))&&a.disable()}}},enableRow:function(){var e=this.dom(),t=this.settings.columns,i=e;if(i){i.removeClass("disabled");for(var s=0,c=t.length;s<c;s++){var a,n=t[s],r=n.items;if("actioncolumn"===n.xtype&&r)for(var o=0,u=r.length;o<u;o++){var d=r[o].xtype,l=n.dataIndex,l=i.find("input[data-property="+l+"][data-type="+d+"]");l&&"function"==$.type(l[d])&&l[d]("enable")}else"customWidget"!==n.xtype||(a=0<(a=i.find("[widget="+n.widgetName+"]")).length&&a.data("viewObj"))&&a.enable()}}}}),$.su.Widget.register("cell",{settings:{},init:function(){},render:function(){},initCell:function(e,t,c){var s={rowKey:e,columns:c.configs.columns,cellId:t,objs:c.objs},u=function(e){return e===undefined||null===e||""===e?"---":e},h=c.objs.modelMap[e].getData(),a=s.columns[t],p=s.columns.length,f=u(h[a.dataIndex]),i=0===t?"fst":"",n=t===p-1?"lst":"",r="",o=a.cls||"",d=(o&&(o+=" "),""),l={domId:s.objs.grid.domId+"_tr_"+$.appUtils.keyHandler(e)+"_td_"+t,domContent:"",column:a,field:a.dataIndex||!1,renderer:function(e,t){var s=function(e){for(var t in e){var i;e.hasOwnProperty(t)&&("string"==(i=typeof e[t])?e[t]=$.su.escapeHtml(e[t]):"object"==i&&null!=e[t]&&(e[t]=s(e[t])))}return e};return t=s(t),"string"==typeof e&&(e=$.su.escapeHtml(e)),a.renderer?a.renderer(e,t):u(e)}};if(c.editor)0===t?l.addClass("grid-content-td grid-content-td-0").css({position:"relative"}):a.dataIndex?l.addClass("grid-content-td grid-content-td-"+t).append($(c.editorItems[a.dataIndex])):l.addClass("grid-content-td grid-content-td-"+t);else switch(a.xtype){case"rownumberer":o+="grid-content-td grid-content-td-"+t+" grid-content-td-row-numberer "+i+" "+n+" "+a.cls,d+=' name="row-numberer"',r+='<span class="grid-row-numberer content"></span>';break;case"checkcolumn":var g=c.objs.modelMap[e].selected;o+=" grid-content-td grid-content-td-"+t+" grid-content-td-check-column "+i+" "+n,d+=' name="check-column"',r=(r=(r=(r=(r+='<div class="checkbox-group-container">')+'<div class="widget-wrap">'+('<label class="checkbox-label '+(g?"checked":"")+'">'))+('<input class="checkbox-checkbox" '+(g?' checked="checked" ':" ")+' type="checkbox" value="'+e+'"/>')+'<span class="icon"></span>')+"</label>"+"</div>")+"</div>"+'<span class="content">--</span>';break;case"statuscolumn":var g=a.trueValue||"on",v=a.falseValue||"off",m=$.su.CHAR.GRID.DISABLED;o+="grid-content-td grid-content-td-"+t+" grid-content-td-status-column "+i+" "+n,d+=' name="check-column"',r=(r=r+('<a href="javascript:void(0);" data-index="'+t+'" data-name="'+a.dataIndex+'" data-value="'+v+'" data-key="'+e+'" data-on="'+g+'" data-off="'+v+'" class="grid-content-btn grid-content-btn-status btn-status disabled">')+'<span class="icon"></span>')+('<span class="text">'+m+"</span>")+"</a>";break;case"settings":s.objs.grid.dom().addClass("settings"),o+="grid-content-td grid-content-td-"+t+" grid-content-td-settings-column "+i+" "+n,r+='<div class="grid-btn-container">',a.items!==undefined&&-1===$.inArray("edit",a.items)||(r=(r=r+'<a href="javascript:void(0);" data-index="'+t+'" data-key="'+e+'" class="grid-content-btn grid-content-btn-edit btn-edit"><span class="icon"></span>')+'<span class="text">'+$.su.CHAR.OPERATION.EDIT+"</span></a>"),a.items!==undefined&&-1===$.inArray("delete",a.items)||(r=(r=r+'<a href="javascript:void(0);" data-index="'+t+'" data-key="'+e+'" class="grid-content-btn grid-content-btn-delete btn-delete"><span class="icon"></span>')+'<span class="text">'+$.su.CHAR.OPERATION.DELETE+"</span></a>"),r+="<div>";break;case"actioncolumn":s.objs.grid.dom().addClass("actioncolumn"),o+="grid-content-td grid-content-td-"+t+" grid-content-td-action-column "+i+" "+n,d+=' name="action-column"',r=(r+='<div class="grid-content-td-wrap" data-key="'+e+'">')+l.renderer.call(l,f,s.objs.modelMap[e].getData())+"</div>";break;case"btn":o+="grid-content-td grid-content-td-"+t+" "+i+" "+n,d+=' name="btn-column"';break;case"customWidget":g=a.widgetName;o+="grid-content-td grid-content-td-"+t+" grid-content-td-"+a.name+" "+i+" "+n+" "+a.cls,d+=' name="'+g+'"',g?(v="textbox"==g&&"false"!==l.renderer.call(l,f,s.objs.modelMap[e].getData())?"hidden":"",r+='<div widget="'+g+'" id="'+$.su.randomId("grid-content-custom-widget")+'" class="'+v+'"></div>',a.renderer&&(r+='<div class="content">'+l.renderer.call(l,f,s.objs.modelMap[e].getData())+"</div>")):r+='<div class="content">'+l.renderer.call(l,f,s.objs.modelMap[e].getData())+"</div>";break;default:o+="grid-content-td grid-content-td-"+t+" grid-content-td-"+a.name+" "+i+" "+n+" "+a.cls,d+=' name="'+a.name+'"',r+='<div class="content">'+l.renderer.call(l,f,s.objs.modelMap[e].getData())+"</div>"}return l.domContent='<td id="'+l.domId+'" class="'+o+'" '+d+'><div class="td-label">'+a.text+'<span class="content-separator">:</span></div><div class="td-content">'+r+"</div></td>",l.callback=function(){var e,i=this,t=$("#"+l.domId).find("div[widget]");0<t.length&&(e=i.dom().attr("name"),i.customWidget=new $.su.widgets[e]({id:t,customSettings:i.column.settings}),i.customWidget.render(),$("#"+l.domId).find("div[widget]").on("ev_view_change",function(e,t){i.dom().triggerHandler("ev_view_change",[t]),s.objs.grid.dom().triggerHandler("ev_grid_custom_change",[t,i.customWidget,s.rowKey,a])}))},l.settings=s,l},getValue:function(){var e=this.dom();return this.statusColumn?!!(e=e.find("a")).length&&e.attr("data-value"):this.dom().find("div.content").text().replace(/\u00A0/g," ")},setValue:function(e){var t,i,s=this.dom(),a=this.settings,n=a.cellId,n=a.columns[n],r=n.trueValue||"on",o=n.falseValue||"off",d=this.settings.objs.modelMap[this.settings.rowKey].getData(),d=("string"===$.type(e)&&(e=$.su.transSpecialChar(e)),this.renderer(e,d,a.objs.rows.length-1));this.statusColumn?(a="on"===d?(t=$.su.CHAR.GRID.ENABLED,i="enabled",r):(t=$.su.CHAR.GRID.DISABLED,i="disabled",o),s.find("a").removeClass("enabled disabled").addClass(i).attr("data-value",a),s.find("span.text").text(t)):this.customWidget?n.renderer&&!1!==d?"progressbar"==n.widgetName?(this.customWidget.show(),this.customWidget.setValue(d[0]),this.dom().find("div.content").show().html(d[1])):("combobox"!=n.widgetName||!n.showRenderer||"---"==d?this.customWidget.hide():(this.customWidget.show(),this.customWidget.setValue(e)),this.dom().find("div.content").show().html(d)):(this.dom().find("div.content").hide(),this.customWidget.show(),this.customWidget.setValue(e)):this.dom().find("div.td-content").html(d)},hideButton:function(e){this.dom().find(e).hide()},showButton:function(e){this.dom().find(e).show()},getInnerWidget:function(){return this.customWidget},getInnerWidgetChange:function(e){this.customWidget[e]()},getDisplay:function(){var e=this.dom();if(!this.customWidget)return e.find("div.content").text();switch(this.customWidget.type){case"grid":return this.customWidget;case"combobox":return this.customWidget.getText();default:return this.customWidget.getValue()}}}),$.su.Widget.register("editor",{settings:{},listeners:[],init:function(e){var a=this,t=$(e.configs[this._type].content).find("div[widget][name]");this.widgets=[],this.settings=e,t.each(function(e,t){var i=$(t).attr("name"),s=$(t).attr("widget");a.widgets.push({id:$(t).attr("id"),name:i,widget:s})}),this.setEditing(!1)},getAllFields:function(){for(var e=[],t=0,i=this.widgets.length;t<i;t++){var s=$("#"+this.widgets[t].id),a=(this.widgets[t].widget,this.widgets[t].name);a&&((s=s.data("viewObj")).field=a,e.push(s))}return e},hide:function(){this.dom().detach().css("display","none")},startEdit:function(e){this.dom();var t=this.settings,e=e||"add",i=(t.objs.grid.dom(),this.getAllFields());t.configs[this._type];this.hide(),this.setEditing(!0),this.setEditingId(e);for(var s=0,a=i.length;s<a;s++)i[s].setNormal()},loadData:function(e){this.settings;for(var t=this.widgets,i=0,s=t.length;i<s;i++)$("#"+t[i].id).data("viewObj").setValue(e[t[i].name])},completeEdit:function(){this.setEditing(!1),this.setEditingId("")},cancelEdit:function(){this.setEditing(!1),this.setEditingId("")},setEditing:function(e){this.settings.configs[this._type].editing=e},isEditing:function(){return this.settings.configs[this._type].editing},setEditingId:function(e){this.settings.configs[this._type].editingIndex=e},getEditingId:function(){return this.settings.configs[this._type].editingIndex}}),function(){var d=$.su.Widget.register("rowEditor",{extend:["editor"],settings:{},listeners:[{selector:"div.btn-cancel",event:"click",callback:function(e,t){var i=t.settings,s=i.objs.grid,a=t.getEditingId(),n=i.objs.grid.getRow(a);t.isEditing()&&!i.configs.rowEditor.adding&&n.enableRow(a).dom().show(),s.dom().triggerHandler("ev_grid_cancel",[a]),t.cancelEdit()}},{selector:"div.btn-submit",event:"click",callback:function(e,t){$(this);var i=t.settings,s=i.objs.grid,a=t.getEditingId(),n=i.objs.grid.getRow(a),r=$.su.getDefaultEvent(t,function(){t.isEditing()&&!i.configs.rowEditor.adding&&n.enableRow(a).dom().show(),t.completeEdit()});s.dom().triggerHandler("ev_grid_save",[r.ev,a]),r.exe()}},{selector:function(){return{parent:this.settings.objs.grid.dom(),target:"tr.grid-content-tr:not(.empty)"}},event:"dblclick",callback:function(e,t){e.stopPropagation(),e.preventDefault();var e=t.settings.objs.grid,i=$(this).attr("data-key");t&&!t.isEditing()&&(t.startEdit(i),e.dom().triggerHandler("ev_grid_edit",[i]))}}],init:function(e){d.superclass.init.call(this,e),this.cells=[]},render:function(){var e=this.dom(),t=this.settings,i=t.configs.columns,s=t.objs.cell,a=t.objs.grid,n=$('<tr class="editor-container" id='+this.domId+"></tr>");e.parent().find("tbody.grid-content-data").append(n),e.remove();for(var r=0,o=i.length;r<o;r++){var d=s.initCell("editor",r,this.editorConfigs);this.cells.push(d)}n=$('<div id="'+a.domId+'-cancel-button" widget="button" class="btn-cancel button-button" text= "Cancel"></div>'),e=$('<div id="'+a.domId+'-save-button" widget="button" class="btn-submit button-button" text= "Save"></div>'),i=this.dom().find("td").eq(0).empty();n.appendTo(i),e.appendTo(i),this.cancelObj=new $.su.widgets.button({id:n}),this.saveObj=new $.su.widgets.button({id:e}),this.cancelObj.render(),this.saveObj.render(),$(t.configs.rowEditor.content).remove(),this.dom().css("display","none")},startEdit:function(e){var t=this.dom(),s=e||"add",a=this.settings.objs.grid,n=a.dom(),r=null;this.getAllFields();for(d.superclass.startEdit.call(this,e),"add"!=s?(r=a.getRow(s))&&(r.dom().addClass("editing"),r.disableRow(s).dom().hide()):r=n.find("tbody.grid-content-data").find("tr.grid-content-tr").eq(0).row(),r&&r.dom?t.insertBefore(r.dom()):t.prependTo(n.find("tbody.grid-content-data")),t.show(),i=0,len=this.widgets.length;i<len;i++){var o=this.widgets[i];this.setWidgetWidth($("#"+o.id),o.name,o.widget)}e=t.height();this.cancelObj.dom().css("top",e),this.saveObj.dom().css("top",e)},completeEdit:function(){var e=this.dom(),t=this.settings,i=t.objs.grid,s=this.getEditingId();d.superclass.completeEdit.call(this),this.isEditing()&&!t.configs.rowEditor.adding&&((s=t.objs.grid.getRow(s)).dom().removeClass("editing"),s.enableRow()),e.hide(),i.updateRowNumber()},cancelEdit:function(){var e=this.dom(),t=this.settings,i=t.objs.grid,s=i.dom(),a=t.configs.rowEditor.editingIndex;d.superclass.cancelEdit.call(this),"add"!==a?((a=t.objs.grid.getRow(a)).dom().removeClass("editing"),a.enableRow()):s.find("tr.grid-content-tr.add").remove(),e.hide(),i.updateRowNumber()},setWidgetWidth:function(e,t,i){for(var s=this.dom(),a=this.settings.configs.columns,n={},r=0,o=a.length;r<o;r++)a[r].dataIndex&&(n[a[r].dataIndex]=a[r].width);"combobox"===i&&(parseInt(s.find("a.combobox-switch").width()),parseInt(s.find("div.widget-error-tips").width()),(i=n[t]-13)<$(e).find(".widget-wrap").outerWidth()&&$(e).find(".widget-wrap").css({"width":i+"px"}))}})}(),function(){var a=$.su.Widget.register("popEditor",{extend:["editor"],settings:{},listeners:[],init:function(e){a.superclass.init.call(this,e),this.cells=[]},render:function(){var s=this,e=this.dom(),t=this.settings,i=(t.configs.columns,t.objs.grid),a=t.configs.popEditor,t=(t.addTitle=a.addTitle||$.su.CHAR.OPERATION.ADD_TITLE,t.editTitle=a.editTitle||$.su.CHAR.OPERATION.EDIT_TITLE,t.addBtnText=a.addBtnText||$.su.CHAR.OPERATION.ADD_DEFAULT,t.editBtnText=a.editBtnText||$.su.CHAR.OPERATION.SAVE_DEFAULT,'<div class="editor-container" id="'+this.domId+'"><div widget="msg" type="window" close-btn="{true}" msg-title="'+(a.addTitle||"")+'" class="editor-container '+a.cls+'" id="'+this.domId+'-msg" title-bar="{true}"'),t=(a.msg&&(t+=' content-scroll="{'+(!1!==a.msg.contentScroll)+'}" dynamic-height="{'+(!1!==a.msg.dynamicHeight)+'}"'),t+="></div></div>",$(t)),n=i.dom().find(".grid-panel-content-container .grid-container"),t=($("#"+this.domId+"-msg").remove(),n.append(t),e.remove(),$("#"+this.domId+"-msg")),n=(t.append($(a.content)),a.customBtns&&t.append($(a.customBtns)),$('<div widget="fieldset" class="inline-container btn-container"></div>').appendTo(t)),e=$('<div id="'+i.domId+'-cancel-button" widget="button" class="btn-cancel button-button" text= "{OPERATION.CANCEL_UPPERCASE}" label-field={false}></div>'),r=$('<div id="'+i.domId+'-save-button" widget="button" class="btn-submit button-button" text= "{OPERATION.SAVE_UPPERCASE}" label-field={false}></div>');e.appendTo(n),r.appendTo(n),(this.btnContainer=new $.su.widgets.fieldset({id:n})).render(),this.containerMsg=new $.su.widgets.msg({id:t,settings:a.msg}),this.cancelObj=new $.su.widgets.button({id:e}),this.saveObj=new $.su.widgets.button({id:r}),this.containerMsg.render(),this.cancelObj.render(),this.saveObj.render(),t.off("ev_msg_close").on("ev_msg_close",function(){var e=s.getEditingId();i.dom().triggerHandler("ev_grid_cancel",[e]),s.cancelEdit()}),this.cancelObj.dom().off("ev_button_click").on("ev_button_click",function(){var e=s.getEditingId();i.dom().triggerHandler("ev_grid_cancel",[e]),s.containerMsg.close(),s.cancelEdit()}),this.saveObj.dom().off("ev_button_click").on("ev_button_click",function(){$(this);var t=s.settings.objs.grid,i=s.getEditingId(),e=$.su.getDefaultEvent(s,function(){var e=$.su.getDefaultEvent(s,function(){s.completeEdit()});t.dom().triggerHandler("ev_grid_save",[e.ev,i]),e.exe()});t.dom().triggerHandler("ev_grid_before_save",[e.ev]),e.exe(),t.dom().triggerHandler("ev_grid_after_save")})},startEdit:function(e){var t=this.dom(),i=this.settings,s=e||"add",e=(i.objs.grid.dom(),this.getAllFields(),a.superclass.startEdit.call(this,e),"add"!=s?(this.saveObj.setText(i.editBtnText),this.containerMsg.setTitle(i.editTitle)):(this.saveObj.setText(i.addBtnText),this.containerMsg.setTitle(i.addTitle)),this.containerMsg.show(),t.height());this.cancelObj.dom().css("top",e),this.saveObj.dom().css("top",e)},completeEdit:function(){var e=this.settings.objs.grid;a.superclass.completeEdit.call(this),this.containerMsg.close(),e.updateRowNumber()},cancelEdit:function(){var e=this.settings.objs.grid;a.superclass.cancelEdit.call(this),e.updateRowNumber()},setTitle:function(e){this.containerMsg.setTitle(e)},getMsgBox:function(){return this.containerMsg},getCancelBtn:function(){return this.cancelObj},getSaveBtn:function(){return this.saveObj},showBtns:function(){this.btnContainer.show()},hideBtns:function(){this.btnContainer.hide()},destroy:function(){var e=$("#"+this.domId+"-msg").data("viewObj");e&&e.destroy()}})}(),$.su.Widget.register("paging",{settings:{numPerPage:{attribute:"num-per-page",defaultValue:6}},listeners:[{selector:"a.paging-btn-num",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var e=t.settings,i=e.objs.grid,s=$(this),a=parseInt(s.attr("data-index"),10),n=e.plugins.editor||e.plugins.rowEditor,i=i.getPlugin("editor")?e.configs.editor:e.configs.rowEditor;s.hasClass("disabled")||(i&&i.editing&&n.cancelEdit(),t.goToPage(a))}},{selector:"a.pageing-btn-prev",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();t.settings.objs.grid;$(this).hasClass("disabled")||t.goFirst()}},{selector:"a.pageing-btn-next",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();t.settings.objs.grid,$(this);$(this).hasClass("disabled")||t.goLast()}}],init:function(e){this.dom();var t=this.settings;this._pageMap={},$.extend(t,e,e.configs.paging)},render:function(){var i=this,e=this.dom(),t=e.parent().find("div.grid-panel-content"),s=(grid=this.settings.objs.grid,this.settings),a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a='<div class="container widget-container paging-container disabled">')+'<div class="paging-wrap">'+'<div class="paging-options inline-block hidden">')+'<div class="paging-info inline-block">'+"<span></span>")+"</div>"+'<div class="paging-select inline-block">')+('<div id="'+this.domId+'_select" label-field="'+$.su.CHAR.COMMON.GRID_PAGING_PER+'" widget="combobox"></div>')+"</div>")+"</div>"+'<div class="paging-btns inline-block">')+'<a href="javascript:void(0);" class="paging-btn pageing-btn-prev" data-index="prev">'+'<span class="icon"></span>')+('<span class="text">'+$.su.CHAR.OPERATION.PREV+"</span>")+"</a>")+'<div class="num-buttons-container">'+"</div>")+'<a href="javascript:void(0);" class="paging-btn pageing-btn-next" data-index="next">'+'<span class="icon"></span>')+('<span class="text">'+$.su.CHAR.OPERATION.NEXT+"</span>")+"</a>")+"</div>"+"</div>")+"</div>"+'<input type="hidden" class="hidden paging-input">';e.append($(a)),t.append(e),this._numSelect=new $.su.widgets.combobox({id:this.domId+"_select"}),this._numSelect.render(),this._numSelect.loadItems(s.items),s.numPerPage=this._numSelect.getValue()||s.numPerPage,s.objs.grid.updateRowNumber(),this._numSelect.dom().on("ev_view_change",function(e,t){i._numSelect.setValue(t.value),s.numPerPage=t.value,i.updateRowPage(grid._keys),i.goToPage(s.currentPage),s.objs.grid.updateRowNumber()})},updateBtns:function(){var e=this.dom(),t=this.settings,i=t.objs.grid,e=e.find("div.paging-btns"),s=e.find("div.num-buttons-container"),a=t.numPerPage,n=t.currentPage,r=t.objs.grid._keys.length,o=Math.ceil(r/a);if(t.totalPage=o,i.dom().find("tr.grid-content-tr").removeClass("hidden"),0==o||1==o)e.addClass("disabled").hide();else{e.removeClass("disabled").show();for(var d="",l=0;l<o;l++)d=(d+='<a href="javascript:void(0);" class="paging-btn paging-btn-num pageing-btn-'+l+'" data-index="'+l+'">')+'<span class="icon"></span><span class="text">'+(l+1)+'</span></a><span class="dots">...</span>'}s.empty().append($(d)),o<n&&(n=t.currentPage=o),this.goToPage(n)},goToPage:function(c){var e=this.dom(),t=this.settings,i=e.find("div.paging-container"),u=t.objs.grid.dom(),s=(t.objs.rows,isNaN(c)?0:c),a=t.numPerPage,n=t.totalPage,h=u.find("tbody.grid-content-data").eq(0),r=t.objs.grid._keys.length,p=(n<=s&&0<n?s=n-1:s<0&&(s=0),0===r?0:s*a+1),a=r<(a=0===r?0:p+a-1)?r:a,o=$.su.CHAR.COMMON.GRID_PAGING_SHOW,d=(o=(o=(o=o.replace("%start",p)).replace("%end",a)).replace("%total",r),e.find(".paging-info span").text(o),i.find("a.paging-btn.pageing-btn-prev")),l=i.find("a.paging-btn.pageing-btn-next"),f=i.find("a.paging-btn-num"),p=i.find("span.dots");if(f.removeClass("current"),p.addClass("hidden"),f.filter("[data-index="+s+"]").addClass("current"),5<n){var a=s-2,r=s+2,e=n-1,g=s+2+(a<0?0-a:e<r?e:0),o=a<0?0:a-(e<r?r-e:0);f.addClass("hidden");for(var v=o;v<=g;v++)f.eq(v).removeClass("hidden")}t.currentPage=s;var m,i=this.getPageKeys();h.children("tr[data-page!="+s+"]").addClass("hidden"),h.children("tr[data-page="+s+"], .grid-content-tr.empty").removeClass("hidden"),u.triggerHandler("ev_store_render_items",[i]),"safari"==$.su.getBrowseVersion().browse&&((m=u.find("table")).css("display","inline-table"),setTimeout(function(){m.css("display","")},0)),setTimeout(function(){n<=5?(d.hide(),l.hide()):(d.show(),l.show()),0===s?(d.addClass("disabled"),l.removeClass("disabled")):n-1<=s?(d.removeClass("disabled"),l.addClass("disabled")):(d.removeClass("disabled"),l.removeClass("disabled"))},180),u.triggerHandler("ev_grid_paging_changed",c)},goPrev:function(){var e=this.settings.currentPage;--e<0||this.goToPage(e)},goNext:function(){var e=this.settings,t=e.currentPage;e.totalPage<=++t||this.goToPage(t)},goFirst:function(){var e=this.settings;e.totalPage;e.currentPage=0,this.goToPage(0)},goLast:function(){var e=this.settings,t=e.totalPage;e.currentPage=1<t?t-1:t,this.goToPage(e.currentPage)},getPageKeys:function(){for(var e=this.settings,t=e.objs.grid,i=t._renderMap,s=t._keys,t=e.numPerPage,e=t*e.currentPage,a=e+t-1,n=[],r=e;r<=a;r++)i[s[r]]||s[r]==undefined||n.push(s[r]);return n},updateRowPage:function(e){for(var t=this,i=this.settings,s=i.objs.grid,a=i.numPerPage,i=s.dom().find("tbody.grid-content-data").eq(0).children("tr"),n=0,r=e.length;n<r;n++){var o=Math.floor(n/a);this._pageMap[e[n]]=o}return i.each(function(){var e=$(this).attr("data-key");$(this).attr("data-page",t._pageMap[e])}),this._pageMap}}),$.su.Widget.register("sorts",{settings:{},listeners:[{selector:function(){return{parent:this.settings.objs.grid.dom(),target:"th.grid-header-other"}},event:"click",callback:function(e,t){var i=$(this).attr("name");t.sortByColumn(i)}}],init:function(e){this.settings=$.extend({},this.settings,{objs:e.objs}),this._sortColumnName=null,this._sortKeys=[]},render:function(){},clearSortStatus:function(){var e=this._sortColumnName,t=this.settings.objs.grid;null!==e&&t.dom().find("div.grid-header-container th.grid-header."+e).removeClass("sort-asc sort-desc")},sortByColumn:function(e){var t=this.settings.objs.grid,i=t.dom().find("div.grid-header-container th.grid-header."+e),s=t.dom().find("tbody.grid-content-data");e===this._sortColumnName?i.hasClass("sort-asc")?(i.removeClass("sort-asc").addClass("sort-desc"),this.sortValue(e,!0)):(i.removeClass("sort-desc").addClass("sort-asc"),this.sortValue(e)):(this.clearSortStatus(),i.addClass("sort-asc"),this.sortValue(e)),this._sortColumnName=e;for(var a=0,n=this._sortKeys.length;a<n;a++)s.append(s.find("tr.grid-content-tr[data-key="+this._sortKeys[a]+"]"))},sortValue:function(e,t){var i,s,a=this.settings.objs.grid,n=this.settings.objs.modelMap,r={},a=0===this._sortKeys.length?a.getKeys():this._sortKeys;for(i in n)n.hasOwnProperty(i)&&(s=n[i].getData()[e],"string"===$.type(s)&&/^\d+$/.test(s)?r[i]=parseInt(s,10):r[i]=s);t?a.sort(function(e,t){return r[e]>r[t]?-1:r[e]<r[t]?1:0}):a.sort(function(e,t){return r[e]<r[t]?-1:r[e]>r[t]?1:0}),this._sortKeys=a}}),$.su.Widget.register("statusBar",{settings:{},listeners:[{selector:function(){return{parent:this.settings.objs.grid.dom(),target:""}},condition:function(e){return!!e.settings.objs.grid.getPlugin("statusBar")},event:"ev_grid_row_clicked ev_grid_row_selected_all ev_grid_row_unselected_all ev_grid_delete",callback:function(e,t,i){i.refreshStatus()}},{selector:function(){return{parent:this.settings.objs.grid.dom(),target:""}},condition:function(e){return!!e.settings.objs.grid.getPlugin("statusBar")},event:"ev_store_bound",callback:function(e,t){t.refreshStatus()}},{selector:function(){return{parent:this.settings.objs.grid.dom(),target:""}},event:"ev_grid_save",callback:function(e,t,i,s){setTimeout(function(){s.refreshStatus()},100)}},{selector:function(){return{parent:this.settings.objs.grid.dom(),target:""}},event:"ev_grid_row_created",callback:function(e,t,i){var s=i.dom();clearTimeout(i._updateTotal),i._updateTotal=setTimeout(function(){s.find("td.grid-status-td span.status-total-num").text(t.length)},100)}},{selector:function(){return{parent:this.settings.objs.grid.dom(),target:""}},event:"ev_grid_check_status",callback:function(e,t){t.refreshStatus()}}],init:function(e){this.settings=$.extend({},this.settings,{objs:e.objs},e.configs.statusBar);this.settings.objs.grid},render:function(){var e=this.dom(),t=this.settings.objs.grid,i=!1!==this.settings.total,s=t.settings.configs.columns,a=this.settings.statusBarText||$.su.CHAR.GRID.TOTAL,n=e.parent().find("div.grid-status-container"),r=(r='<table border="0" cellspacing="0" cellpadding="0">')+'<tr class="status-row">'+('<td class="grid-status-td" colspan="'+(s.length-t.columnOffset)+'">');i&&(r+='<span class="status-total">'+a+': <span class="status-total-num"></span></span>'),e.append(r=(r=r+'<span class="status-selected status-selected-text hidden"><span class="status-selected-num"></span></span>'+"</td>")+"</tr>"+"</table>").addClass("grid-status-bar-container"),n.removeClass("hidden").append(e),e.find("td.grid-status-td span.status-total-num").text(this.settings.objs.rows.length)},refreshStatus:function(){var e=this.dom(),t=this.settings.objs.grid,i=t.getSelected(),s=t._keys.length;t.getPlugin("paging");0<i.length?(1==i.length?e.find("td.grid-status-td span.status-selected-num").text($.su.CHAR.GRID.SELECTED_ONE):e.find("td.grid-status-td span.status-selected-num").text($.su.CHAR.GRID.SELECTED.replace("%n%",i.length)),e.find("td.grid-status-td span.status-selected").show()):e.find("td.grid-status-td span.status-selected").hide(),this.toolEnable&&(0<i.length?e.find("td.grid-status-td span.status-btns").show():(i=$.su.getDefaultEvent(this,function(){e.find("td.grid-status-td span.status-btns").hide()}),t.dom().triggerHandler("ev_grid_tool_status_hide",[i.ev]),i.exe())),e.find("td.grid-status-td span.status-total-num").text(s)}}),$.su.Widget.register("maxLimit",{settings:{},listeners:[],init:function(e){this.limit=0,this.settings=$.extend({},this.settings,{objs:e.objs},e.configs.maxLimit)},render:function(){var e=this.dom(),t=(this.settings.objs.grid,e.parent().find("div.grid-limit-container")),i="<span>"+$.su.CHAR.GRID.MAX_LIMIT+': <span class="limit-num"></span></span>';e.append(i).addClass("grid-limit-bar-container"),t.removeClass("hidden").append(e)},setLimit:function(e){return"number"===$.type(e)&&(this.limit=e,this.dom().find(".limit-num").text(e),!0)},getLimit:function(){return this.limit}}),$.su.Widget.register("msg",{settings:{type:{attribute:"type",defaultValue:"prompt"},_title:{attribute:"msg-title",defaultValue:""},autoshow:{attribute:"autoshow",defaultValue:!1},autoAdapt:{attribute:"auto-adapt",defaultValue:!0},zIndex:{attribute:"z-index",defaultValue:"auto"},contentScrollX:{attribute:"content-scroll-x",defaultValue:!0},contentScroll:{attribute:"content-scroll",defaultValue:!0},dynamicHeight:{attribute:"dynamic-height",defaultValue:!0},mask:{attribute:"mask",defaultValue:!0},msg:{attribute:"msg",defaultValue:""},htmlLoader:{attribute:"html-loader",defaultValue:!1},callback:{attribute:"callback",defaultValue:null},titleBar:{attribute:"title-bar",defaultValue:!0},closeBtn:{attribute:"close-btn",defaultValue:!0},okText:{attribute:"ok-text",defaultValue:$.su.CHAR.OPERATION.OK},yesText:{attribute:"yes-text",defaultValue:$.su.CHAR.OPERATION.YES_UPPERCASE},noText:{attribute:"no-text",defaultValue:$.su.CHAR.OPERATION.NO_UPPERCASE},cancelText:{attribute:"cancel-text",defaultValue:$.su.CHAR.OPERATION.CANCEL_UPPERCASE}},listeners:[{selector:"a.msg-close",event:"click",callback:function(e,t){e.preventDefault(),t.close(),t.dom().triggerHandler("ev_msg_close")}},{selector:"div.btn-msg-ok",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();e=$.su.getDefaultEvent(t,t.close);t.dom().triggerHandler("ev_msg_ok",[e.ev]),e.exe()}},{selector:"div.btn-msg-no",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();e=$.su.getDefaultEvent(t,t.close);t.dom().triggerHandler("ev_msg_no",[e.ev]),e.exe()}},{selector:"div.btn-msg-cancel",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();e=$.su.getDefaultEvent(t,t.close);t.dom().triggerHandler("ev_msg_cancel",[e.ev]),e.exe()}},{selector:".msg-title",event:"mousedown",callback:function(e,i){var e=e||event,s=(i.distanceX=e.clientX-$(this).offset().left,i.distanceY=e.clientY-$(this).offset().top,i.drag=!0,$(window).innerWidth()),a=$(window).innerHeight(),n=i.dom().outerWidth(),r=i.dom().outerHeight();function t(e){var t;if(!1!==i.drag)return $.su.isIe&&(e.clientX>=s-10||e.clientX<10||e.clientY>=a-10||e.clientY<10)&&o(),e=e||event,t=e.clientX-i.distanceX,e=e.clientY-i.distanceY,t<=0?t=0:s-n<=t&&(t=s-n),e<=0?e=0:a-r<=e&&(e=a-r),i.dom().css({top:e+"px",left:t+"px"}),!1}function o(e){return $(document).off("mouseup",o).off("mousemove",t),!1}return $(document).on("mousemove",t).on("mouseup",o),!1}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=(e.addClass(t.cls+" msg-container "+t.type),"ios"===$.su.platform&&e.addClass("ios"),""),s=(i+='<div class="msg-wrap">',t.closeBtn&&(i+='<a class="widget-close msg-close" href="javascript:void(0);"></a>'),i+='<div class="msg-content-wrap">',t._title||""),s=(t.titleBar&&(i=(i+='<h3 class="widget-title msg-title">')+'<span class="msg-title-container">'+s+"</span></h3>"),t.msg||""),s=(i=i+('<div class="widget-content msg-content-container">'+s+"</div>")+"</div>",t.type),a='<div widget="button" id="'+this.domId+'-btn-ok" class="btn-msg-ok" label-field="{false}" text="'+t.okText+'"></div>',n='<div widget="button" id="'+this.domId+'-btn-no" class="btn-msg-no" label-field="{false}" text="'+t.noText+'"></div>',r='<div widget="button" id="'+this.domId+'-btn-ok" class="btn-msg-ok" label-field="{false}" text="'+t.yesText+'"></div>',o='<div widget="button" id="'+this.domId+'-btn-cancel" class="btn-msg-cancel" label-field="{false}" text="'+t.cancelText+'"></div>';switch(s){case"alert":i=(i=(i=(i+='<div class="msg-btn-container">')+'<div class="msg-btn-wrap">'+'<div class="button-container inline-block">')+a+"</div>")+"</div>"+"</div>";break;case"confirm":i=(i=(i=(i=(i=i+'<div class="msg-btn-container">'+'<div class="msg-btn-wrap">')+'<div class="button-container inline-block">'+n)+"</div>"+'<div class="button-container inline-block">')+r+"</div>")+"</div>"+"</div>";break;case"prompt":i=(i=(i=(i=(i=i+'<div class="button-container msg-btn-container">'+'<div class="msg-btn-wrap">')+'<div class="button-container inline-block">'+o)+"</div>"+'<div class="button-container inline-block">')+a+"</div>")+"</div>"+"</div>";break;case"show":i=(i=(i=(i=(i=(i=(i+='<div class="button-container msg-btn-container">')+'<div class="msg-btn-wrap">'+'<div class="button-container inline-block">')+o+"</div>")+'<div class="button-container inline-block">'+n)+"</div>"+'<div class="button-container inline-block">')+r+"</div>")+"</div>"+"</div>";break;case"window":break;default:t.buttons}i='<div class="position-top-left"></div>'+(i='<div class="position-top-center"></div>'+(i='<div class="position-top-right"></div>'+(i='<div class="position-center-left">'+(i='<div class="position-center-right">'+(i+="</div>")+"</div>")+"</div>")));for(var i=(i+='<div class="position-bottom-left"></div>')+'<div class="position-bottom-center"></div>'+'<div class="position-bottom-right"></div>',s=$("div#msg-boxs-container"),d=(0==s.length&&(s=$('<div id="msg-boxs-container" class="msg-boxs-container"></div>'),$("body").append(s)),s.append(e),e.append($(i)).css({"z-index":"auto"==t.zIndex?undefined:t.zIndex,"display":"none"}),t.autoshow&&this.show(),e.find(".msg-btn-container").find("div[widget=button]")),l=0,c=d.length;l<c;l++)new $.su.widgets.button({id:$(d[l])}).render();0<e.children("div[widget]").length&&e.children("div[widget]").appendTo(e.find("div.msg-content-container"))},show:function(e){var t=this.dom(),i=this.settings,s=this.getContainer(),t=$(t.find("div.msg-content-wrap .msg-content-container").children().get(0)),a=$(window).height();$(window).width();"s"!==$.su.widgetSize&&!0===i.dynamicHeight&&0!==t.length&&t.css({"max-height":a-300}),i.contentScroll&&0!==t.length&&(t.addClass("scroll"),$.su.scrollbar({ele:t[0]},function(e){e.update()})),i.mask&&!i.shown&&this.getMask().show(this.domId),s.css({"top":-9999,"left":-9999,"opacity":0,"filter":"alpha(opacity=0)"}),s.show(),this.setPosition("center","center"),i.shown=!0,s.hide(),s.css({"opacity":1,"filter":"alpha(opacity=100)"}),s.fadeIn(200),$.isFunction(e)&&e()},close:function(e,t){var i=this.dom(),s=this.settings,a=this.getContainer(),n="function"===$.type(e)?e:null,e="boolean"===$.type(e)?e:"boolean"===$.type(t)&&t;if(s.shown)return s.mask&&this.getMask().hide(this.domId),e?a.finish().fadeOut(200,function(){s.shown=!1,i.remove()}):a.finish().fadeOut(200,function(){s.shown=!1,a.css({"display":"none","opacity":0,"filter":"alpha(opacity=0)"})}),this.setNormal(),n?n.call(this,this):void 0},hide:function(){var e=this.settings,t=this.getContainer();e.shown=!1,t.finish().css({"display":"none","opacity":0,"filter":"alpha(opacity=0)"}),e.mask&&this.getMask().hide(this.domId),this.setNormal()},setTitle:function(e){var t=this.dom(),i=this.settings;e!==undefined&&(i._title=e,t.find("span.msg-title-container").text(e))},setContent:function(e){var t=this.dom();e&&t.find("div.msg-content-container").html(e)},setButtonText:function(e,t){var i=this.dom();switch(e){case"yes":case"ok":i.find(".btn-msg-ok").data("viewObj").setText(t);break;case"no":i.find(".btn-msg-no").data("viewObj").setText(t);break;case"cancel":i.find(".btn-msg-cancel").data("viewObj").setText(t)}},showButtons:function(){this.dom().find("div.msg-btn-container").fadeIn(150)},hideButtons:function(){this.dom().find("div.msg-btn-container").css("display","none")},disableButton:function(e){var t=this.dom();switch(e){case"yes":case"ok":t.find(".btn-msg-ok").data("viewObj").disable();break;case"no":t.find(".btn-msg-no").data("viewObj").disable();break;case"cancel":t.find(".btn-msg-cancel").data("viewObj").disable()}},enableButton:function(e){var t=this.dom();switch(e){case"yes":case"ok":t.find(".btn-msg-ok").data("viewObj").enable();break;case"no":t.find(".btn-msg-no").data("viewObj").enable();break;case"cancel":t.find(".btn-msg-cancel").data("viewObj").enable()}},destroy:function(){var e=this.dom(),t=this.settings;t.mask&&t.shown&&this.getMask().hide(this.domId),e.remove()},setNormal:function(){this.dom().find("div[widget]").each(function(e,t){t=$(t).data("viewObj");t&&t.setNormal&&t.setNormal()})}}),$.su.Widget.register("noticeBar",{settings:{buttonType:{attribute:"button-type",defaultValue:"save"},noticeText:{attribute:"notice-text",defaultValue:""}},listeners:[{selector:".button-button",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();$(this).attr("data-type");e=$.su.getDefaultEvent(t,t.hide);t.dom().triggerHandler("ev_notice_action",[e.ev]),e.exe()}}],init:function(){this.callback={}},render:function(){var e=this.dom(),t=this.settings;t.btnMap={"save":{id:"noticeSave",text:$.su.CHAR.OPERATION.SAVE},"cancel":{id:"noticeCancel",text:$.su.CHAR.OPERATION.CANCEL},"close":{id:"noticeClose",text:$.su.CHAR.OPERATION.CLOSED}},e.addClass(t.cls+"notice-bar-container"),e.css({"display":"none"});var i=(i="")+'<div class="notice-text-wrap"><span class="notice-text">'+t.noticeText+"</span>";e.append(i=(i+="</div>")+'<div class="notice-buttons-wrap">'+"</div>"),this.btnType=t.buttonType.split(" "),this.initButton()},initButton:function(){var e=this.dom(),t=this.settings.btnMap,i=this.btnType,s=i.length,a=e.find(".notice-buttons-wrap").eq(0);a.empty();for(var n=0;n<s;n++){var r=i[n];t[r]&&(r=$('<div widget="button" text="'+t[r].text+'" id="'+t[r].id+'" data-type="'+r+'" class="button-button"></div>'),a.append(r),new $.su.widgets.button({id:r}).render())}},show:function(){this.dom().stop(!0).slideDown(300)},hide:function(){this.dom().stop(!0).slideUp(300)},setText:function(e,t){var i=this.dom(),s=this.btnType.length;if("string"==typeof e&&i.find("span.notice-text").text(e),"object"===$.type(t)){for(var a in this.btnType.splice(0,s),t)t.hasOwnProperty(a)&&(this.btnType.push(a),this.callback[a]=t[a]);this.initButton()}}}),$.su.Widget.register("navigator",{settings:{items:{attribute:"items",defaultValue:null},itemWidget:{attribute:"item-widget",defaultValue:null},bubbleEvent:{attribute:"bubble",defaultValue:!1},level:{attribute:"level",defaultValue:null}},listeners:[{selector:"li.navigator-li-effective",event:"click",callback:function(e,t){var i=this.getAttribute("navi-value");t.dom().triggerHandler("ev_navigator_clicked",[i]),e.stopPropagation()}}],init:function(){},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+"navigator-container");e.empty().append('<div class="widget-wrap-outer navigator-wrap-outer su-scroll"><div class="widget-wrap navigator-wrap"></div></div>'),this.loadItems(t.items)},createNavi:function(e,t){for(var i="navigator-ul",s=(i+=" navigator-ul-level"+t,1<t&&(i+=" navigator-ul-sub"),'<ul class="'+i+'">'),a=0;a<e.length;a++){var n=e[a];s+=this.createNaviItem(n,t)}return s+="</ul>"},createNaviItem:function(e,t){var i='<li navi-value="'+e.name+'" class="navigator-li navigator-li-level'+t+" "+(e.children?" has-sub-navi":" navigator-li-effective")+(e.cls?" "+e.cls:"")+'">',i=(i=(i+='<a href="javascript:void(0)">')+'<span class="sub-navigator-icon"></span>'+('<span class="sub-navigator-text">'+e.text+"</span>"))+'<span class="sub-navigator-icon-after"></span>'+"</a>";return e.children&&(!this.settings.level||t<this.settings.level)&&(i+=this.createNavi(e.children,t+1)),i+="</li>"},loadItems:function(e){var t=this.dom(),i=this.settings,e=(i.items=e,"");i.items&&0<i.items.length&&(e+=this.createNavi(i.items,1)),t.find(".navigator-wrap").empty().append(e)},showToggle:function(){this.dom().toggleClass("show")},find:function(e){return this.dom().find("li.navigator-li[navi-value="+e+"]")},hasChildren:function(e){return 0<this.find(e).find("li.navigator-li").length},select:function(e){this.find(e).addClass("selected")},isSelected:function(e){return this.find(e).hasClass("selected")},unSelect:function(e){this.find(e).removeClass("selected")},unSelectAll:function(){this.dom().find("li.navigator-li.selected").removeClass("selected")},open:function(e){this.find(e).addClass("opened")},close:function(e){this.find(e).removeClass("opened")},toggleOpen:function(e){this.find(e).toggleClass("opened")},closeAll:function(){this.dom().find("li.navigator-li.opened").removeClass("opened")}}),$.su.Widget.register("panel",{settings:{_title:{attribute:"title-label",defaultValue:""},instruction:{attribute:"instruction",defaultValue:""},icon:{attribute:"icon",defaultValue:""},iconCls:{attribute:"icon-cls",defaultValue:""},panelType:{attribute:"panel-type",defaultValue:"form"},collapsible:{attribute:"collapsible",defaultValue:!1},collapsed:{attribute:"collapsed",defaultValue:!1}},listeners:[{selector:function(e){return{parent:this.getContainer().find(".panel-title:first")}},event:"click",callback:function(e,t){var i,s=$(this).find("span.panel-header-btn-collapse"),a=t.settings;a.collapsible&&(t=t.getContainer(),i=t.find("div.panel-content"),a.collapsed?(i.slideDown(200,function(){i.css("display","block")}),t.removeClass("collapsed"),a.collapsed=!1,s.closest("div[widget=panel]").triggerHandler("ev_panel_open")):(i.slideUp(200,function(){$(this).css("display","none")}),t.addClass("collapsed"),a.collapsed=!0,s.closest("div[widget=panel]").triggerHandler("ev_panel_close")))}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=!t.collapsible||!1===t.collapsed?"block":"none",s=t.collapsed?" collapsed":"",s=(e.addClass(t.cls+"panel-container "+t.panelType+s),""),t=(s=s+'<div class="panel-wrap-before"></div>'+'<div class="panel-wrap">',!1!==t._title&&(s=(s+='<div class="panel-header"><h3 class="panel-title">')+'<span class="panel-title-icon"></span><span class="panel-title-text">'+t._title+"</span>","string"===$.type(t.instruction)&&""!==t.instruction&&(s+='<div class="panel-title-instruction">'+t.instruction+"</div>"),s+='<div class="panel-header-btn-container">',t.collapsible&&(s+='<span class="panel-header-btn-collapse" type="button"></span>'),s+="</div></h3></div>"),s=(s=(s=(s+='<div class="panel-content" style="display: '+i+'">')+'<div class="panel-tbar-container"></div>'+'<div class="panel-content-container"></div>')+'<div class="panel-fbar-container"></div>'+"</div>")+"</div>"+'<div class="panel-wrap-after"></div>',$(s));0<e.find("div.panel-content-container").length?(t.find("div.panel-content-container").append(e.find("div.panel-content-container").children().detach()),e.find(".panel-wrap").remove()):t.find("div.panel-content-container").append(e.children().detach()),e.append(t)},setTitle:function(e){var t=this.getContainer();e&&t.children(".panel-wrap").children(".panel-header").find("h3.panel-title span.panel-title-text").html(e)},setInstruction:function(e){var t=this.getContainer();e?(t.find("h3.panel-title div.panel-title-instruction").show(),t.find("h3.panel-title div.panel-title-instruction").html(e)):t.find("h3.panel-title div.panel-title-instruction").hide()},open:function(){var e=this.settings,t=this.getContainer(),i=t.find("div.panel-content");t.find("span.panel-header-btn-collapse");i.slideDown(200,function(){i.css("display","block"),t.removeClass("collapsed")}),e.collapsed=!1,this.dom().triggerHandler("ev_panel_open")},isOpen:function(){return!this.getContainer().hasClass("collapsed")},hideTitle:function(){var e=this.getContainer(),t=e.find("div.panel-header"),e=e.find("div.panel-content");t.hide(),e.css("padding-top",0)}}),$.su.Widget.register("htmlLoader",{settings:{},init:function(){},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+"html-loader-container")},load:function(e,t){var i=this.getContainer();i&&("object"===$.type(e)?i.append(e):"string"===$.type(e)&&i.html(e),t&&t())},unload:function(){}}),$.su.Widget.register("mask",{settings:{},init:function(){},render:function(){this.dom().addClass("mask"),this.useMap={},this.hide()},show:function(e){var t=this.dom();e&&!this.useMap.hasOwnProperty(e)&&(this.useMap[e]=!0,t.show().addClass(e),this.resetZIndex())},hide:function(e){var t=this.dom();!1===e?t.hide().removeClass().addClass("mask"):(this.useMap.hasOwnProperty(e)&&(delete this.useMap[e],t.removeClass(e)),this.resetZIndex(),this.checkUse()||t.hide())},resetZIndex:function(){var e,t,i=0,s=!1;for(e in this.useMap)this.useMap.hasOwnProperty(e)&&(s=!0,i<(t=parseInt($("#"+e).css("zIndex")))&&(i=t));s&&0!=i||(i=998),_this=this.dom().css({zIndex:i})},checkUse:function(){for(var e in this.useMap)if(this.useMap.hasOwnProperty(e))return!0;return!1}}),$.su.Widget.register("loading",{settings:{firstLoading:{attribute:"first-loading",defaultValue:!1}},init:function(){},render:function(){var e,t=this.dom(),i=this.settings;!1===i.firstLoading?(e='<div class="loading-container-wrap">',e+='<div class="loading-container-inner"><div class="loading-waiting-icon"></div></div></div>'):!0===i.firstLoading&&(e='<div class="first-loading">',e=(e=(e+='<div class="loading-spinner-icon"></div>')+'<div class="loading-text">'+$.su.SMB_CHAR.TIP.LOADING+"</div><br />")+'<div class="loading-text">'+$.su.SMB_CHAR.TIP.WEB_BROWSER+"</div></div>"),t.addClass("loading-container").append(e),this.useMap={},this.hide()},show:function(){var e=this.dom();this.getMask().show(this.domId),e.show()},hide:function(){var e=this.dom();this.getMask().hide(this.domId),e.hide()}}),$.su.Widget.register("echart",{settings:{type:{attribute:"type",defaultValue:"line"},width:{attribute:"width",defaultValue:480},height:{attribute:"height",defaultValue:280},autoResize:{attribute:"auto-resize",defaultValue:!1},chartConfigs:{attribute:"echartConfigs",defaultValue:{title:{text:"",subtext:"",x:30,y:20,textStyle:{fontSize:14}},legend:{data:[]},tooltip:{trigger:"axis"},toolbox:{show:!1},calculable:!1,xAxis:[{axisLine:{lineStyle:{color:"#222",width:1,type:"solid"},onZero:!1},axisTick:{show:!1},splitLine:{show:!0},type:"category",boundaryGap:!1,data:[]}],yAxis:[{axisLine:{lineStyle:{color:"#555",width:1,type:"solid"}},axisTick:{show:!1},type:"value",axisLabel:{formatter:"{value}"}}],series:[],animation:!1}}},listeners:[{selector:function(){return{parent:window}},event:"resize",condition:function(e){return!0===e.settings.autoResize},callback:function(e,t){t.resize()}}],init:function(){},destroy:function(){this.echart&&this.echart.clear(),this._isDestroyed=!0},render:function(e){var t=this,i=this.dom(),s=this.settings,a=(i.addClass(s.cls+"chart-container"),""),n=(a+'<div class="chart-before">'+"</div>"+'<div class="chart-area">'+'<div class="chart-scale"></div>'+'<div class="chart-canvas"></div>'+"</div>"+'<div class="chart-after">'+"</div>",i.append('<div class="chart-before"></div><div class="chart-area"><div class="chart-scale"></div><div class="chart-canvas"></div></div><div class="chart-after"></div>'),$.Deferred());return window.echarts===undefined?$.su.router.loadFile("js/libs/echarts.min.js?t=29dee038",function(){if(t._isDestroyed)return n.resolve();r(),n.resolve()}):window.echarts&&(r(),n.resolve()),n.promise();function r(){"line"===s.type?t.initLine():"pie"===s.type?t.initPie():"gauge"===s.type&&t.initGauge(),t.resize("100%"==s.width?i.parent().width():s.width,"100%"==s.height?i.parent().height():s.height)}},reCreateCanvas:function(){var e=this.dom(),t=this.settings;e.find("div.chart-canvas").empty(),t.canvas=document.createElement("canvas"),t.canvas.width=t.width,t.canvas.height=t.height,e.find("div.chart-canvas").append(t.canvas),window.G_vmlCanvasManager&&(t.canvas=window.G_vmlCanvasManager.initElement(t.canvas)),this.ctx=t.canvas.getContext("2d")},resize:function(e,t){var i=this.dom();e=e||i.parent().width(),t=t||i.parent().height(),i.find(".chart-canvas").css({width:e,height:t}),this.echart.resize()},initLine:function(){for(var e=this.dom(),t=this.settings.chartConfigs,i=t.xAxis[0].data.length,s=0,a=t.series.length;s<a;s++){var n=t.series[s];n.data=this.adjustDataLength(i,n.data)}this.echart=echarts.init(e.find(".chart-canvas").get(0))},initPie:function(){var e=this.dom();this.settings;this.echart=echarts.init(e.find(".chart-canvas").get(0))},initGauge:function(){var e=this.dom();this.settings;this.echart=echarts.init(e.find(".chart-canvas").get(0))},adjustDataLength:function(e,t){if(t.length>e)t.length=e;else if(t.length<e)for(;t.length<e;)t.push("-");return t},addData:function(e){for(var t=this.echart.getOption().series,i=e.length,s=0;s<i;s++){var a=e[s],n=t[a.seriesIndex].data,r=a.dataIndex;r>n.length-1?(n.shift(),n.push(a.data)):n[r]=a.data}this.echart.setOption({series:t})},setSeries:function(e){for(var t=this.echart.getOption().xAxis[0].data.length,i=0,s=e.length;i<s;i++)e[i].data=this.adjustDataLength(t,e[i].data);this.echart.setOption({series:e},!1)},setOption:function(e,t){var i=this.settings;if((e=(t=t!==undefined&&t)?$.extend(!0,{},i.chartConfigs,e):e).xAxis){var s=e.xAxis[0].data.length;e.series=e.series||[];for(var a=0,n=i.chartConfigs.series.length;a<n;a++){var r=e.series[a]=e.series[a]||{};r.data=this.adjustDataLength(s,r.data||[])}}this.echart.setOption(e,t)},setPieOption:function(e,t){this.settings;this.echart.setOption(e,t)},setGaugeOption:function(e,t){this.echart.setOption(e,t)}}),$.su.Widget.register("accordion",{settings:{},listeners:[{selector:".accordion-header",event:"click",callback:function(e,t){var i,e=$(e.target).parent(".accordion-header").parent(".accordion-item"),s=t.dom();if(!0===s.data("conflict"))for(var a=s.find(".accordion-item.accordion-item-wrap"),n=0,r=a.length;n<r;n++)if(!$(a[n]).hasClass("collapsed")){i=$(a[n]);break}e.hasClass("collapsed")?(t.expandItem(e),i&&t.collapseItem(i)):t.collapseItem(e),0<t.dom().parents(".msg-container").length&&setTimeout(function(){$(window).trigger("resize")},201)}}],init:function(){},render:function(){for(var e=this.dom(),t=this.settings,i=(e.addClass(t.cls+"accordion-container"),e.find(".accordion-item")),s="",a=(s+='<div class="accordion-wrap">',0),n=i.length;a<n;a++)var r=$.su.getAttrObject($.su.CHAR,$(i[a]).data("title")),o=!1!==$(i[a]).data("collapsed"),d=$(i[a]).data("name")||"accordion-name",s=(s=(s=(s+=o?'<div class="accordion-item accordion-item-wrap collapsed" data-name="'+d+'">':'<div class="accordion-item accordion-item-wrap" data-name="'+d+'">')+'<div class="accordion-header">'+'<span class="accordion-icon"></span>')+('<span class="accordion-title">'+r+"</span>")+"</div>")+'<div class="accordion-body"></div>'+"</div>";s+="</div>";for(var l=$(s),a=0;a<n;a++)$(l.find(".accordion-body")[a]).append(i[a]);e.append(l)},collapseItem:function(e,t){var i;e&&(t=t===undefined?200:t,i=e.find(".accordion-body"),e.hasClass("collapsed")||i.slideUp(t,function(){e.addClass("collapsed")}))},expandItem:function(e,t){var i;e&&(t=t===undefined?200:t,i=e.find(".accordion-body"),e.hasClass("collapsed")&&i.slideDown(t,function(){e.removeClass("collapsed")}))},reSet:function(){for(var e=this.dom().find(".accordion-item.accordion-item-wrap"),t=0,i=e.length;t<i;t++){var s=$(e[t]);0===t?this.expandItem(s,0):this.collapseItem(s,0)}},"goto":function(e){if(e)for(var t=this.dom().find(".accordion-item.accordion-item-wrap"),i=0,s=t.length;i<s;i++){var a=$(t[i]);e===a.data("name")?this.expandItem(a,0):this.collapseItem(a,0)}}});var Notes=$.su.Widget.register("notes",{settings:{title:{attribute:"title",defaultValue:""},autoIndex:{attribute:"autoIndex",defaultValue:!0},items:{attribute:"items",defaultValue:null}},listeners:[],init:function(){},render:function(){this.element=this.dom(),this.element.addClass("notes-ctn").empty(),this.settings.title=this.settings.title||$.su.CHAR.COMMON.NOTE+":",this.element.append('<div class="notes-title">'+this.settings.title+"</div>"),this.element.append(this.createListItem(this.settings.items))},createListItem:function(e){if(e&&$.isArray(e)){for(var t,i='<ul class="notes-ul">',s=1,a=0,n=e.length;a<n;a++)(t="")!=(t=$.isFunction(e[a].renderer)?e[a].renderer(e[a].text):e[a].text)&&(!0===this.settings.autoIndex&&(t='<span class="notes-index">'+s+'.</span> <span class="notes-content">'+t+"</span>",s++),i=(i+='<li class="notes-li">')+t+"</li>");return i+="</ul>"}}});jQuery,$.su.Widget.register("toast",{settings:{noticeText:{attribute:"notice-text",defaultValue:""},showTime:{attribute:"show-time",defaultValue:3e3},fadeTime:{attribute:"fade-time",defaultValue:300}},listeners:[{selector:"div.close",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation(),t.hide()}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=(e.addClass(t.cls+" notice-bar-container"),e.css({"display":"none"}),""),i=(i=(i+='<div class="img-wrap">')+'<span class="icon"></span>'+"</div>")+'<div class="text-wrap">'+('<span class="text">'+t.noticeText+"</span>");e.append(i=(i+="</div>")+'<div class="close">'+"</div>")},show:function(e,t,i){var s=this.dom(),a=this,n=this.settings,t=(s.removeClass("success fail other"),t?1==t?s.addClass("fail"):2==t&&s.addClass("other"):s.addClass("success"),e&&this.setText(e),n.timerFlag&&clearTimeout(n.timer),this.dom().fadeIn(n.fadeTime),"number"==typeof i?i:n.showTime);this.settings.timer=setTimeout(function(){a.hide()},t),n.timerFlag=!0,this.setPosition("center","auto",null,68)},hide:function(e){this.dom();this.dom().stop(!0).fadeOut(e?0:this.settings.fadeTime),this.settings.timerFlag=!1},setText:function(e){"string"==typeof e&&this.dom().find("span.text").text(e)}}),$.su.Widget.register("img",{settings:{imgSrc:{attribute:"img-src",defaultValue:""},alt:{attribute:"alt",defaultValue:""}},listeners:[],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=$.su.getAttrObject($.su.imgSrc,t["img-src"]),s=(e.addClass("img-container"),"");s+='<img src="'+i+'" alt="'+t.alt+'"/>',e.append(s)}}),function(i){i.su.Widget.register("repeatItem",{extend:"form",remove:function(){var e=this.dom();e.find("[widget]").each(function(e,t){t=i(t).data("viewObj");t&&t._destroy()}),e.remove(),this.settings=null,this._view&&this._view.removeChildWidget(this)}})}(jQuery),function(g){g.su.Widget.register("repeat",{settings:{items:{attribute:"items",defaultValue:[]},itemWidget:{attribute:"item-widget",defaultValue:null},itemDom:{attribute:"item-dom",defaultValue:null},itemDataLoader:{attribute:"item-data-loader",defaultValue:"loadData"},autoRenderAllItems:{defaultValue:!0},itemCls:{attribute:"item-cls",defaultValue:""}},init:function(){this.repeatId=g.su.randomId("repeat-"),this._keys=[],this._renderedItems=[]},render:function(){var i,e=this.dom(),t=this.settings;e.addClass("repeat-container"),t.itemWidget||t.itemRender||(e.wrapInner(function(){return'<div class="repeat-item '+t.itemCls+'"></div>'}),this.initItem=e.find(".repeat-item"),this.itemModel=this.initItem.clone(),i=[],this.initItem.find("[widget]").each(function(e,t){i.push(g(t).data("viewObj"))}),g.each(i,function(e,t){t._destroy()}),this.initItem.detach())},clearItems:function(){},syncData:function(e,t){this._keys=e,g.each(this._renderedItems,function(e,t){t.obj.dom().remove()}),this.dom().empty(),this._renderedItems=[],this.settings.autoRenderAllItems&&this.dom().triggerHandler("ev_store_render_items",[e])},setItemRender:function(e){this.settings.itemRender=e},renderModels:function(e,t,i){var c=this,s=this.dom(),a=this.settings,u=a.itemWidget;s.attr("tagName");if(u){var n=s.clone(!1),h=a.itemDataLoader;n.removeAttr("id"),n.removeAttr("item-Widget"),n.removeAttr("item-dom"),n.removeAttr("item-data-loader"),n.removeAttr("data-bind"),n.removeClass("repeat-container"),n.attr("widget",u),n.attr("repeat-id",this.repeatId);for(var r=0;r<t.length;r++){var p=t[r].getData();(d=n.clone(!1)).attr("id",g.su.randomId("widget-")),s.append(d),(l=new g.su.widgets[u]({id:d,view:c._view})).render(),h&&l[h](p),this._renderedItems.push({key:t[r][e].getValue(),obj:l})}i&&i(this._renderedItems)}else if(a.itemRender){for(r=0;r<t.length;r++){var p=t[r].getData(),f=t[r][e].getValue(),o=a.itemRender.call(this,f,p),o=g(o),o=(o.on("click",function(e,t){return function(){s.trigger("ev_item_click",[e,t])}}(f,p)),s.append(o),new g.su.widgets.repeatItem({id:o}));o.render(),this._renderedItems.push({key:f,obj:o})}i&&i(this._renderedItems)}else{for(r=0;r<t.length;r++){(d=this.itemModel.clone(!1)).attr("id",g.su.randomId("widget-")),d.find("[id]").each(function(e,t){g(t).attr("id",g.su.randomId("widget-"))}),s.append(d);var d,l=new g.su.widgets.repeatItem({id:d});d.find("[widget]").each(function(e,t){var t=g(t),i=t.attr("widget");new g.su.widgets[i]({id:t,view:c._view}).render()}),l.render(),this._renderedItems.push({key:t[r][e].getValue(),obj:l})}i&&i(this._renderedItems)}},remove:function(e){var t,i,s=this._renderedItems;if(e)for(t=s.length-1;0<=t;t--)s[t].key===e&&(s[t].obj._destroy(),s.splice(t,1));else{for(t=0,i=s.length;t<i;t++)s[t].obj._destroy();s.length=0}},each:function(e){for(var t=0;t<this._renderedItems.length;t++)if(!1===e(this._renderedItems[t]))return},find:function(e){var t=[];if("function"!=typeof e)return!1;for(var i=0;i<this._renderedItems.length;i++){var s=this._renderedItems[i].obj;e(s)&&t.push(s)}return t}})}(jQuery),function(c){c.su.Widget.register("devicesList",{settings:{multiselect:{attribute:"multiselect",defaultValue:!1},maxLine:{attribute:"max-line",defaultValue:4},scroll:{attribute:"scroll",defaultValue:!1},pagination:{attribute:"pagination",defaultValue:!0},numPerPage:{attribute:"num-per-page",defaultValue:8}},listeners:[{selector:".devicesList-item-container",event:"click",callback:function(e,t){e.stopPropagation();var i=c(this).data("viewObj");if(!i._status.disabled){var s=i._relatedData,i=t.dom();if(t.settings.multiselect){var a=c(this).find(".devicesList-item-checkbox[widget=checkbox]").data("viewObj"),e=e.target||e.srcElement,e=c(e).closest(".devicesList-item-checkbox[widget=checkbox]"),n=!a._status.checked,r=(0<e.size()&&(n=!n),t._selectedData);if(n)a.setValue(!0),r.push(s),c(this).addClass("item-selected"),i.triggerHandler("ev_item_select",s.key);else{a.setValue(!1);for(var o=0,d=r.length;o<d;o++)if(s.key==r[o].key){r.splice(o,1);break}c(this).removeClass("item-selected"),i.triggerHandler("ev_item_deselect",s.key)}}else{t._selectedData[0]=s;e=t.getSelected();i.triggerHandler("ev_item_click",e),c(this).closest("[widget=devicesList]").find(".item-selected").removeClass("item-selected"),c(this).addClass("item-selected")}}}},{selector:".devicesList-paging-container .paging-btn",event:"click",callback:function(e,t){var i=t.dom().find(".devicesList-item-container"),s=parseInt(c(this).text()),a=t.settings.numPerPage,n=t.dom().find(".paging-btn-num");i.hide(),isNaN(s)&&(s=c(this).hasClass("pageing-btn-prev")?1:n.length),i.filter(function(e){return(s-1)*a<=e&&e<s*a}).show(),t.dom().find(".current").removeClass("current"),n.hide(),(s<=2?n.filter(function(e){return e<=4}):s>=n.length-1?n.filter(function(e){return e>=n.length-5}):n.filter(function(e){return s-3<=e&&e<=s+1})).show(),n.eq(s-1).addClass("current")}}],init:function(e){this._keys=[],this._renderedItems=[],this._selectedData=[];var t=this.settings.host;t&&t.setted&&(t.trueValue=t.trueValue!==undefined?t.trueValue:"HOST",t.name=t.name!==undefined?t.name:"host"),this._deviceList={"pc":"pc","android":"phone","iPhone":"phone","phone":"phone","mac":"pc","pad":"pad","iPad":"pad","camera":"camera","printer":"printer","usb":"usb","router":"router","rangeextender":"re","deco":"deco"}},render:function(){for(var e=this.settings,t=this.dom(),i=[],s=0;s<e.configs.length;s++)i.push(e.configs[s].type.toLowerCase());i.sort(),i.push("list"),i=i.join("-"),t.addClass("devicesList-container widget-container "+i);t.append('<ul class="devicesList-content-container"></ul>')},syncData:function(e,t){this.dom().find(".devicesList-content-container").empty(),this._keys=e,this._renderedItems=[],this._selectedData=[],this.dom().triggerHandler("ev_store_render_items",[e])},renderModels:function(e,t,i){for(var s=this.dom().find(".devicesList-content-container"),a=this.settings,n=0;n<t.length;n++){var r=t[n].getData(),o=t[n][e].getValue(),d=c('<li id="'+this.domId+"-item-"+n+'" class="devicesList-item-container" data-key="'+o+'"></li>'),l=c(this.renderContent(r)),l=(d.append(l).appendTo(s),new c.su.widgets.form({id:d}));l.render(),l._relatedData={key:o,data:r},a.multiselect?(r=c('<div widget="checkbox" class="devicesList-item-checkbox" name="devicesList-item-checkbox"></div>').appendTo(d),new c.su.widgets.checkbox({id:r}).render(),d.addClass("multi-select")):d.addClass("single-select"),this._renderedItems.push({key:o,obj:l})}i&&i(this._renderedItems),this.renderdevicesList()},renderdevicesList:function(){var e=this.dom(),t=this.settings,i=t.maxLine,s=t.numPerPage,a=e.find(".devicesList-item-container"),i=a.eq(0).outerHeight(!0)*i;if(a.length>s&&!t.scroll&&t.pagination){var n=Math.ceil(a.length/s),r=(a.filter(function(e){return s<=e}).hide(),'<div class="devicesList-paging-container paging-container disabled">');r+='<div class="paging-wrap"><div class="paging-btns inline-block">',5<n&&(r+='<a href="javascript:void(0);" class="paging-btn pageing-btn-prev" data-index="prev"><span class="icon"></span><span class="text"><</span></a>'),r+='<div class="num-buttons-container">';for(var o=0;o<n;o++)r=(r=r+'<a href="javascript:void(0);" class="paging-btn paging-btn-num pageing-btn-'+o+'"><span class="icon"></span>')+'<span class="text">'+(o+1)+"</span></a>";r+="</div>",5<n&&(r+='<a href="javascript:void(0);" class="paging-btn pageing-btn-next" data-index="next"><span class="icon"></span><span class="text">></span></a>'),r+="</div></div></div>",e.find(".devicesList-paging-container").remove(),c(r).appendTo(e);a=e.find(".paging-btn-num");a.eq(0).addClass("current"),5<n&&a.filter(function(e){return 5<=e}).hide()}else t.scroll&&(e.outerHeight(i),e.css({"overflow-y":"scroll"}))},renderContent:function(e){if(e!=undefined){e=c.su.escapeHtmlForObject(e);for(var t=this.settings,i=t.configs,s=this._deviceList,t=t.host,a="",n=(t&&t.setted&&(a=t.trueValue===e[t.name]?" host":""),'<div class="devicesList-item-content">'),r=0,o=i.length;r<o;r++){var d=i[r].type.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),l=i[r].dataIndex;"logo"==d?n+='<div class="logo-container"><span class="'+(a="icon icon-"+(e[l]?s[e[l]]:s["pc"])+a)+'"></span></div>':(n=n+'<div class="devicesList-item devicesList-item-'+d+'"><span class="content-label">'+(i[r].label?i[r].label+": ":"")+"</span>",i[r].renderer?n+='<span class="content">'+i[r].renderer.call(i[r],e[l],e)+"</span></div>":n+='<span class="content">'+e[l]+"</span></div>")}return n+="</div>"}},getSelected:function(){for(var e=this._selectedData,t=[],i=0,s=e.length;i<s;i++)t.push(e[i].data);return t},disable:function(e){e==undefined&&(e=this._keys);for(var t=0,i=(e=c.isArray(e)?e:[e]).length;t<i;t++){var s=c(".devicesList-item-container[data-key="+e[t]+"]");s.attr("disabled",!0).addClass("disabled"),s.data("viewObj")._status.disabled=!0}},enable:function(e){e==undefined&&(e=this._keys);for(var t=0,i=(e=c.isArray(e)?e:[e]).length;t<i;t++){var s=c(".devicesList-item-container[data-key="+e[t]+"]"),a=s.data("viewObj");a._status.disabled&&(s.removeAttr("disabled").removeClass("disabled"),a._status.disabled=!1)}},selectItems:function(e){e==undefined&&(e=this._keys);for(var t=0,i=(e=c.isArray(e)?e:[e]).length;t<i;t++){var s=c(".devicesList-item-container[data-key="+e[t]+"]");s.hasClass("item-selected")||this._viewSelect(s)}},unselectItems:function(e){e==undefined&&(e=this._keys);for(var t=0,i=(e=c.isArray(e)?e:[e]).length;t<i;t++){var s=c(".devicesList-item-container[data-key="+e[t]+"]");s.hasClass("item-selected")&&this._viewSelect(s)}},_viewSelect:function(e){var t=e.data("viewObj");if(!t._status.disabled){var i=t._relatedData;if(this.settings.multiselect){var t=e.find(".devicesList-item-checkbox[widget=checkbox]").data("viewObj"),s=!t._status.checked,a=this._selectedData;if(s)t.setValue(!0),a.push(i),e.addClass("item-selected");else{t.setValue(!1);for(var n=0,r=a.length;n<r;n++)if(i.key==a[n].key){a.splice(n,1);break}e.removeClass("item-selected")}}else this._selectedData[0]=i,e.closest("[widget=devicesList]").find(".item-selected").removeClass("item-selected"),e.addClass("item-selected")}}})}(jQuery),function(d){d.su.Widget.register("searchList",{settings:{multiselect:{attribute:"multiselect",defaultValue:!1},maxLine:{attribute:"max-line",defaultValue:4},scroll:{attribute:"scroll",defaultValue:!1},numPerPage:{attribute:"num-per-page",defaultValue:10},pathSeparator:{attribute:"path-separator",defaultValue:">"}},listeners:[{selector:".devicesList-item-container",event:"click",callback:function(e,t){e.stopPropagation();var i=d(this).data("viewObj");if(!i._status.disabled){var s=i._relatedData;if(t.settings.multiselect){var i=d(this).find(".devicesList-item-checkbox[widget=checkbox]").data("viewObj"),e=e.target||e.srcElement,e=d(e).closest(".devicesList-item-checkbox[widget=checkbox]"),a=!i._status.checked,n=(0<e.size()&&(a=!a),t._selectedData);if(a)i.setValue(!0),n.push(s),d(this).addClass("item-selected");else{i.setValue(!1);for(var r=0,o=n.length;r<o;r++)if(s.key==n[r].key){n.splice(r,1);break}d(this).removeClass("item-selected")}}else{t._selectedData.push(s);e=t.getSelected();t.dom().triggerHandler("ev_item_click",e),d(this).closest("[widget=devicesList]").find(".item-selected").removeClass("item-selected"),d(this).addClass("item-selected")}}}},{selector:".searchList-paging-container .paging-btn",event:"click",callback:function(e,t){var i=t.dom().find(".searchList-item-container"),s=parseInt(d(this).text()),a=t.settings.numPerPage,n=t.dom().find(".paging-btn-num");i.hide(),isNaN(s)&&(s=d(this).hasClass("pageing-btn-prev")?1:n.length),i.filter(function(e){return(s-1)*a<=e&&e<s*a}).show(),t.dom().find(".current").removeClass("current"),n.hide(),(s<=2?n.filter(function(e){return e<=4}):s>=n.length-1?n.filter(function(e){return e>=n.length-5}):n.filter(function(e){return s-3<=e&&e<=s+1})).show(),n.eq(s-1).addClass("current")}}],init:function(e){},render:function(){this.settings;var e=this.dom(),t=(e.addClass("searchList-container widget-container "),""),t=(t=(t=(t=(t+='<div class="searchList-header">')+'<div class="searchList-results-title">'+('<span class="searchList-results-label">'+d.su.CHAR.SEARCH.SEARCH_RESULTS+"</span>"))+'<span class="searchList-results-separator"> - </span>'+('<span class="searchList-results-count">'+d.su.CHAR.SEARCH.RESULTS+"</span>"))+"</div>"+"</div>")+'<div class="no-results-prompt">'+("<p>"+d.su.CHAR.SEARCH.NO_RESULTS_PROMPT+"</p>");e.append(t=(t=t+"</div>"+'<div class="searchList-content-container">')+'<ul class="searchList-content-ul"></ul>'+"</div>"),d.su.scrollbar({ele:".searchList-content-ul"})},loadItems:function(e){var t=this.dom().find(".searchList-content-ul"),i=(this.settings,this.dom()),s=(t.empty(),e.length);if(0===s)i.find(".no-results-prompt").show(),i.find(".searchList-content-container").hide();else{i.find(".no-results-prompt").hide(),i.find(".searchList-content-container").show();for(var a=0;a<s;a++){var n=e[a],r=d('<li id="'+this.domId+"-item-"+a+'" class="searchList-item-container"></li>'),n=d(this.renderContent(n));r.append(n).appendTo(t)}}i.find(".searchList-results-count").text(s+" "+d.su.CHAR.SEARCH.RESULTS),this.renderSearchList()},renderSearchList:function(){var e,t=this.dom(),i=this.settings,s=i.maxLine,a=i.numPerPage,n=t.find(".searchList-item-container"),s=n.eq(0).outerHeight(!0)*s,r=(n.length>a&&!i.scroll?(e=Math.ceil(n.length/a),n.filter(function(e){return a<=e}).hide()):i.scroll&&(t.outerHeight(s),t.css({"overflow-y":"scroll"})),'<div class="searchList-paging-container paging-container disabled">');r+='<div class="paging-wrap"><div class="paging-btns inline-block">',5<e&&(r+='<a href="javascript:void(0);" class="paging-btn pageing-btn-prev" data-index="prev"><span class="icon"></span><span class="text"><</span></a>'),r+='<div class="num-buttons-container">';for(var o=0;o<e;o++)r=(r=r+'<a href="javascript:void(0);" class="paging-btn paging-btn-num pageing-btn-'+o+'"><span class="icon"></span>')+'<span class="text">'+(o+1)+"</span></a>";r+="</div>",5<e&&(r+='<a href="javascript:void(0);" class="paging-btn pageing-btn-next" data-index="next"><span class="icon"></span><span class="text">></span></a>'),r+="</div></div></div>",t.find(".searchList-paging-container").remove(),d(r).appendTo(t);n=t.find(".paging-btn-num");n.eq(0).addClass("current"),5<e&&n.filter(function(e){return 5<=e}).hide()},renderContent:function(e){var t=this.settings,i=e.name,s=e.path,e=e.introduction,a=t.pathSeparator,n='<div class="searchList-item-content">',r=(s=d.isArray(s)?s:[s]).length;n+='<a href="#'+i+'">';for(var o=0;o<r;o++)n+='<span class="path-node">'+this.handleSearchItemContent(s[o])+"</span>",o!=r-1&&(n+='<span class="path-separator"> '+a+" </span>");return n+="</a>",n=""!=e?n+'<div class="searchList-item-introduction">'+e+"</div></div>":n},setSearchWorld:function(i){this.dom().find(".searchList-item-content").each(function(){var e=d(this).find(".path-node").last(),t=(wordTransed=i.replace(/[\*\.\?\+\$\^\[\]\(\)\{\}\|\\\/]/g,function(e){return"\\"+e}),new RegExp(wordTransed,"i"));e.html(e.text().replace(t,function(e){return'<span class="searchList-matched-text">'+e+"</span>"}))})},handleSearchItemContent:function(e){return e}})}(jQuery),function(){var i=$.su.Widget.register("AXNavigator",{extend:"navigator",listeners:function(){return[{selector:"li.navigator-li a",event:"click",callback:function(e,t){var i=$(this).parent().attr("navi-value");t.hasChildren(i)&&t.toggleOpen(i),i&&t.dom().triggerHandler("ev_navigator_clicked",[i]),e.stopPropagation()}},{selector:"",event:"click",callback:function(e,t){e.stopPropagation()}},{selector:".navigator-li>a",event:"mouseenter",callback:function(e,t){$(this).addClass("hover")}},{selector:".navigator-li>a",event:"mouseleave",callback:function(e,t){$(this).removeClass("hover")}}]},render:function(){i.superclass.render.call(this),this.initCloseAll()},loadItems:function(e,t){i.superclass.loadItems.call(this,e),this.initCloseAll(),this.dom().triggerHandler("ev_navigator_loaded",[e,t])},hide:function(e){var t=this.dom();t.removeClass("show"),t.slideUp(e==undefined?200:0).addClass("hidden")},show:function(e){var t=this.dom();t.removeClass("hidden"),t.slideDown(e==undefined?200:0).addClass("show")},toggleShow:function(){var e=this.dom();e.hasClass("show")?e.slideUp(200).addClass("hidden"):e.slideDown(200).removeClass("hidden"),e.toggleClass("show")},select:function(e){this.dom();this.unSelectAll(),this.closeSiblings(e);e=this.find(e);e.addClass("selected"),e.parentsUntil($(".navigator-ul-level1"),".navigator-li").addClass("has-child-selected")},unSelectAll:function(){var e=this.dom().find("li.navigator-li.selected");e.removeClass("selected"),e.parentsUntil($(".navigator-ul-level1"),".navigator-li").removeClass("has-child-selected")},openItem:function(e){e.addClass("opened").children("ul.navigator-ul").slideDown(200)},closeItem:function(e){e.removeClass("opened").children("ul.navigator-ul").slideUp(200)},closeAll:function(){var e=this.dom();e.find("li.navigator-li").removeClass("opened"),e.find("ul.navigator-ul-sub").slideUp(0)},initCloseAll:function(){this.dom().find("ul.navigator-ul-sub").slideUp(0)},open:function(e){var t=this.find(e);this.closeSiblings(e),this.openItem(t),this.dom().triggerHandler("ev_navigator_opened",[e])},close:function(e){var t=this.find(e);this.closeSiblings(e),this.closeItem(t),this.closeItem(t.find("li.navigator-li"))},closeSiblings:function(e){var e=this.find(e).siblings("li.navigator-li.opened"),t=e.find("li.navigator-li.opened");this.closeItem(e),this.closeItem(t)},isOpened:function(e){return this.find(e).hasClass("opened")},toggleOpen:function(e){this.isOpened(e)?this.close(e):this.open(e)},addClass:function(e){return this.dom().addClass(e)},removeClass:function(e){return this.dom().removeClass(e)}})}(),$.su.Widget.register("search",{settings:{itemName:{attribute:"item-name",defaultValue:""}},listeners:[{selector:function(){return{parent:"#"+this.textbox.domId}},event:"ev_view_change",callback:function(e,t,i){"value"==t.type&&(t=t.value,i.dom().triggerHandler("ev_view_change",[{"type":"value","value":t}]))}},{selector:"input",event:"focus",callback:function(e,t){t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.textbox.getValue()}]),t.dom().find(".search-content-container").show()}},{selector:"",event:"blur",callback:function(e,t){t.dom().find(".search-content-container").hide()}},{selector:"",event:"keydown",callback:function(e,t){var i=t.dom().find("li.search-content-li"),s=i.length,t=t.dom().find("li.search-content-li.focused"),a=t.index(),n=e.keyCode;40==n?a<0&&0<s?i.eq(0).addClass("focused"):0<=a&&a<s-1&&(i.eq(a).removeClass("focused"),i.eq(a+1).addClass("focused")):38==n?(0<a?(i.eq(a).removeClass("focused"),i.eq(a-1).addClass("focused")):0==a&&i.eq(a).removeClass("focused"),e.preventDefault()):13==n&&0<=a&&t.trigger("click")}},{selector:"li.search-content-li",event:"click",callback:function(e,t){var i=$(this).attr("event-key");i&&t.dom().triggerHandler("ev_item_selected",[i]),t.dom().find(".search-content-container").hide()}}],init:function(){},render:function(){var e=this.dom(),t=(this.settings,e.empty(),$('<div widget="textbox"></div>'));t.attr("id",this.domId+"-sub-textbox"),e.append(t),this.textbox=new $.su.widgets.textbox({id:t}),this.textbox.render();e.append('<div class="search-content-container"><div class="search-content-ul-before"></div><ul class="search-content-ul"></ul><div class="search-content-ul-after"></div></div>')},setValue:function(e){this.textbox.setValue(e)},loadItems:function(e){if(e){for(var t=this.dom().find(".search-content-ul"),i=(t.empty(),e.length),s="",a=0;a<i;a++)var n=e[a],s=(s=(s=(s+='<li class="search-content-li" event-key="'+n.name+'">')+'<div class="search-content-li-body">'+'<div class="search-content-li-text-before"></div>')+('<div class="search-content-li-text">'+n.text+"</div>")+'<div class="search-content-li-text-after"></div>')+"</div>"+"</li>";t.append(s)}}}),$.su.Widget.register("timer",{settings:{},listeners:[],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=(e.addClass(t.cls+"timer-container"),"");null!==t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel timer-fieldlabel">'+t.labelField+"</label>",t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div></div>"),i+='<div class="widget-wrap-outer text-wrap-outer"><span class="icon"></span><span class="text"></span></div>',e.empty().append(i)},setValue:function(e){var s=this.getContainer(),t=this.dom(),i=e,a=null,n="",r=function(e){if(e<=0)return 0==e&&s.triggerHandler("ev_time_end"),void clearInterval(a);var t=parseInt(e/3600),i=parseInt(e/60%60),e=parseInt(e%60);return n=t<10?"0"+t+":":t+":",i<10&&(n+="0"),n+=i+":",e<10&&(n+="0"),n+=e},n=r(i);t.find("span.text").text(n),i--,a=setInterval(function(){n=r(i),t.find("span.text").text(n),i--},1e3)},show:function(){this.dom().css("opacity","1")},hide:function(){this.dom().css("opacity","0")}}),function(n){n.su.Widget.register("wpsButton",{settings:{time:{attribute:"time",defaultValue:120},width:{attribute:"width",defaultValue:80},height:{attribute:"height",defaultValue:80}},listeners:[{selector:"div.wps-button-wrapper",event:"click",callback:function(e,i){if(!i.dom().hasClass("disabled")){var t,s,a=n(this);if(a.find("span.text").text()==n.su.CHAR.WPS.START)return a.find("span.text").text(n.su.CHAR.WPS.CANCEL),a.find("span.text").addClass("cancel"),a.find("div.wps-mask").addClass("connecting"),t=n.Deferred(),window.echarts===undefined?n.su.router.loadFile("js/libs/echarts.min.js",function(){i.initCircle(),t.resolve()}):window.echarts&&(i.initCircle(),t.resolve()),t.then(function(){var t=i.settings.time,e=i.format(t),e=(a.find("span.time").text(e),function(){i.countDown(t);var e=i.format(t);a.find("span.time").text(e),0==--t&&(clearInterval(i.settings._countDownId),a.find("div.wps-button").html(""),a.find("span.time").text(""),a.find("span.text").text(n.su.CHAR.WPS.START),a.find("span.text").removeClass("cancel"),a.find("div.wps-mask").removeClass("connecting"))});e(),i.settings._countDownId=setInterval(e,1e3),i.dom().triggerHandler("ev_wps_button_click",[{"clickType":"start"}])}),t.promise();clearInterval(i.settings._countDownId),s=i.settings.time,i.countDown(s),a.find("span.time").text(""),a.find("span.text").text(n.su.CHAR.WPS.START),a.find("span.text").removeClass("cancel"),a.find("div.wps-mask").removeClass("connecting"),i.dom().triggerHandler("ev_wps_button_click",[{"clickType":"cancel"}])}}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=(e.addClass(t.cls+"wps-button-container"),'<div class="wps-button-wrapper">');i+='<div class="wps-mask"></div>';e.empty().append('<div class="wps-button-wrapper"><div class="wps-mask"></div><div class="wps-button-content"><div class="wps-button"></div><span class="text"></span><span class="time"></span></div></div>'),e.find(".wps-button-wrapper").css({width:t.width,height:t.height}),e.find(".wps-button-content").css({width:t.width,height:t.height}),e.find(".text").text(n.su.CHAR.WPS.START)},initCircle:function(){var e=this.dom(),t=this.settings,e=e.find(".wps-button").css({width:t.width,height:t.height}).get(0);this.echart=echarts.init(e)},countDown:function(e){this.dom(),this.settings;e=this.setConfig(e);this.echart.setOption(e)},format:function(e){var t="";return t=(t+=1<e/60?10<=e/60?parseInt(e/60)+":":"0"+parseInt(e/60)+":":"00:")+(10<=e%60?parseInt(e%60):"0"+parseInt(e%60))},setConfig:function(e){e=parseInt((120-e)/120*100);return{series:[{type:"pie",animation:!1,center:["50%","50%"],radius:[36,39],itemStyle:{normal:{label:{show:!1}}},data:[{name:"",value:e,itemStyle:{normal:{color:"gaming"==GLOBAL_STYLE?"#DC0800":"#4acbd6",label:{show:!0,position:"center"},labelLine:{show:!1}}}},{name:"invisible",value:100-e,itemStyle:{normal:{color:"rgba(0,0,0,0)",label:{show:!1},labelLine:{show:!1}},emphasis:{color:"rgba(0,0,0,0)"}}}]}]}},reset:function(){var e=this.dom().find("div.wps-button-wrapper"),t=(this.settings._countDownId&&clearInterval(this.settings._countDownId),this.settings.time);this.countDown(t),e.find("span.time").text(""),e.find("span.text").text(n.su.CHAR.WPS.START),e.find("span.text").removeClass("cancel"),e.find("div.wps-mask").removeClass("connecting")},disable:function(){var e=this.dom();this.getContainer().addClass("disabled"),e.triggerHandler("ev_view_disable")},enable:function(){var e=this.dom();this.getContainer().removeClass("disabled"),e.triggerHandler("ev_view_enable")},setTimeLeft:function(e){this.dom();e&&(this.settings.time=e)}})}(jQuery),function(a){a.su.Widget.register("qosBtn",{settings:{},listeners:[{selector:"div.qos-btn-wrapper",event:"click",callback:function(e,t){var i;a(this).hasClass("disabled")||a(this).hasClass("disabled-case")||(i=a(this).attr("type"),t.dom().triggerHandler("ev_qos_btn_click",[{"type":i}]))}}],init:function(){},render:function(){var e=this.dom(),t=(e.addClass("qos-btn-container"),a.su.serviceManager.get("device").getConfig().supportGFN),i=(i=(i=(i='<div class="qos-btn-notice hidden"><span></span></div>')+'<div class="qos-btn-set">'+('<div class="qos-btn-wrapper fair" type="fair"'+(t?' style="display: none"':"")+" >"))+'<span class="icon"></span>'+('<span class="text">'+a.su.CHAR.QOS.STANDARD+"</span>"))+'<div class="process"></div>'+"</div> ";t&&(i=(i+='<div class="qos-btn-wrapper geforce" type="geforce">')+'<span class="icon"></span><span class="text">'+a.su.CHAR.QOS.GEFORCE+'</span><div class="process"></div></div> '),i=(i=(i=(i=(i=(i+='<div class="qos-btn-wrapper gaming" type="gaming">')+'<span class="icon"></span><span class="text">'+a.su.CHAR.QOS.GAMING+'</span><div class="process"></div></div> <div class="qos-btn-wrapper streaming" type="streaming"><span class="icon"></span>')+'<span class="text">'+a.su.CHAR.QOS.STREAMING+'</span><div class="process"></div></div> <div class="qos-layout-breakpoint"></div><div class="qos-btn-wrapper surfing" type="surfing"><span class="icon"></span>')+'<span class="text">'+a.su.CHAR.QOS.SURFING+'</span><div class="process"></div></div> <div class="qos-btn-wrapper chatting" type="chatting">')+'<span class="icon"></span><span class="text">'+a.su.CHAR.QOS.CHATTING+'</span><div class="process"></div></div> <div class="qos-btn-wrapper custom" type="custom"><span class="icon"></span>')+'<span class="text">'+a.su.CHAR.QOS.CUSTOM+'</span><div class="process"></div></div></div>',e.empty().append(i)},setValue:function(e){var t=this.dom();(this.value=e)&&a.su.CHAR.QOS[e.toUpperCase()+"_NOTICE"]?t.find(".qos-btn-notice").text(a.su.CHAR.QOS[e.toUpperCase()+"_NOTICE"]).removeClass("hidden"):t.find(".qos-btn-notice").addClass("hidden")},getValue:function(){return this.value},initProcess:function(e){var t,i=this,s=this.dom(),a=s.find(".qos-btn-wrapper."+e),n=(s.find(".qos-btn-wrapper."+e+" .process").removeClass("hidden"),s.find(".qos-btn-wrapper."+e+" .process").get(0)),r=(n.echart||(n.echart=echarts.init(n)),0),o=setInterval(function(){r<=100?(r++,t=i.setConfig(.75*r),n.echart.setOption(t)):(clearInterval(o),a.addClass("rotate"))},10)},process:function(e){if(e)for(var t=this,i=(window.echarts===undefined?a.su.router.loadFile("js/libs/echarts.min.js",function(){t.initProcess(e)}):window.echarts&&t.initProcess(e),this.dom().find(".qos-btn-wrapper")),s=0;s<i.length;s++)(btnType=a(i[s]).attr("type"))!=e?a(i[s]).addClass("disabled"):a(i[s]).addClass("disabled-case")},setConfig:function(e){return{series:[{type:"pie",animation:!1,center:["50%","50%"],radius:[33,35],itemStyle:{normal:{label:{show:!1}}},data:[{name:"",value:e,itemStyle:{normal:{color:a.su.serviceManager.get("device").getConfig().supportGamingUIGX90?"#af0000":"#4acbd6",label:{show:!0,position:"center"},labelLine:{show:!1}}}},{name:"invisible",value:100-e,itemStyle:{normal:{color:"rgba(0,0,0,0)",label:{show:!1},labelLine:{show:!1}},emphasis:{color:"rgba(0,0,0,0)"}}}]}]}},successed:function(e){var t,i,s;e&&((t=this.dom()).find(".qos-btn-wrapper").removeClass("rotate"),t.find(".qos-btn-wrapper .process").addClass("hidden"),t.find(".qos-btn-wrapper."+e).addClass("successed"),setTimeout(function(){t.find(".qos-btn-wrapper").removeClass("successed")},1e3),i=t.find(".qos-btn-wrapper."+e+" .process").get(0),s=this.setConfig(0),i.echart&&i.echart.setOption(s),this.dom().find(".qos-btn-wrapper").removeClass("disabled"),this.dom().find(".qos-btn-wrapper").removeClass("disabled-case"),e&&a.su.CHAR.QOS[e.toUpperCase()+"_NOTICE"]?t.find(".qos-btn-notice").text(a.su.CHAR.QOS[e.toUpperCase()+"_NOTICE"]).removeClass("hidden"):t.find(".qos-btn-notice").addClass("hidden"))},failed:function(e){var t,i;e&&((t=this.dom()).find(".qos-btn-wrapper").removeClass("rotate"),t.find(".qos-btn-wrapper .process").addClass("hidden"),t.find(".qos-btn-wrapper."+e).addClass("failed"),setTimeout(function(){t.find(".qos-btn-wrapper").removeClass("failed")},1e3),e=t.find(".qos-btn-wrapper."+e+" .process").get(0),i=this.setConfig(0),e.echart&&e.echart.setOption(i),this.dom().find(".qos-btn-wrapper").removeClass("disabled"),this.dom().find(".qos-btn-wrapper").removeClass("disabled-case"))},setSelected:function(e){var t=this.dom().find(".qos-btn-wrapper");t.removeClass("selected");for(var i=0;i<t.length;i++)a(t[i]).attr("type")==e&&a(t[i]).addClass("selected")},setDisabled:function(){this.dom().find(".qos-btn-wrapper").addClass("disabled")},setAbled:function(){this.dom().find(".qos-btn-wrapper").removeClass("disabled")}})}(jQuery),function(a){a.su.Widget.register("customSlider",{settings:{},listeners:[{selector:"div.slider-content span.slider",event:"mousedown touchstart",callback:function(e,t){var i=a(this);t.startY=e.clientY||e.originalEvent.changedTouches[0].clientY,a("html").on("mousemove touchmove",{slider:i,viewObj:t},t.onMouseMove),a("html").on("mouseup touchend",{slider:i,viewObj:t},t.onMouseUp)}},{selector:"div",event:"click",callback:function(e,t){t.dom().triggerHandler("ev_click",[{type:t.settings.type}])}}],init:function(){},render:function(){var e=this.dom();this.settings;e.addClass("custom-slider-container");var t=(t=(t=(t=(t=(t=(t=(t=(t='<div class="custom-slider-wrapper">')+'<div class="level-wrapper"><span>'+a.su.CHAR.QOS.HIGH+"</span>")+"<span>"+a.su.CHAR.QOS.NORMAL+"</span>")+"<span>"+a.su.CHAR.QOS.LOW+'</span></div><div class="slider-content-container"><div class="slider-content game"><span class="path"></span><span class="slider"></span>')+'<span class="text">'+a.su.CHAR.QOS.GAMING+'</span></div><span class="link"></span><div class="slider-content media"><span class="path"></span><span class="slider"></span>')+'<span class="text">'+a.su.CHAR.QOS.STREAMING+'</span></div><span class="link"></span><div class="slider-content surf"><span class="path"></span><span class="slider"></span>')+'<span class="text">'+a.su.CHAR.QOS.SURFING+'</span></div><span class="link"></span><div class="slider-content chat"><span class="path"></span><span class="slider"></span>')+'<span class="text">'+a.su.CHAR.QOS.CHATTING+'</span></div><span class="link"></span><div class="slider-content download"><span class="path"></span><span class="slider"></span>')+'<span class="text">'+a.su.CHAR.QOS.DOWNLOADING+"</span></div></div></div>";e.empty().append(t)},onMouseMove:function(e){var t=e.data.viewObj,i=e.data.slider,s=(e.clientY||e.originalEvent.changedTouches[0].clientY)-t.startY,s=i.position().top+s;t.startY=e.clientY||e.originalEvent.changedTouches[0].clientY,s<0?t.sliderAdjust(i,0):175<s?t.sliderAdjust(i,175):t.sliderAdjust(i,s)},sliderAdjust:function(e,t){e.css("top",t),t<44?(this.classAdjust(e.parent(),"prior"),this.linkAdjust(e)):44<=t&&t<132?(this.classAdjust(e.parent(),"normal"),this.linkAdjust(e)):132<=t&&(this.classAdjust(e.parent(),"restrictive"),this.linkAdjust(e))},classAdjust:function(e,t){e.removeClass("prior"),e.removeClass("normal"),e.removeClass("restrictive"),e.addClass(t)},linkAdjust:function(e){var t,i,s,a=e.parent().prev(),n=e.parent().next(),r=e.position().top+12.5;e.parent().next().css("top",r),0!=a.length&&(t=r-(e.parent().prev().prev().find("span.slider").position().top+12.5),i=Math.sqrt(Math.pow(t,2)+Math.pow(96,2)),s="rotate("+180*Math.atan(t/96)/Math.PI+"deg)",a.css({"width":i,"transform":s})),0!=n.length&&(t=e.parent().next().next().find("span.slider").position().top+12.5-r,i=Math.sqrt(Math.pow(t,2)+Math.pow(96,2)),s="rotate("+180*Math.atan(t/96)/Math.PI+"deg)",n.css({"width":i,"transform":s}))},updateSlider:function(){a("div")[0].style.borderRadius===undefined?a("div.custom-slider-wrapper span.link").css("display","none"):a("div.custom-slider-wrapper span.link").css("display","block");for(var e=a("div.custom-slider-wrapper span.slider"),t=0;t<e.length;t++){t<5&&(i=96*t+48,a(e[t]).parent().next().css("left",i));var i=a(e[t]).parent()[0].className.replace("slider-content ","");"prior"==this.params[i]?this.sliderAdjust(a(e[t]),0):"normal"==this.params[i]?this.sliderAdjust(a(e[t]),88):"restrictive"==this.params[i]&&this.sliderAdjust(a(e[t]),175)}},onMouseUp:function(e){var t=e.data.viewObj,e=e.data.slider,i=(a("html").off("mousemove touchmove",t.onMouseMove),a("html").off("mouseup touchend",t.onMouseUp),e.position().top);0<=i&&i<44?t.sliderAdjust(e,0):44<=i&&i<132?t.sliderAdjust(e,88):t.sliderAdjust(e,175),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.getValue()}])},setValue:function(e){null!=e&&(this.params=e,this.updateSlider())},getValue:function(){for(var e={},t=a("div.custom-slider-wrapper span.slider"),i=0;i<t.length;i++){var s=a(t[i]).parent()[0].className.replace("slider-content ","").split(" ");e[s[0]]=s[1]}return e}})}(jQuery),function(o){o.su.Widget.register("switchField",{settings:{fields:{attribute:"fields",defaultValue:null},supportViewSwitch:{attribute:"view-switch",defaultValue:!0}},listeners:[{selector:"div.fields-item-name",event:"click",callback:function(e,t){var i;t.settings.supportViewSwitch&&(i=o(this).attr("item"),t.switchField(i))}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=0,s=t.supportViewSwitch?"":" view-disabled",a=(e.addClass(t.cls+"switch-field-container"+s),'<div class="switch-field-name-wrapper">');for(a+='<div class="switch-field-name">',i=0;i<t.fields.length;i++)a=(a+='<div class="fields-item-name '+t.fields[i].name+(0==i?" first":"")+(i==t.fields.length-1?" lst":"")+'" item="'+t.fields[i].name+'"">')+"<span>"+t.fields[i].text+"</span></div>";e.append(a=(a=a+"</div>"+"</div>")+'<div class="switch-field-content">'+"</div>")},setSupportViewSwitch:function(e){var t=this.dom();(this.settings.supportViewSwitch=e)?t.removeClass("view-disabled"):t.addClass("view-disabled")},itemClick:function(e){this.dom().find("div.fields-item-name."+e).trigger("click")},getCurField:function(){var e=this.dom().find("div.fields-item-name.select"),t=null;return t=e.length?e.attr("item"):t},switchField:function(e){for(var t,i=this.dom(),s=(i.find("div.fields-item-name").removeClass("select select-prev"),this.settings.fields),a=null,n=0,r=s.length;n<r;n++)(t=s[n]).name===e?(o("div.fieldset-container."+(a=t).container).show(),i.find(".fields-item-name."+e).addClass("select").prev().addClass("select-prev")):o("div.fieldset-container."+t.container).hide();a&&i.triggerHandler("ev_switch_click",e)},switchPrev:function(){for(var e=this.dom(),t=this.settings,i=e.find(".fields-item-name.select").attr("item"),s=-1,a=t.fields,n=a.length;n--;)if(a[n].name==i){s=n;break}0<s&&this.switchField(t.fields[s-1].name)},switchNext:function(){for(var e=this.dom(),t=this.settings,i=e.find(".fields-item-name.select").attr("item"),s=-1,a=t.fields,n=a.length;n--;)if(a[n].name==i){s=n;break}0<=s&&s<a.length-1&&this.switchField(t.fields[s+1].name)}})}(jQuery),function(n){n.su.Widget.register("deviceSelect",{settings:{},listeners:[{selector:".close-icon",event:"click",callback:function(e,t){for(var i=n(this).attr("data-id"),s=n.su.clone(t.getValue()),a=0;a<s.length;a++)i==s[a].deviceId&&s.splice(a,1);t.dom().triggerHandler("ev_view_change",[{"type":"value","value":s}])}},{selector:".add-button",event:"click",callback:function(e,t){var i=t.getValue();t.dom().triggerHandler("ev_add_device",[{"type":"value","value":i}])}},{selector:".delete-button",event:"click",callback:function(e,t){t.dom().find(".close-icon").toggleClass("hidden")}}],init:function(){},render:function(){var e=this.dom();this.settings,e.addClass("device-list-container");e.empty().append('<div class="device-list-wrapper"></div>')},setValue:function(e){if(null!=e){for(var t=this.dom(),i=(this.settings,this.value=e,""),s=0;s<e.length;s++)i=(i=(i=(i+='<div class="device"><div class="icon-wrapper">')+'<div class="icon '+e[s].clientType+'"></div>')+'<div class="close-icon hidden" data-id="'+e[s].deviceId+'"></div></div>')+'<div class="text" title="'+e[s].name+'">'+e[s].name+"</div></div> ";i=(i=(i=(i=(i=(i+='<div class="add-button">')+'<span class="icon"></span>'+"</div> ")+'<div class="delete-button">'+'<span class="icon"></span>')+"</div> "+'<div class="layout-stand-in"></div> ')+'<div class="layout-stand-in"></div> '+'<div class="layout-stand-in"></div> ')+'<div class="layout-stand-in"></div> '+'<div class="layout-stand-in"></div> ',n(t).find(".device-list-wrapper").empty().append(i)}},getValue:function(){return this.value}})}(jQuery),function(o){o.su.Widget.register("editList",{settings:{delIconPos:{attribute:"del-icon-pos",defaultValue:"right"},addBtn:{attribute:"add-btn",defaultValue:!1},addText:{attribute:"add-text",defaultValue:""},itemCls:{attribute:"item-cls",defaultValue:""},idKey:{attribute:"id-key",defaultValue:"index"}},listeners:[{selector:".del-icon",event:"click",callback:function(e,t){var i=o(this).attr("data-id"),s=o.su.clone(t.getValue()),a=t.settings.idKey;if("index"==a)s.splice(i,1);else for(var n=0;n<s.length;n++)i==s[n][a]&&s.splice(n,1);t.dom().triggerHandler("ev_view_change",[{"type":"value","value":s}])}},{selector:".add-button",event:"click",callback:function(e,t){var i=t.getValue();t.dom().triggerHandler("ev_add_item",[{"type":"value","value":i}])}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=!1===t.labelField?" label-empty":"",i=(e.addClass(t.cls+" editlist-container"+i),"");null!==t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap'+t.labelCls+(""==t.labelField?" empty":"")+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel editlist-fieldlabel">'+t.labelField+"</label>",t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div></div>"),i+='<div class="widget-wrap-outer editlist-wrap-outer"><div class="widget-wrap editlist-wrap">',t.addBtn&&(i+='<a class="add-button" href="javascript:void(0)"><span class="add-icon"></span><span class="add-text">'+t.addText+"</span></a>"),i+="</div></div>",e.empty().append(i)},setValue:function(e){if(null!=e){for(var t=this.dom(),i=this.settings,s=i.idKey,a=i.itemCls?" "+i.itemCls:"",n=(this.value=e,""),r=0;r<e.length;r++)n=(n=(n+='<div class="list-item'+a+'">')+(i.renderer?i.renderer(e[r]):o.su.escapeHtml(e[r])))+'<span class="del-icon icon" data-id="'+o.su.escapeHtml("index"==s?r:e[r][s])+'"></span></div>';o(t).find(".list-item").remove(),o(t).find(".editlist-wrap").append(n)}},getValue:function(){return this.value}})}(jQuery),function(i){i.su.Widget.register("filterLevel",{settings:{},listeners:[{selector:".filter-level-items .items",event:"click",callback:function(e,t){t.dom().find(".filter-level-items .items").removeClass("selected"),i(this).addClass("selected"),t.dom().triggerHandler("ev_items_btn_click",[{level:i(this).attr("data-val")}]),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i(this).attr("data-val")}])}}],init:function(){},render:function(){var e=this.dom(),t=(this.settings,e.addClass("filter-level-container"),'<div class="filter-level-wrapper">'),t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t+='<div class="filter-level-items">')+'<div class="items child" data-val="child">'+'<span class="icon"></span>')+('<span class="type">'+i.su.CHAR.PARENTAL_CONTROLS.CHILD+"</span>")+'<span class="age">(0-7)</span>')+"</div> "+'<div class="items pre-teen" data-val="pre-teen">')+'<span class="icon"></span>'+('<span class="type">'+i.su.CHAR.PARENTAL_CONTROLS.PRE_TEEN+"</span>"))+'<span class="age">(8-12)</span>'+"</div> ")+'<div class="items teen" data-val="teen">'+'<span class="icon"></span>')+('<span class="type">'+i.su.CHAR.PARENTAL_CONTROLS.TEEN+"</span>")+'<span class="age">(13-17)</span>')+"</div> "+'<div class="items adult" data-val="adult">')+'<span class="icon"></span>'+('<span class="type">'+i.su.CHAR.PARENTAL_CONTROLS.ADULT+"</span>"))+'<span class="age">(>17)</span>'+"</div> ")+"</div>"+"</div>";e.empty().append(t)},setValue:function(e){var t=this.dom();this.settings;i(t).find(".filter-level-items .items").removeClass("selected"),e&&i(t).find(".items."+e.toLowerCase()).addClass("selected")}})}(jQuery),function(d){d.su.Widget.register("filterContent",{settings:{type:{attribute:"type",defaultValue:"app"},placeholder:{attribute:"placeholder",defaultValue:d.su.CHAR.COMMON.APP_FILTER_PLACEHOLDER}},listeners:[{selector:function(){return{parent:"body",target:""}},event:"click",callback:function(e,t){t.settings;var e=e.target||e.srcElement,i=d(e).closest(".filter-content-wrapper");0!==i.length&&d(e)[0]!==i[0]||t.dom().find(".filter-hint-wrapper").hide()}},{selector:".text-wrap-inner input",event:"click",callback:function(e,t){t.dom().find(".filter-hint-wrapper").removeClass("no-hint"),t.dom().find(".filter-hint-wrapper").show(),t.dom().triggerHandler("ev_input_click",[{type:t.settings.type}])}},{selector:".text-wrap-inner input",event:"blur",callback:function(e,t){setTimeout(function(e){t.showTips?t.dom().find(".filter-hint-wrapper").show():t.dom().find(".filter-hint-wrapper").hide()},0)}},{selector:".text-wrap-inner input",event:"keydown",callback:function(e,t){t.keydownCode=e.keyCode}},{selector:".text-wrap-inner input",event:"keyup",callback:function(e,t){13==e.keyCode&&(t.addItems()?(t.dom().find(".filter-hint-wrapper").hide(),t.showTips=!1):(t.dom().find(".filter-hint-wrapper").addClass("no-hint"),t.showTips=!0)),t.search(d(this).val())}},{selector:".filter-items .icon",event:"click",callback:function(e,t){var i=d(this).closest(".filter-items").attr("data-val");val=t.removeItems(i),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":val}])}},{selector:".filter-hint-wrapper",event:"blur",callback:function(e,t){t.dom().find(".filter-hint-wrapper").hide()}},{selector:".filter-hint-wrapper .app-name",event:"mousedown",callback:function(e,t){var i=d(this).find("span").text();t.addItems(i),d(t.dom()).find(".filter-hint-wrapper").hide()}}],init:function(){},render:function(){var e=this,t=this.dom(),i=this.settings,s=(t.addClass("filter-content-container "+i.type),'<div class="filter-content-wrapper">');s+='<div widget="textbox" id="'+this.domId+'_textbox" class="label-empty inline-block" hint="'+i.placeholder+'" />',"app"===i.type?s+='<div widget="button" id="'+this.domId+'_button" class="label-empty btn-rare hidden" text="'+("app"===i.type?d.su.CHAR.OPERATION.CANCEL_UPPERCASE:d.su.CHAR.OPERATION.ADD)+'"></div>':s+='<div widget="button" id="'+this.domId+'_button" class="label-empty icon-button add-icon-btn hidden" text=""></div>',t.append(s=(s=(s+='<div class="filter-items-wrapper"></div>')+'<div class="filter-hint-wrapper hidden">'+'<div class="filter-hint su-scroll"></div>')+"</div>"+"</div>"),i.type,e.input=new d.su.widgets.textbox({id:this.domId+"_textbox"}),e.input.render(),e.button=new d.su.widgets.button({id:this.domId+"_button"}),e.button.render(),e.button.dom().on("ev_button_click",function(){"app"===i.type?e.dom().find(".filter-hint-wrapper").hide():e.addItems()?(e.dom().find(".filter-hint-wrapper").hide(),e.showTips=!1):(e.dom().find(".filter-hint-wrapper").addClass("no-hint"),e.showTips=!0)})},setValue:function(e){if(e){for(var t=this.dom(),i=(this.settings,this.value=e,""),s=0;s<e.length;s++)i=(i=i+('<div class="filter-items" data-val="'+e[s])+'"><span class="icon"></span>')+'<span class="text">'+e[s]+"</span></div>";d(t).find(".filter-items-wrapper").empty().append(i)}},getValue:function(){return this.value},removeItems:function(e){for(var t=d.su.clone(this.getValue()),i=0;i<t.length;i++)if(t[i]==e){t.splice(i,1);break}return t},checkItems:function(e){for(var t=d.isArray(d.su.clone(this.getValue()))?d.su.clone(this.getValue()):[],i=0;i<t.length&&t[i]!=e;i++);return i!=t.length},addItems:function(e){var t,i=this,s=this.dom(),a=this.settings,s=d(s).find(".text-wrap-inner input"),e=e||s.val();return"app"!==a.type?(t=d.isArray(d.su.clone(this.getValue()))?d.su.clone(this.getValue()):[]).length+1>i.maxItems?(s.val(""),s.blur(),i.dom().triggerHandler("ev_items_limit"),!0):i.search(e)&&i.checkHintBase(e)&&!i.checkItems(e)||!i.checkItems(e)&&i.isURL(e)?(t.push(e),i.dom().triggerHandler("ev_view_change",[{"type":"value","value":t}]),s.val(""),s.blur(),!0):(s.val(""),s.blur(),!1):i.search(e)&&i.checkHintBase(e)&&!i.checkItems(e)?((t=d.isArray(d.su.clone(this.getValue()))?d.su.clone(this.getValue()):[]).push(e),i.dom().triggerHandler("ev_view_change",[{"type":"value","value":t}]),s.val(""),s.blur(),!0):(s.val(""),s.blur(),!1)},loadItems:function(e){var t=this.dom(),i=this.settings,s=(this.items=e,"");s+='<div class="app-name-wrapper">';for(var a=0;a<e.length;a++)s=(s+='<div class="app-name" data-val="'+e[a].name+'">')+"<span>"+e[a].name+"</span></div>";s=s+'</div><div class="app-name-note">'+("app"==i.type?d.su.CHAR.PARENTAL_CONTROLS.FILTER_LEVEL_NOTE2:d.su.CHAR.PARENTAL_CONTROLS.FILTER_LEVEL_NOTE3)+"</div>",d(t).find(".filter-hint").empty().append(s)},getHintBase:function(){return this.items},search:function(e){var t=d.su.clone(this.getHintBase()),i=d.su.clone(t),s=[],a=new RegExp(e,"i"),n=[];if(!e)return!1;for(var r=0;r<t.length;r++)a.test(t[r].name)&&(n.push({name:t[r].name,key:t[r].key,checked:!0}),s.push(r)),i[r].checked=!1;for(var o=s.length-1;0<=o;o--)i.splice(s[o],1);return 0==n.length?(this.loadItems(i),!1):(t=this.sort(n).concat(this.sort(i)),this.loadItems(t),!0)},checkHintBase:function(e){for(var t=d.su.clone(this.getHintBase()),i=new RegExp("^"+e+"$"),s=0;s<t.length;s++)if(i.test(t[s].name))return!0;return!1},sort:function(e){return e.sort(function(e,t){return e["name"].toLowerCase()<t["name"].toLowerCase()?-1:1})},isURL:function(e){return!!new RegExp(/^([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?$/i).test(e)},setMaxItems:function(e){e&&(this.maxItems=parseInt(e))}})}(jQuery),function(d){d.su.Widget.register("filterContentV2",{settings:{type:{attribute:"type",defaultValue:"app"},placeholder:{attribute:"placeholder",defaultValue:d.su.CHAR.COMMON.APP_FILTER_PLACEHOLDER}},listeners:[{selector:".text-wrap-inner input",event:"click",callback:function(e,t){t.dom().triggerHandler("ev_input_click",[{type:t.settings.type}])}},{selector:".text-wrap-inner input",event:"keydown",callback:function(e,t){t.keydownCode=e.keyCode}},{selector:".text-wrap-inner input",event:"keyup",callback:function(e,t){13==e.keyCode&&t.addItems(),t.search(d(this).val())}},{selector:".filter-items .icon",event:"click",callback:function(e,t){var i=d(this).closest(".filter-items").attr("data-val");val=t.removeItems(i),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":val}])}}],init:function(){},render:function(){var e=this,t=this.dom(),i=this.settings,s=(t.addClass("filter-content-container "+i.type),'<div class="filter-content-wrapper">');s+='<div widget="textbox" id="'+this.domId+'_textbox" class="label-empty inline-block" hint="'+i.placeholder+'" />',"app"===i.type?s+='<div widget="button" id="'+this.domId+'_button" class="label-empty btn-rare hidden" text="'+("app"===i.type?d.su.CHAR.OPERATION.CANCEL_UPPERCASE:d.su.CHAR.OPERATION.ADD)+'"></div>':s+='<div widget="button" id="'+this.domId+'_button" class="label-empty icon-button add-icon-btn" text=""></div>',t.append(s=s+'<div class="filter-items-wrapper"></div>'+"</div>"),e.input=new d.su.widgets.textbox({id:this.domId+"_textbox"}),e.input.render(),e.button=new d.su.widgets.button({id:this.domId+"_button"}),e.button.render(),e.button.dom().on("ev_button_click",function(){e.addItems()})},setValue:function(e){if(e){for(var t=this.dom(),i=(this.settings,this.value=e,""),s=0;s<e.length;s++)i=(i=i+('<div class="filter-items" data-val="'+e[s])+'"><span class="icon"></span>')+'<span class="text">'+d.su.escapeHtml(e[s])+"</span></div>";d(t).find(".filter-items-wrapper").empty().append(i)}},getValue:function(){return this.value},removeItems:function(e){for(var t=d.su.clone(this.getValue()),i=0;i<t.length;i++)if(t[i]==e){t.splice(i,1);break}return t},checkItems:function(e){for(var t=d.isArray(d.su.clone(this.getValue()))?d.su.clone(this.getValue()):[],i=0;i<t.length&&t[i]!=e;i++);return i!=t.length},addItems:function(e){var t,i=this.dom(),i=(this.settings,d(i).find(".text-wrap-inner input")),e=e||i.val();if(""!=e&&null!=e&&e!=undefined)if(e.length<1||31<e.length)this.input.setError(d.su.CHAR.VTYPETEXT.LEN_MIN_MAX.replace("%min",1).replace("%max",31));else{if(this.isKeyword(e)||this.isURL(e))return(t=d.isArray(d.su.clone(this.getValue()))?d.su.clone(this.getValue()):[]).length+1>this.maxItems?(i.val(""),i.blur(),this.dom().triggerHandler("ev_items_limit"),!0):this.checkItems(e)?(i.val(""),i.blur(),!1):(t.push(e),this.dom().triggerHandler("ev_view_change",[{"type":"value","value":t}]),i.val(""),i.blur(),!0);this.input.setError(d.su.CHAR.PARENTAL_CONTROLS.FILTER_LEVEL_NOTE4)}else this.input.setError(d.su.CHAR.VTYPETEXT.BLANKTEXT)},loadItems:function(e){var t=this.dom(),i=this.settings,s=(this.items=e,"");s+='<div class="app-name-wrapper">';for(var a=0;a<e.length;a++)s=(s+='<div class="app-name" data-val="'+e[a].name+'">')+"<span>"+e[a].name+"</span></div>";s=s+'</div><div class="app-name-note">'+("app"==i.type?d.su.CHAR.PARENTAL_CONTROLS.FILTER_LEVEL_NOTE2:d.su.CHAR.PARENTAL_CONTROLS.FILTER_LEVEL_NOTE3)+"</div>",d(t).find(".filter-hint").empty().append(s)},getHintBase:function(){return this.items},search:function(e){var t=d.su.clone(this.getHintBase()),i=d.su.clone(t),s=[],a=new RegExp(e,"i"),n=[];if(!e)return!1;for(var r=0;r<t.length;r++)a.test(t[r].name)&&(n.push({name:t[r].name,key:t[r].key,checked:!0}),s.push(r)),i[r].checked=!1;for(var o=s.length-1;0<=o;o--)i.splice(s[o],1);return 0==n.length?(this.loadItems(i),!1):(t=this.sort(n).concat(this.sort(i)),this.loadItems(t),!0)},checkHintBase:function(e){for(var t=d.su.clone(this.getHintBase()),i=new RegExp("^"+e+"$"),s=0;s<t.length;s++)if(i.test(t[s].name))return!0;return!1},sort:function(e){return e.sort(function(e,t){return e["name"].toLowerCase()<t["name"].toLowerCase()?-1:1})},isKeyword:function(e){return!!new RegExp(/^[\w-]+$/i).test(e)},isURL:function(e){return!!new RegExp(/^([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?$/i).test(e)},setMaxItems:function(e){e&&(this.maxItems=parseInt(e))}})}(jQuery),function(n){n.su.Widget.register("weekdaySelect",{settings:{},listeners:[{selector:".icon",event:"click",callback:function(e,t){n(this).toggleClass("selected");var i=t.getValue();t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}])}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=!1===t.labelField?"label-empty":"",i=(e.addClass(t.cls+"wireless-schedule-repeat-container "+i),"");null!==t.labelField&&(i=(i+='<div class="widget-fieldlabel-wrap'+t.labelCls+(""==t.labelField?" empty":"")+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div></div>"),i=(i+='<div class="widget-wrap-outer wireless-schedule-repeat-wrap-outer"><ul><li ><span class="icon sun" data-type="sun"></span></li> <li ><span class="icon mon" data-type="mon"></span></li> <li ><span class="icon tue" data-type="tue"></span></li> <li ><span class="icon wed" data-type="wed"></span></li> <li ><span class="icon thu" data-type="thu"></span></li> <li ><span class="icon fri" data-type="fri"></span></li> <li ><span class="icon sat" data-type="sat"></span></li> ')+'</ul><div widget="errortip" error-cls="'+t.errorTipsCls+'"></div></div>',e.empty().append(i)},setValue:function(e){var t=this.dom();if(e){var i=e.split(",");if(t.find(".icon").removeClass("selected"),"eve"!=e){if("weekdays"==e)return t.find(".icon.mon").addClass("selected"),t.find(".icon.tue").addClass("selected"),t.find(".icon.wed").addClass("selected"),t.find(".icon.thu").addClass("selected"),void t.find(".icon.fri").addClass("selected");if("weekends"==e)return t.find(".icon.sat").addClass("selected"),void t.find(".icon.sun").addClass("selected");for(var s=0;s<i.length;s++){var a=i[s].toLowerCase();t.find(".icon."+a).addClass("selected")}}else t.find(".icon").addClass("selected")}else t.find(".icon").removeClass("selected")},getValue:function(){for(var e=[],t="",i=this.dom().find(".icon"),s=this.settings.configs&&this.settings.configs.format,a=0;a<i.length;a++)n(i[a]).hasClass("selected")&&e.push(n(i[a]).attr("data-type"));if(s)return s(e);return 7==(t=e.join(",")).split(",").length&&/(((mon)|(tue)|(wed)|(thu)|(fri)),){6}((mon)|(tue)|(wed)|(thu)|(fri))/.test(t)?"eve":5==t.split(",").length&&/(((mon)|(tue)|(wed)|(thu)|(fri)),){4}((mon)|(tue)|(wed)|(thu)|(fri))/.test(t)?"weekdays":2==t.split(",").length&&/((sat)|(sun)),((sat)|(sun))/.test(t)?"weekends":t}})}(jQuery),function(){var e=jQuery.su.Widget.register("commonServices",{extend:"repeat",settings:{},listeners:[],init:function(){e.superclass.init.call(this),this.settings.itemRender=function(e,t){var i='<div class="common-service-kinds-layout">';return i+'<div class="common-service-kinds">'+("<span>"+t.name+"</span>")+"</div>"+"</div>"}}})}(),function(i){i.su.Widget.register("portalPreview",{settings:{},listeners:[],init:function(){},render:function(){var e=this.dom(),t=(this.settings,e.addClass("portal-preview-container"),'<div class="portal-preview-wrapper">'),t=(t=(t=(t+='<div class="portal-login-logo"><span></span></div>')+'<div class="portal-login-title"><span></span></div>'+('<div widget="textbox" id="'+this.domId+'_textbox" class="label-empty" hint="{GUEST_NETWORK.PASSWORD}"></div>'))+('<div widget="button" id="'+this.domId+'_button" class="login-button"text="{GUEST_NETWORK.LOG_IN}" label-field="{false}"></div>'))+('<div widget="checkbox"  id="'+this.domId+'_checkbox" class="accept-checkbox" box-label="{GUEST_NETWORK.TERMS_NOTE}" label-field="{false}"></div>')+"</div>";e.empty().append(t),this.password=new i.su.widgets.textbox({id:this.domId+"_textbox"}),this.password.render(),this.password.hide(),this.button=new i.su.widgets.button({id:this.domId+"_button"}),this.button.render(),this.checkbox=new i.su.widgets.checkbox({id:this.domId+"_checkbox"}),this.checkbox.render()},setTitle:function(e){this.dom().find(".portal-login-title").find("span").text(e)},showPassword:function(){var e=this.dom();this.password.show(),e.addClass("password")},hidePassword:function(){var e=this.dom();this.password.hide(),e.removeClass("password")},restoreDefault:function(){var e=this.dom();e.find(".portal-login-title").find("span").text(i.su.CHAR.GUEST_NETWORK.WELCOME),e.find(".portal-login-logo").find("span").css({"background":'url("themes/gaming/img/portal_logo.png")',"background-size":"80px"}),e.css("background",'url("themes/gaming/img/portal_back.jpg")')},changeLogo:function(e){this.dom().find(".portal-login-logo").find("span").css({"background":'url("'+e+'") no-repeat center',"background-size":"contain"})},changeBackground:function(e){this.dom().css({"background":'url("'+e+'") no-repeat center',"background-size":"contain"})}})}(jQuery),$.su.Widget.register("treeNode",{settings:{childrenProp:{attribute:"children-prop",defaultValue:"branches"}},listeners:[],init:function(){this._key=$.su.guid("tree-node")},render:function(){this.dom().addClass("tree-node-container")},loadData:function(e){this.dom(),this.settings.childrenProp;this._renderNodeAsBranch(e)},setValue:function(e){},_nodeIsBranch:function(e){},_nodeIsLeaf:function(e){},_renderNodeAsBranch:function(e,t){this._children=[]},_renderNodeAsLeaf:function(e,t){},_findByKey:function(e){if(e===this._key)return this;if(this._children){for(var t=0;t<this._children.length;t++){var i=this._children[t];if(i._findByKey(e))return i}return!1}return!1},find:function(e){}}),$.su.Widget.register("tree",{settings:{childrenProp:{attribute:"children-prop",defaultValue:"branches"}},listeners:[],init:function(){},render:function(){var e=this.dom();e.addClass("tree-container");e.append('<div class="tree-root"><ul class="tree-root-children-ul"></ul></div>')},_createRootNode:function(e){return new $.su.widgets["treeNode"]({id:e})},renderTree:function(e){var t=0,i=(e=$.isArray(e)?e:[e]).length;for(this._children=[];t<i;t++){var s=$('<div uuid="'+e[t].uuid+'"></div>'),s=(this.dom().find(".tree-root-children-ul").append(s),this._createRootNode(s));this._children.push(s),s.render(),s.loadData(e[t])}},_findByKey:function(e){if(this._children){for(var t=0;t<this._children.length;t++){var i=this._children[t];if(i._findByKey(e))return i}return!1}return!1}}),function(){var a={"FULL":"full","PARTIAL":"partial","UNSELECTED":"unSelected"},e={"FULL":"selected","PARTIAL":"partial-selected"},o=$.su.Widget.register("folderTreeNode",{extend:"treeNode",settings:function(e){return $.extend(!0,{},e,{accordion:!1,lazyLoad:!0})},listeners:function(){return[{selector:".folder-tree-folder-node-select-icon",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault(),t._selectStatus===a.FULL?t.unSelect():t.select(),t.syncSelectedStatusToChildren(),t.syncSelectedStatusToParent();e=$(this).closest(".folder-tree-folder-node-row").find(".folder-tree-folder-node-text").attr("path");t.dom().closest(".folder-tree-root-children-ul").trigger("ev_click_item",[e,t._selectStatus===a.FULL])}},{selector:".folder-tree-folder-node-text",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();e={};$(this).closest(".folder-tree-folder-node").hasClass("empty")||("undefined"==$(this).attr("uuid")?(e.uuid=$(this).parent().closest("[uuid]").attr("uuid"),e.path=$(this).attr("path"),t._open?t.dom().closest(".folder-tree-container").triggerHandler("ev_folder_tree_close",[e,function(e){t.close(200)}]):t.dom().closest(".folder-tree-container").triggerHandler("ev_folder_tree_open",[e,function(e){t._renderNodeAsChild(e)&&t.open(200),t.syncSelectedStatusToChildren(),t.dom().closest(".folder-tree-root-children-ul").trigger("ev_click_item_open",[e])}])):t._open?t.close(200):t.open(200))}},{selector:".folder-tree-folder-node-open-icon",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();e={};$(this).closest(".folder-tree-folder-node").hasClass("empty")||("undefined"==$(this).closest(".folder-tree-folder-node").find(".folder-tree-folder-node-text").attr("uuid")?(e.uuid=$(this).parent().closest("[uuid]").attr("uuid"),e.path=$(this).closest(".folder-tree-folder-node-row").find(".folder-tree-folder-node-text").attr("path"),t._open?t.dom().closest(".folder-tree-container").triggerHandler("ev_folder_tree_close",[e,function(e){t.close(200)}]):t.dom().closest(".folder-tree-container").triggerHandler("ev_folder_tree_open",[e,function(e){t._renderNodeAsChild(e)&&t.open(200),t.syncSelectedStatusToChildren(),t.dom().closest(".folder-tree-root-children-ul").trigger("ev_click_item_open",[e])}])):t._open?t.close(200):t.open(200))}}]},init:function(){o.superclass.init.call(this),this._path=$.su.guid("tree-node"),this._selectStatus=a.UNSELECTED,this.parentNode=null},render:function(){o.superclass.render.call(this),this.dom().addClass("folder-tree-node-container")},_nodeIsBranch:function(e){return e.hasBranch},_nodeIsLeaf:function(e){return!e.hasBranch},_renderNodeAsBranch:function(e){this._children=[],this._path=e.path;var t=this.dom(),i=(t.addClass("folder-tree-folder-node empty"),""),i=(i=(i=(i=(i+="<div>")+'<div class="folder-tree-folder-node-row">'+'<a class="checkbox">')+'<span class="folder-tree-folder-node-select-icon"></span>'+"</a>")+'<a class="text-node">'+('<span uuid="'+e.uuid+'" path="'+e.path+'" class="folder-tree-folder-node-text">'+e.name+"</span>"),t.append(i=(i=(i=i+'<span class="folder-tree-folder-node-open-icon"></span>'+"</a>")+"</div>"+'<ul class="folder-tree-folder-node-children-ul">')+"</ul>"+"</div>"),t.find(".folder-tree-folder-node-children-ul")),s=e[this.settings.childrenProp];i.hide(),this._nodeIsBranch(e)&&t.removeClass("empty"),s&&this._renderNodeAsChild(e)},_renderNodeAsChild:function(e){var t=e[this.settings.childrenProp],i=this.dom(),s=i.find(".folder-tree-folder-node-children-ul"),a=t&&t.length,n=0;if(!(0<a))return i.addClass("empty"),!1;for(i.removeClass("empty"),i.find(".folder-tree-folder-node-text").attr("uuid",e.uuid);n<a;n++){var r=$("<div></div>"),r=(s.append(r),new o({id:r}));this._children.push(r),r.parentNode=this,r.render(),r.loadData(t[n])}return!0},_renderNodeAsLeaf:function(e){},open:function(e){e=e||0===e?e:200,this._open=!0;var t=this.dom();t.find(".folder-tree-folder-node-children-ul").eq(0).slideDown(e),t.find(".folder-tree-folder-node-open-icon").eq(0).addClass("opened")},close:function(e){e=e||0===e?e:200,this._open=!1;var t=this.dom();t.find(".folder-tree-folder-node-children-ul").eq(0).slideUp(e),t.find(".folder-tree-folder-node-open-icon").eq(0).removeClass("opened")},select:function(){this._selectStatus!=a.FULL&&(this._selectStatus=a.FULL,this.dom().find(".folder-tree-folder-node-select-icon").eq(0).removeClass(e.PARTIAL).addClass(e.FULL))},unSelect:function(){this._selectStatus!=a.UNSELECTED&&(this._selectStatus=a.UNSELECTED,this.dom().find(".folder-tree-folder-node-select-icon").eq(0).removeClass(e.PARTIAL+" "+e.FULL))},partialSelect:function(){this._selectStatus!=a.PARTIAL&&(this._selectStatus=a.PARTIAL,this.dom().find(".folder-tree-folder-node-select-icon").eq(0).removeClass(e.FULL).addClass(e.PARTIAL))},syncSelectedStatusToChildren:function(){var i,e=this._selectStatus;e==a.FULL?i="select":e==a.UNSELECTED&&(i="unSelect"),this._children&&$.each(this._children,function(e,t){i&&t[i](),t.syncSelectedStatusToChildren()})},syncSelectedStatusToParent:function(){if(this.parentNode){for(var e=!0,t=!0,i=this.parentNode._children.length,s=0;s<i;s++){switch(this.parentNode._children[s]._selectStatus){case a.FULL:t=!1;break;case a.UNSELECTED:e=!1;break;case a.PARTIAL:e=t=!1}if(!e&&!t)break}e?this.parentNode.select():t?this.parentNode.unSelect():this.parentNode.partialSelect(),this.parentNode.syncSelectedStatusToParent()}},getSelectedTree:function(i){this._selectStatus==a.FULL?i.push(this._path):this._children&&$.each(this._children,function(e,t){t.getSelectedTree(i)})},_findByPath:function(e){if(e===this._path)return this;if(this._children){for(var t=0;t<this._children.length;t++){var i=this._children[t];if(i._findByPath(e))return i._findByPath(e)}return!1}return!1}})}(),function(){var t=$.su.Widget.register("folderTree",{extend:"tree",listeners:function(){return[{selector:".folder-tree-root-children-ul",event:"ev_click_item",callback:function(e,t,i,s){for(var a=0,n=s._unexpandedTree.length;a<n;a++)-1<s._unexpandedTree[a].indexOf(t)&&s._unexpandedTree.splice(a,1);var r=s.getSelectedTree().concat(s._unexpandedTree);s.dom().triggerHandler("ev_view_change",[{"type":"value","value":JSON.stringify($.unique(r))}])}},{selector:".folder-tree-root-children-ul",event:"ev_click_item_open",callback:function(e,t,i){i._selectTree([i._unexpandedTree])}}]},init:function(){this._originData=[],this._unexpandedTree=[],this._setOnce=!0},render:function(){var e=this.settings,t=!1===e.labelField?"label-empty":"",i=this.dom(),t=(i.addClass("widget-container folder-tree-container tree-container "+t),"");null!==e.labelField&&(t=(t+='<div class="widget-fieldlabel-wrap '+e.labelCls+'">')+'<div class="widget-fieldlabel-inner"><label class="widget-fieldlabel text-fieldlabel">'+e.labelField+"</label>",e.labelField&&(t+='<span class="widget-separator">'+e.separator+"</span>"),t+="</div></div>"),i.append(t=(t=(t=(t=t+'<div class="widget-wrap-outer folder-tree-wrap-outer tree-wrap-outer">'+'<div class="widget-wrap folder-tree-wrap tree-wrap">')+'<div class="folder-tree-root tree-root">'+'<ul class="folder-tree-root-children-ul tree-root-children-ul">')+"</ul>"+"</div>")+"</div>"+"</div>"),$.su.scrollbar({ele:i.find(".folder-tree-wrap-outer")[0],opts:{wheelPropagation:!0,useBothWheelAxes:!0,suppressScrollY:!0}})},_createRootNode:function(e){return new $.su.widgets["folderTreeNode"]({id:e})},clearTree:function(e){this.dom().find(".tree-root-children-ul").empty()},renderTree:function(e){t.superclass.renderTree.call(this,e),this.setValue(null)},setValue:function(e){null!==e?e.length&&"object"==typeof e&&(this._setOnce&&(this._originData=e,this._unexpandedTree=this.getUnexpandedTree(),this._setOnce=!1),this._selectTree(e)):this.dom().triggerHandler("ev_view_change",[{"type":"value","value":[]}])},_selectTree:function(e){if(null!==e)for(var t=0,i=e.length;t<i;t++)for(var s=0,a=e[t].length;s<a;s++){var n=this._findByPath(e[t][s]);if(n)n.select(),n.syncSelectedStatusToChildren(),n.syncSelectedStatusToParent();else for(var r=e[t][s].match(/(.+)\/.+/);r&&r[1];){var o=this._findByPath(r[1]);o&&o.partialSelect(),r=r[1].match(/(.+)\/.+/)}}},getSelectedTree:function(){var s;return!!this._children&&(s=[],$.each(this._children,function(e,t){var i=[];t.getSelectedTree(i),0<i.length&&(s=s.concat(i))}),s)},getUnexpandedTree:function(){for(var e=[],t=0,i=this._originData.length;t<i;t++)for(var s=0,a=this._originData[t].length;s<a;s++)this._findByPath(this._originData[t][s])||e.push(this._originData[t][s]);return e},compareTree:function(e){},_findByPath:function(e){if(this._children){for(var t=0;t<this._children.length;t++){var i=this._children[t];if(i._findByPath(e))return i._findByPath(e)}return!1}return!1}})}(),$.su.Widget.register("mobileTopBar",{settings:{readOnly:{attribute:"read-only",defaultValue:!1},leftButtonId:{attribute:"left-button-id",defaultValue:null},rightButtonId:{attribute:"right-button-id",defaultValue:null}},listeners:[{selector:".text-wrap input",event:"keyup",callback:function(e,t){var i=$(this).val();t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}])}}],init:function(){},render:function(){var e,t,i=this.dom(),s=this.settings,a="<div>",s=(a=(a+='<div class="logo inline-block"></div>')+'<div class="center-text inline-block hidden"></div>'+'<div class="top-bar-button-container">',null==s.leftButtonId?(s.leftButtonId="menu-button",a+='<div widget="button" icon-cls="menu" class="inline-block menu-button" id="menu-button"></div>'):(e=$("#"+this.settings.leftButtonId)).attr("widget","button"),null==s.rightButtonId?(s.rightButtonId="func-button",a+='<div widget="button" class="inline-block func-button" id="func-button" text="{COMMON.SAVE}"></div>'):(t=$("#"+this.settings.rightButtonId)).attr("widget","button"),a=a+"</div>"+"</div>",$(a));e&&s.find(".top-bar-button-container").prepend(e),t&&s.find(".top-bar-button-container").append(t),i.addClass("top-bar").empty().append(s),i.find("div[widget=button]").each(function(){var e=$(this);new $.su.widgets.button({id:e}).render()})},setCenterText:function(e){var t,i;null!==e&&e!==undefined&&(t=this.dom().find(".logo"),i=this.dom().find(".center-text"),""===e?(t.show(),i.hide()):(t.hide(),i.show().html(e)))},leftBtn:function(){return this.dom().find("#"+this.settings.leftButtonId).data("viewObj")},rightBtn:function(){return this.dom().find("#"+this.settings.rightButtonId).data("viewObj")},addClass:function(e){return this.dom().addClass(e)},removeClass:function(e){return this.dom().removeClass(e)}}),jQuery,$.su.Widget.register("transition",{init:function(){this._fields=[]},render:function(){var i=this,e=(this._domStr=this.dom().html(),this._domStr.replace(/{.*?}/g,function(e){var t=$.su.getAttrObject($.su.CHAR,e);return t||(i._fields.push({name:e.replace(/[\{,\}]/g,""),value:null}),e)})),e=(this._initTransferedStr=e).replace(/{.*?}/g,function(e){return""});this.dom().html(e)},setField:function(e,t){for(var i=this._fields,s=0;s<i.length;s++)i[s].name===e&&(i[s].value=t);this._updateDomStr()},_updateDomStr:function(){var n=this,e=this._initTransferedStr.replace(/{.*?}/g,function(e){for(var t,i=e.replace(/[\{,\}]/g,""),s=n._fields,a=0;a<s.length;a++)if(s[a].name===i)return null===(t=s[a].value)?"":t;return""});this.dom().html(e)}}),function(){var Time=$.su.Widget.register("combination",{settings:{widgetSeparator:{attribute:"widget-separator",defaultValue:""},subLabelField:{attribute:"sub-label-field",defaultValue:""},total:{attribute:"total",defaultValue:""},autoCompose:{attribute:"auto-compose",defaultValue:!0}},listeners:[],init:function(){},render:function(){var _this=this.dom(),settings=this.settings,hour=" hour-"+settings.hourSystem,inHTML=(_this.addClass(settings.cls+"combination-container"),""),widgets=(!1===settings.labelField&&!settings.subLabelField||(inHTML+='<div class="widget-fieldlabel-wrap '+settings.labelCls+(settings.labelField?" has-main-label":"")+'">',inHTML+='<div class="widget-fieldlabel-inner">',inHTML+='<label class="widget-fieldlabel combination-fieldlabel">'+settings.labelField+"</label>",""!==settings.labelField&&(inHTML+='<span class="widget-separator">'+settings.separator+"</span>"),""!==settings.subLabelField&&(inHTML+='<span class="widget-sub-fieldlabel combination-sub-fieldlabel">'+settings.subLabelField+"</span>"),inHTML+="</div>",inHTML+="</div>"),inHTML+='<div class="widget-wrap-outer combination-wrap-outer">',inHTML+='<div class="widget-wrap combination-wrap">',inHTML+="</div>",inHTML+="</div>",settings.tipText&&(inHTML+='<div widget="toolTip"></div>'),_this.find("div[widget]")),len=(this.widgets=widgets,widgets.length),separatorIsArray;_this.append(inHTML),_this.find("div.combination-wrap").eq(0).append(widgets),settings.autoCompose&&(/^\[.*\]$/.test(settings.widgetSeparator)&&(settings.widgetSeparator=eval(settings.widgetSeparator)),separatorIsArray=$.isArray(settings.widgetSeparator),widgets.each(function(e,t){var i=$(this).attr("widget");$(this).addClass("widget-"+e+" "+i+"-"+e),!1!==settings.widgetSeparator&&e<len-1&&$(this).after('<span class="separator separator-'+e+'">'+(separatorIsArray&&settings.widgetSeparator[e]||settings.widgetSeparator)+"</span>")}),_this.addClass("total-"+(""===settings.total?len:settings.total)))},enable:function(){this.dom().removeClass("disabled"),this.widgets.each(function(){$(this).data("viewObj").enable()})},disable:function(){this.dom().addClass("disabled"),this.widgets.each(function(){$(this).data("viewObj").disable()})},setSubLabel:function(e){e!==undefined&&null!==e&&this.dom().find(".combination-sub-fieldlabel").html(e)},remove:function(){var e=this.dom();e.find("[widget]").each(function(e,t){t=$(t).data("viewObj");t&&t.remove()}),e.remove(),this.settings=null,this._view&&this._view.removeChildWidget(this)}})}(),$.su.Widget.register("steps",{settings:{fields:{attribute:"fields",defaultValue:null}},render:function(){var e=this.dom(),t=this.settings.fields,i=(e.addClass("steps-container"),'<ul class="steps-ul">');if(t)for(var s=0;s<t.length;s++){var a="string"==typeof t[s].text?t[s].text:"",i=(i=i+('<li class="step-li step-point-wrapper step-item'+t[s].name+'">')+('<div class="step-item-text hidden">'+a+"</div>"))+'<div class="step-item-point"></div>'+"</li>";s!=t.length-1&&(i=i+('<li class="step-li step-line-wrapper'+t[s].name)+'"><div class="step-item-line"></div></li>')}e.append(i+="</ul>")},loadItems:function(e){for(var t=this.settings.fields=e,i="",s=0;s<t.length;s++){var a="string"==typeof t[s].text?t[s].text:"",i=(i=i+('<li class="step-li step-point-wrapper step-item'+t[s].name+'">')+('<div class="step-item-text hidden">'+a+"</div>"))+'<div class="step-item-point"></div>'+"</li>";s!=t.length-1&&(i=i+('<li class="step-li step-line-wrapper'+t[s].name)+'"><div class="step-item-line"></div></li>')}this.dom().find(".steps-ul").empty().append(i)},setValue:function(e){this.dom();var t=this.settings.fields;if(t){this.value=e,this.dom().find(".step-point-wrapper").removeClass("current done undone"),this.dom().find(".step-item-text").addClass("hidden");var i=this.dom().find(".step-item"+e),s=this.dom().find(".step-item"+e+" .step-item-text");0<i.length&&(i.prevAll().removeClass("current"),i.prevAll().removeClass("undone"),i.prevAll().addClass("done"),i.nextAll().removeClass("current"),i.nextAll().removeClass("done"),i.nextAll().addClass("undone"),i.removeClass("done"),i.removeClass("undone"),i.addClass("current"),s.removeClass("hidden"));for(var a=0;a<t.length;a++)$("div.fieldset-container."+t[a].container).hide();$("div.fieldset-container."+e).show()}},getValue:function(){return this.value},next:function(){this.dom();for(var e=this.settings.fields,t=this.getValue(),i=0;i<e.length&&t!=e[i].name;i++);i<e.length-1&&(this.setValue(e[i+1].name),this.dom().triggerHandler("ev_view_change",[{"type":"value","value":e[i+1].name}]))},back:function(){this.dom();for(var e=this.settings.fields,t=this.getValue(),i=0;i<e.length&&t!=e[i].name;i++);0<i&&(this.setValue(e[i-1].name),this.dom().triggerHandler("ev_view_change",[{"type":"value","value":e[i-1].name}]))}}),function(o){o.su.Widget.register("information",{settings:{operation:{attribute:"operation",defaultValue:""},plugins:{attribute:"plugins",defaultValue:""},caseSensitive:{attribute:"case-sensitive",defaultValue:!0}},listeners:[{selector:".information-panel-tbar-container .search-text",event:"keyup",callback:function(e,t){13===e.keyCode&&t.dom().find(".btn-search").trigger("click")}},{selector:".information-panel-tbar-container .btn-search",event:"click",callback:function(e,t){var i=t.dom().find(".search-text").val();t.search(i),t._search.success&&t.showResult(),t._search.success&&0<t._search.total&&t.jumpTo(t._search.current)}},{selector:".information-panel-tbar-container .btn-search-prev",event:"click",callback:function(e,t){t._search.current<=1?t._search.current=t._search.total:t._search.current--,t.jumpTo(t._search.current)}},{selector:".information-panel-tbar-container .btn-search-next",event:"click",callback:function(e,t){t._search.current>=t._search.total?t._search.current=1:t._search.current++,t.jumpTo(t._search.current)}},{selector:".information-panel-tbar-container .btn-clear",event:"click",callback:function(e,t){t.clear()}},{selector:".information-panel-tbar-container .btn-refresh",event:"click",callback:function(e,t){t.refresh()}}],init:function(e){this._items=[],this._textList=[],this._keyMap={},this._search={}},render:function(){var e=this.dom(),t=this.settings,i=(e.addClass("container widget-container information-panel-container"),""),i=(i+'<div class="information-panel-wrap">'+'<div class="information-panel-content">'+'<div class="information-panel-tbar-container hidden"></div>'+'<div class="information-panel-content-container">'+'<div class="information-content-container">'+'<div class="information-content-inner"></div>'+"</div>"+"</div>"+"</div>"+"</div>",o('<div class="information-panel-wrap"><div class="information-panel-content"><div class="information-panel-tbar-container hidden"></div><div class="information-panel-content-container"><div class="information-content-container"><div class="information-content-inner"></div></div></div></div></div>'));e.append(i),t.plugins&&this.initPlugins(t.plugins.split("|")),o.su.scrollbar({ele:e.find(".information-content-container")[0],opts:{minScrollbarLength:50}})},initPlugins:function(e){this.dom();for(var t,i,s=this,a=this.settings,n=0,r=(e=o.isArray(e)?e:[e]).length;n<r;n++)t=e[n],i=void 0,i=o.extend({},a),"tBar"===t&&i.operation&&s.initTBar(i.operation.split("|"))},initTBar:function(e){for(var t=this.dom().find("div.information-panel-tbar-container"),i=(this.settings,t.removeClass("hidden"),'<div class="operation-container" id="'+this.domId+'">'),s=0,a=e.length;s<a;s++)switch(e[s]){case"clear":i=(i=i+'<a href="javascript:void(0);" tbar-name="clear" class="operation-btn btn-clear">'+'<span class="icon"></span>')+('<span class="text">'+o.su.CHAR.OPERATION.CLEAR_ALL+"</span>")+"</a>";break;case"search":i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i+='<div class="text-container search-container hidden-result">')+'<div class="widget-wrap text-wrap search-text-wrap">'+'<span class="text-wrap-inner">')+('<input type="text" class="text-text search-text" placeholder="'+o.su.CHAR.COMMON.SEARCH+'" />')+"</span>")+'<a href="javascript:void(0);" class="btn-search"></a>'+"</div>")+'<div class="search-result-wrap">'+'<span class="search-result-success">')+('<span class="search-result-text">'+o.su.CHAR.OPERATION.RESULT+": ")+'<span id="search-result-current"></span>/<span id="search-result-total"></span>')+"</span>"+'<a href="javascript:void(0);" tbar-name="search-next" class="search-result-btn btn-search-next">')+'<span class="icon"></span>'+"</a>")+'<a href="javascript:void(0);" tbar-name="search-prev" class="search-result-btn btn-search-prev">'+'<span class="icon"></span>')+"</a>"+"</span>")+('<span class="search-result-fail"><span class="search-result-text">'+o.su.CHAR.OPERATION.NO_MATCHES+"</span></span>"))+"</div>"+"</div>";break;case"refresh":i=(i=i+'<a href="javascript:void(0);" tbar-name="refresh" class="operation-btn btn-refresh">'+'<span class="icon"></span>')+('<span class="text">'+o.su.CHAR.OPERATION.REFRESH+"</span>")+"</a>"}var n=o(i+="</div>");t.append(n)},syncData:function(e,t){this._items=[],this._textList=[],this.hideResult(),this.dom().find(".search-text").val(""),this.dom().find(".information-content-inner").empty(),this.dom().triggerHandler("ev_store_render_items",[e])},renderModels:function(e,t,i){this.dom(),this.settings;for(var s="",a=0;a<t.length;a++){var n=t[a].getData();this._items.push(n),this._keyMap[n.key]=a,s+=this.renderRow(n,a)}this.dom().find(".information-content-inner").html(s)},getRow:function(e,t){this.dom(),this.settings},createRow:function(e,t){this.dom(),this.settings},renderRow:function(e,t){e=this.convert(e);return this._textList.push(e),'<p class="information-wrap" data-index="'+t+'">'+e+"</p>"},remove:function(e){var t=this._keyMap[e],i=this.dom();t!==undefined?(i.find(".information-wrap[data-index="+t+"]").remove(),delete this._keyMap[e],this._items.splice(t,1),this._textList.splice(t,1)):(i.find(".information-content-inner").html(""),this.init())},refresh:function(){this.dataBind[0].load(),this.hideResult(),this.dom().find(".search-text").val(""),this.dom().triggerHandler("ev_refresh")},clear:function(){this.dataBind[0];this.dom().triggerHandler("ev_grid_delete_all"),this.hideResult(),this.dom().find(".search-text").val(""),this.dom().triggerHandler("ev_clear")},search:function(e){var t,i,s,a=this,n=a.dom().find(".information-content-inner");if(a.hideResult(),"string"===o.type(e)&&0!==e.length)return t=0,s=(s=e).replace(/[\*\.\?\+\$\^\[\]\(\)\{\}\|\\\/]/g,function(e){return"\\"+e}),i=new RegExp(s,a.settings.caseSensitive?"g":"gi"),n.find(".information-wrap").each(function(){var e=o(this).text().replace(i,function(e){return'<span id="search-result-'+ ++t+'" class="highlight">'+o("<div>").text(e).html()+"</span>"});o(this).html(e)}),a._search.current=1,a._search.total=t,a._search.text=e,a._search.success=!0,t},clearSearch:function(){this.dom().find(".highlight").replaceWith(function(){return o(this).html()})},showResult:function(){var e=this._search.total,t=this.dom().find(".search-container");0===e?t.addClass("fail-result").removeClass("success-result"):(this.dom().find("#search-result-total").text(e),t.addClass("success-result").removeClass("fail-result")),t.removeClass("hidden-result")},hideResult:function(){this._search.current=1,this._search.total=0,this._search.text="",this._search.success=!1,this.dom().find(".search-container").addClass("hidden-result").removeClass("success-result","fail-result"),this.clearSearch()},jumpTo:function(e){var t=this.dom(),e=t.find("#search-result-"+e),i=t.find(".information-panel-content-container"),s=t.find(".information-content-container"),a=s.height(),n=i.height(),i=i.outerHeight(),r=s.scrollTop(),i=(i-n)/2,n=e.position().top;t.find(".highlight").removeClass("target"),e.addClass("target"),s.scrollTop(n+r-a+2*i),t.find("#search-result-current").text(this._search.current)},getDisplay:function(){return this._textList},convert:function(e){var t="";if(this.settings.configs&&"function"===o.type(this.settings.configs.convert)&&this.settings.configs.convert)t=this.settings.configs.convert(e);else for(var i=this.dataBind[0].dataObj.fields.slice(0,-1),s=0;s<i.length;s++)t+=e[i[s].name]+" ";return t=o("<div>").text(t).html()}})}(jQuery),function(u){u.su.Widget.register("wifiList",{settings:{operation:{attribute:"operation",defaultValue:""},plugins:{attribute:"plugins",defaultValue:""},manualStore:{attribute:"manualStore",defaultValue:""}},listeners:[{selector:".wifiList-item",event:"click",callback:function(e,t){t.hideAllWidget();var t=u(this).closest(".wifiList-wrap").find(".wifiList-item-widget"),i=(t.find("div[widget=button]").data("viewObj"),t.show(),t.find(".password-text"));0!=i&&""==(""==u(i[0]).val()?u(i[1]):u(i[0])).val()&&t.find("div[widget=button]").addClass("disabled")}},{selector:".wifiList-content-inner a.button-button",event:"click",callback:function(e,t){var i=u(this).closest(".wifiList-wrap").find(".wifiList-item-widget"),s=i.find("div[widget=button]").data("viewObj"),i=i.find(".password-text"),i=(""==u(i[0]).val()?u(i[1]):u(i[0])).val(),a=u(this).closest(".wifiList-wrap").find(".wifiList-item").text(),n={};n.ssid=a,n.password=i||"",t.dom().triggerHandler("ev_connect_click",[n,s])}},{selector:".wifiList-content-manual a.button-button",event:"click",callback:function(e,t){var i=u(this).closest(".wifiList-wrap").find(".wifiList-item-widget"),s=i.find("div[widget=button]").data("viewObj"),i=i.find(".password-text"),i=(""==u(i[0]).val()?u(i[1]):u(i[0])).val(),a=u(this).closest(".wifiList-wrap").find(".wifiList-item-widget"),n={};n.ssid=a.find("div.name-content").find("input").val(),n.security=a.find("input.combobox-text").val(),n.password=i,t.dom().triggerHandler("ev_connect_click",[n,s])}},{selector:".password-content",event:"keyup",callback:function(e,t){var i=u(this).closest(".wifiList-wrap").find(".wifiList-item-widget"),s=i.find(".password-text");""==(""==u(s[0]).val()?u(s[1]):u(s[0])).val()?i.find("div[widget=button]").addClass("disabled"):i.find("div[widget=button]").removeClass("disabled")}},{selector:".wifiList-panel-tbar-container .btn-refresh",event:"click",callback:function(e,t){t.refresh()}}],init:function(e){},render:function(){var i=this,e=this.dom(),t=this.settings,s=(e.addClass("container widget-container wifiList-panel-container"),""),s=((s+='<div class="wifiList-panel-wrap">')+'<div class="wifiList-panel-content">'+'<div class="wifiList-panel-tbar-container hidden"></div>'+'<div class="wifiList-panel-content-container">'+'<div class="wifiList-content-container">'+'<div class="wifiList-content-inner"></div>'+'<div class="wifiList-content-manual"></div>'+"</div>"+"</div>"+"</div>"+"</div>",u('<div class="wifiList-panel-wrap"><div class="wifiList-panel-content"><div class="wifiList-panel-tbar-container hidden"></div><div class="wifiList-panel-content-container"><div class="wifiList-content-container"><div class="wifiList-content-inner"></div><div class="wifiList-content-manual"></div></div></div></div></div>'));e.append(s),t.manualStore&&this.initManualOptions(t.manualStore.split("|")),t.operation&&this.initTBar(t.operation.split("|")),e.find("div[widget=combobox]").on("ev_view_change",function(e,t){"value"==t.type&&i.combobox.setValue(t.value)})},initManualOptions:function(e){this.dom(),this.settings;for(var t,i=this.dom().find("div.wifiList-content-manual"),s="",a=(s=(s=(s=(s=(s=(s=(s=(s+='<div class="wifiList-wrap">')+'<div class="wifiList-item">Manual Setting'+"</div>")+'<div class="wifiList-item-widget">'+'<div class="name-content">')+('<div widget="textbox" label-field="'+u.su.CHAR.OPERATION.NETWORK_NAME+'"></div>')+"</div>")+'<div class="combobox-content">'+('<div widget="combobox" data-options="{'+e+'}" label-field="'+u.su.CHAR.OPERATION.SECURITY+'"></div>'))+"</div>"+'<div class="password-content">')+('<div widget="password" label-field="'+u.su.CHAR.OPERATION.PASSWORD+'"></div>')+"</div>")+'<div class="button-content">'+('<div widget="button" class="full-line" text="'+u.su.CHAR.OPERATION.CONNECT+'"></div>'),u(s=(s+="</div>")+"</div>"+"</div>").appendTo(i),i.find(".name-content").find("div[widget=textbox]")),n=0,r=a.length;n<r;n++)new u.su.widgets.textbox({id:u(a[n])}).render();for(var o=i.find(".combobox-content").find("div[widget=combobox]"),n=0,r=o.length;n<r;n++)(t=new u.su.widgets.combobox({id:u(o[n]),view:this._view})).render();this.combobox=t;for(var d=i.find(".password-content").find("div[widget=password]"),n=0,r=d.length;n<r;n++)new u.su.widgets.password({id:u(d[n])}).render();for(var l=i.find(".button-content").find("div[widget=button]"),n=0,r=l.length;n<r;n++)new u.su.widgets.button({id:u(l[n])}).render()},initTBar:function(e){for(var t=this.dom().find("div.wifiList-panel-tbar-container"),i=(this.settings,t.removeClass("hidden"),e=u.isArray(e)?e:[e],'<div class="operation-container" id="'+this.domId+"_"+e+'">'),s=0,a=e.length;s<a;s++)"refresh"===e[s]&&(i=(i+='<a href="javascript:void(0);" tbar-name="refresh" class="operation-btn btn-refresh"><span class="icon"></span>')+'<span class="text">'+u.su.CHAR.OPERATION.REFRESH+"</span></a>");var n=u(i+="</div>");t.append(n)},syncData:function(e,t){this._keys=e,this._items=[],this._textList=[],this.dom().find(".wifiList-content-inner").empty(),this.dom().triggerHandler("ev_store_render_items",[e])},renderModels:function(l,e,c){this.dom(),this.settings;for(var t="",i=0;i<e.length;i++){var s=e[i].getData();this._items.push(s),t+=this.renderRow(s)}for(var a=this.dom().find(".wifiList-content-inner"),n=(a.append(t),a.find(".password-content").find("div[widget=password]")),r=0,o=n.length;r<o;r++)new u.su.widgets.password({id:u(n[r])}).render();for(var d=a.find(".button-content").find("div[widget=button]"),r=0,o=d.length;r<o;r++)new u.su.widgets.button({id:u(d[r])}).render();this.hideAllWidget()},renderRow:function(e){e=this.convert(e);this._textList.push(e);var t=(t='<div class="wifiList-wrap"><div class="wifiList-item-box">')+'<div class="wifiList-item">'+e.name+'<span class="icon-wifi"></span>';return"no"!==e.security&&(t+='<span class="icon-lock"></span>'),t=t+"</div>"+'<div class="wifiList-item-widget">',t=(t=(t=(t="no"!==e.security?(t+='<div class="password-content">')+'<div widget="password" label-field="'+u.su.CHAR.OPERATION.PASSWORD+'"></div></div>':t)+'<div class="button-content">'+('<div widget="button" class="full-line" text="'+u.su.CHAR.OPERATION.CONNECT+'"></div>'))+"</div>"+"</div>")+"</div>"+"</div>"},renderLastRow:function(){var e="";return e+'<div class="wifiList-wrap">'+'<div class="wifiList-item">Manual Setting'+'<span class="icon-lock"></span>'+'<span class="icon-wifi"></span>'+"</div>"+'<div class="wifiList-item-widget">'+'<div class="textbox-content">'+('<div widget="textbox" label-field="'+u.su.CHAR.OPERATION.NETWORK_NAME+'"></div>')+"</div>"+'<div class="combobox-content">'+('<div widget="combobox" data-options="{securityStore}" label-field="'+u.su.CHAR.OPERATION.SECURITY+'"></div>')+"</div>"+'<div class="password-content">'+('<div widget="password" label-field="'+u.su.CHAR.OPERATION.PASSWORD+'"></div>')+"</div>"+'<div class="button-content">'+('<div widget="button" class="full-line" text="'+u.su.CHAR.OPERATION.CONNECT+'"></div>')+"</div>"+"</div>"+"</div>"},refresh:function(){this.dataBind[0].load(),this.dom().triggerHandler("ev_refresh")},hideAllWidget:function(){for(var e=this.dom().find(".wifiList-item-widget"),t=0;t<e.length;t++)u(e[t]).hide()},convert:function(e){var t={};return t.name=e.name||"unknown",t.security=e.security||"no",t},setStatus:function(e,t){this.connnectStatus=!!e;e=t.dom().closest(".wifiList-wrap").find(".wifiList-item-widget").find("div[widget=password]").data("viewObj");this.connnectStatus?(e&&e.show(),t.setText("CONNECT")):(e&&e.hide(),t.setText("RETRY"))}})}(jQuery),function(){var e=$.su.Widget.register("storagePieChartGroup",{settings:{configs:{attribute:"configs",defaultValue:null},pieChartOption:{attribute:"pie-chart-option",defaultValue:{baseOption:{series:[{type:"pie",hoverAnimation:!1,radius:["0%","30%"],avoidLabelOverlap:!0,stillShowZeroSum:!1,label:{normal:{show:!0,position:"center",color:"rgba(255,255,255,0.8)",value:"#fff",fontSize:"16",lineHeight:20,formatter:function(e){return $.su.CHAR.GRID.TOTAL+":\n"+$.su.numToCapacity(e.name)}}},data:[{value:0,name:"{total}"}]},{type:"pie",hoverAnimation:!1,radius:["78%","100%"],avoidLabelOverlap:!0,label:{normal:{show:!1}},labelLine:{normal:{show:!1}},data:"{formData}",color:[]}]}}}},listeners:[{selector:".storage-pie-chart-group-switch-pre",event:"click",callback:function(e,t){$(this).hasClass("disable")||t.switchToPre()}},{selector:".storage-pie-chart-group-switch-next",event:"click",callback:function(e,t){$(this).hasClass("disable")||t.switchToNext()}},{selector:function(){return{parent:window}},event:"resize",callback:function(e,t){t.echart.resize()}}],init:function(){e.superclass.init.call(this),this._data=[],this.echart=null,this.settings.configs.fields=this.settings.configs.fields||[],this.settings.pieChartOption.baseOption.series[1].color=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].color);return t}(this.settings.configs.fields),this._currentDataIndex=null},render:function(){var e,t=this,i=this.dom(),s=(this.settings,""),s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s=(s+='<div class="storage-pie-chart-group-wrap">')+'<div class="storage-pie-chart-group-operation-bar tbar-container">'+'<div class="storage-pie-chart-group-switch-container">')+'<a class="storage-pie-chart-group-switch-pre">'+"</a>")+'<div class="storage-pie-chart-group-item-title">'+"</div>")+'<a class="storage-pie-chart-group-switch-next">'+"</a>")+"</div>"+'<div class="storage-pie-chart-group-refresh operation-container">')+"<a href='javascript:void(0);' class='operation-btn btn-refresh'>"+"<span class='icon'></span>")+("<span class='text'>"+$.su.CHAR.OPERATION.REFRESH+"</span>"))+"</a>"+"</div>")+"</div>"+'<div class="storage-pie-chart-group-chart-wrap">')+'<div class="storage-pie-chart-group-pie-chart-wrap">'+'<div class="storage-pie-chart-group-pie-chart">')+"</div>"+"</div>")+'<div class="storage-pie-chart-group-table-chart-wrap">'+'<div class="storage-pie-chart-group-table-chart">')+"</div>"+"</div>")+"</div>"+"</div>";if(i.addClass("storage-pie-chart-group-container").append(s),window.echarts===undefined)return e=$.Deferred(),$.su.router.loadFile("js/libs/echarts.min.js?t=29dee038",function(){t.renderPieChart(),e.resolve()}),e.promise();window.echarts&&t.renderPieChart()},renderPieChart:function(){var e=this.dom();this.echart=echarts.init(e.find(".storage-pie-chart-group-pie-chart").get(0))},switchToPre:function(){this.switchToItemByIndex(this._currentDataIndex-1)},switchToNext:function(){this.switchToItemByIndex(this._currentDataIndex+1)},getCurrentDataIndex:function(){return this._currentDataIndex},switchToItemByIndex:function(e){this._loadChartData(this._data[e]),this._currentDataIndex=e,this._updateSwitchButton()},_loadChartData:function(e){for(var t=this.dom(),i=this._pieChartDataDealer(e),i=(this.echart.setOption(i),e[this.settings.configs.nameField]),s=(t.find(".storage-pie-chart-group-item-title").text(i),""),a=this.settings.configs.fields,n=0;n<a.length;n++)var r=a[n],s=(s=(s=(s=(s=(s=(s+='<div class="storage-pie-chart-group-table-chart-item '+r.dataIndex+'">')+('<div class="storage-pie-chart-group-table-chart-item-spot" style="background-color:'+r.color+'">'))+"</div>"+'<div class="storage-pie-chart-group-table-chart-item-label">')+(r.text+this.settings.separator))+"</div>"+'<div class="storage-pie-chart-group-table-chart-item-value">')+e[r.dataIndex])+"</div>"+"</div>";t.find(".storage-pie-chart-group-table-chart").empty().append(s)},_pieChartDataDealer:function(e){for(var t=$.extend(!0,{},this.settings.pieChartOption),i=this.settings.configs.fields,s=[],a=0,n=0;n<i.length;n++){var r=e[i[n].dataIndex];s.push({name:i[n].text,value:$.su.capacityToNum(r)}),a+=$.su.capacityToNum(r)}return t.baseOption.series[0].data[0].name=$.su.numToCapacity(a),t.baseOption.series[1].data=s,t},_updateSwitchButton:function(){var e=this._data.length;this._enablePreBtn(),this._enableNextBtn(),0===this._currentDataIndex&&this._disablePreBtn(),this._currentDataIndex===e-1&&this._disableNextBtn()},_disablePreBtn:function(){this.dom().find(".storage-pie-chart-group-switch-pre").addClass("disable")},_enablePreBtn:function(){this.dom().find(".storage-pie-chart-group-switch-pre").removeClass("disable")},_disableNextBtn:function(){this.dom().find(".storage-pie-chart-group-switch-next").addClass("disable")},_enableNextBtn:function(){this.dom().find(".storage-pie-chart-group-switch-next").removeClass("disable")},_showBtn:function(){this.dom().find(".storage-pie-chart-group-switch-next").show(),this.dom().find(".storage-pie-chart-group-switch-pre").show()},_hideBtn:function(){this.dom().find(".storage-pie-chart-group-switch-next").hide(),this.dom().find(".storage-pie-chart-group-switch-pre").hide()},loadItems:function(e){this._data=$.su.clone(e),0<e.length&&(this.switchToItemByIndex(0),1==this._data.length?this._hideBtn():this._showBtn())}})}(),function(a){var e=a.su.Widget.register("antivirusHistory",{extend:"repeat",settings:{},listeners:[],init:function(){var s=this;e.superclass.init.call(this),this.settings.itemRender=function(e,t){if(s.categoryList!=undefined){var i="<div>";switch(t.type){case"block":i=(i=(i=(i=(i=i+'<div class="antivirus-history-list-item malicious">'+'<span class="icon"></span>')+'<div class="info">'+('<div class="client"><span class="client-label">'+a.su.CHAR.ANTIVIRUS.DEVICE_NAME+':</span> <span class="client-content">'+t.client+"</span></div>"))+('<span class="blocked-website">'+a.su.CHAR.ANTIVIRUS.BLOCKED+": "+t.blockedWebsite+"</span>"))+('<span class="reason">'+a.su.CHAR.ANTIVIRUS.INTERCEPT_REASONS+": "+s.getCategory(t.categoryId)+"</span>")+"</div>")+('<span class="time">'+s.transformTime(t.timestamp)+"</span>")+"</div>";break;case"prevent":i=(i=(i=(i=(i=i+'<div class="antivirus-history-list-item instrusion">'+'<span class="icon"></span>')+'<div class="info">'+('<div class="client"><span class="client-label">'+a.su.CHAR.ANTIVIRUS.DEVICE_NAME+':</span> <span class="client-content"> '+t.client+"</span></div>"))+('<span class="attacker">'+a.su.CHAR.ANTIVIRUS.ATTACK_FROM+": "+t.attacker+"</span>"))+('<span class="reason">'+a.su.CHAR.ANTIVIRUS.INTERCEPT_REASONS+": "+s.getRule(t.ruleId)+"</span>")+"</div>")+('<span class="time">'+s.transformTime(t.timestamp)+"</span>")+"</div>";break;case"infected_block":i=(i=(i=(i=(i=i+'<div class="antivirus-history-list-item infected">'+'<span class="icon"></span>')+'<div class="info">'+('<div class="client"><span class="client-label">'+a.su.CHAR.ANTIVIRUS.DEVICE_NAME+':</span> <span class="client-content"> '+t.client+"</span></div>"))+('<span class="blocked-ip">'+a.su.CHAR.ANTIVIRUS.ATTACK_FROM+": "+t.blockedIp+"</span>"))+('<span class="reason">'+a.su.CHAR.ANTIVIRUS.INTERCEPT_REASONS+": "+(s.getCategory(t.categoryId)||s.getRule(t.categoryId))+"</span>")+"</div>")+('<span class="time">'+s.transformTime(t.timestamp)+"</span>")+"</div>"}return i+="</div>"}}},parseFormat:function(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e},transformTime:function(e){var t=this,e=new Date(1e3*e),i=new Date;return e.getMonth()==i.getMonth()&&e.getDay()==i.getDay()?e.getHours()<=12?a.su.CHAR.DATE.TODAY+", "+t.parseFormat(e.getHours(),2)+":"+t.parseFormat(e.getMinutes(),2)+a.su.CHAR.HOUR.AM:a.su.CHAR.DATE.TODAY+", "+t.parseFormat(e.getHours()-12,2)+":"+t.parseFormat(e.getMinutes(),2)+a.su.CHAR.HOUR.PM:e.getMonth()==i.getMonth()&&e.getDay()==i.getDay()-1?e.getHours()<=12?a.su.CHAR.DATE.YESTERDAY+", "+t.parseFormat(e.getHours(),2)+":"+t.parseFormat(e.getMinutes(),2)+a.su.CHAR.HOUR.AM:a.su.CHAR.DATE.YESTERDAY+", "+t.parseFormat(e.getHours()-12,2)+":"+t.parseFormat(e.getMinutes(),2)+a.su.CHAR.HOUR.PM:e.getHours()<=12?t.parseFormat(e.getDate(),2)+"."+t.parseFormat(e.getMonth()+1,2)+", "+t.parseFormat(e.getHours(),2)+":"+t.parseFormat(e.getMinutes(),2)+a.su.CHAR.HOUR.AM:t.parseFormat(e.getDate(),2)+"."+t.parseFormat(e.getMonth()+1,2)+", "+t.parseFormat(e.getHours()-12,2)+":"+t.parseFormat(e.getMinutes(),2)+a.su.CHAR.HOUR.PM},setCategoryList:function(e){this.categoryList=e},getCategory:function(e){for(var t=this.categoryList,i=0;i<t.length;i++)if(t[i].id==e)return t[i].name;return undefined},setRuleList:function(e){this.ruleList=e},getRule:function(e){for(var t=this.ruleList,i=0;i<t.length;i++)if(t[i].id==e)return t[i].name;return undefined}})}(jQuery),function(i){i.su.Widget.register("cloudIframe",{settings:{},listeners:[],init:function(){},render:function(){var e=this.dom();this.settings,e.addClass("cloud-iframe-container");e.append('<iframe id="cloud-login" name="cloud-login" frameborder="0" scrolling="no" src=""></iframe>'),this.receiveMessage()},setCloudOrigin:function(e){this.cloudOrigin=e},setIframeSrc:function(e){var t=this.dom(),e=this.cloudOrigin+"/cloud_ui_11ax/pages/device/index.html?module="+e;i(t).find("#cloud-login").attr("src",e)},receiveMessage:function(){},postMessage:function(e,t){window.frames["cloud-login"]&&window.frames["cloud-login"].postMessage("",me.cloudOrigin)}})}(jQuery),function(l){var e=function(){var e=!0,t=l('<canvas width="0" height="0" style="display: none;"></canvas>').appendTo(l("body"));try{t[0].getContext("2d"),e=!0}catch(i){e=!1}return t.remove(),e}(),t="Microsoft Internet Explorer"===navigator.appName&&/Trident/i.test(navigator.userAgent)&&/MSIE\s+8\.0/i.test(navigator.userAgent),s=l.su.Widget.register("speedTestGauge",{extend:"echart",settings:{type:{attribute:"type",defaultValue:"gauge"}},listeners:[],init:function(){this.axisTickBackground=t||!e?"#4acbd6":{image:this.getBackgroundFromCanvas([74,203,214],[39,41,100]),repeat:"no-repeat"}},getBackgroundFromCanvas:function(e,c){var t,i,s=document.createElement("canvas"),a=(s.width=s.height=200,s.getContext("2d")),n=s.width/2,r=s.height/2,o=Math.min(n,r),u=[];a.beginPath(),a.moveTo(n,r),t=.5*Math.PI,i=Math.PI,a.arc(n,r,o,t,i),a.fillStyle="rgb("+e.join()+")",a.fill(),a.closePath();for(var d=0;d<179;d++){for(var l=0;l<3;l++)u[l]=Math.round((c[l]-e[l])/180*d+e[l]);a.beginPath(),a.moveTo(n,r),i=(t=Math.PI+Math.PI/180*d)+Math.PI/180*2,a.fillStyle="rgb("+u.join()+")",a.arc(n,r,o,t,i),a.fill(),a.closePath()}return a.beginPath(),a.moveTo(n,r),t=0*Math.PI,i=.5*Math.PI,a.arc(n,r,o,t,i),a.fillStyle="rgb("+c.join()+")",a.fill(),a.closePath(),s},render:function(){var i=this.dom();return s.superclass.render.call(this).then(function(){var e,t;return i.addClass("speedTestGauge-container"),e=i.find(".chart-canvas"),t="",t=(t='<div class="chart-info"><div class="chart-title"></div><div class="chart-detail"><div class="chart-value"></div>')+'<div class="chart-unit">'+l.su.CHAR.NETWORK_MAP.MBPS_2+"</div></div></div>",e.find(".chart-info").detach().end().append(t),l.Deferred().resolve()})},setOption:function(e){var t=this.dom(),i=e.name,s=e.value,t=(t.find(".chart-title").text(i),t.find(".chart-value").text(s),this.calculateOption({value:s,name:i,convert:e.convert}));t[0].title.show=!1,t[0].detail.show=!1,this.setGaugeOption({series:t})},calculateOption:function(e){var t=[],i=(e=l.extend({min:0,max:300,value:0,type:"gauge",data:[{value:0,name:""}]},e),parseInt(e.value,10)),i=(i<10?s=Math.floor(i/10*62.5):10<=i&&i<25?s=Math.floor(62.5+(i-10)/15*31.25):25<=i&&i<50?s=Math.floor(93.75+(i-25)/25*31.25):50<=i&&i<100?s=Math.floor(125+(i-50)/50*31.25):100<=i&&i<300?s=Math.floor(156.25+(i-100)/200*31.25):300<=i&&i<1e3?s=Math.floor(187.5+(i-300)/700*31.25):1e3<=i&&i<2500?s=Math.floor(218.75+(i-1e3)/1500*31.25):2500<=i&&(s=250),215-s),s=function(e){return e},a=function(e){return e};if("array"===l.type(e.convert)){for(var n=e.convert,r=[],o=(e.max-e.min)/e.splitNumber,d=0;d<=e.splitNumber;d++)r.push(o*d+e.min);s=c(r,n),a=c(n,r),e.formatValue=a(e.value)}n=74<(n=Math.floor((215-i)/250*75))?75:n;return t.push({name:e.name,type:e.type,startAngle:215,endAngle:i,splitNumber:1,axisLine:{show:!1,lineStyle:{width:11,opacity:0}},splitLine:{show:!1},axisTick:{length:11,splitNumber:n,lineStyle:{color:this.axisTickBackground,width:2}},axisLabel:{show:!1,formatter:s},pointer:{show:!1},itemStyle:{},title:{show:!1},detail:{show:!1},data:[{value:e.formatValue,name:e.name}]}),t.push({name:"",type:e.type,startAngle:i,endAngle:-35,splitNumber:1,axisLine:{show:!1,lineStyle:{width:11,opacity:0}},splitLine:{show:!1},axisTick:{length:11,splitNumber:75-n-1,lineStyle:{color:"#a7a9ac",width:2}},axisLabel:{show:!1,formatter:s},pointer:{show:!1},itemStyle:{},title:{show:!1},detail:{show:!1}}),t}});function c(d,l){return function(e){for(var t,i,s,a,n=e,r=n,o=0;o<d.length-1;o++)if(n>=d[o]&&n<=d[o+1]){t=d[o],i=l[o],s=d[o+1],r=(a=((a=l[o+1])-i)/(s-t))*n+(i-a*t);break}return 10*(r=r>l[l.length-1]?l[l.length-1]:r).toFixed(1)/10}}}(jQuery),function(d){var e,t={_canvasSupport:function(){var e=!0,t=d('<canvas width="0" height="0" style="display: none;"></canvas>').appendTo(d("body"));try{t[0].getContext("2d"),e=!0}catch(i){e=!1}return t.remove(),e}(),_blobSupport:function(){var e=!1;try{new Blob,e=!0}catch(t){e=!1}return e}(),_browserSupport:(e=navigator.userAgent,!/AppleWebKit.*Mobile.*/i.test(e)||!!(/chrome\/(\d|\.)+\s+(mobile\s+)?Safari\/(\d|\.)+$/i.test(e)||/firefox/i.test(e)||/YaBrowser/i.test(e)||/(OPR|opera)/i.test(e)||!/chrome/i.test(e)&&/safari/i.test(e)))};d.su.Widget.register("wifisharing",{settings:{sharingText:{attribute:"sharing-text",defaultValue:""}},listeners:[{selector:".wifisharing-sharing-btn-container .wifisharing-sharing-btn",event:"click",callback:function(e,t){t.showContent()}},{selector:".wifisharing-save-btn-container",event:"click",callback:function(e,t){(t._enable.qrcode||t._enable.text)&&t.saveImage()}},{selector:".wifisharing-qrcode-checkbox-container",event:"click",callback:function(e,t){var i=t.dom().find(".wifisharing-qrcode-checkbox-container").data("viewObj");t._enable.qrcode?(i.setValue(!1),t.disableQrcode()):(i.setValue(!0),t.enableQrcode())}},{selector:".wifisharing-text-checkbox-container",event:"click",callback:function(e,t){var i=t.dom().find(".wifisharing-text-checkbox-container").data("viewObj");t._enable.text?(i.setValue(!1),t.disableText()):(i.setValue(!0),t.enableText())}}],init:function(e){this._data={ssid:"",password:"",security:""},this._enable={qrcode:!0,text:!0},this._canvasSupport=t._canvasSupport,this._blobSupport=t._blobSupport,this._browserSupport=t._browserSupport},render:function(){var i=this,s=this.dom(),e=(this.settings,s.addClass("container widget-container wifisharing-container"),""),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e+='<div class="wifisharing-wrap">')+'<div class="wifisharing-sharing-btn-container">'+('<a href="javascript:void(0);" class="wifisharing-sharing-btn">'+i.settings.sharingText+"</a>"))+"</div>"+'<div class="wifisharing-main-container">')+'<div class="wifisharing-main-outer">'+'<div class="wifisharing-delta-container">')+'<span class="icon-delta"></span>'+"</div>")+'<div class="wifisharing-main-wrap">'+'<div class="wifisharing-content">')+'<div class="wifisharing-qrcode-container">'+'<div class="wifisharing-qrcode-wrap"></div>')+'<div class="wifisharing-checkbox-container wifisharing-qrcode-checkbox-container"></div>'+"</div>")+'<div class="wifisharing-text-container">'+'<div class="wifisharing-text-wrap">')+('<div class="ssid-displaylabel-container reset" widget="displaylabel" label-field="'+d.su.CHAR.WIFI_SHARING.SSID+'"></div>')+'<div class="wifisharing-password-container">')+('<div class="password-displaylabel-container reset" widget="displaylabel" label-field="'+d.su.CHAR.WIFI_SHARING.PASSWORD+'"></div>')+'<div class="wifisharing-no-password-content hidden">')+('<p class="wifisharing-no-password-text">'+d.su.CHAR.WIFI_SHARING.NO_PASSWORD+"</p>")+"</div>")+"</div>"+"</div>")+'<div class="security-displaylabel-container reset hidden" widget="displaylabel"></div>'+'<div class="wifisharing-checkbox-container wifisharing-text-checkbox-container"></div>')+"</div>"+"</div>",this._blobSupport&&this._browserSupport&&(e=(e+='<div class="wifisharing-save-btn-container">')+'<a href="javascript:void(0);" class="wifisharing-save-btn">'+d.su.CHAR.WIFI_SHARING.SAVE_PICTURE+"</a></div>"),s.append(e=(e=e+"</div>"+"</div>")+"</div>"+"</div>"),new d.su.widgets.displaylabel({id:s.find(".ssid-displaylabel-container")})),t=new d.su.widgets.displaylabel({id:s.find(".password-displaylabel-container")}),a=(e.render(),t.render(),d.Deferred()),n=d.Deferred();return d("<div>").qrcode?a.resolve():d.su.router.loadFile("js/libs/jquery.qrcode.min.js").then(function(){a.resolve()}),a.then(function(){i._blobSupport&&i._browserSupport?window.html2canvas?(r(),n.resolve()):d.su.router.loadFile("js/libs/html2canvas.min.js").then(function(){r(),n.resolve()}):n.resolve()}),d.when(n).promise();function r(){var e=new d.su.widgets.checkbox({id:s.find(".wifisharing-qrcode-checkbox-container")}),t=new d.su.widgets.checkbox({id:s.find(".wifisharing-text-checkbox-container")});e.render(),t.render(),e.setValue(!0),t.setValue(!0),i.enableQrcode(),i.enableText()}},generateQRCodeText:function(e){var t,i=function(e){return e&&e.replace(/([\\\,\"\;\:])/g,"\\$1")},s="";switch((e=d.extend({ssid:"",password:"",security:""},e)).security.toLowerCase()){case"wpa":case"wpa2":case"psk":case"psk_sae":t="WPA";break;case"wep":t="WEP";break;default:t="nopass"}return(s+="WIFI:S:")+(i(e.ssid)+";")+"T:"+(t+";")+"P:"+(i(e.password)+";")},generateQRCode:function(e){var t=this.generateQRCodeText(this._data),i=this.dom().find(".wifisharing-qrcode-wrap");e=d.extend({width:i.innerWidth()||84,height:i.innerHeight()||84,render:this._canvasSupport?"canvas":"table",correctLevel:1,foreground:"#000000",text:function(e){for(var t,i="",s=e.length,a=0;a<s;a++)1<=(t=e.charCodeAt(a))&&t<=127?i+=e.charAt(a):i=2047<t?(i=(i+=String.fromCharCode(224|t>>12&15))+String.fromCharCode(128|t>>6&63))+String.fromCharCode(128|t>>0&63):(i+=String.fromCharCode(192|t>>6&31))+String.fromCharCode(128|t>>0&63);return i}(t)},e),i.empty().qrcode(e)},setValue:function(e){var t=this.dom();d.extend(this._data,e),t.find(".ssid-displaylabel-container").data("viewObj").setValue(this._data.ssid),t.find(".password-displaylabel-container").data("viewObj").setValue(this._data.password),0<this._data.password.length?(t.find(".password-displaylabel-container").data("viewObj").show(),t.find(".wifisharing-no-password-content").addClass("hidden")):(t.find(".password-displaylabel-container").data("viewObj").hide(),t.find(".wifisharing-no-password-content").removeClass("hidden")),this.generateQRCode()},showContent:function(){var t=this,i=t.dom().find(".wifisharing-main-container");0<i.filter(":animated").length||i.slideDown(150,function(){d("html").off(".wifisharing").on("click.wifisharing","div",function(e){e.stopPropagation(),0!==i.find(this).length&&!i.is(this)||(t.hideContent(),d("html").off(".wifisharing"))});var e=d("div").not(i);e.off("scroll.wifisharing").on("scroll.wifisharing",function(){t.hideContent(),e.off("scroll.wifisharing").off("scroll.wifisharing")})})},hideContent:function(){var e=this.dom().find(".wifisharing-main-container");0<e.filter(":animated").length||e.slideUp(150)},enableQrcode:function(){this.dom().find(".wifisharing-qrcode-container").removeClass("disabled"),this._enable.qrcode=!0,this.generateQRCode({foreground:"#000000"}),this.refreshStatus()},disableQrcode:function(){this.dom().find(".wifisharing-qrcode-container").addClass("disabled"),this._enable.qrcode=!1,this.generateQRCode({foreground:"#676666"}),this.refreshStatus()},enableText:function(){this.dom().find(".wifisharing-text-container").removeClass("disabled"),this._enable.text=!0,this.refreshStatus()},disableText:function(){this.dom().find(".wifisharing-text-container").addClass("disabled"),this._enable.text=!1,this.refreshStatus()},enableSaveBtn:function(){this.dom().find(".wifisharing-save-btn-container").removeClass("disabled")},disableSaveBtn:function(){this.dom().find(".wifisharing-save-btn-container").addClass("disabled")},refreshStatus:function(){var e=this._enable;e.qrcode||e.text?this.enableSaveBtn():this.disableSaveBtn()},saveImage:function(){var s,t=this,i="qrcode.png",e=t.dom();if(!this._canvasSupport||!this._blobSupport||!this._browserSupport)return!1;(a=(e=e).clone(!1)).find("canvas")[0].getContext("2d").drawImage(e.find("canvas")[0],0,0),a.css({"position":"absolute","bottom":0,"opacity":0});var a,n=a.removeClass("popup").addClass("download").prependTo("body");if(n.find(".wifisharing-checkbox-container").remove(),t._enable.qrcode&&t._enable.text)s=n.find(".wifisharing-content");else if(t._enable.qrcode&&!t._enable.text)s=n.find(".wifisharing-qrcode-wrap");else{if(t._enable.qrcode||!t._enable.text)return!1;s=n.find(".wifisharing-text-wrap")}s.css({"background-color":n.find(".wifisharing-main-wrap").css("background-color"),"border":"1px solid "+n.find(".wifisharing-main-wrap").css("border-top-color"),"border-radius":"5px","width":s.width(),"height":s.height(),"margin":"0 auto","padding":"18px","box-sizing":"content-box","text-align":s.css("text-align")});var r=function(e,t){t=d.extend({width:300,height:300},t);var i=document.createElement("canvas");return i.width=t.width,i.height=Math.max(s.outerHeight(),t.height),i.getContext("2d").drawImage(e,(i.width-e.width)/2,(i.height-e.height)/2),i},o=function(e,t){var i,s;navigator.msSaveBlob?navigator.msSaveBlob(e,t):(i=document.createElement("a"),s=window.URL.createObjectURL(e),i.href=s,i.download=t,document.body.appendChild(i),i.click(),setTimeout(function(){window.URL.revokeObjectURL(s),document.body.removeChild(i)},100))};html2canvas(s[0],{letterRendering:!0,onrendered:function(e){e=r(e,{width:300,height:300}).toDataURL("image/png"),e=t._getBlob(e);n.remove(),o(e,i)}})},_getBlob:function(e){var t=(t=e).substr(t.indexOf("base64,")+7,t.length),e=/data:([^;]*);/i.exec(e)[1],i=void 0;e=e||"",i=i||512;for(var s=atob(t),a=[],n=0;n<s.length;n+=i){for(var r=s.slice(n,n+i),o=new Array(r.length),d=0;d<r.length;d++)o[d]=r.charCodeAt(d);var l=new Uint8Array(o);a.push(l)}return new Blob(a,{type:e})},show:function(){this.dom().removeClass("hidden")},hide:function(){this.dom().addClass("hidden")}})}(jQuery),function(n){n.su.Widget.register("interfaceList",{settings:{},listeners:[],init:function(e){},render:function(){var e=this.dom();this.settings;e.addClass("widget-container interface-list-container");e.append('<ul class="interface-list-wrap"></ul>')},syncData:function(e,t){this.dom().triggerHandler("ev_store_render_items",[e])},renderModels:function(e,t,i){for(var s="",a=0;a<t.length;a++){var n=t[a].getData();s+=this.renderItem(n,a)}for(var r=8;r--;)s+='<li class="stand-in"></li> ';this.dom().find(".interface-list-wrap").html(s)},renderItem:function(e,t){var i,s,a=(a=(a='<li class="interface-list-item '+("connected"===e.status?"connected":"disconnected")+'">')+'<div class="interface-item-wrap">'+'<span class="interface-icon"></span>')+('<span class="interface-name">'+(i=e.type,s=e.serial,"wan"!==i.toLowerCase()?s?n.su.CHAR.NETWORK_MAP.LAN+" "+s:i:n.su.CHAR.NETWORK_MAP.INTERNET)+"</span>");return"connected"===e.status?a=(a=(a+='<span class="interface-speed-detail">')+'<span class="interface-speed">'+function(e){if(1e3<(e=parseInt(e,10)))return e/1e3+n.su.CHAR.NETWORK_MAP.GBPS_2;return e+n.su.CHAR.NETWORK_MAP.MBPS_2}(e.speed)+"</span>")+'<span class="interface-duplex">'+("full"!==e.duplex.toLowerCase()?n.su.CHAR.NETWORK_MAP.HALF_DUPLEX:n.su.CHAR.NETWORK_MAP.FULL_DUPLEX)+"</span></span>":a+='<span class="interface-speed-detail">---</span>',a=a+"</div>"+"</li> "}})}(jQuery),function(n){var e;n.su.Manager=(e=function(){if("object"==typeof this.constructor.instance)return this.constructor.instance;n.su.Observable.call(this),(this.constructor.instance=this)._map={},this._infoMap={},this.type=null},n.su.inherit(n.su.Observable,e),e.prototype.define=function(e,t,i){var s,a;this._infoMap[e]?n.su.debug.error('Duplicated definition "'+e+'"'):(this._infoMap[e]={},this._infoMap[e].constructor=i?(s=this.type,a=i,function(e){s.call(this,e),a&&n.extend(this,a.call(this))}):this.type,this._infoMap[e].options=t)},e.prototype.init=function(e){this._infoMap[e]&&(this._map[e]=new this._infoMap[e].constructor(this._infoMap[e].options))},e.prototype.get=function(e){return this._map[e]},e.prototype.destroy=function(e){delete this._map[e]},e)}(jQuery),function(n){function r(e){return"ev_"+e+"_defined"}var e;n.su.ModelManager=(e=function(){n.su.Manager.call(this),this.type=n.su.Model},n.su.inherit(n.su.Manager,e),e.prototype.define=function(e,t,i){var s=this,a=n.extend({name:e,factory:i,singleton:!0},t);this._infoMap[e]?n.su.debug.error('Duplicated model definition "'+e+'"'):t&&n.su.Model.checkProxyDep(t.proxy)?n.su.Model.importProxyDep(t.proxy,function(){s._infoMap[e]={"settings":a,"constructor":n.su.Model,"status":"defined"},s.trigger(r(e))}):(s._infoMap[e]={"settings":a,"constructor":n.su.Model,"status":"defined"},s.trigger(r(e)))},e.prototype.init=function(e){var t=this._infoMap[e];if(!t||"available"==t.status)return null;!1!==t.settings.singleton?(this._map[e]=new this._infoMap[e].constructor(this._infoMap[e].settings),this._infoMap[e].status="available"):t.status="available"},e.prototype.get=function(e){var t=this._infoMap[e];return t?!1===t.settings.singleton?new this._infoMap[e].constructor(this._infoMap[e].settings):this._map[e]||null:null},e.prototype.loadDefine=function(e,t){this.one(r(e),t),n.su.router.loadModel(e)},e.prototype.getStatus=function(e){return this._infoMap[e]?this._infoMap[e].status:null},e.prototype.isDefined=function(e){return!!this._infoMap[e]},e.prototype.isAvailable=function(e){return!(!this._infoMap[e]||"available"!==this._infoMap[e].status)},e.prototype.destroy=function(e){delete this._map[e]},e)}(jQuery),function(n){function r(e){return"ev_"+e+"_defined"}var e;n.su.StoreManager=(e=function(){n.su.Manager.call(this),this.type=n.su.Store},n.su.inherit(n.su.Manager,e),e.prototype.define=function(e,t,i){var s=this,a=n.extend({name:e,factory:i,singleton:!0},t);this._infoMap[e]?n.su.debug.error('Duplicated store definition "'+e+'"'):t&&n.su.Store.checkProxyDep(t.proxy)?n.su.Store.importProxyDep(t.proxy,function(){s._infoMap[e]={"settings":a,"status":"defined"},s.trigger(r(e))}):(s._infoMap[e]={"settings":a,"status":"defined"},s.trigger(r(e)))},e.prototype.init=function(e){var t,i=this._infoMap[e];if(!i||"available"==i.status)return null;!1!==i.settings.singleton?(t=this._infoMap[e].settings.type||"store",this._map[e]=new n.su[n.su.format.capitalize(t)](this._infoMap[e].settings),this._infoMap[e].status="available"):i.status="available"},e.prototype.get=function(e){var t,i=this._infoMap[e];return i?!1===i.settings.singleton?(t=this._infoMap[e].settings.type||"store",new n.su[n.su.format.capitalize(t)](i.settings)):this._map[e]||null:null},e.prototype.loadDefine=function(e,t){this.one(r(e),t),n.su.router.loadModel(e)},e.prototype.getStatus=function(e){return this._infoMap[e]?this._infoMap[e].status:null},e.prototype.isDefined=function(e){return!!this._infoMap[e]},e.prototype.isAvailable=function(e){return!(!this._infoMap[e]||"available"!==this._infoMap[e].status)},e.prototype.destroy=function(e){delete this._map[e]},e)}(jQuery),function(k){k.su=k.su||{},k.su.ModuleManager=function(){var e=function(){k.su.Manager.call(this),this.type=k.su.Module,this._depMap={},this._toDestroy=[]};k.su.inherit(k.su.Manager,e);return e.prototype.define=function(e,t,i){var s=this,t=k.extend({"name":e,deps:[],models:[],stores:[],views:[]},t);this._infoMap[e]?k.su.debug.error('Duplicated module definition "'+e+'"'):(function(e,t){if(0!==t.length)for(var i=0;i<t.length;i++)this._depMap.hasOwnProperty(t[i])?0<=k.inArray(this._depMap[t[i]],e)||this._depMap[t[i]].push(e):this._depMap[t[i]]=[e]}.call(this,t.name,t.deps),this._infoMap[e]={"settings":t,"constructor":null,"status":k.su.Module.STATUS.LOADING_DEFINE},k.su.inherit(k.su.Module,t=function(e){this.factory=i,k.su.Module.call(this,e)}),this._infoMap[e].constructor=t,function(i,t){var e=this._infoMap[i].settings,s=e.models,a=e.stores,n=e.deps,r=e.views,o=!1,d=!1,l=!1,u=!1,h=function(){for(var e=0;e<s.length;e++){var t=s[e];if(!k.su.modelManager.isDefined(t))return!1}d||(d=!0,c())},p=function(){for(var e=0;e<a.length;e++){var t=a[e];if(!k.su.storeManager.isDefined(t))return!1}l||(l=!0,c())},f=function(){for(var e=0;e<n.length;e++){var t=n[e];if(!k.su.moduleManager.isDefined(t))return!1}o||(o=!0,c())},g=function(){for(var e=0;e<r.length;e++){var t=r[e];if(!k.su.viewManager.isDefined(t,i))return!1}u||(u=!0,c())},c=function(){o&&d&&l&&u&&t()};if(0==s.length)d=!0,c();else for(var v=0;v<s.length;v++){var m=s[v];k.su.modelManager.isDefined(m)?h():k.su.modelManager.loadDefine(m,function(){h()})}if(0==a.length)l=!0,c();else for(var b=0;b<a.length;b++){var w=a[b];k.su.storeManager.isDefined(w)?p():k.su.storeManager.loadDefine(w,function(){p()})}if(0==r.length)u=!0,c();else for(var y=0;y<r.length;y++){var x=r[y];k.su.viewManager.isDefined(x,i)?g():k.su.viewManager.loadDefine(x,i,function(){g()})}if(0==n.length)o=!0,c();else for(var _=0;_<n.length;_++){var C=n[_];k.su.moduleManager.isDefined(C)?f():k.su.moduleManager.getStatus(C)!==k.su.Module.STATUS.LOADING_DEFINE?k.su.moduleManager.loadDefine(C,f):k(k.su.moduleManager).one("ev_module_"+C+"_defined",function(){f()})}}.call(this,e,function(){s._infoMap[e].status=k.su.Module.STATUS.DEFINED,k(s).trigger("ev_module_"+e+"_defined")}))},e.prototype.query=function(e){return this._map[e]||!1},e.prototype.unload=function(e){this._map[e]&&(this._map[e].destroy(),delete this._map[e],this._infoMap[e].status=k.su.Module.STATUS.DEFINED)},e.prototype.loadDefine=function(e,t){k(this).one("ev_module_"+e+"_defined",t),k.su.router.loadController(e)},e.prototype.load=function(e,t){switch(k.su.moduleManager.getStatus(e)){case k.su.Module.STATUS.LOADING_DEFINE:k(k.su.moduleManager).one("ev_module_"+e+"_defined",function(){k.su.moduleManager.init(e),t&&t()});break;case k.su.Module.STATUS.DEFINED:k.su.moduleManager.init(e),t&&t();break;case k.su.Module.STATUS.AVAILABLE:k.su.moduleManager.query(e);t&&t();break;default:k.su.moduleManager.loadDefine(e,function(){k.su.moduleManager.init(e),t&&t()})}},e.prototype.getStatus=function(e){var t=this._infoMap;return t[e]?t[e].status:!!k.su.router.query(e)&&k.su.Module.STATUS.DEFINE_NOT_LOADED},e.prototype.isDefined=function(e){return!(!this._infoMap[e]||this._infoMap[e].status===k.su.Module.STATUS.LOADING_DEFINE)},e.prototype.isAvailable=function(e){return!(!this._infoMap[e]||this._infoMap[e].status!==k.su.Module.STATUS.AVAILABLE)},e.prototype.init=function(e){var i=this;this._infoMap[e]&&this._infoMap[e].status!=k.su.Module.STATUS.AVAILABLE&&(this._map[e]=new this._infoMap[e].constructor(this._infoMap[e].settings),this._infoMap[e].status=k.su.Module.STATUS.AVAILABLE,this._map[e].addListener("ev_to_destroy",function(e,t){i.prepareDestroy(t)}))},e.prototype.prepareDestroy=function(e){if(this._depMap[e])for(var t=0;t<this._depMap[e].length;t++){var i=this._depMap[e][t];if(this.isAvailable(i))return void(-1===k.inArray(e,this._toDestroy)&&this._toDestroy.push(e))}this.unload(e);for(var s=k.inArray(e,this._toDestroy),a=(0<=s&&this._toDestroy.splice(s,1),this._infoMap[e].settings.deps),n=0;n<a.length;n++)0<=k.inArray(a[n],this._toDestroy)&&this.prepareDestroy(a[n])},e.prototype.launch=function(e,t){this.load(e,function(){k.su.moduleManager.query(e).load(t)})},e}()}(jQuery),function(a){a.su.ViewManager=function(){var e=function(){a.su.Manager.call(this),this.type=a.su.View};a.su.inherit(a.su.Manager,e),e.prototype.init=function(e){this._infoMap[e];var e=new a.su.View(e,this._infoMap[e].DOM),t=e.getID();return this._map[t]=e};return e.prototype.define=function(e,t){this._infoMap[e]||(this._infoMap[e]={"DOM":t,"status":"defined"})},e.prototype.isDefined=function(e,t){return!!this._infoMap[e]},e.prototype.loadDefine=function(e,t,i){var s=this;a.su.router.loadView(t,e,function(e){!function(e){var s=this;a(e).filter("[view]").each(function(e,t){var i=a(t).attr("view").replace(/[\{,\}]/g,"");s.define(i,a(t))})}.call(s,e),i&&i()})},e.prototype.get=function(e){e="string"==typeof e?e:e.id;if(this._map[e])return this._map[e]},e.prototype.removeByID=function(e){this._map[e]&&(this._map[e].destroy(),delete this._map[e])},e}()}(jQuery),function(e){var t;e.su.ServiceManager=(t=function(){e.su.Manager.call(this),this.type=e.su.Service},e.su.inherit(e.su.Manager,t),t.prototype.register=function(e,t){if(this._map[e])return this._map[e];this._map[e]=t},t.prototype.get=function(e){return this._map[e]||null},t)}(jQuery),function(a){var e;a.su=a.su||{},a.su.DataBind=(e=function(e,t){a.su.Observable.call(this);if(this.viewObjs=[],this.dataObj=e,t&&(a.isArray(t)||(t=[t])),this.viewEventHandler={},this.dataEventHandler={},this.dataObj&&this.bindDataObj(this.dataObj),t)for(var i=0;i<t.length;i++)this.bindViewObj(t[i])},a.su.inherit(a.su.Observable,e),e.prototype.getName=function(){if(this.dataObj&&this.dataObj._name)return this.dataObj._name},e.prototype.bind=function(e,t){a.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)this.bindViewObj(e[i]);this.bindDataObj(t)},e.prototype.bindDataObj=function(e){var t,i=this.constructor.dataEventMap;for(t in this.unbindDataObj(),this.dataObj=e,i){var s=i[t].fn,s=function(e,t){return function(){e.apply(t,arguments)}}(s="string"==typeof s?this[s]:s,this);this.dataEventHandler[t]=s,e.addListener(t,s)}},e.prototype.viewIsBinded=function(e){return 0<=a.inArray(e,this.viewObjs)},e.prototype.isBinded=function(){return null!==this.dataObj},e.prototype.bindViewObj=function(e){var t=this.constructor,i=t.viewEventMap[e._type]||t.viewEventMap.defaults;if(!this.viewIsBinded(e)){for(var s in this.viewObjs.push(e),this.viewEventHandler[e.domId]={},i){var a=i[s].fn,a=function(t,i,s){return function(){var e=Array.prototype.slice.call(arguments);e[e.length]=i,t.apply(s,e)}}(a="string"==typeof a?this[a]:a,e,this);this.viewEventHandler[e.domId][s]=a,e.dom().on(s,a)}e.dataBind?e.dataBind.push(this):e.dataBind=[this]}},e.prototype.unbind=function(){this.unbindDataObj(),this.unbindViewObjs()},e.prototype.unbindDataObj=function(){if(this.dataObj){for(var e in this.dataEventHandler)this.dataObj.off(e,this.dataEventHandler[e]);this.dataObj=null}this.trigger("ev_data_unbind")},e.prototype.unbindViewObj=function(e){var t=a.inArray(e,this.viewObjs);if(0<=t){var i,s=this.viewEventHandler[e.domId];for(i in s)s.hasOwnProperty(i)&&e.dom().off(i,s[i]);delete this.viewEventHandler[e.domId],this.viewObjs.splice(t,1)}0<=(t=a.inArray(this,e.dataBind))&&e.dataBind.splice(t,1)},e.prototype.unbindViewObjs=function(){for(var e=this.viewObjs.length;0<e;e--)this.unbindViewObj(this.viewObjs[e-1])},e.prototype.syncView=function(){},e)}(jQuery),function(o){o.su=o.su||{},o.su.DataFieldBind=function(){var i={sync:function(e){var t;this.dataObj&&(t=this.dataObj.getValue(),this._syncDataValue(t),this.dataObj.disabled&&this.disable())}},e={defaults:{ev_view_change:{fn:function(e,t,i){switch(e.stopPropagation(),t.type){case"value":this._responseViewValueChanges(t.value,i);break;case"valid":this.validate();break;case"record":this.dataObj&&(this.setValue(t.value),this.dataObj.record())}}},ev_view_update:{fn:function(){var e;this.dataObj&&(e=this.dataObj.getValue(),this._syncDataValue(e))}},ev_view_disable:{fn:function(){this.dataObj.disable()}},ev_view_enable:{fn:function(){this.dataObj.enable()}},ev_widget_hide:{fn:function(){this.setNormal&&this.setNormal()}}},"switch":{ev_view_change:{fn:function(e,t,i){switch(e.stopPropagation(),t.type){case"value":a=(s=i).dataBind[0],n=s.settings,r=n.trueValue,n.falseValue,o=!1,s.showLoading(t.value===r?"on":"off"),d=function(e,t,i){o=!0,i.one("ev_model_submit_complete",function(e){a.dataObj.isDirty()&&a.dataObj.reset(),s.hideLoading()})},a.one("ev_model_before_submit",d),setTimeout(function(){o||(a.off("ev_model_before_submit",d),s.hideLoading())},0),this._responseViewValueChanges(t.value,i);break;case"valid":this.validate();break;case"record":this.dataObj&&(this.setValue(t.value),this.dataObj.record())}var s,a,n,r,o,d},argsInterface:null}},cell:{ev_view_change:{fn:function(e,t,i){switch(e.stopPropagation(),t.type){case"value":"switch"===i.column.widgetName&&(a=(s=i).settings.objs.grid.dataBind[0],n=s.dom().find("[widget=switch]").data("viewObj"),s=s.column.settings,r=s.trueValue,s.falseValue,o=!1,n.showLoading(t.value===r?"on":"off"),d=function(e,t,i){o=!0,a.one("ev_store_sync_complete",function(e){a.isDirty()&&a.reset(),n.hideLoading()})},a.one("ev_store_before_sync",d),setTimeout(function(){o||(a.off("ev_store_before_sync",d),n.hideLoading())},0)),this._responseViewValueChanges(t.value,i);break;case"valid":this.validate();break;case"record":this.dataObj&&(this.setValue(t.value),this.dataObj.record())}var s,a,n,r,o,d}}}};for(a in e)"defaults"!=a&&(e[a]=o.extend(!0,{},e.defaults,e[a]));var t,s,a,r=function(e,t){o.su.DataBind.call(this,e,t),this.addListener(i)},n=(o.su.inherit(o.su.DataBind,r),r.argsTransMap={setValue:{defaults:function(e){return e},textBox1:function(e){return e[0]},dataObj1:function(e){return e[0]}},validate:{},getValue:{}},r.viewEventMap=e,r.dataEventMap={ev_data_change:{fn:function(e,t){switch(t.type){case"_value":this.setNormal(),this._responseDataValueChange(t.value.value,t.value.oldValue);break;case"valid":!0===t.value?this.setNormal():this.setError(t.value),this.fireEvent("ev_valid_change",[t.value])}}},ev_model_before_submit:{fn:function(e,t,i){this.trigger("ev_model_before_submit",[t,i])}}},function(n){return function(){var e=r.argsTransMap[n];if(this.viewObjs&&0<this.viewObjs.length)for(var t in this.viewObjs){var i,s,t=this.viewObjs[t],a=t._type;t[n]&&(s=(i=t[n].apply(t,e&&e[a]?e[a](arguments):arguments))===undefined?s:i)}return s=this.dataObj&&this.dataObj[n]?i=this.dataObj[n].apply(this.dataObj,e&&e["dataObj"]?e["dataObj"](arguments):arguments):s}});for(a in o.su.Widget.regMap)for(s in t=o.su.Widget.regMap.hasOwnProperty(a)?o.su.Widget.regMap[a]:t)t.hasOwnProperty(s)&&"function"==typeof t[s]&&"_init"!=s&&"init"!=s&&"create"!=s&&(r.prototype[s]||(r.prototype[s]=n(s)));for(a in o.su.DataField.prototype)"function"==typeof o.su.DataField.prototype[a]&&(r.prototype[a]||(r.prototype[a]=n(a)));return r.prototype.setValue=function(e){this.dataObj?this.dataObj.setValue(e):this._syncDataValue(e)},r.prototype.getName=function(){if(this.dataObj&&this.dataObj.name)return this.dataObj.name},r.prototype._responseViewValueChanges=function(e,t){this.dataObj&&(o.su.valueEqual(e,this.dataObj.getValue())||this.dataObj.setValue(e))},r.prototype._responseDataValueChange=function(e,t){if(o.su.valueEqual(e,t)){var i=this.viewObjs.length;if(0===i)this.fireEvent("ev_value_change",[e,t]);else for(var s=0;s<i;s++)for(var a=this.viewObjs[s],n=0;n<a.dataBind.length;n++)a.dataBind[n]instanceof o.su.DataFieldBind&&a.dataBind[n].fireEvent("ev_value_change",[e,t])}else!1!==this._syncDataValue(e)&&this.fireEvent("ev_value_change",[e,t])},r.prototype._syncDataValue=function(e){for(var t=0;t<this.viewObjs.length;t++){var i=this.viewObjs[t];if(i.setValue&&(i.getValue&&o.su.valueEqual(i.getValue(),e)||i.setValue(e)),this.dataObj&&!o.su.valueEqual(this.dataObj.getValue(),e))return!1;for(var s=0;s<i.dataBind.length;s++){var a=i.dataBind[s];a!==this&&a instanceof o.su.DataFieldBind&&a.getValue&&!o.su.valueEqual(a.getValue(),e)&&i.dataBind[s].setValue(e)}}},r.prototype.bindDataObj=function(e){r.superclass.bindDataObj.call(this,e),this.syncView()},r.prototype.bindViewObj=function(e){r.superclass.bindViewObj.call(this,e),this.syncView()},r.prototype.syncView=function(){this.fireEvent("sync")},r}()}(jQuery),function(l){l.su=l.su||{},l.su.ModelBind=function(){var e={setValue:{defaults:function(e){return e},textBox1:function(e){return e[0]},dataObj1:function(e){return e[0]}},load:{dataObj:function(){var e=[].slice.call(arguments,0),t=e[0];return t&&t.success&&(t.success=r.call(this,t.success)),t&&t.fail&&(t.fail=r.call(this,t.fail)),t&&t.error&&(t.error=r.call(this,t.error)),e}}},t={defaults:{"value_change":{fn:"setValue",argsInterface:null},"validate_change":{fn:"validate"},ev_view_change:{fn:function(e,t){switch(t.type){case"value":this.setValue(t.value);break;case"valid":this.validate()}}}},form:{"value_change":{fn:function(e,t,i){},argsInterface:null}}};for(a in t)"defaults"!=a&&(t[a]=l.extend(!0,{},t.defaults,t[a]));var i,s,a,n={ev_model_submit_error:{fn:function(e,t){l.su.raise({msg:"ev_model_submit_error",type:"model_submit_error",errorCode:t,modelBind:this})},argsInterface:null},ev_model_load_error:{fn:function(e,t){l.su.raise({msg:"ev_model_load_error",type:"model_load_error",errorCode:t,modelBind:this})},argsInterface:null},ev_model_ajax_error:{fn:function(e,t,i){l.su.raise({msg:"ev_model_ajax_error",type:"model_ajax_error",ajaxErrorStatus:t,ajaxErrorXhr:i,modelBind:this})},argsInterface:null},ev_before_load_data:{fn:function(e,t){this.fireEvent("ev_before_load_data",[t])},argsInterface:null},ev_loaded:{fn:function(e,t){this.fireEvent("ev_loaded",[t])},argsInterface:null},ev_data_change:{fn:function(e,t,i,s){this._responseDataChange();i=this[i.getName()];this.trigger("ev_data_change",[t.value,i,this])}},ev_data_record:{fn:function(e,t,i,s){i=this[i.getName()];this.trigger("ev_data_record",[t.value,i,this])}},ev_validate_change:{fn:function(e,t){this.trigger("ev_validate_change",[t])}},ev_model_submit:{fn:function(e,t,i){this.trigger("ev_model_submit",[t,i])}},ev_model_before_submit:{fn:function(e,t){this.trigger("ev_model_before_submit",[t])}},ev_model_submit_complete:{fn:function(e){this.trigger("ev_model_submit_complete",[].slice.call(arguments,1))}}},o=function(e,t){this.subFieldsBinds={},l.su.DataBind.call(this,e,t)},r=(l.su.inherit(l.su.DataBind,o),o.argsTransMap=e,o.viewEventMap=t,o.dataEventMap=n,function(e){var t=this;return function(){t&&t.isBinded()?e.apply(t.dataObj,arguments):t=null}}),d=function(r){return function(){var e=o.argsTransMap[r];if(this.viewObjs&&0<this.viewObjs.length)for(var t in this.viewObjs){var i,s,a,t=this.viewObjs[t],n=t._type;t[r]&&(i=e&&e[n]?e[n].apply(this,arguments):arguments,a=(s=t[r].apply(t,i))===undefined?a:s)}return this.dataObj&&this.dataObj[r]&&(i=e&&e["dataObj"]?e["dataObj"].apply(this,arguments):arguments,a=s=this.dataObj[r].apply(this.dataObj,i)),a}};for(a in l.su.Widget.regMap)for(s in i=l.su.Widget.regMap.hasOwnProperty(a)?l.su.Widget.regMap[a]:i)i.hasOwnProperty(s)&&"function"==typeof i[s]&&"_init"!=s&&"init"!=s&&"create"!=s&&(o.prototype[s]||(o.prototype[s]=d(s)));for(a in l.su.Model.prototype)"function"==typeof l.su.Model.prototype[a]&&(o.prototype[a]||(o.prototype[a]=d(a)));return o.prototype.bindDataObj=function(t){var e,i=this;if(o.superclass.bindDataObj.call(this,t),this.createSubBinds(),this.viewObjs)for(var s=0;s<this.viewObjs.length;s++)this.syncSubViewBinds(this.viewObjs[s]);for(e in this.syncView(),t.methods)t.methods.hasOwnProperty(e)&&"function"==typeof t.methods[e]&&(i[e]||(i[e]=function(e){return function(){t.methods[e].apply(i,arguments)}}(e)))},o.prototype.createSubBinds=function(){var e=this.dataObj.fields;this.subFieldsBinds={};for(var t=0;t<e.length;t++)this[e[t].name]=this.subFieldsBinds[e[t].name]=new l.su.DataFieldBind(this.dataObj.data[t])},o.prototype.syncSubViewBinds=function(e){if(e.getAllFields){var t=e.getAllFields();if(t)for(var i=0;i<t.length;i++){var s=t[i],a=s.field,a=this.subFieldsBinds[a];a&&!a.viewIsBinded(s)&&a.bindViewObj(s)}}},o.prototype.syncSubViewUnbinds=function(e){if(e.getAllFields)for(var t=e.getAllFields(),i=0;i<t.length;i++){var s=t[i],a=s.field,a=this.subFieldsBinds[a];a&&a.viewIsBinded(s)&&a.unbindViewObj(s)}},o.prototype.bindViewObj=function(e){o.superclass.bindViewObj.call(this,e),this.dataObj&&this.syncSubViewBinds(e),this.syncView()},o.prototype.unbindDataObj=function(){for(var e in this.subFieldsBinds)this.subFieldsBinds.hasOwnProperty(e)&&(this.subFieldsBinds[e].unbind(),delete this[e]);for(var t in this.dataObj.methods)this.dataObj.methods.hasOwnProperty(t)&&delete this[t];this.subFieldsBinds={},o.superclass.unbindDataObj.call(this)},o.prototype.unbindViewObj=function(e){this.syncSubViewUnbinds(e),o.superclass.unbindViewObj.call(this,e)},o.prototype._responseDataChange=function(){for(var e=this.dataObj.getData(),t=0;t<this.viewObjs.length;t++)for(var i=this.viewObjs[t],s=0;s<i.dataBind.length;s++){var a=i.dataBind[s];a.dataObj!==this.dataObj&&a.dataObj.loadData(e)}},o.prototype.getAllFields=function(){return this.subFieldsBinds},o}()}(jQuery),function(u){u.su=u.su||{},u.su.StoreBind=function(){var i={sync:function(e){if(this.dataObj){for(var t=this.dataObj.getAllKeys(),i=0,s=this.viewObjs.length;i<s;i++)this.viewObjs[i].syncData&&this.viewObjs[i].syncData(t);var a=this.getStoreData();this.loadItems&&this.loadItems(a),this.renderTree&&this.renderTree(a);for(i=0,s=this.viewObjs.length;i<s;i++)this.viewObjs[i].dom().triggerHandler("ev_store_bound")}}},e={setValue:{defaults:function(e){return e},textBox1:function(e){return e[0]},dataObj1:function(e){return e[0]}},load:{dataObj:function(){var e=[].slice.call(arguments,0),t=e[0];return t&&t.success&&(t.success=r.call(this,t.success)),t&&t.fail&&(t.fail=r.call(this,t.fail)),t&&t.error&&(t.error=r.call(this,t.error)),e}}},o=function(e){if("popEditor"==e._type&&0<e.containerMsg.dom().find("div[widget=form]").length)return e.containerMsg.dom().find("div[widget=form]").eq(0).data("viewObj").dataBind[0];return!1},t={defaults:{ev_grid_edit:{fn:function(e,t,i){var s,a,i=i.getPlugin("editor"),n=o(i);n?("add"!=t?(a=this.getSubModelBindByKey(t).getData(),n.loadData(a,!0)):(s=this.dataObj.createModel(),this.addModelBind.modelBind=new u.su.ModelBind(s),n.loadData(s.getData(),!0),this.addModelBind.key=this.dataObj.getModelKey(s)),n.setNormal()):(s=this.dataObj.createModel(),this.addModelBind.modelBind=new u.su.ModelBind(s),this.addModelBind.modelBind.bindViewObj(i),"add"!=t?(a=this.getSubModelBindByKey(t).getData(),this.addModelBind.modelBind.dataObj.loadData(a),this.addModelBind.key=t):(this.addModelBind.modelBind.dataObj.loadData(s.getData()),this.addModelBind.key=this.dataObj.getModelKey(s))),this.trigger("ev_before_add",[this.addModelBind.modelBind,this])},argsInterface:null},ev_grid_cancel:{fn:function(e,t,i){var i=i.getPlugin("editor"),s=o(i);s?s.reset():(this.addModelBind.modelBind.reset(),this.addModelBind.modelBind.unbindViewObj(i),this.addModelBind.key=null,this.addModelBind.modelBind=null)}},ev_grid_save:{fn:function(e,t,i,s){s=s.getPlugin("editor");if(r=o(s)){if(this.trigger("ev_before_save",[r,this]),!0!==(a=r.dataObj.validate({returnDetail:!0})).result)return this.trigger("ev_editor_validator_fail",[a.field]),void t.preventDefault();if(n=this.dataObj.dataConflict(r.dataObj,i))return this.trigger("ev_editor_data_conflict_fail",[r,n]),void t.preventDefault();"add"!=i?this.getSubModelBindByKey(i).replaceData(r.modelSerialize(r.getData())):this.addModelBind.key&&(this.addModelBind.modelBind.replaceData(r.modelSerialize(r.getData())),this.dataObj.insertModel(this.addModelBind.modelBind.dataObj))}else{var a,n,r=this.addModelBind.modelBind;if(this.trigger("ev_before_save",[r,this]),!0!==(a=r.dataObj.validate({returnDetail:!0})).result)return this.trigger("ev_editor_validator_fail",[a.field]),void t.preventDefault();if(n=this.dataObj.dataConflict(r.dataObj,i))return this.trigger("ev_editor_data_conflict_fail",[r,n]),void t.preventDefault();"add"!=i?(this.getSubModelBindByKey(i).loadData(r.getData()),r.unbindViewObj(s)):this.addModelBind.key&&(this.addModelBind.modelBind.unbindViewObj(s),this.addModelBind.modelBind.record(),this.dataObj.insertModel(this.addModelBind.modelBind.dataObj))}this.addModelBind.key=null,this.addModelBind.modelBind=null,!1!==this.dataObj.autoSync&&(a=u.su.getDefaultEvent(this,this.sync),this.trigger("ev_before_sync",[a.ev,this.dataObj.proxy]),a.exe())}},ev_grid_delete:{fn:function(e,t,i){this.dataObj.removeDataByKey(t);var s=u.su.getDefaultEvent(this,this.sync);this.trigger("ev_before_sync",[s.ev,this.dataObj.proxy,t]),s.exe()}},ev_grid_delete_all:{fn:function(e){var t=this.dataObj.getAllKeys(),t=(this.dataObj.removeDataByKey(t),u.su.getDefaultEvent(this,this.sync,{deleteAll:!0}));this.trigger("ev_before_delete_all",[t.ev,this.dataObj.proxy]),t.exe()}},ev_grid_row_selected:{fn:function(e,t){this.dataObj.selectByKey(t)}},ev_grid_row_unselected:{fn:function(e,t){this.dataObj.unselectByKey(t)}},ev_grid_row_selected_all:{fn:function(e,t){this.dataObj.selectAll()}},ev_grid_row_unselected_all:{fn:function(e,t){this.dataObj.unselectAll()}},ev_grid_filter:{fn:function(e,t,i,s){this.dataObj.filter({filters:t,append:i,columns:s})}},ev_store_render_items:{fn:function(e,t,i){if(this.dataObj){for(var d=this.dataObj.keyProperty,l=[],s=[],a=0;a<t.length;a++){var n=this.getSubModelBindByKey(t[a]);s.push(n.dataObj),l.push(n)}i.renderModels(d,s,function(e){for(var t=e.length,i=l.length,s=0;s<t;s++){for(var a=e[s].key,n=e[s].obj,r=0;r<i;r++){var o=l[r];if(o.dataObj.getField(d).getValue()!==a)throw new Error("store render item return unknown key");o.bindViewObj(n);break}l.splice(r,1),i-=1}})}}},ev_store_before_sync:{fn:function(e){this.trigger("ev_store_before_sync")}},ev_store_sync_complete:{fn:function(e){this.trigger("ev_store_sync_complete",[].slice.call(arguments,1))}}},form:{},folderTree:{ev_folder_tree_open:{fn:function(e,t,i){this.dataObj.fetchChildren(t,i)}},ev_folder_tree_close:{fn:function(e,t,i){i()}}}};for(n in t)"defaults"!=n&&(t[n]=u.extend(!0,{},t.defaults,t[n]));var s,a,n,c={ev_loaded:{fn:function(e){var t=this.dataObj;this.unbindDataObj();for(var i=0;i<this.viewObjs.length;i++){var s=this.viewObjs[i];if("grid"!==s._type&&"repeat"!==s._type||s.remove(),"folderTree"===s._type&&s._children.length)return void this.bindDataObj(t,!1)}this.bindDataObj(t),this.fireEvent("ev_loaded"),this.fireEvent("ev_storedata_loaded")},argsInterface:null},ev_model_deleted:{fn:function(e,t){for(var i=0;i<t.length;i++){var s=t[i],a=this.getSubModelBindIndex(s);this.subModelsBinds[a].unbind(),this.subModelsBinds.splice(a,1),delete this._convertedkeyMap[this._convertKey(s)];for(var n=0;n<this.viewObjs.length;n++){var r=this.viewObjs[n];"information"===r._type&&r.remove(s),"grid"===r._type&&r.deleteItem(s),"repeat"===r._type&&r.remove(s)}}}},ev_model_inserted:{fn:function(e,t){t=t===undefined?0:t;var i,s=this.dataObj.getKeyByIndex(t),a=new u.su.ModelBind(this.dataObj.getModelByIndex(t));this.subModelsBinds.splice(t,0,a),this._convertedkeyMap[this._convertKey(s)]=a;for(var n=0;n<this.viewObjs.length;n++)"grid"===(i=this.viewObjs[n])._type&&(i.addItem(s),i.moveItem(s,t))}},ev_store_item_moved:{fn:function(e,t,i,s){s=this.subModelsBinds.splice(s,1);this.subModelsBinds.splice(i,0,s[0]);for(var a=0;a<this.viewObjs.length;a++)this.viewObjs[a].moveItem(t,i)}},ev_store_sync_success:{fn:function(e,t){this.fireEvent("ev_store_sync_success",[t])}},ev_store_sync_error:{fn:function(e,t){u.su.raise({msg:"ev_store_submit_error",type:"store_submit_error",errorCode:t,storeBind:this})},argsInterface:null},ev_store_ajax_error:{fn:function(e,t,i){u.su.raise({msg:"ev_store_ajax_error",type:"store_ajax_error",ajaxErrorStatus:t,ajaxErrorXhr:i,storeBind:this})},argsInterface:null},ev_data_change:{fn:function(e,t,i,s,a){s=this.getModelKey(s),s=this.getSubModelBindByKey(s),i=s[i.name];this.trigger("ev_data_change",[t.value,i,s,this])},argsInterface:null},ev_store_before_sync:{fn:function(e,t){this.trigger("ev_store_before_sync",[t])}},ev_store_sync_complete:{fn:function(e){this.trigger("ev_store_sync_complete",[].slice.call(arguments,1))}},ev_render_tree:{fn:function(e){var t=this.dataObj;this.unbindDataObj();for(var i=0;i<this.viewObjs.length;i++){var s=this.viewObjs[i];"folderTree"===s._type&&s._children.length&&s.clearTree()}this.bindDataObj(t),this.fireEvent("ev_loaded"),this.fireEvent("ev_storedata_loaded")},argsInterface:null},ev_store_data_load_success:{fn:function(e,t,i){for(var s=0;s<this.viewObjs.length;s++)"grid"===this.viewObjs[s]._type&&"number"===u.type(i.maxRules)&&this.setMaxRules(i.maxRules)}},ev_store_select_change:{fn:function(e,t){for(var i=0;i<this.viewObjs.length;i++){var s=this.viewObjs[i];"grid"===s._type&&(t.select&&0<t.select.length&&s.setSelected(t.select),t.unselect&&0<t.unselect.length&&s.setUnselected(t.unselect))}}}},d=function(e,t){this.subModelsBinds=[],this.addModelBind={key:null,modelBind:null},this._convertedkeyMap={},u.su.DataBind.call(this,e,t),this.addListener(i)},r=(u.su.inherit(u.su.DataBind,d),d.argsTransMap=e,d.viewEventMap=t,d.dataEventMap=c,function(e){var t=this;return function(){t&&t.isBinded()?e.apply(t.dataObj,arguments):t=null}}),l=function(r){return function(){var e=d.argsTransMap[r];if(this.viewObjs&&0<this.viewObjs.length)for(var t in this.viewObjs){var i,s,a,t=this.viewObjs[t],n=t._type;t[r]&&(i=e&&e[n]?e[n].apply(this,arguments):arguments,a=(s=t[r].apply(t,i))===undefined?a:s)}return this.dataObj&&this.dataObj[r]&&(i=e&&e["dataObj"]?e["dataObj"].apply(this,arguments):arguments,a=s=this.dataObj[r].apply(this.dataObj,i)),a}};for(n in u.su.Widget.regMap)for(a in s=u.su.Widget.regMap.hasOwnProperty(n)?u.su.Widget.regMap[n]:s)s.hasOwnProperty(a)&&"function"==typeof s[a]&&"_init"!=a&&"init"!=a&&"create"!=a&&(d.prototype[a]||(d.prototype[a]=l(a)));for(n in u.su.Store.prototype)"function"==typeof u.su.Store.prototype[n]&&(d.prototype[n]||(d.prototype[n]=l(n)));return d.prototype.bindDataObj=function(e,t){d.superclass.bindDataObj.call(this,e),this.createSubBinds(),0!=t&&t==undefined&&this.syncView()},d.prototype.createSubBinds=function(){this.subModelsBinds=[];for(var e=this.dataObj,t=e.getSize(),i=0;i<t;i++){var s=e.getModelByIndex(i),a=this.getModelKey(s),s=new u.su.ModelBind(s);this.subModelsBinds.push(s),this._convertedkeyMap[this._convertKey(a)]=s}},d.prototype.syncSubViewBinds=function(a){var n=this;"grid"===a._type&&(a.remove(),a.loadGridData(this.dataObj.keyProperty,this.dataObj.data,function(){for(var e=a.getRows(),t=0;t<n.subModelsBinds.length;t++){n.dataObj.getKeyByIndex(t);var i=n.subModelsBinds[t],s=e[t];i.bindViewObj(s)}}))},d.prototype.syncSubViewUnbinds=function(e){var t=0!==e.dom().length;if("grid"===e._type){for(var i=e.getRow(),s=e.getPlugin("editor"),a=i.length,n=0;n<a;n++){var r=i[n].obj,o=r.key,o=this.getSubModelBindByKey(o);o&&o.viewIsBinded(r)&&o.unbindViewObj(r)}t&&e.remove(),this.addModelBind&&this.addModelBind.modelBind&&this.addModelBind.modelBind.viewIsBinded(s)&&this.addModelBind.modelBind.unbindViewObj(s)}},d.prototype.bindViewObj=function(e){d.superclass.bindViewObj.call(this,e),this.syncView()},d.prototype.getModelByKey=d.prototype.getSubModelBindByKey=function(e){return this._convertedkeyMap[this._convertKey(e)]},d.prototype.getModelByIndex=d.prototype.getSubModelBindByIndex=function(e){return this.subModelsBinds[e]},d.prototype.getSubModelBindIndex=function(e){e=this._convertedkeyMap[this._convertKey(e)];return u.inArray(e,this.subModelsBinds)},d.prototype.getModelIndex=function(e){return u.inArray(e,this.subModelsBinds)},d.prototype.getModelKey=function(e){return e[this.dataObj.keyProperty].getValue()},d.prototype.getEditingModel=function(){return this.addModelBind.modelBind},d.prototype.each=function(e){for(var t=0;t<this.subModelsBinds.length;t++)e(this.subModelsBinds[t])},d.prototype.setField=function(e,t){for(var i=0;i<this.subModelsBinds.length;i++){var s=this.subModelsBinds[i];t(s[e],s)}},d.prototype.unbindDataObj=function(){for(var e=0;e<this.subModelsBinds.length;e++)this.subModelsBinds[e].unbind();this.subModelsBinds=[],this._convertedkeyMap={},d.superclass.unbindDataObj.call(this)},d.prototype.unbindViewObj=function(e){this.syncSubViewUnbinds(e),d.superclass.unbindViewObj.call(this,e)},d.prototype.syncView=function(){this.fireEvent("sync")},d.prototype.getSubModelBindByModel=function(e){for(var t=0;t<this.subModelsBinds.length;t++)if(this.subModelsBinds[t].dataObj===e)return this.subModelsBinds[t];return!1},d.prototype._convertKey=function(e){return u.type(e)+"_"+e},d.prototype._getOriginalKey=function(e){var t=e.slice(0,6),e=e.slice(7);return"number"===t?Number(e):e},d}()}(jQuery),jQuery,$.extend($.su.settings,{classManager:{loader:"Loader"},Proxy:{defaultRoot:"root"},Model:{defaultProxy:"IPFProxy",depFields:["proxy"]},Store:{defaultProxy:"IPFProxy",depFields:["proxy"]},AjaxService:{defaultProxy:"IPFProxy"},AjaxProxy:{defaultConnection:"Connection"}}),$.su.Navigator=function(){var t={},a={},e=function(e){this.settings=$.extend({},t,e),this.container=$(e.container),this.moduleContainerWidget=e.moduleContainerWidget||"panel",this.service=e.service,this.name="navigator",$.su.Service.call(this)};return $.su.inherit($.su.Service,e),e.prototype.setMenu=function(){},e.prototype.getMenu=function(){},e.prototype.getMenuList=function(){},e.prototype["goto"]=function(){},e.prototype.set=function(e){a=e},e.prototype.setContainer=function(e){this.container=$(e).htmlLoader()},e.prototype.load=function(e){var t=this.service.moduleLoader,i=this.service.loading,s=$.su.getObjectLength(a[e]);t.unLoad(this.container),t.load({module:"index"},{module:"page",view:e},this.container,function(){setTimeout(function(){i.hide(e)},0)},s)},e.prototype.destroy=function(){},e}(),function(o){var t,i,e;o.su.App=(o.ajax("./config/models.json?t=29dee038",{"async":!1,method:"GET",dataType:"json",success:function(e){t=o.extend({},e)}}),o.ajax("./config/modules.json?t=29dee038",{"async":!1,method:"GET",dataType:"json",success:function(e){i=e}}),o.ajax("./config/src.js?t=29dee038",{"async":!0,method:"GET",dataType:"script"}),e=function(e){this.override(),o.su.Application.call(this),this.loader=new o.su.Loader,this.classManager=o.su.ClassManager.getInstance(),this.classManager.setLoader(this.loader),new o.su.Ajax({ajax:{contentType:"application/x-www-form-urlencoded",type:"POST"},failHandler:function(a){return function(e,t,i,s){a&&a(e,t,i,s)}},errorHandler:function(i){return function(e,t){i&&i(e,t)}}}),new o.su.Vtype,new o.su.Polling,new o.su.Services.ModuleManager,new o.su.Device({service:{ajax:this.serviceManager.get("ajax"),loading:this.serviceManager.get("loading")}}),new o.su.Time({service:{ajax:this.serviceManager.get("ajax")}}),new o.su.Services.Timer,this.moduleLoader=new o.su.Services.ModuleLoader,this.language=new o.su.LanguageService,this.navigator=new o.su.Navigator({service:{moduleLoader:this.moduleLoader,loading:this.loading}}),this.router=o.su.router=new o.su.Router,this.router.setModelsPath(t),this.router.set(i),this.navigator.set({})},o.su.inherit(o.su.Application,e),e.prototype.init=function(){var e=o.Deferred(),t=this,i=[],s=o.Deferred(),a=(i.push(s),o.su.isMobile()?o.getScript("./js/su/widget/widget.mobile.js",function(){s.resolve()}):s.resolve(),o.Deferred()),n=(i.push(a),o.su.settings.Loader.classesPath);return this.loader.loadFile(n,function(e){t.loader.setPath(e),a.resolve()}),o.when.apply(this,i).done(function(){e.resolve()}),e.promise()},e.prototype.customWidget=function(){var e,t={errortip:{animate:function(e){var t=this.dom(),i=t.find("div.widget-error-tips-wrap"),s=t.find("div.error-tips-content"),a=t.closest(".html-loader-container"),n=t.closest(".msg-content-wrap"),a=0<a.length?a:0<n.length?n:o("#index-view-container"),n=a.offset(),a=a.width(),e=("string"===o.type(e)&&s.text(e),t.addClass("show").show(),i.offset()),s=i.width();e.left-n.left+s>a&&i.css({"right":0})}}};for(e in t)if(t.hasOwnProperty(e))for(var i in t[e])t[e].hasOwnProperty(i)&&o.fn[e]&&(o.fn[e][i]=t[e][i])},e.prototype.override=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,i=Number(arguments[1])||0;for((i=i<0?Math.ceil(i):Math.floor(i))<0&&(i+=t);i<t;i++)if(i in this&&this[i]===e)return i;return-1}),o.su.Store.prototype.getIndexsInSnapshot=function(e){var t=this.snapshot,i=this.keyProperty;if(0===e.length)return undefined;for(var s=[],a=0,n=e.length;a<n;a++)for(var r=0,o=t.length;r<o;r++){var d=e[a];if(t[r][i]==d.toString()){s.push(r);break}}return s},o.su.Store.prototype.beforeRemove=function(e,t,a){var i,s=this.keyProperty,n=(a=a||{},this),r={"key":[],"index":[]};for(i in t)t.hasOwnProperty(i)&&r.key.push(t[i].oldModel[s]);return r.index=this.getIndexsInSnapshot(r.key),{ajax:o.extend({},{url:a.url||undefined,type:"POST",contentType:"application/x-www-form-urlencoded",traditional:!0},a.ajax),data:o.extend({},r,{operation:"remove"},a.data),success:function(e,t){a.success&&a.success(e),n.fireEvent("ev_store_sync_success"),n.load()},fail:function(e,t,i,s){n.loadData(n.snapshot),a.fail&&a.fail(e,t,i,s),t&&n.trigger("ev_store_sync_error",t)},error:function(e,t){n.loadData(n.snapshot),a.error&&a.error(e,t),n.trigger("ev_store_ajax_error",[e,t])}}},o.su.Error.handle=function(e){switch(e.type){case"model_ajax_error":case"store_ajax_error":return o.su.moduleManager.query("main").showNotice(o.su.CHAR.ERROR[t]||o.su.CHAR.COMMON.SAVE_FAILED,1),!0;case"module_not_found":case"module_not_defined":return o.su.debug.error("navigator error",e.module),!0;default:var t=e.errorCode,i="";switch(t){case"timeout":case"user conflict":case"permission denied":i="";break;default:i=o.su.CHAR.ERROR[t]||o.su.CHAR.COMMON.SAVE_FAILED}return i&&o.su.moduleManager.query("main")&&o.su.moduleManager.query("main").showNotice(i,1),!0}}},e.prototype.reset=function(){},e.prototype.reload=function(){},e.prototype.getInfo=function(){},e),o.appUtils=o.su.App.utils={intToArray:function(e,t){e=parseInt(e);for(var i=[];0<e;)i.push(e%2),e=parseInt(e/2);if(i.length<t)for(var s=i.length,a=0;a<t-s;a++)i.push(0);return i},arrayToInt:function(e){for(var t=0,i=1;0<e.length;)t+=(e.shift()||0)*i,i*=2;return t},objectToArray:function(e){var t,i=[];for(t in e)i[t]=e[t];return i},resetPortsValue:function(e,t){for(var i=o.appUtils.portSplit(e).split(","),s=o.appUtils.portSplit(t).split(","),a=0;a<i.length;a++){var n=s.indexOf(i[a]);0<=n&&s.splice(n,1)}return o.appUtils.portCombine(s.join(","))},keyHandler:function(e){return e.toString().replace(/[\/\.\:\s\(\)]/g,"_")},doLayout:function(){var e=o("#scroll-layer").height()-o(".bot").height();o("#main-con").css({minHeight:e})},isSameMac:function(e,t){return"string"==typeof e&&"string"==typeof t&&o.trim(e.toLowerCase())===o.trim(t.toLowerCase())}}}(jQuery),$.su.Device=function(){var s={},e=function(e){var i=this,t=["ru","kr","de"];this.settings=$.extend({},s,e),this.settings.DEVICE_NAME_URL=$.su.url("/locale?form=lang"),this.settings.DEVICE_COUNTRY_URL=$.su.url("/locale?form=country"),this.settings.CONFIG_URL="./config/device.json?t=29dee038",this.service=e.service,this.configs={supportLanIptv:!0,country:""},this.service.ajax.request({ajax:{"async":!1},data:{operation:"read"},url:this.settings.DEVICE_NAME_URL,success:function(e){i.configs.deviceName=e.model,i.configs.locale=e.locale,i.configs.force=e.force}}),this.service.ajax.request({ajax:{"async":!1},data:{operation:"read"},url:this.settings.DEVICE_COUNTRY_URL,success:function(e){i.configs.country=e.country.toLowerCase(),-1<t.indexOf(i.configs.country)&&(i.settings.CONFIG_URL="./config/device."+i.configs.country+".json")}}),this.service.ajax.request({ajax:{"async":!1},url:this.settings.CONFIG_URL,success:function(e,t){$.extend(i.configs,t),i.configs.supportShortGI||delete $.su.CHAR.ADDITIONAL_SETTINGS.SHORT_GI,i.configs.supportLanAgg||(delete $.su.CHAR.NETWORK_STATUS.LINK,delete $.su.CHAR.NETWORK_LAN.LINK,delete $.su.CHAR.NETWORK_IPTV.IPTV_LAN_OCCUPIED,delete $.su.CHAR.NETWORK_IPTV.LA,delete $.su.CHAR.NETWORK_IPTV.IPTV_VLAN_MSGQS,delete $.su.CHAR.NETWORK_IPTV.IPTV_VLAN_MSG)}}),this.service.ajax.request({ajax:{"async":!1},url:this.settings.CONFIG_URL,success:function(e,t){$.extend(i.configs,t)}}),this.name="device",$.su.Service.call(this)};return $.su.inherit($.su.Service,e),e.prototype.reboot=function(){},e.prototype.reset=function(){},e.prototype.getProductName=function(){var t=this;return this.configs.deviceName===undefined&&this.service.ajax.request({ajax:{"async":!1},data:{operation:"read"},url:this.settings.DEVICE_NAME_URL,success:function(e){t.configs.deviceName=e.model}}),this.configs.deviceName},e.prototype.getRebootTime=function(){var t=this;return this.configs.rebootTime===undefined&&this.service.ajax.request({ajax:{"async":!1},data:{operation:"read"},url:this.settings.DEVICE_NAME_URL,success:function(e){t.configs.rebootTime=e.rebootTime}}),this.configs.rebootTime},e.prototype.getLocale=function(){var t=this;return this.configs.locale===undefined&&this.service.ajax.request({ajax:{"async":!1},data:{operation:"read"},url:this.settings.DEVICE_NAME_URL,success:function(e){t.configs.locale=e.locale}}),this.configs.locale},e.prototype.getForce=function(){var t=this;return this.configs.force===undefined&&this.service.ajax.request({ajax:{"async":!1},data:{operation:"read"},url:this.settings.DEVICE_NAME_URL,success:function(e){t.configs.force=e.force}}),this.configs.force},e.prototype.getCurrentMode=function(){var t=this;return this.configs.mode===undefined&&this.service.ajax.request({ajax:{"async":!1},data:{operation:"read"},url:$.su.url("/admin/system?form=sysmode"),success:function(e){t.configs.mode=e.mode}}),this.configs.mode},e.prototype.getCurrentDial=function(){var t=this;return this.configs.dialType===undefined&&this.service.ajax.request({ajax:{"async":!1},data:{operation:"read"},url:$.su.url("/admin/network?form=wan_ipv4_status"),success:function(e){t.configs.dialType=e.conntype}}),this.configs.dialType},e.prototype.getIsTriband=function(){var t=this;return this.configs.isTriband===undefined&&this.service.ajax.request({ajax:{"async":!1},url:this.settings.CONFIG_URL,success:function(e){t.configs.isTriband=e.isTriband}}),this.configs.isTriband},e.prototype.getIsBeta=function(){var t=this;return this.configs.isBeta===undefined&&this.service.ajax.request({ajax:{"async":!1},url:this.settings.CONFIG_URL,success:function(e){t.configs.isBeta=e.isBeta}}),this.configs.isBeta},e.prototype.switchMode=function(e,t,i){var s=this;this.service.loading.show("changeMode"),this.service.ajax.request({url:"./data/sysmod.json",data:{oldValue:e,newValue:t},success:function(e){i(e)},fail:function(){s.service.loading.hide("changeMode")},error:function(){s.service.loading.hide("changeMode")}})},e.prototype.switchDialType=function(e){this.configs.dialType=e},e.prototype.getSoftwareInfo=function(){var t=this;return this.configs.version===undefined&&this.service.ajax.request({ajax:{"async":!1},url:"./data/systemSummaryConfig.json",success:function(e){t.configs.version=e.fw_version}}),this.configs.version},e.prototype.getHardwareInfo=function(){},e.prototype.getDeviceStatus=function(){var t=this;return this.service.ajax.request({ajax:{"async":!1},url:"./data/status.json",success:function(e){t.configs.status=e.auth}}),this.configs.status},e.prototype.getLanIptv=function(e){return this.configs.supportLanIptv},e.prototype.getLanAgg=function(){return this.configs.supportLanAgg},e.prototype.getOFDMA=function(){return this.configs.supportOFDMA},e.prototype.getZeroWaitDFS=function(){return this.configs.supportZeroWaitDFS},e.prototype.getConfig=function(){return $.extend({},this.configs)},e}(),function(a){a.su.Module=function(){var s=function(e){s.superclass.constructor.call(this,e)};a.su.inherit(a.su.Module,s);return s.prototype.launch=function(e){!function(){var i=a.su.moduleManager.query("index"),s=this.settings.commonSave;"available"===a.su.moduleManager.getStatus("index")&&(i.hideSaveBtn(),!1===s&&i.alwaysShowSaveBtn(this.name),a.each(a.extend({},this.data.stores,this.data.models),function(e,t){t.dataObj&&t.dataObj.proxy&&(!1!==s&&i.registerAutoSaveData(t),i.registerSaveLoading(t))}))}.call(this),s.superclass.launch.call(this,e)},s.prototype.destroy=function(e){var i=a.su.moduleManager.query("index"),t=this.settings.commonSave;"available"===a.su.moduleManager.getStatus("index")&&(!1===t&&i.cancelAlwaysShowSaveBtn(this.name),a.each(a.extend({},this.data.stores,this.data.models),function(e,t){t.dataObj&&t.dataObj.proxy&&(i.unRegisterAutoSaveData(t),i.unRegisterSaveLoading(t))})),s.superclass.destroy.call(this)},s.prototype.registerAutoSaveData=function(e){if("available"!==a.su.moduleManager.getStatus("index"))return!1;var i=a.su.moduleManager.query("index");return a.isArray(e)||(e=[e]),a.each(e,function(e,t){(t instanceof a.su.ModelBind||t instanceof a.su.StoreBind)&&i.registerAutoSaveData(t)}),!0},s.prototype.unRegisterAutoSaveData=function(e){if("available"!==a.su.moduleManager.getStatus("index"))return!1;var i=a.su.moduleManager.query("index");return a.isArray(e)||(e=[e]),a.each(e,function(e,t){(t instanceof a.su.ModelBind||t instanceof a.su.StoreBind)&&i.unRegisterAutoSaveData(t)}),!0},s.STATUS=a.su.Module.STATUS,s}()}(jQuery),$.su.LanguageService=function(){var e=function(){this.init(),this.name="language",$.su.Service.call(this)};return $.su.inherit($.su.Service,e),e.prototype.init=function(){},e.prototype.getLocale=function(e,t){$.su.language.getLocale(e,t)},e.prototype.switchTo=function(e,t,i){$.su.language.switchTo(e,t,i)},e}(),function(i){var t,s,a,n,r;i.su.Time=(t={format:"MM/dd/yyyy HH:mm:ss",defaultTime:"01/01/1990 00:00:00",proxy:"timeServiceProxy"},a=s=null,n=i.Deferred(),r=function(e){if("object"==typeof r.instance)return r.instance;clearInterval(s),this.settings=i.extend({},t,e),this.name="time",i.su.Service.call(this),(r.instance=this).init()},i.su.inherit(i.su.Service,r),r.prototype.init=function(){var t=this;this.currentTime=null,this.hour24Enable=null,this.proxy||(this.proxy={read:function(){var e=[].slice.call(arguments,0);n.then(function(){t.proxy.read.apply(t.proxy,e)})}}),i.su.require([this.settings.proxy]).done(function(){t.proxy=i.su.createSync(t.settings.proxy),n.resolve(),t.sync()})},r.prototype.addListener=function(e,t,i,s){this.constructor.superclass.on.call(this,e,t,i,s),this.addListenerHandler(e)},r.prototype.removeListener=function(e,t,i,s){this.constructor.superclass.off.call(this,e,t,i,s),this.removeListenerHandler(e)},r.prototype.fireEvent=function(e){var t="";switch(e){case"on_time_change":t=this.currentTime;break;case"on_hour24_change":t=this.hour24Enable}this.constructor.superclass.trigger.call(this,e,t)},r.prototype.addListenerHandler=function(e){if(this.eventDealer.eventInfo[e]){var t=this;switch(e){case"on_time_change":this.sync(function(){t.updateTime()});break;case"on_hour24_change":this.sync()}}},r.prototype.removeListenerHandler=function(e){var t=this.eventDealer.eventInfo;t[e]&&"on_time_change"===e&&0===t[e].length&&this.stopUpdateTime()},r.prototype.sync=function(t){var i=this;this.isBusy?t&&t(i.currentTime):(this.isBusy=!0,this.proxy.read({success:function(e){i.setHour24("on"===e.hour24Enable),i.setTime(i.convert(e.date+" "+e.time)),i.isBusy=!1,t&&t(i.currentTime)},fail:function(){i.setHour24(!0),i.setTime(new Date),i.isBusy=!1,t&&t(i.currentTime)},error:function(){i.setHour24(!0),i.setTime(new Date),i.isBusy=!1,t&&t(i.currentTime)}}))},r.prototype.getTime=function(){var t=this;return null===this.currentTime&&this.proxy.read({ajax:{"async":!1},success:function(e){t.setTime(t.convert(e.date+" "+e.time))},fail:function(){t.setTime(new Date)},error:function(){t.setTime(new Date)}}),this.currentTime},r.prototype.setTime=function(e){"date"===i.type(e)&&(this.currentTime=e,this.fireEvent("on_time_change"))},r.prototype.getHour24=function(e){var t=this;return null===this.hour24Enable&&this.proxy.read({ajax:{"async":!1},success:function(e){t.setHour24("on"===e.hour24Enable)},fail:function(e){t.setHour24(!0)},error:function(e){t.setHour24(!0)}}),this.hour24Enable},r.prototype.setHour24=function(e){this.hour24Enable=!!e,this.fireEvent("on_hour24_change")},r.prototype.updateTime=function(){var i=this;clearInterval(s),a=new Date,s=setInterval(function(){var e=new Date,t=e.getTime()-a.getTime();a=e,i.setTime(new Date(i.currentTime.getTime()+t))},1e3)},r.prototype.stopUpdateTime=function(){clearInterval(s),s=null},r.prototype.convert=function(e,t){e=e||this.settings.defaultTime,t=t||this.settings.format;var i,s={"y+":"year","M+":"month","d+":"day","H+":"hour","m+":"minute","s+":"second"},a={};for(i in s){var n=new RegExp(i).exec(t);a[s[i]]=e.slice(n.index,n.index+n[0].length)}return new Date(a.year,a.month-1,a.day,a.hour,a.minute,a.second)},r.prototype.format=function(e,t,i){i=i||this.hour24Enable;var s,a=t||this.settings.format,t=e.getHours(),n={"y+":e.getFullYear(),"M+":e.getMonth()+1,"d+":e.getDate(),"H+":t,"m+":e.getMinutes(),"s+":e.getSeconds()};for(s in i||(0===t?n["H+"]=12:12<t&&(n["H+"]-=12)),n){var r,o=n[s];new RegExp("("+s+")").test(a)&&(r=RegExp.$1,a="H+"!==s||i?a.replace(r,("0"+o).slice(-1*(r+"").length)):a.replace(r,o))}return i||(a+=12<=t?" PM":" AM"),a},r.prototype.on=r.prototype.addListener,r.prototype.off=r.prototype.removeListener,r)}(jQuery),function(h){var t;h.su.define("IPFProxy",{extend:"AjaxProxy",constructor:t=function(e){t.$parent.call(this,e),e&&e.hasOwnProperty("preventSuccessEvent")&&(this.preventSuccessEvent=e.preventSuccessEvent),e&&e.hasOwnProperty("preventFailEvent")&&(this.preventFailEvent=e.preventFailEvent),this.defaultOption.preventSuccessEvent=this.preventSuccessEvent,this.defaultOption.preventFailEvent=this.preventFailEvent},successJudge:function(e,t){if(!1!==e.success)return!0;var e=e.errorCode||e.error||e.error_code||e.errorcode,i=h.su.moduleManager.query("main");switch(e){case"timeout":i instanceof h.su.Module&&i.trigger("ev_login_timeout");break;case"auto upgrading":i instanceof h.su.Module&&i.trigger("ev_auto_upgrading");break;case"user conflict":i instanceof h.su.Module&&i.trigger("ev_user_conflict");break;case"permission denied":i instanceof h.su.Module&&i.trigger("ev_permission_denied")}return e},readFilter:function(e){return e.others=e.others||{},e.others.max_rules&&(e.others.maxRules=e.others.max_rules,delete e.others.max_rules),e.data},failFilter:function(e){var t=h.extend({},e);return t.errorCode=e.errorCode||e.error||e.error_code||e.errorcode,t},ajax:{contentType:"application/x-www-form-urlencoded"},sync:function(e){var t,i=Array.prototype.slice.call(arguments,0),s=e.operation,a=e.dataObj;a instanceof h.su.Model?t="Model":a instanceof h.su.Store&&(t="Store"),"read"===s&&"Model"===t?this.read.apply(this,i):"read"===s&&"Store"===t?this.load.apply(this,i):"write"===s&&"Model"===t?this.write.apply(this,i):"write"===s&&"Store"===t?(h.su.isEmptyObject(e.difference.remove)||this.remove.apply(this,i),h.su.isEmptyObject(e.difference.insert)||this.insert.apply(this,i),h.su.isEmptyObject(e.difference.update)||this.update.apply(this,i)):this[s]?this[s].apply(this,i):h.su.debug.error("no such operation: ",s)},read:function(e,t){var a=this,n=(e.data=h.extend({},{operation:"read"},e.data),e.success);!1!==t&&(e.success=function(e,t,i,s){a.trigger("ev_load",[e]),n&&n(e,t,i,s)}),this.op("read",e)},write:function(e){var t=e.dataObj,i=(e.difference=h.extend({update:{}},e.difference),e.data=h.extend({},{operation:"write"},e.difference.update.model,e.data),e.success);e.success=function(e){t&&t.record(),i&&i(e)},this.op("write",e)},load:function(e){var a=this,n=(e.data=h.extend({},{operation:"load"},e.data),e.success);e.success=function(e,t,i,s){a.trigger("ev_load",[e,t.others]),n&&n(e,t,i,s)},this.op("load",e)},remove:function(e){var t,i=e.difference.remove,a=e.dataObj,s=a.keyProperty,n={"key":[],"index":[]};for(t in i)i.hasOwnProperty(t)&&n.key.push(i[t].oldModel[s]);n.index=a.getIndexsInSnapshot(n.key),e.data=h.extend({},n,{operation:"remove"});var r=e.success||function(){};e.traditional=!0,e.success=function(e,t,i,s){a.record(),r(e,t,i,s)},this.op("remove",e)},insert:function(e){var t,i=e.difference.insert,s={},a=e.dataObj,n=!1;for(t in i)i.hasOwnProperty(t)&&(n||(s.key="add",s["new"]=JSON.stringify(i[t].model),s.old="add",n=!(s.index=0)));e.data=h.extend({},s,{operation:"insert"});var r=e.success||function(){};e.success=function(e,t,i,s){a.record(),r(e,t,i,s)},this.op("insert",e)},update:function(e){var t,i=e.difference.update,s={},a=e.dataObj,n=a.keyProperty,r=!1;for(t in i)i.hasOwnProperty(t)&&(r||(s.key=i[t].oldModel[n],s["new"]=JSON.stringify(i[t].model),s.old=JSON.stringify(i[t].oldModel),r=!0));e.data=h.extend({},s,{operation:"update"});var o=e.success||function(){};e.success=function(e,t,i,s){a.record(),o(e,t,i,s)},this.op("update",e)},_decorateOption:function(o){var d=this,l=(o.writeFilter&&(o.data=o.writeFilter.call(this,o.data)),!!o&&o.success),c=!!o&&o.fail,u=["ru","kr","de"];o.success=function(e,t,i){var s,a=["/domain_login?form=dlogin","/locale?form=lang","/locale?form=country","/login?form=auth","/login?form=keys","/login?form=password","/locale?form=list","/login?form=get_token","/login?form=get_eweb_url","/login?form=get_deviceInfo","/login?form=check_factory_default","/login?form=get_firmware_info","/login?form=check_internet","/login?form=cloud_bind_status","/login?form=vercode","/login?form=sysmode","/admin/firmware?form=config_multipart","/admin/firmware?form=save_upgrade","/admin/openvpn?form=export","/admin/syslog?form=save_log","/admin/vpn?form=ovpn"];if(h.each(a,function(e,t){a[e]=h.su.url(t).toString()}),a.push("./config/device.json?t=29dee038"),h.each(u,function(e,t){a.push("./config/device."+t+".json")}),a.indexOf(o.url.toString())<0){if(""==e||e&&e.data==undefined)return;try{s=JSON.parse(h.su.encryptor.dataDecrypt(e.data))}catch(r){s={"success":!1,"errorcode":"timeout"}}}else s=e;var n,e=!o.successJudge||o.successJudge(s,t,i);!0===e?(n=o.readFilter?o.readFilter.call(d,s):s,l&&l(n,s,t,i),n=o.data&&o.data.operation,!0!==o.preventSuccessEvent&&n&&"read"!=n&&"load"!=n&&h.su.moduleManager.query("main")&&h.su.moduleManager.query("main").showNotice(h.su.CHAR.COMMON.SAVED)):(n=o.failFilter?o.failFilter.call(d,s):s,c&&c(n,e,t,i),!0!==o.preventFailEvent&&h.su.raise({msg:"ev_proxy_fail",type:"proxy_fail",errorCode:s.errorCode||s.error||s.error_code||s.errorcode,proxy:d}))}}})}(jQuery);