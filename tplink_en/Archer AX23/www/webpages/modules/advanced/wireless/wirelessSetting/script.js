!function(h){h.su.moduleManager.define("wirelessSettings",{models:["lanAdvLanModel","regionWirelessModel","regionWirelessCapabilityModel","wirelessSettingsControl","ofdmaModel","twtModel","wirelessSmartConn","wireless24g","wireless5g1","wireless5g2","ffsModel"],stores:["regionStore"],services:["moduleLoader","ajax","device","moduleManager"],views:["wirelessSettingsView"],deps:["utils"],listeners:{"ev_on_launch":function(e,s,a,i,n,r,l){i.ofdmaModel.enable.hide(),l.device.getOFDMA()&&(i.ofdmaModel.enable.show(),i.ofdmaModel.load()),l.device.getConfig().supportTWT&&(i.twtModel.enable.show(),i.twtModel.load()),s.isTriband||a.wirelessSettingsView.wirelessDisappearDfsNote.hide(),this.prepare().done(function(){s.launchModules()})},ev_region_reload:function(){}},init:function(u,e,m,s,a,c){this.control({".index-common-save-btn":{"ev_will_auto_save":function(w,g,e){for(var s=!1,a=0,d=e.length;a<d;a++)-1<e[a].dataObj.name.indexOf("wireless")&&(s=!0);var i,n,r,l,t,o,p=m.wireless24g.enable.getValue();c.device.getConfig().supportAmazonFFS&&m.ffsModel.isDirty()&&"on"===p&&m.ffsModel.submit(),s&&("on"===m.wirelessSmartConn.smartEnable.getValue()&&u.replaceData(),i=c.moduleManager.get("wirelessAdv24g"),n=c.moduleManager.get("wirelessAdv5g1"),p="/admin/wireless?form=wireless_2g&form=wireless_5g",u.isTriband&&(r=c.moduleManager.get("wirelessAdv5g2"),p="/admin/wireless?form=wireless_2g&form=wireless_5g&form=wireless_5g_2"),i.beforeSubmit()&&n.beforeSubmit()&&(!r||r.beforeSubmit())&&(l=i.syncMainModel(),t=n.syncMainModel(),o=r&&r.syncMainModel(),m.wirelessSmartConn.submit(),c.ajax.request({url:h.su.url(p),data:h.extend(!0,{operation:"write"},l,t,o),success:function(){var e,s=i.getWifiInfo(),a=n.getWifiInfo();u.isTriband&&(e=r.getWifiInfo()),s.enable||a.enable||u.isTriband&&e.enable?(u.loadWifiInfo(s,a,e),u.showWlanOnSmartOffSaveNote()):u.showWlanOffSaveNote(),i.syncWifiSharingData(),n.syncWifiSharingData(),r&&r.syncWifiSharingData(),u.updateGuestNetwork(),m.wireless24g.record(),m.wireless5g1.record(),m.wireless5g2.record()}})))}}}),this.listen({"models.regionWirelessModel":{"ev_loaded":function(e){var s=m.regionWirelessModel.capability.getValue();m.regionWirelessCapabilityModel.loadData(s,!0),u.initRegionData(),u.trigger("ev_region_reload")}},"models.ffsModel":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wireless24g":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wireless5g1":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wireless5g2":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wirelessSmartConn":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wirelessSmartConn.smartEnable":{"ev_value_change":function(e,s,a){"on"===s?(u.hideDetailFreqConfig(),c.moduleManager.get("wirelessAdv24g").setEnableLabel(!0)):(u.showDetailFreqConfig(),c.moduleManager.get("wirelessAdv24g").setEnableLabel())}}})}},function(t,o,p,e,i,w){var g=null,n=!0,r=!0,l=!0,s=!0;return{isTriband:w.device.getIsTriband(),getLanIP:function(){return p.lanAdvLanModel.ipaddr.getValue()},prepare:function(){var e=h.Deferred(),s=!1,a=!1;return p.regionWirelessModel.load({success:function(){a=!0,s&&e.resolve(!0)}}),p.lanAdvLanModel.load({success:function(){s=!0,a&&e.resolve(!0)}}),e.promise()},MODE:{"ADVANCED":"advanced","BASIC":"basic","QUICK_SETUP":"qs"},setMode:function(e){g=e},getMode:function(){return g},launchChildrenModules:function(){var e;switch(g){case t.MODE.ADVANCED:e="wirelessAdvSmartConnView";break;case t.MODE.BASIC:e="wirelessAdvSmartConnViewBasic"}w.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdvSmartConn",view:e},p.wirelessSettingsControl.wirelessSettingsSmartConnLoader)},has2g:function(){return n},has5g1:function(){return r},has5g2:function(){return l},launchModules:function(){var e=function(e){var s;switch(g){case t.MODE.ADVANCED:s=e+"View";break;case t.MODE.BASIC:s=e+"ViewBasic";break;case t.MODE.QUICK_SETUP:s=e+"ViewQs";break;default:s=e+"View"}return s},s=(p.wirelessSettingsControl.detailFreqConfigField.show(),h.Deferred()),a=h.Deferred(),i=h.Deferred(),n="",r="",l="";t.has2g()&&w.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv24g",view:e("wirelessAdv24g")},p.wirelessSettingsControl.wirelessSettings24gLoader,function(){var e=w.moduleManager.get("wirelessAdv24g");h.when(e.dfd).then(function(){n=e.getHwMode(),s.resolve()})}),t.has5g1()&&w.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv5g1",view:e("wirelessAdv5g1")},p.wirelessSettingsControl.wirelessSettings5g1Loader,function(){t.isTriband||(w.moduleManager.get("wirelessAdv5g1").set5g1Name(),o.wirelessSettingsView.wirelessTitle5g.setLabelField(h.su.CHAR.WIRELESS_SETTINGS.NETWORK_5G));var e=w.moduleManager.get("wirelessAdv5g1");h.when(e.dfd).then(function(){r=e.getHwMode(),a.resolve()})}),t.isTriband?(w.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv5g2",view:e("wirelessAdv5g2")},p.wirelessSettingsControl.wirelessSettings5g2Loader,function(){var e=w.moduleManager.get("wirelessAdv5g2");h.when(e.dfd).then(function(){l=e.getHwMode(),i.resolve()})}),h.when(s,a,i).then(function(){"bgn"==n&&"anac_5"==r&&"anac_5"==l?(p.ofdmaModel.enable.disable(),p.twtModel.enable.disable()):(p.ofdmaModel.enable.enable(),p.twtModel.enable.enable())})):h.when(s,a).then(function(){"bgn"==n&&"anac_5"==r?(p.ofdmaModel.enable.disable(),p.twtModel.enable.disable()):(p.ofdmaModel.enable.enable(),p.twtModel.enable.enable())})},showDetailFreqConfig:function(){p.wirelessSettingsControl.detailFreqConfigField.show()},hideDetailFreqConfig:function(){p.wirelessSettingsControl.detailFreqConfigField.hide()},initRegionData:function(){var e=p.regionWirelessCapabilityModel.channel2g.getValue(),s=p.regionWirelessCapabilityModel.channel5g.getValue(),a=p.regionWirelessCapabilityModel.channel5g2.getValue();i.utils.isEmptyObject(e)&&(n=!1),i.utils.isEmptyObject(s)&&(r=!1),i.utils.isEmptyObject(a)&&(l=!1)},showWlanOffSaveNote:function(){o.wirelessSettingsView.wirelessOffNote.show()},showWlanOnSaveNote:function(e,s){o.wirelessSettingsView.wirelessName.setValue(e),o.wirelessSettingsView.wirelessPassword.setValue(s),o.wirelessSettingsView.wirelessOnNote.show()},showWlanOnSmartOffSaveNote:function(){o.wirelessSettingsView.wirelessOnSmartOffNote.show()},loadWifiInfo:function(e,s,a){var i=o.wirelessSettingsView,n=p.wirelessSmartConn.smartEnable.getValue();"on"===n?o.wirelessSettingsView.wirelessNetwork24g.setLabelField(h.su.CHAR.WIRELESS_SETTINGS.SMART_CONN):o.wirelessSettingsView.wirelessNetwork24g.setLabelField(h.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G),e.enable?(i.wirelessNote24g.show(),i.wirelessName24g.setValue(e.ssid),i.wirelessPassword24g.setValue(""===e.password?h.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:e.password)):i.wirelessNote24g.hide(),s.enable&&"on"!==n?(i.wirelessNote5g.show(),i.wirelessName5g.setValue(s.ssid),i.wirelessPassword5g.setValue(""===s.password?h.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:s.password)):i.wirelessNote5g.hide(),a&&a.enable&&"on"!==n?(i.wirelessNote5g2.show(),i.wirelessName5g2.setValue(a.ssid),i.wirelessPassword5g2.setValue(""===a.password?h.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:a.password)):i.wirelessNote5g2.hide()},showWlanScheduleNote:function(){o.wirelessSettingsView.wirelessSwitchNote.setText(h.su.CHAR.WIRELESS_SETTINGS.NOTICE2),o.wirelessSettingsView.wirelessSwitchNote.show()},hideWlanOffNote:function(){o.wirelessSettingsView.wirelessSwitchNote.hide()},getSwitchSt:function(){return s},setSwitchSt:function(e){s=e},updateGuestNetwork:function(){var e;"basic"!=t.getMode()||(e=w.moduleManager.get("guestNetworkModule"))&&e.checkStatus()},replaceData:function(){var e=p.wireless24g.getData();delete e.htmode,delete e.hwmode,delete e.channel,p.wireless5g1.replaceData(e),t.isTriband&&p.wireless5g2.replaceData(e)}}})}(jQuery),$.su.storeManager.define("encryptionStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{"value":"none","name":$.su.CHAR.WIRELESS_SETTINGS.NO_SECURITY},{"value":"psk","name":$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2_PERSONAL},{"value":"psk_sae","name":$.su.CHAR.WIRELESS_SETTINGS.WPA2_WPA3_PERSONAL},{"value":"wpa","name":$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2_ENTERPRISE}]}),$.su.storeManager.define("wirelessVersionStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2_PSK,value:"auto"},{name:$.su.CHAR.WIRELESS_SETTINGS.WPA2_PSK,value:"rsn"}]}),$.su.storeManager.define("wirelessVersionEpStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2,value:"auto"},{name:$.su.CHAR.WIRELESS_SETTINGS.WPA2,value:"rsn"}]}),$.su.storeManager.define("wirelessWpa3VersionStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"sae_transition"},{name:$.su.CHAR.WIRELESS_SETTINGS.WPA3_SAE,value:"sae_only"}]}),$.su.storeManager.define("wirelessCipherStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.TKIP_AES,value:"auto"},{name:$.su.CHAR.WIRELESS_SETTINGS.AES,value:"aes"}]}),$.su.storeManager.define("wireless24gWpa3CipherStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"aes"}]}),$.su.storeManager.define("wireless5gWpa3CipherStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"ccmp"}]}),$.su.storeManager.define("wepTypeStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto",itemCls:"fix_min",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.OPEN_SYSTEM,value:"open"},{name:$.su.CHAR.WIRELESS_SETTINGS.SHARED_KEY,value:"shared"}]}),$.su.storeManager.define("wepKeySelectedStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{"value":"1","name":$.su.CHAR.WIRELESS_SETTINGS.KEY1},{"value":"2","name":$.su.CHAR.WIRELESS_SETTINGS.KEY2},{"value":"3","name":$.su.CHAR.WIRELESS_SETTINGS.KEY3},{"value":"4","name":$.su.CHAR.WIRELESS_SETTINGS.KEY4}]}),$.su.storeManager.define("wepKeyFormatStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.ASCII,value:"asic",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.HEXADECIMAL,value:"hex"}]}),$.su.storeManager.define("wepKeyTypeStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.BIT64,value:"64",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.BIT128,value:"128"}]}),$.su.storeManager.define("transPowerStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.LOW,value:"low",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.MIDDLE,value:"middle"},{name:$.su.CHAR.WIRELESS_SETTINGS.HIGH,value:"high"}]}),$.su.modelManager.define("regionWirelessModel",{type:"model",fields:[{name:"country",mapping:"country"},{name:"capability",mapping:"capability"}],proxy:{url:$.su.url("/admin/wireless?form=region")}}),$.su.modelManager.define("regionWirelessCapabilityModel",{type:"model",fields:[{name:"hwmode2g",mapping:"hwmode_2g"},{name:"hwmode5g",mapping:"hwmode_5g"},{name:"hwmode5g2",mapping:"hwmode_5g_2"},{name:"htmode2g",mapping:"htmode_2g"},{name:"htmode5g",mapping:"htmode_5g"},{name:"htmode5g2",mapping:"htmode_5g_2"},{name:"channel2g",mapping:"channel_2g"},{name:"channel5g",mapping:"channel_5g"},{name:"channel5g2",mapping:"channel_5g_2"}]}),$.su.modelManager.define("localeCountryModel",{type:"model",fields:[{name:"country",mapping:"country"}],proxy:{url:"./data/locale.country.json"}}),$.su.storeManager.define("regionStore",{type:"store",fields:[{name:"name",convert:function(e){return $.su.CHAR.REGION[e]}},{name:"value"},{name:"noAutodetect",mapping:"no_autodetect"}],proxy:{url:"./data/region.json"}}),$.su.modelManager.define("wirelessSettingsControl",{type:"model",fields:[{name:"wirelessSettingsSmartConnLoader"},{name:"detailFreqConfigField"},{name:"wirelessSettings24gLoader"},{name:"wirelessSettings5g1Loader"},{name:"wirelessSettings5g2Loader"}]}),$.su.modelManager.define("ofdmaModel",{type:"model",fields:[{name:"enable",mapping:"enable"}],proxy:{url:$.su.url("/admin/wireless?form=ofdma")}}),$.su.modelManager.define("twtModel",{type:"model",fields:[{name:"enable",mapping:"enable"}],proxy:{url:$.su.url("/admin/wireless?form=twt")}}),function(d){d.su.moduleManager.define("wirelessAdv24g",{services:["moduleManager","ajax","device"],stores:["encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless24gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode2gStore","htmode2gStore","channel2gStore"],models:["wireless24g","wireless24gControl","regionWirelessCapabilityModel","quickSetupModel","wirelessSmartConn","ffsModel"],views:["wirelessAdv24gView","wirelessAdv24gViewBasic","wirelessAdv24gViewQs"],listeners:{"ev_on_launch":function(e,s,a,i,n,r,l){s.handleRegionInfo(),s.dfd=d.Deferred(),i.wirelessSmartConn.load(),i.wireless24g.load({success:function(){s.dfd.resolve()}}),s.supportAmazonFFS()&&(i.ffsModel.enable.show(),i.ffsModel.load())}},deps:["utils","wirelessSettings"],init:function(l,e,t,r,o,n){this.listen({"models.wirelessSmartConn.smartEnable":{"ev_value_change":function(e,s,a){var i=n.moduleManager.get("wirelessSettings").getMode();"on"!==t.wireless24g.enable.getValue()&&"on"!==s?t.wireless24gControl.editField.hide():t.wireless24gControl.editField.show(),"advanced"===i&&("on"===s?d(".mode-channel").hide():d(".mode-channel").show())}},"models.wireless24g.enable":{"ev_value_change":function(e,s,a){var i=t.wirelessSmartConn.smartEnable.getValue(),n=l.supportAmazonFFS(),r="";"on"===s?(this.disableAll=!1,t.wireless24gControl.editField.show(),n&&(t.ffsModel.enable.enable(),t.ffsModel.enable.setTips(r))):(this.disableAll=!0,r="on"!==i?(t.wireless24gControl.editField.hide(),d.su.CHAR.WIRELESS_SETTINGS.AMAZON_WIFI_24G_DISABLE_NOTE):d.su.CHAR.WIRELESS_SETTINGS.AMAZON_WIFI_DISABLE_NOTE,n&&(t.ffsModel.enable.disable(),t.ffsModel.enable.setTips(r)))}},"models.wireless24g.encryption":{"ev_value_change":function(e,s,a){switch(t.wireless24gControl.wpaPersonal24g.hide(),t.wireless24gControl.wpa3Personal24g.hide(),t.wireless24gControl.wpaEnterprise24g.hide(),t.wireless24gControl.wep24g.hide(),t.wireless24g.hwmode.enableItems(["n","an"]),s){case"psk":t.wireless24gControl.wpaPersonal24g.show(),t.wireless24g.pskCipher.show();var i=t.wireless24g.pskVersion.getValue(),n=(0<=d.inArray(i,["sae_transition","sae_only"])&&t.wireless24g.pskVersion.setValue("auto"),t.wireless24g.hwmode.enableItems(["n","an"]),t.wireless24g.pskCipher.getValue()),r=t.wireless24g.hwmode.getValue();("tkip"==n&&"n"==r||"tkip"==n&&"an"==r)&&t.wireless24g.pskCipher.setValue("auto"),"tkip"==n&&t.wireless24g.hwmode.disableItems(["n","an"]),"n"!=r&&"an"!=r||(t.wireless24g.wpaCipher.disableItems(["tkip"]),t.wireless24g.pskCipher.disableItems(["tkip"])),t.wireless24g.pskKey.setVtype("psk_password");break;case"psk_sae":t.wireless24gControl.wpa3Personal24g.show(),t.wireless24g.pskCipher.hide();i=t.wireless24g.pskVersion.getValue();d.inArray(i,["sae_transition","sae_only"])<0&&t.wireless24g.pskVersion.setValue("sae_transition"),t.wireless24g.hwmode.enableItems(["n","an"]),"n"!=(r=t.wireless24g.hwmode.getValue())&&"an"!=r||(t.wireless24g.wpaCipher.disableItems(["tkip"]),t.wireless24g.pskCipher.disableItems(["tkip"])),t.wireless24g.pskKey.setVtype("wpa3_password");break;case"wpa":t.wireless24gControl.wpaEnterprise24g.show(),t.wireless24g.hwmode.enableItems(["n","an"]);n=t.wireless24g.wpaCipher.getValue(),r=t.wireless24g.hwmode.getValue();("tkip"==n&&"n"==r||"tkip"==n&&"an"==r)&&t.wireless24g.wpaCipher.setValue("auto"),"tkip"==n&&t.wireless24g.hwmode.disableItems(["n","an"]),"n"!=r&&"an"!=r||(t.wireless24g.wpaCipher.disableItems(["tkip"]),t.wireless24g.pskCipher.disableItems(["tkip"]));break;case"wep":t.wireless24gControl.wep24g.show(),t.wireless24g.hwmode.disableItems(["n","an"])}l.setWpa3VersionTip()}},"models.wireless24g.pskVersion":{"ev_value_change":function(e,s,a){var i=t.wireless24g.encryption.getValue();"psk"==i&&"rsn"==s?(t.wireless24g.pskCipher.hideItems("auto"),"auto"==t.wireless24g.pskCipher.getValue()&&t.wireless24g.pskCipher.setValue("aes")):"psk"==i&&"rsn"!=s&&t.wireless24g.pskCipher.showItems("auto"),l.setWpa3VersionTip()}},"models.wireless24g.pskCipher":{"ev_value_change":function(e,s,a){switch(s){case"auto":case"aes":t.wireless24g.hwmode.enableItems(["n","an"]);break;case"tkip":t.wireless24g.hwmode.disableItems(["n","an"])}}},"models.wireless24g.wpaVersion":{"ev_value_change":function(e,s,a){var i=t.wireless24g.encryption.getValue();"wpa"==i&&"rsn"==s?(t.wireless24g.wpaCipher.hideItems("auto"),"auto"==t.wireless24g.wpaCipher.getValue()&&t.wireless24g.wpaCipher.setValue("aes")):"wpa"==i&&"rsn"!=s&&t.wireless24g.wpaCipher.showItems("auto")}},"models.wireless24g.wpaCipher":{"ev_value_change":function(e,s,a){switch(s){case"auto":case"aes":t.wireless24g.hwmode.enableItems(["n","an"]);break;case"tkip":t.wireless24g.hwmode.disableItems(["n","an"])}}},"models.wireless24g.hwmode":{"ev_value_change":function(e,s,a){switch(s){case"n":case"an":t.wireless24g.encryption.disableItems(["wep"]),t.wireless24g.wpaCipher.disableItems(["tkip"]),t.wireless24g.pskCipher.disableItems(["tkip"]);break;default:t.wireless24g.encryption.enableItems(["wep"]),t.wireless24g.wpaCipher.enableItems(["tkip"]),t.wireless24g.pskCipher.enableItems(["tkip"])}var i,n=t.regionWirelessCapabilityModel.channel2g.getValue();switch(n&&13<n.length&&(i=t.wireless24g.channel.getValue(),n=l.getHtChannel(n,20),"b"!=s&&n.pop(),r.channel2gStore.loadItems(n),o.utils.valInObjArr(i,n)?t.wireless24g.channel.setValue(i):t.wireless24g.channel.setValue("auto")),s){case"b":case"g":case"bg":t.wireless24g.htmode.disableItems(["40"]),t.wireless24g.htmode.setValue("auto"),t.wireless24g.htmode.hide();break;default:t.wireless24g.htmode.enableItems(["40"]),t.wireless24g.htmode.show()}}},"models.wireless24g":{"ev_loaded":function(e,s){n.ajax.request({proxy:"sysWireless2gProxy",data:{"operation":"read"},success:function(e){e&&t.wireless24g&&t.wireless24g.channel&&("on"==e.ENABLE?t.wireless24g.channel.disable():t.wireless24g.channel.enable(),"wep"==(e=t.wireless24g.encryption.getValue())?t.wireless24g.hwmode.disableItems(["n"]):"psk"!=e&&"psk_sae"!=e||"tkip"==t.wireless24g.pskCipher.getValue()&&t.wireless24g.hwmode.disableItems(["n"]),"n"==t.wireless24g.hwmode.getValue()&&(t.wireless24g.wpaCipher.disableItems(["tkip"]),t.wireless24g.pskCipher.disableItems(["tkip"])))}}),this.syncWifiSharingData()},"ev_model_submit":function(e,s){this.syncWifiSharingData()},"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.ffsModel":{"ev_will_auto_save":function(e,s){s.preventDefault()}}})}},function(i,n,w,g,r,s){return{dfd:null,SYS_WIRELESS_2G_URL:d.su.url("/admin/wireless?form=syspara_2g"),supportAmazonFFS:function(){var e=s.moduleManager.get("wirelessSettings").getMode();return s.device.getConfig().supportAmazonFFS&&"router"===s.device.getCurrentMode()&&"advanced"===e},onDestroy:function(){var e=s.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",i.handleRegionInfo)},handleRegionInfo:function(){var e=w.regionWirelessCapabilityModel.hwmode2g.getValue();if(e){for(var s=[],a=e.length,i=0;i<a;i++){var n={},r="MODE_"+e[i].toUpperCase();n.name=d.su.CHAR.WIRELESS_SETTINGS[r],n.value=e[i],s.push(n)}g.hwmode2gStore.loadData(s)}var l=w.regionWirelessCapabilityModel.htmode2g.getValue();if(l){var t=[],a=l.length;t[0]={name:d.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"};for(i=0;i<a;i++)(n={}).name=l[i]+d.su.CHAR.WIRELESS_SETTINGS.MHZ,n.value=l[i],t.push(n);g.htmode2gStore.loadData(t)}var o=w.regionWirelessCapabilityModel.channel2g.getValue();if(o){var p=[],a=o.length;p[0]={name:d.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"};for(i=0;i<a;i++)(n={}).name=o[i],n.value=o[i],p.push(n);g.channel2gStore.loadData(p)}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var a=[],i=(a[0]={"name":d.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=i;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)a.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,a.push(t)}return a},setWepEncrpyVtype:function(){var e,s=w.wireless24g.wepFormat1.getValue(),a=w.wireless24g.wepType1.getValue();"asic"==s?"64"==a?e="asic_64":"128"==a&&(e="asic_128"):"hex"==s&&("64"==a?e="hex_64":"128"==a&&(e="hex_128")),w.wireless24g.wepKey1.setVtype(e)},beforeSubmit:function(){var e=w.wireless24g.server.getValue(),s=w.wireless24g.encryption.getValue(),a=w.wireless24g.enable.getValue();return w.wireless24g.disabled_all.setValue(this.disableAll?"on":"off"),"on"==a&&"wpa"==s?w.wireless24g.server.setValidator(function(){return r.utils.ipToInt(e)!=r.utils.ipToInt(r.wirelessSettings.getLanIP())||d.su.CHAR.ERROR["00000077"]}):"on"==a&&"wep"==s&&i.setWepEncrpyVtype(),w.wireless24g.validate()},syncQsData:function(e){var s=w.wireless24g.getData();return!(!w.wireless24g.pskKey.validate()||!w.wireless24g.ssid.validate())&&(w.quickSetupModel.replaceData({wireless2gEnable:s.enable,wireless2gSsid:s.ssid,wireless2gEncryPassword:s.pskKey,wireless2gDisabledAll:"on"===s.enable?"off":"on"}),e&&(w.quickSetupModel.replaceData({wireless5gEnable:s.enable,wireless5gSsid:s.ssid,wireless5gEncryPassword:s.pskKey,wireless5gDisabledAll:"on"===s.enable?"off":"on",wireless5gRegionEnable:"on"}),w.quickSetupModel.replaceData({wireless5g2Enable:s.enable,wireless5g2Ssid:s.ssid,wireless5g2EncryPassword:s.pskKey,wireless5g2DisabledAll:"on"===s.enable?"off":"on",wireless5g2regionEnable:"on"})),s.pskKey?(w.quickSetupModel.replaceData({wireless2gPskKey:s.pskKey,wireless2gEncryption:"psk",wireless2gPskVersion:"auto",wireless2gPskCipher:"auto"}),e&&(w.quickSetupModel.replaceData({wireless5gPskKey:s.pskKey,wireless5gEncryption:"psk",wireless5gPskVersion:"auto",wireless5gPskCipher:"auto"}),w.quickSetupModel.replaceData({wireless5g2PskKey:s.pskKey,wireless5g2Encryption:"psk",wireless5g2PskVersion:"auto",wireless5g2PskCipher:"auto"}))):(w.quickSetupModel.replaceData({wireless2gEncryption:"none"}),e&&(w.quickSetupModel.replaceData({wireless5gEncryption:"none"}),w.quickSetupModel.replaceData({wireless5g2Encryption:"none"}))),!0)},isQsDirty:function(){for(var e=w.wireless24g,s=[e.enable,e.ssid,e.pskKey],a=0,i=s.length;a<i;a++)if(s[a].isDirty())return!0},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,a=e.password,e=e.security,i=n[this.getEffectiveView()].wifisharing;i&&i.setValue({ssid:s,password:a,security:e})},getWifiInfo:function(){var e,s,a="on"===w.wireless24g.enable.getValue(),i=w.wireless24g.ssid.getValue();switch(w.wireless24g.encryption.getValue()){case"psk":e=w.wireless24g.pskKey.getValue(),s="psk";break;case"psk_sae":e=w.wireless24g.pskKey.getValue(),s="psk_sae";break;case"wpa":e=w.wireless24g.wpaKey.getValue(),s="wpa";break;case"wep":e=w.wireless24g.wepKey1.getValue(),s="wep";break;default:e="",s="none"}return{enable:a,ssid:i,password:e,security:s}},setEnableLabel:function(e){e?w.wireless24g.enable.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.WIRELESS_RADIO):w.wireless24g.enable.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.MODE_2G)},syncMainModel:function(){var e,s=w.wireless24g.getData("submit",!0);for(e in s){var a=s[e];s["wireless_2g_"+e]=a,delete s[e]}return s},getHwMode:function(){return w.wireless24g.hwmode.getValue()},setWpa3VersionTip:function(){var e=w.wireless24g.encryption.getValue(),s=w.wireless24g.pskVersion.getValue();"psk_sae"==e&&"sae_only"==s?w.wireless24g.pskVersion.setTips(d.su.CHAR.WIRELESS_SETTINGS.VERSION_TIP):w.wireless24g.pskVersion.setTips("")}}})}(jQuery),$.su.modelManager.define("ffsModel",{type:"model",fields:[{name:"enable"}],proxy:{url:$.su.url("/admin/ffs?form=config")}}),$.su.modelManager.define("wireless24g",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption"},{name:"pskVersion",mapping:"psk_version"},{name:"pskCipher",mapping:"psk_cipher"},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wpaVersion",mapping:"wpa_version"},{name:"wpaCipher",mapping:"wpa_cipher"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"wepMode",mapping:"wep_mode"},{name:"wepFormat1",mapping:"wep_format1"},{name:"wepType1",mapping:"wep_type1"},{name:"wepKey1",mapping:"wep_key1",allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0}],convert:function(e){var s=e.encryption,a=e.psk_cipher,i=e.hwmode,n=e.wpa_cipher,r=e.capability&&e.capability.channel_2g,l=e.channel;if(!r)return e;switch(s){case"psk":"tkip"==a&&("n"!=i&&"an"!=i||(e.psk_cipher="auto"));break;case"wpa":"tkip"==n&&("n"!=i&&"an"!=i||(e.wpa_cipher="auto"))}switch(r&&13<r.length&&(s=function(e,s){if(!e)return[];var a=[],i=(a[0]={"name":$.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=i;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)a.pop(),r-=20;if(isNaN(o))break;r=20}n=o,t.name=o,t.value=o,a.push(t)}return a}(r,20),"b"!=i&&s.pop(),function(e,s){for(var a=s.length,i=0;i<a;i++)if(e==s[i].value)return!0;return!1}(l,s)||(e.channel="auto")),i){case"b":case"g":case"bg":e.htmode="auto"}return e},proxy:"wirelessModule24gProxy"}),$.su.define("wirelessModule24gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_2g"),sync:function(e){var s=e.operation,a=this,i=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){a.read.call(a,$.extend({},e,{success:function(e){e=$.extend(s,e);a.trigger("ev_load",[e]),i.call(a,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless24gControl",{type:"model",fields:[{name:"totalField"},{name:"editField"},{name:"wpaPersonal24g"},{name:"wpa3Personal24g"},{name:"wpaEnterprise24g"},{name:"wep24g"}]}),$.su.storeManager.define("hwmode2gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode2gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel2gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless2gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_2g"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(d){d.su.moduleManager.define("wirelessAdv5g1",{services:["moduleManager","ajax","device"],stores:["encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless5gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode5g1Store","htmode5g1Store","channel5g1Store"],models:["wireless5g1","wireless5g1Control","regionWirelessCapabilityModel","quickSetupModel"],deps:["utils","wirelessSettings"],views:["wirelessAdv5g1View","wirelessAdv5g1ViewBasic","wirelessAdv5g1ViewQs"],listeners:{"ev_on_launch":function(e,s,a,i,n,r,l){s.handleRegionInfo(),s.dfd=d.Deferred(),i.wireless5g1.load({success:function(){s.dfd.resolve()}})},"ev_before_destroy":function(){}},init:function(l,e,t,s,a,i){this.listen({"models.wireless5g1.enable":{"ev_value_change":function(e,s,a){"on"===s?(this.disableAll=!1,t.wireless5g1Control.editField.show(),0!=i.device.getConfig().supportMUMIMO&&0!=i.device.getConfig().support5G1MUMIMO||(t.wireless5g1.mimo.hide(),t.wireless5g1.mimo.disable())):(this.disableAll=!0,t.wireless5g1Control.editField.hide())}},"models.wireless5g1.encryption":{"ev_value_change":function(e,s,a){switch(t.wireless5g1Control.wpaPersonal5g1.hide(),t.wireless5g1Control.wpa3Personal5g1.hide(),t.wireless5g1Control.wpaEnterprise5g1.hide(),t.wireless5g1Control.wep5g1.hide(),t.wireless5g1.hwmode.enableItems(["n_5","ac_5","nac_5"]),s){case"psk":t.wireless5g1Control.wpaPersonal5g1.show(),t.wireless5g1.pskCipher.show();var i=t.wireless5g1.pskVersion.getValue(),n=(0<=d.inArray(i,["sae_transition","sae_only"])&&t.wireless5g1.pskVersion.setValue("auto"),t.wireless5g1.hwmode.enableItems(["n_5","ac_5","nac_5"]),t.wireless5g1.pskCipher.getValue()),r=t.wireless5g1.hwmode.getValue();("tkip"==n&&"n_5"==r||"tkip"==n&&"ac_5"==r||"tkip"==n&&"nac_5"==r)&&t.wireless5g1.pskCipher.setValue("auto"),"tkip"==n&&t.wireless5g1.hwmode.disableItems(["n_5","ac_5","nac_5"]),"n_5"!=r&&"ac_5"!=r&&"nac_5"!=r||(t.wireless5g1.wpaCipher.disableItems(["tkip"]),t.wireless5g1.pskCipher.disableItems(["tkip"])),t.wireless5g1.pskKey.setVtype("psk_password");break;case"psk_sae":t.wireless5g1Control.wpa3Personal5g1.show(),t.wireless5g1.pskCipher.hide();i=t.wireless5g1.pskVersion.getValue();d.inArray(i,["sae_transition","sae_only"])<0&&t.wireless5g1.pskVersion.setValue("sae_transition"),t.wireless5g1.hwmode.enableItems(["n_5","ac_5","nac_5"]),"n_5"!=(r=t.wireless5g1.hwmode.getValue())&&"ac_5"!=r&&"nac_5"!=r||(t.wireless5g1.wpaCipher.disableItems(["tkip"]),t.wireless5g1.pskCipher.disableItems(["tkip"])),t.wireless5g1.pskKey.setVtype("wpa3_password");break;case"wpa":t.wireless5g1Control.wpaEnterprise5g1.show(),t.wireless5g1.hwmode.enableItems(["n_5","ac_5","nac_5"]);n=t.wireless5g1.wpaCipher.getValue(),r=t.wireless5g1.hwmode.getValue();("tkip"==n&&"n_5"==r||"tkip"==n&&"ac_5"==r||"tkip"==n&&"nac_5"==r)&&t.wireless5g1.wpaCipher.setValue("auto"),"tkip"==n&&t.wireless5g1.hwmode.disableItems(["n_5","ac_5","nac_5"]),"n_5"!=r&&"ac_5"!=r&&"nac_5"!=r||(t.wireless5g1.wpaCipher.disableItems(["tkip"]),t.wireless5g1.pskCipher.disableItems(["tkip"]));break;case"wep":t.wireless5g1Control.wep5g1.show(),t.wireless5g1.hwmode.disableItems(["n_5","ac_5"])}l.setWpa3VersionTip()}},"models.wireless5g1.pskVersion":{"ev_value_change":function(e,s,a){var i=t.wireless5g1.encryption.getValue();"psk"==i&&"rsn"==s?(t.wireless5g1.pskCipher.hideItems("auto"),"auto"==t.wireless5g1.pskCipher.getValue()&&t.wireless5g1.pskCipher.setValue("aes")):"psk"==i&&"rsn"!=s&&t.wireless5g1.pskCipher.showItems("auto"),l.setWpa3VersionTip()}},"models.wireless5g1.pskCipher":{"ev_value_change":function(e,s,a){switch(s){case"auto":case"aes":t.wireless5g1.hwmode.enableItems(["n_5","ac_5","nac_5"]);break;case"tkip":t.wireless5g1.hwmode.disableItems(["n_5","ac_5","nac_5"])}}},"models.wireless5g1.wpaVersion":{"ev_value_change":function(e,s,a){var i=t.wireless5g1.encryption.getValue();"wpa"==i&&"rsn"==s?(t.wireless5g1.wpaCipher.hideItems("auto"),"auto"==t.wireless5g1.wpaCipher.getValue()&&t.wireless5g1.wpaCipher.setValue("aes")):"wpa"==i&&"rsn"!=s&&t.wireless5g1.wpaCipher.showItems("auto")}},"models.wireless5g1.wpaCipher":{"ev_value_change":function(e,s,a){switch(s){case"auto":case"aes":t.wireless5g1.hwmode.enableItems(["n_5","ac_5","nac_5"]);break;case"tkip":t.wireless5g1.hwmode.disableItems(["n_5","ac_5","nac_5"])}}},"models.wireless5g1.hwmode":{"ev_value_change":function(e,s,a){switch(s){case"ac_5":case"n_5":t.wireless5g1.encryption.disableItems(["wep"]),t.wireless5g1.wpaCipher.disableItems(["tkip"]),t.wireless5g1.pskCipher.disableItems(["tkip"]);break;default:t.wireless5g1.encryption.enableItems(["wep"]),t.wireless5g1.wpaCipher.enableItems(["tkip"]),t.wireless5g1.pskCipher.enableItems(["tkip"])}switch(s){case"a_5":t.wireless5g1.htmode.disableItems(["40"]),t.wireless5g1.htmode.disableItems(["80"]),t.wireless5g1.htmode.setValue("auto"),t.wireless5g1.htmode.hide();break;case"n_5":case"an_5":var i=t.wireless5g1.htmode.getValue();t.wireless5g1.htmode.enableItems(["40"]),t.wireless5g1.htmode.disableItems(["80"]),"80"==i&&t.wireless5g1.htmode.setValue("auto"),t.wireless5g1.htmode.show();break;default:t.wireless5g1.htmode.enableItems(["40"]),t.wireless5g1.htmode.enableItems(["80"]),t.wireless5g1.htmode.show()}}},"models.wireless5g1.htmode":{"ev_value_change":function(e,s,a){null!==a&&l.resetChannel(s)}},"models.wireless5g1":{"ev_loaded":function(e,s){i.ajax.request({proxy:"sysWireless5g1Proxy",data:{"operation":"read"},success:function(e){e&&t.wireless5g1&&t.wireless5g1.channel&&("on"==e.ENABLE?t.wireless5g1.channel.disable():t.wireless5g1.channel.enable(),"wep"==(e=t.wireless5g1.encryption.getValue())?t.wireless5g1.hwmode.disableItems(["ac_5","nac_5"]):"psk"!=e&&"psk_sae"!=e||"tkip"==t.wireless5g1.pskCipher.getValue()&&t.wireless5g1.hwmode.disableItems(["ac_5","nac_5"]),"n_5"!=(e=t.wireless5g1.hwmode.getValue())&&"ac_5"!=e&&"nac_5"!=e||(t.wireless5g1.wpaCipher.disableItems(["tkip"]),t.wireless5g1.pskCipher.disableItems(["tkip"])))}}),l.resetChannel(s.htmode),this.syncWifiSharingData()},"ev_model_submit":function(e,s){this.syncWifiSharingData()},"ev_will_auto_save":function(e,s){s.preventDefault()}}})}},function(n,r,p,w,g,l){return{dfd:null,SYS_WIRELESS_5G1_URL:d.su.url("/admin/wireless?form=syspara_5g"),onDestroy:function(){var e=l.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",n.handleRegionInfo)},handleRegionInfo:function(){var e=p.regionWirelessCapabilityModel.channel5g.getValue();if(g.utils.isEmptyObject(e))p.wireless5g1Control.totalField.hide();else{p.wireless5g1Control.totalField.show();var s=p.regionWirelessCapabilityModel.hwmode5g.getValue();if(s){for(var a=[],i=s.length,n=0;n<i;n++){var r={},l="MODE_"+s[n].toUpperCase();r.name=d.su.CHAR.WIRELESS_SETTINGS[l],r.value=s[n],a.push(r)}w.hwmode5g1Store.loadData(a)}var t=p.regionWirelessCapabilityModel.htmode5g.getValue();if(t){var o=[],i=t.length;o[0]={name:d.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"};for(n=0;n<i;n++)(r={}).name=t[n]+d.su.CHAR.WIRELESS_SETTINGS.MHZ,r.value=t[n],o.push(r);w.htmode5g1Store.loadData(o)}}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var a=[],i=(a[0]={"name":d.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=i;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)a.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,a.push(t)}return a},get_ht_channel_160:function(e){for(var s=[],a=(s[0]={"name":d.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length),i=[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],n=0;n<=a;n++){var r={},l=parseInt(e[n]);-1<d.inArray(l,i)&&(r.name=l,r.value=l,s.push(r))}return s},channelDFS:function(e){for(var s=[],a=l.device.getConfig().country,i=0;i<e.length;i++)s.push(e[i]),52!=e[i].value&&56!=e[i].value&&60!=e[i].value&&64!=e[i].value&&100!=e[i].value&&104!=e[i].value&&108!=e[i].value&&112!=e[i].value&&116!=e[i].value&&120!=e[i].value&&124!=e[i].value&&128!=e[i].value&&132!=e[i].value&&136!=e[i].value&&140!=e[i].value&&144!=e[i].value||"ru"==a||(s[i].name+="(DFS)");return s},resetChannel:function(e){var s=p.regionWirelessCapabilityModel.channel5g.getValue(),a=p.wireless5g1.channel.getValue();switch(e){case"auto":case"20":var i=n.getHtChannel(s,20);w.channel5g1Store.loadData(n.channelDFS(i)),g.utils.valInObjArr(a,i)?p.wireless5g1.channel.setValue(a):p.wireless5g1.channel.setValue("auto");break;case"40":i=n.getHtChannel(s,40);w.channel5g1Store.loadData(n.channelDFS(i)),g.utils.valInObjArr(a,i)?p.wireless5g1.channel.setValue(a):p.wireless5g1.channel.setValue("auto");break;case"80":i=n.getHtChannel(s,80);w.channel5g1Store.loadData(n.channelDFS(i)),g.utils.valInObjArr(a,i)?p.wireless5g1.channel.setValue(a):p.wireless5g1.channel.setValue("auto");break;case"160":i=n.get_ht_channel_160(s,160);w.channel5g1Store.loadData(n.channelDFS(i)),g.utils.valInObjArr(a,i)?p.wireless5g1.channel.setValue(a):p.wireless5g1.channel.setValue("auto")}},setWepEncrpyVtype:function(){var e,s=p.wireless5g1.wepFormat1.getValue(),a=p.wireless5g1.wepType1.getValue();"asic"==s?"64"==a?e="asic_64":"128"==a&&(e="asic_128"):"hex"==s&&("64"==a?e="hex_64":"128"==a&&(e="hex_128")),p.wireless5g1.wepKey1.setVtype(e)},beforeSubmit:function(){var e=p.wireless5g1.server.getValue(),s=p.wireless5g1.encryption.getValue(),a=p.wireless5g1.enable.getValue();return p.wireless5g1.disabled_all.setValue(this.disableAll?"on":"off"),"on"==a&&"wpa"==s?p.wireless5g1.server.setValidator(function(){return g.utils.ipToInt(e)!=g.utils.ipToInt(g.wirelessSettings.getLanIP())||d.su.CHAR.ERROR["00000077"]}):"on"==a&&"wep"==s&&n.setWepEncrpyVtype(),p.wireless5g1.validate()},syncQsData:function(){var e=p.wireless5g1.getData();return!(!p.wireless5g1.pskKey.validate()||!p.wireless5g1.ssid.validate())&&(p.quickSetupModel.replaceData({wireless5gEnable:e.enable,wireless5gSsid:e.ssid,wireless5gEncryPassword:e.pskKey,wireless5gDisabledAll:"on"===e.enable?"off":"on",wireless5gRegionEnable:"on"}),e.pskKey?p.quickSetupModel.replaceData({wireless5gPskKey:e.pskKey,wireless5gEncryption:"psk",wireless5gPskVersion:"auto",wireless5gPskCipher:"auto"}):p.quickSetupModel.replaceData({wireless5gEncryption:"none"}),!0)},isQsDirty:function(){for(var e=p.wireless5g1,s=[e.enable,e.ssid,e.pskKey],a=0,i=s.length;a<i;a++)if(s[a].isDirty())return!0},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,a=e.password,e=e.security,i=r[this.getEffectiveView()].wifisharing;i&&i.setValue({ssid:s,password:a,security:e})},getWifiInfo:function(){var e,s,a="on"===p.wireless5g1.enable.getValue(),i=p.wireless5g1.ssid.getValue();switch(p.wireless5g1.encryption.getValue()){case"psk":e=p.wireless5g1.pskKey.getValue(),s="psk";break;case"psk_sae":e=p.wireless5g1.pskKey.getValue(),s="psk_sae";break;case"wpa":e=p.wireless5g1.wpaKey.getValue(),s="wpa";break;case"wep":e=p.wireless5g1.wepKey1.getValue(),s="wep";break;default:e="",s="none"}return{enable:a,ssid:i,password:e,security:s}},syncMainModel:function(){var e,s=p.wireless5g1.getData("submit",!0);for(e in s){var a=s[e];s["wireless_5g_"+e]=a,delete s[e]}return s},set5g1Name:function(){p.wireless5g1.enable.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.MODE_5G)},dataChangeOn24g:function(e,s){e!==undefined?(r.wirelessAdv5g1ViewQs.wirelessQsAll.disable(),p.wireless5g1.ssid.setValue(e),p.wireless5g1.pskKey.setValue(s)):r.wirelessAdv5g1ViewQs.wirelessQsAll.enable()},disableQsAll:function(){r.wirelessAdv5g1ViewQs.wirelessQsAll.disable()},getHwMode:function(){return p.wireless5g1.hwmode.getValue()},setWpa3VersionTip:function(){var e=p.wireless5g1.encryption.getValue(),s=p.wireless5g1.pskVersion.getValue();"psk_sae"==e&&"sae_only"==s?p.wireless5g1.pskVersion.setTips(d.su.CHAR.WIRELESS_SETTINGS.VERSION_TIP):p.wireless5g1.pskVersion.setTips("")}}})}(jQuery),$.su.modelManager.define("wireless5g1",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption"},{name:"pskVersion",mapping:"psk_version"},{name:"pskCipher",mapping:"psk_cipher"},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wpaVersion",mapping:"wpa_version"},{name:"wpaCipher",mapping:"wpa_cipher"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"wepMode",mapping:"wep_mode"},{name:"wepFormat1",mapping:"wep_format1"},{name:"wepType1",mapping:"wep_type1"},{name:"wepKey1",mapping:"wep_key1",allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0},{name:"mimo",mapping:"mu_mimo"}],convert:function(e){var s,a,i=e.htmode,n=e.capability&&e.capability.channel_5g,r=e.channel,l=e.encryption,t=e.psk_cipher,o=e.hwmode,p=e.wpa_cipher;if(!n)return e;switch(i){case"auto":case"20":a(r,s(n,20))||(e.channel="auto");break;case"40":a(r,s(n,40))||(e.channel="auto");break;case"80":a(r,s(n,80))||(e.channel="auto");break;case"160":a(r,function(e){for(var s,a=[],i=(a[0]={"name":$.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length),n=[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],r=0;r<=i;r++){var l={};s=parseInt(e[r]),-1<$.inArray(s,n)&&(l.name=s,l.value=s,a.push(l))}return a}(n))||(e.channel="auto")}switch(l){case"psk":"tkip"==t&&("n_5"!=o&&"nac_5"!=o||(e.psk_cipher="auto"));break;case"wpa":"tkip"==p&&("n_5"!=o&&"ac_5"!=o&&"nac_5"!=o||(e.wpa_cipher="auto"))}switch(o){case"a_5":e.htmode="auto";break;case"n_5":case"an_5":"80"==i&&(e.htmode="auto")}function s(e,s){if(!e)return[];var a=[],i=(a[0]={"name":$.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=i;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)a.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,a.push(t)}return a}function a(e,s){for(var a=s.length,i=0;i<a;i++)if(e==s[i].value)return 1}return e},proxy:"wirelessModule5g1Proxy"}),$.su.define("wirelessModule5g1Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_5g"),sync:function(e){var s=e.operation,a=this,i=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){a.read.call(a,$.extend({},e,{success:function(e){e=$.extend(s,e);a.trigger("ev_load",[e]),i.call(a,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless5g1Control",{type:"model",fields:[{name:"editField"},{name:"totalField"},{name:"wpaPersonal5g1"},{name:"wpa3Personal5g1"},{name:"wpaEnterprise5g1"},{name:"wep5g1"}]}),$.su.storeManager.define("hwmode5g1Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode5g1Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel5g1Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless5g1Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_5g"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(d){d.su.moduleManager.define("wirelessAdv5g2",{services:["moduleManager","ajax","device"],stores:["encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless5gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode5g2Store","htmode5g2Store","channel5g2Store"],models:["wireless5g2","wireless5g2Control","regionWirelessCapabilityModel","quickSetupModel"],deps:["utils","wirelessSettings"],views:["wirelessAdv5g2View","wirelessAdv5g2ViewBasic","wirelessAdv5g2ViewQs"],listeners:{"ev_on_launch":function(e,s,a,i,n,r,l){s.handleRegionInfo(),s.dfd=d.Deferred(),i.wireless5g2.load({success:function(){s.dfd.resolve()}})},"ev_before_destroy":function(){}},init:function(l,e,t,o,p,i){this.listen({"models.wireless5g2.enable":{"ev_value_change":function(e,s,a){"on"===s?(this.disableAll=!1,t.wireless5g2Control.editField.show(),0==i.device.getConfig().supportMUMIMO&&(t.wireless5g2.mimo.hide(),t.wireless5g2.mimo.disable())):(this.disableAll=!0,t.wireless5g2Control.editField.hide())}},"models.wireless5g2.encryption":{"ev_value_change":function(e,s,a){switch(t.wireless5g2Control.wpaPersonal5g2.hide(),t.wireless5g2Control.wpa3Personal5g2.hide(),t.wireless5g2Control.wpaEnterprise5g2.hide(),t.wireless5g2Control.wep5g2.hide(),t.wireless5g2.hwmode.enableItems(["n_5","ac_5","nac_5"]),s){case"psk":case"psk_sae":var i=t.wireless5g2.pskVersion.getValue(),i=("psk"==s&&(t.wireless5g2Control.wpaPersonal5g2.show(),t.wireless5g2.pskCipher.show(),0<=d.inArray(i,["sae_transition","sae_only"])&&t.wireless5g2.pskVersion.setValue("auto"),t.wireless5g2.pskKey.setVtype("psk_password")),"psk_sae"==s&&(t.wireless5g2Control.wpa3Personal5g2.show(),t.wireless5g2.pskCipher.hide(),d.inArray(i,["sae_transition","sae_only"])<0&&t.wireless5g2.pskVersion.setValue("sae_transition"),t.wireless5g2.pskKey.setVtype("wpa3_password")),t.wireless5g2.hwmode.enableItems(["n_5","ac_5","nac_5"]),t.wireless5g2.pskCipher.getValue()),n=t.wireless5g2.hwmode.getValue();("tkip"==i&&"n_5"==n||"tkip"==i&&"ac_5"==n||"tkip"==i&&"nac_5"==n)&&t.wireless5g2.pskCipher.setValue("auto"),"tkip"==i&&t.wireless5g2.hwmode.disableItems(["n_5","ac_5","nac_5"]),"n_5"!=n&&"ac_5"!=n&&"nac_5"!=n||(t.wireless5g2.wpaCipher.disableItems(["tkip"]),t.wireless5g2.pskCipher.disableItems(["tkip"]));break;case"wpa":t.wireless5g2Control.wpaEnterprise5g2.show(),t.wireless5g2.hwmode.enableItems(["n_5","ac_5","nac_5"]);i=t.wireless5g2.wpaCipher.getValue(),n=t.wireless5g2.hwmode.getValue();("tkip"==i&&"n_5"==n||"tkip"==i&&"ac_5"==n||"tkip"==i&&"nac_5"==n)&&t.wireless5g2.wpaCipher.setValue("auto"),"tkip"==i&&t.wireless5g2.hwmode.disableItems(["n_5","ac_5","nac_5"]),"n_5"!=n&&"ac_5"!=n&&"nac_5"!=n||(t.wireless5g2.wpaCipher.disableItems(["tkip"]),t.wireless5g2.pskCipher.disableItems(["tkip"]));break;case"wep":t.wireless5g2Control.wep5g2.show()}l.setWpa3VersionTip()}},"models.wireless5g2.pskVersion":{"ev_value_change":function(e,s,a){var i=t.wireless5g2.encryption.getValue();"psk"==i&&"rsn"==s?(t.wireless5g2.pskCipher.hideItems("auto"),"auto"==t.wireless5g2.pskCipher.getValue()&&t.wireless5g2.pskCipher.setValue("aes")):"psk"==i&&"rsn"!=s&&t.wireless5g2.pskCipher.showItems("auto"),l.setWpa3VersionTip()}},"models.wireless5g2.pskCipher":{"ev_value_change":function(e,s,a){switch(s){case"auto":case"aes":t.wireless5g2.hwmode.enableItems(["n_5","ac_5","nac_5"]);break;case"tkip":t.wireless5g2.hwmode.disableItems(["n_5","ac_5","nac_5"])}}},"models.wireless5g2.wpaVersion":{"ev_value_change":function(e,s,a){var i=t.wireless5g2.encryption.getValue();"wpa"==i&&"rsn"==s?(t.wireless5g2.wpaCipher.hideItems("auto"),"auto"==t.wireless5g2.wpaCipher.getValue()&&t.wireless5g2.wpaCipher.setValue("aes")):"wpa"==i&&"rsn"!=s&&t.wireless5g2.wpaCipher.showItems("auto")}},"models.wireless5g2.wpaCipher":{"ev_value_change":function(e,s,a){switch(s){case"auto":case"aes":t.wireless5g2.hwmode.enableItems(["n_5","ac_5","nac_5"]);break;case"tkip":t.wireless5g2.hwmode.disableItems(["n_5","ac_5","nac_5"])}}},"models.wireless5g2.hwmode":{"ev_value_change":function(e,s,a){switch(s){case"ac_5":case"n_5":case"nac_5":t.wireless5g2.encryption.disableItems(["wep"]),t.wireless5g2.wpaCipher.disableItems(["tkip"]),t.wireless5g2.pskCipher.disableItems(["tkip"]);break;default:t.wireless5g2.encryption.enableItems(["wep"]),t.wireless5g2.wpaCipher.enableItems(["tkip"]),t.wireless5g2.pskCipher.enableItems(["tkip"])}switch(s){case"a_5":t.wireless5g2.htmode.disableItems(["40"]),t.wireless5g2.htmode.disableItems(["80"]),t.wireless5g2.htmode.setValue("auto"),t.wireless5g2.htmode.hide();break;case"n_5":case"an_5":var i=t.wireless5g2.htmode.getValue();t.wireless5g2.htmode.enableItems(["40"]),t.wireless5g2.htmode.disableItems(["80"]),"80"==i&&t.wireless5g2.htmode.setValue("auto"),t.wireless5g2.htmode.show();break;default:t.wireless5g2.htmode.enableItems(["40"]),t.wireless5g2.htmode.enableItems(["80"]),t.wireless5g2.htmode.show()}}},"models.wireless5g2.htmode":{"ev_value_change":function(e,s,a){var i=t.regionWirelessCapabilityModel.channel5g2.getValue(),n=t.wireless5g2.channel.getValue();switch(s){case"auto":case"20":var r=l.getHtChannel(i,20);o.channel5g2Store.loadData(l.channelDFS(r)),p.utils.valInObjArr(n,r)?t.wireless5g2.channel.setValue(n):t.wireless5g2.channel.setValue("auto");break;case"40":r=l.getHtChannel(i,40);o.channel5g2Store.loadData(l.channelDFS(r)),p.utils.valInObjArr(n,r)?t.wireless5g2.channel.setValue(n):t.wireless5g2.channel.setValue("auto");break;case"80":r=l.getHtChannel(i,80);o.channel5g2Store.loadData(l.channelDFS(r)),p.utils.valInObjArr(n,r)?t.wireless5g2.channel.setValue(n):t.wireless5g2.channel.setValue("auto");break;case"160":r=l.get_ht_channel_160(i,160);o.channel5g2Store.loadData(l.channelDFS(r)),p.utils.valInObjArr(n,r)?t.wireless5g2.channel.setValue(n):t.wireless5g2.channel.setValue("auto")}}},"models.wireless5g2":{"ev_loaded":function(e,s){i.ajax.request({proxy:"sysWireless5g2Proxy",data:{"operation":"read"},success:function(e){e&&t.wireless5g2&&t.wireless5g2.channel&&("on"==e.ENABLE?t.wireless5g2.channel.disable():t.wireless5g2.channel.enable(),"wep"==(e=t.wireless5g2.encryption.getValue())?t.wireless5g2.hwmode.disableItems(["ac_5","nac_5"]):"psk"!=e&&"psk_sae"!=e||"tkip"==t.wireless5g2.pskCipher.getValue()&&t.wireless5g2.hwmode.disableItems(["ac_5","nac_5"]),"n_5"!=(e=t.wireless5g2.hwmode.getValue())&&"ac_5"!=e&&"nac_5"!=e||(t.wireless5g2.wpaCipher.disableItems(["tkip"]),t.wireless5g2.pskCipher.disableItems(["tkip"])))}}),this.syncWifiSharingData()},"ev_model_submit":function(e,s){this.syncWifiSharingData()},"ev_will_auto_save":function(e,s){s.preventDefault()}}})}},function(i,n,p,w,g,s){return{dfd:null,SYS_WIRELESS_5g2_URL:d.su.url("/admin/wireless?form=syspara_5g_2"),onDestroy:function(){var e=s.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",i.handleRegionInfo)},handleRegionInfo:function(){var e=p.regionWirelessCapabilityModel.channel5g.getValue();if(g.utils.isEmptyObject(e))p.wireless5g2Control.totalField.hide();else{p.wireless5g2Control.totalField.show();var s=p.regionWirelessCapabilityModel.hwmode5g2.getValue();if(s){for(var a=[],i=s.length,n=0;n<i;n++){var r={},l="MODE_"+s[n].toUpperCase();r.name=d.su.CHAR.WIRELESS_SETTINGS[l],r.value=s[n],a.push(r)}w.hwmode5g2Store.loadData(a)}var t=p.regionWirelessCapabilityModel.htmode5g2.getValue();if(t){var o=[],i=t.length;o[0]={name:d.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"};for(n=0;n<i;n++)(r={}).name=t[n]+d.su.CHAR.WIRELESS_SETTINGS.MHZ,r.value=t[n],o.push(r);w.htmode5g2Store.loadData(o)}}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var a=[],i=(a[0]={"name":d.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=i;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)a.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,a.push(t)}return a},get_ht_channel_160:function(e){for(var s=[],a=(s[0]={"name":d.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length),i=[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],n=0;n<=a;n++){var r={},l=parseInt(e[n]);-1<d.inArray(l,i)&&(r.name=l,r.value=l,s.push(r))}return s},channelDFS:function(e){for(var s=[],a=0;a<e.length;a++)s.push(e[a]),52!=e[a].value&&56!=e[a].value&&60!=e[a].value&&64!=e[a].value&&100!=e[a].value&&104!=e[a].value&&108!=e[a].value&&112!=e[a].value&&116!=e[a].value&&120!=e[a].value&&124!=e[a].value&&128!=e[a].value&&132!=e[a].value&&136!=e[a].value&&140!=e[a].value&&144!=e[a].value||(s[a].name+="(DFS)");return s},setWepEncrpyVtype:function(){var e,s=p.wireless5g2.wepFormat1.getValue(),a=p.wireless5g2.wepType1.getValue();"asic"==s?"64"==a?e="asic_64":"128"==a&&(e="asic_128"):"hex"==s&&("64"==a?e="hex_64":"128"==a&&(e="hex_128")),p.wireless5g2.wepKey1.setVtype(e)},beforeSubmit:function(){var e=p.wireless5g2.server.getValue(),s=p.wireless5g2.encryption.getValue(),a=p.wireless5g2.enable.getValue();return p.wireless5g2.disabled_all.setValue(this.disableAll?"on":"off"),"on"==a&&"wpa"==s?p.wireless5g2.server.setValidator(function(){return g.utils.ipToInt(e)!=g.utils.ipToInt(g.wirelessSettings.getLanIP())||d.su.CHAR.ERROR["00000077"]}):"on"==a&&"wep"==s&&i.setWepEncrpyVtype(),p.wireless5g2.validate()},syncQsData:function(){var e=p.wireless5g2.getData();return!(!p.wireless5g2.pskKey.validate()||!p.wireless5g2.ssid.validate())&&(p.quickSetupModel.replaceData({wireless5g2Enable:e.enable,wireless5g2Ssid:e.ssid,wireless5g2EncryPassword:e.pskKey,wireless5g2DisabledAll:"on"===e.enable?"off":"on",wireless5g2regionEnable:"on"}),e.pskKey?p.quickSetupModel.replaceData({wireless5g2PskKey:e.pskKey,wireless5g2Encryption:"psk",wireless5g2PskVersion:"auto",wireless5g2PskCipher:"auto"}):p.quickSetupModel.replaceData({wireless5g2Encryption:"none"}),!0)},isQsDirty:function(){for(var e=p.wireless5g2,s=[e.enable,e.ssid,e.pskKey],a=0,i=s.length;a<i;a++)if(s[a].isDirty())return!0},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,a=e.password,e=e.security,i=n[this.getEffectiveView()].wifisharing;i&&i.setValue({ssid:s,password:a,security:e})},getWifiInfo:function(){var e,s,a="on"===p.wireless5g2.enable.getValue(),i=p.wireless5g2.ssid.getValue();switch(p.wireless5g2.encryption.getValue()){case"psk":e=p.wireless5g2.pskKey.getValue(),s="psk";break;case"psk_sae":e=p.wireless5g2.pskKey.getValue(),s="psk_sae";break;case"wpa":e=p.wireless5g2.wpaKey.getValue(),s="wpa";break;case"wep":e=p.wireless5g2.wepKey1.getValue(),s="wep";break;default:e="",s="none"}return{enable:a,ssid:i,password:e,security:s}},syncMainModel:function(){var e,s=p.wireless5g2.getData("submit",!0);for(e in s){var a=s[e];s["wireless_5g_2_"+e]=a,delete s[e]}return s},dataChangeOn24g:function(e,s){e!==undefined?(n.wirelessAdv5g2ViewQs.wirelessQsAll.disable(),currentSsid=p.wireless5g2.ssid.getValue(),p.wireless5g2.ssid.setValue(e),p.wireless5g2.pskKey.setValue(s)):n.wirelessAdv5g2ViewQs.wirelessQsAll.enable()},disableQsAll:function(){n.wirelessAdv5g2ViewQs.wirelessQsAll.disable()},getHwMode:function(){return p.wireless5g2.hwmode.getValue()},setWpa3VersionTip:function(){var e=p.wireless5g2.encryption.getValue(),s=p.wireless5g2.pskVersion.getValue();"psk_sae"==e&&"sae_only"==s?p.wireless5g2.pskVersion.setTips(d.su.CHAR.WIRELESS_SETTINGS.VERSION_TIP):p.wireless5g2.pskVersion.setTips("")}}})}(jQuery),$.su.modelManager.define("wireless5g2",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption"},{name:"pskVersion",mapping:"psk_version"},{name:"pskCipher",mapping:"psk_cipher"},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wpaVersion",mapping:"wpa_version"},{name:"wpaCipher",mapping:"wpa_cipher"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"wepMode",mapping:"wep_mode"},{name:"wepFormat1",mapping:"wep_format1"},{name:"wepType1",mapping:"wep_type1"},{name:"wepKey1",mapping:"wep_key1",allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0},{name:"mimo",mapping:"mu_mimo"}],convert:function(e){var s=e.encryption,a=e.psk_cipher,i=e.hwmode,n=e.wpa_cipher,r=e.hwmode,l=e.htmode,t=e.channel,o=e.capability&&e.capability.channel_5g_2;if(!o)return e;switch(s){case"psk":"tkip"==a&&("n_5"!=i&&"ac_5"!=i&&"nac_5"!=i||(e.psk_cipher="auto"));break;case"wpa":"tkip"==n&&("n_5"!=i&&"ac_5"!=i&&"nac_5"!=i||(e.wpa_cipher="auto"))}switch(r){case"a_5":e.htmode="auto";break;case"n_5":case"an_5":"80"==l&&(e.htmode="auto")}switch(l){case"auto":l="20";case"20":case"40":case"80":p(t,function(e,s){if(!e)return[];var a=[],i=(a[0]={"name":$.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=i;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)a.pop(),r-=20;if(isNaN(o))break;r=20}n=o,t.name=o,t.value=o,a.push(t)}return a}(o,parseInt(l)))||(e.channel="auto");break;case"160":p(t,function(e){for(var s,a=[],i=(a[0]={"name":$.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length),n=[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],r=0;r<=i;r++){var l={};s=parseInt(e[r]),-1<$.inArray(s,n)&&(l.name=s,l.value=s,a.push(l))}return a}(o,parseInt(l)))||(e.channel="auto")}function p(e,s){for(var a=s.length,i=0;i<a;i++)if(e==s[i].value)return 1}return e},proxy:"wirelessModule5g2Proxy"}),$.su.define("wirelessModule5g2Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_5g_2"),sync:function(e){var s=e.operation,a=this,i=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){a.read.call(a,$.extend({},e,{success:function(e){e=$.extend(s,e);a.trigger("ev_load",[e]),i.call(a,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless5g2Control",{type:"model",fields:[{name:"editField"},{name:"totalField"},{name:"wpaPersonal5g2"},{name:"wpa3Personal5g2"},{name:"wpaEnterprise5g2"},{name:"wep5g2"}]}),$.su.storeManager.define("hwmode5g2Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode5g2Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel5g2Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless5g2Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_5g_2"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(f){f.su.moduleManager.define("wirelessAdvSmartConn",{services:["device","ajax","moduleManager"],models:["wirelessSmartConn","wirelessSmartConnView","wirelessSmartConnEdit","wireless24g","wireless5g1","wireless5g2"],stores:["transPowerStore","encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless24gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore"],deps:["wirelessSettings","utils"],views:["wirelessAdvSmartConnView","wirelessAdvSmartConnViewBasic"],listeners:{"ev_on_launch":function(e,s,a,i,n,r,l){s.isTriband=l.device.getIsTriband(),i.wirelessSmartConn.load(),i.wirelessSmartConnEdit.load()}},init:function(m,i,c,e,h,_){this.control({".index-common-save-btn":{"ev_will_auto_save":function(w,g,e){for(var s,i,n,r,a,l,t,o=c.wirelessSmartConnEdit.encryption.getValue(),d=!1,p=0,u=e.length;p<u;p++)-1<e[p].dataObj.name.indexOf("wireless")&&(d=!0);d&&("on"===c.wirelessSmartConn.smartEnable.getValue()?("wpa"==o?(s=c.wirelessSmartConnEdit.server.getValue(),c.wirelessSmartConnEdit.server.setValidator(function(){return h.utils.ipToInt(s)!=h.utils.ipToInt(h.wirelessSettings.getLanIP())||f.su.CHAR.ERROR["00000077"]})):"wep"==o&&m.setWepEncrpyVtype(),c.wirelessSmartConnEdit.validate()&&m.postWirelessSmartData()):(i=_.moduleManager.get("wirelessAdv24g"),n=_.moduleManager.get("wirelessAdv5g1"),o="/admin/wireless?form=wireless_2g&form=wireless_5g",m.isTriband&&(r=_.moduleManager.get("wirelessAdv5g2"),o="/admin/wireless?form=wireless_2g&form=wireless_5g&form=wireless_5g_2"),i.beforeSubmit()&&n.beforeSubmit()&&(!r||r.beforeSubmit())&&(a=i.syncMainModel(),l=n.syncMainModel(),t=r&&r.syncMainModel(),c.wirelessSmartConn.submit(),_.ajax.request({url:f.su.url(o),data:f.extend(!0,{operation:"write"},a,l,t),success:function(){var e,s=i.getWifiInfo(),a=n.getWifiInfo();m.isTriband&&(e=r.getWifiInfo()),s.enable||a.enable||m.isTriband&&e.enable?(h.wirelessSettings.loadWifiInfo(s,a,e),h.wirelessSettings.showWlanOnSmartOffSaveNote()):h.wirelessSettings.showWlanOffSaveNote(),i.syncWifiSharingData(),n.syncWifiSharingData(),r&&r.syncWifiSharingData(),m.showSmartOffNote(),m.updateGuestNetwork(),c.wireless24g.record(),c.wireless5g1.record(),c.wireless5g2.record()}}))))}}}),this.listen({"models.wirelessSmartConn":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wirelessSmartConn.smartEnable":{"ev_value_change":function(e,s,a){"on"===s?(h.wirelessSettings.hideDetailFreqConfig(),c.wirelessSmartConnView.editField.show(),i[this.getEffectiveView()].wifisharing.show()):(h.wirelessSettings.showDetailFreqConfig(),c.wirelessSmartConnView.editField.hide(),i[this.getEffectiveView()].wifisharing.hide())}},"models.wirelessSmartConnEdit.encryption":{"ev_value_change":function(e,s,a){switch(c.wirelessSmartConnView.pskEditField.hide(),c.wirelessSmartConnView.psk3EditField.hide(),c.wirelessSmartConnView.wpaEditField.hide(),c.wirelessSmartConnView.wepEditField.hide(),s){case"psk":c.wirelessSmartConnView.pskEditField.show(),c.wirelessSmartConnEdit.pskCipher.show();var i=c.wirelessSmartConnEdit.pskVersion.getValue();0<=f.inArray(i,["sae_transition","sae_only"])&&c.wirelessSmartConnEdit.pskVersion.setValue("auto"),c.wirelessSmartConnEdit.pskKey.setVtype("psk_password");break;case"psk_sae":c.wirelessSmartConnView.psk3EditField.show(),c.wirelessSmartConnEdit.pskCipher.hide();i=c.wirelessSmartConnEdit.pskVersion.getValue();f.inArray(i,["sae_transition","sae_only"])<0&&c.wirelessSmartConnEdit.pskVersion.setValue("sae_transition"),c.wirelessSmartConnEdit.pskKey.setVtype("wpa3_password");break;case"wpa":c.wirelessSmartConnView.wpaEditField.show();break;case"wep":c.wirelessSmartConnView.wepEditField.show()}}},"models.wirelessSmartConnEdit.pskVersion":{"ev_value_change":function(e,s,a){var i=c.wirelessSmartConnEdit.encryption.getValue();"psk"==i&&"rsn"==s?(c.wirelessSmartConnEdit.pskCipher.hideItems("auto"),"auto"==c.wirelessSmartConnEdit.pskCipher.getValue()&&c.wirelessSmartConnEdit.pskCipher.setValue("aes")):"psk"==i&&"rsn"!=s&&c.wirelessSmartConnEdit.pskCipher.showItems("auto")}},"models.wirelessSmartConnEdit.wpaVersion":{"ev_value_change":function(e,s,a){var i=c.wirelessSmartConnEdit.encryption.getValue();"wpa"==i&&"rsn"==s?(c.wirelessSmartConnEdit.wpaCipher.hideItems("auto"),"auto"==c.wirelessSmartConnEdit.wpaCipher.getValue()&&c.wirelessSmartConnEdit.wpaCipher.setValue("aes")):"wpa"==i&&"rsn"!=s&&c.wirelessSmartConnEdit.wpaCipher.showItems("auto")}},"models.wirelessSmartConnEdit":{"ev_loaded":function(){this.syncWifiSharingData()},"ev_will_auto_save":function(e,s){s.preventDefault()},"ev_model_submit":function(e,s){var a=this.getWifiInfo(),i=a.password;this.syncWifiSharingData(),this.updateGuestNetwork(),"on"===c.wirelessSmartConnEdit.enable.getValue()?h.wirelessSettings.showWlanOnSaveNote(a.ssid,""===i?f.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:i):h.wirelessSettings.showWlanOffSaveNote()}},"models.wireless24g":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wireless5g1":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wireless5g2":{"ev_will_auto_save":function(e,s){s.preventDefault()}}})}},function(i,n,r,e,l,t){return{isTriband:!0,setWepEncrpyVtype:function(){var e,s=r.wirelessSmartConnEdit.wepFormat1.getValue(),a=r.wirelessSmartConnEdit.wepType1.getValue();"asic"==s?"64"==a?e="asic_64":"128"==a&&(e="asic_128"):"hex"==s&&("64"==a?e="hex_64":"128"==a&&(e="hex_128")),r.wirelessSmartConnEdit.wepKey1.setVtype(e)},postWirelessSmartData:function(){r.wirelessSmartConn.submit(),i.isTriband?r.wirelessSmartConnEdit.submit({url:f.su.url("/admin/wireless?form=wireless_2g&form=wireless_5g&form=wireless_5g_2")}):r.wirelessSmartConnEdit.submit({url:f.su.url("/admin/wireless?form=wireless_2g&form=wireless_5g")})},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,a=e.password,e=e.security,i=n[this.getEffectiveView()].wifisharing;i&&i.setValue({ssid:s,password:a,security:e})},getWifiInfo:function(){var e,s,a=r.wirelessSmartConnEdit.ssid.getValue();switch(r.wirelessSmartConnEdit.encryption.getValue()){case"psk":e=r.wirelessSmartConnEdit.pskKey.getValue(),s="psk";break;case"psk_sae":e=r.wirelessSmartConnEdit.pskKey.getValue(),s="psk_sae";break;case"wpa":e=r.wirelessSmartConnEdit.wpaKey.getValue(),s="wpa";break;case"wep":e=r.wirelessSmartConnEdit.wepKey1.getValue(),s="wep";break;default:e="",s="none"}return{ssid:a,password:e,security:s}},showSmartOffNote:function(){var e,s=t.moduleManager.get("wirelessAdv24g"),a=t.moduleManager.get("wirelessAdv5g1"),s=s.getWifiInfo(),a=a.getWifiInfo();i.isTriband&&(e=t.moduleManager.get("wirelessAdv5g2").getWifiInfo()),s.enable||a.enable||i.isTriband&&e.enable?(l.wirelessSettings.loadWifiInfo(s,a,e),l.wirelessSettings.showWlanOnSmartOffSaveNote()):l.wirelessSettings.showWlanOffSaveNote()},updateGuestNetwork:function(){"basic"==t.moduleManager.get("wirelessSettings").getMode()&&t.moduleManager.get("guestNetworkModule").checkStatus()}}})}(jQuery),$.su.modelManager.define("wirelessSmartConn",{type:"model",fields:[{name:"smartEnable",mapping:"smart_enable"}],proxy:{url:$.su.url("/admin/wireless?form=smart_connect")}}),$.su.modelManager.define("wirelessSmartConnEdit",{type:"model",fields:[{name:"isTriband"},{name:"2gEnable",mapping:"wireless_2g_enable"},{name:"5gEnable",mapping:"wireless_5g_enable"},{name:"5g2Enable",mapping:"wireless_5g_2_enable"},{name:"wireless2gSsid",mapping:"wireless_2g_ssid"},{name:"wireless5gSsid",mapping:"wireless_5g_ssid"},{name:"wireless5g2Ssid",mapping:"wireless_5g_2_ssid"},{name:"wireless2gHidden",mapping:"wireless_2g_hidden"},{name:"wireless5gHidden",mapping:"wireless_5g_hidden"},{name:"wireless5g2Hidden",mapping:"wireless_5g_2_hidden"},{name:"wireless2gEncryption",mapping:"wireless_2g_encryption"},{name:"wireless5gEncryption",mapping:"wireless_5g_encryption"},{name:"wireless5g2Encryption",mapping:"wireless_5g_2_encryption"},{name:"wireless2gPskVersion",mapping:"wireless_2g_psk_version"},{name:"wireless5gPskVersion",mapping:"wireless_5g_psk_version"},{name:"wireless5g2PskVersion",mapping:"wireless_5g_2_psk_version"},{name:"wireless2gPskCipher",mapping:"wireless_2g_psk_cipher"},{name:"wireless5gPskCipher",mapping:"wireless_5g_psk_cipher"},{name:"wireless5g2PskCipher",mapping:"wireless_5g_2_psk_cipher"},{name:"wireless2gPskKey",mapping:"wireless_2g_psk_key"},{name:"wireless5gPskKey",mapping:"wireless_5g_psk_key"},{name:"wireless5g2PskKey",mapping:"wireless_5g_2_psk_key"},{name:"wireless2gWpaVersion",mapping:"wireless_2g_wpa_version"},{name:"wireless5gWpaVersion",mapping:"wireless_5g_wpa_version"},{name:"wireless5g2WpaVersion",mapping:"wireless_5g_2_wpa_version"},{name:"wireless2gWpaCipher",mapping:"wireless_2g_wpa_cipher"},{name:"wireless5gWpaCipher",mapping:"wireless_5g_wpa_cipher"},{name:"wireless5g2WpaCipher",mapping:"wireless_5g_2_wpa_cipher"},{name:"wireless2gServer",mapping:"wireless_2g_server"},{name:"wireless5gServer",mapping:"wireless_5g_server"},{name:"wireless5g2Server",mapping:"wireless_5g_2_server"},{name:"wireless2gPort",mapping:"wireless_2g_port"},{name:"wireless5gPort",mapping:"wireless_5g_port"},{name:"wireless5g2Port",mapping:"wireless_5g_2_port"},{name:"wireless2gWpaKey",mapping:"wireless_2g_wpa_key"},{name:"wireless5gWpaKey",mapping:"wireless_5g_wpa_key"},{name:"wireless5g2WpaKey",mapping:"wireless_5g_2_wpa_key"},{name:"wireless2gWepMode",mapping:"wireless_2g_wep_mode"},{name:"wireless5gWepMode",mapping:"wireless_5g_wep_mode"},{name:"wireless5g2WepMode",mapping:"wireless_5g_2_wep_mode"},{name:"wireless2gWepFormat1",mapping:"wireless_2g_wep_format1"},{name:"wireless5gWepFormat1",mapping:"wireless_5g_wep_format1"},{name:"wireless5g2WepFormat1",mapping:"wireless_5g_2_wep_format1"},{name:"wireless2gWepType1",mapping:"wireless_2g_wep_type1"},{name:"wireless5gWepType1",mapping:"wireless_5g_wep_type1"},{name:"wireless5g2WepType1",mapping:"wireless_5g_2_wep_type1"},{name:"wireless2gWepKey1",mapping:"wireless_2g_wep_key1"},{name:"wireless5gWepKey1",mapping:"wireless_5g_wep_key1"},{name:"wireless5g2WepKey1",mapping:"wireless_5g_2_wep_key1"},{name:"wireless2gTxpower",mapping:"wireless_2g_txpower"},{name:"wireless5gTxpower",mapping:"wireless_5g_txpower"},{name:"wireless5g2Txpower",mapping:"wireless_5g_2_txpower"},{name:"wireless_2g_hwmode"},{name:"wireless_5g_hwmode"},{name:"wireless_5g_2_hwmode"},{name:"enable"},{name:"disabled_all"},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption"},{name:"pskVersion",mapping:"psk_version"},{name:"pskCipher",mapping:"psk_cipher"},{name:"pskKey",mapping:"psk_key",maxLength:64,vtype:"psk_password",allowBlank:!1},{name:"wpaVersion",mapping:"wpa_version"},{name:"wpaCipher",mapping:"wpa_cipher"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"wepMode",mapping:"wep_mode"},{name:"wepFormat1",mapping:"wep_format1"},{name:"wepType1",mapping:"wep_type1"},{name:"wepKey1",mapping:"wep_key1"},{name:"txpower",mapping:"txpower"}],serialize:function(e){var s,a,i,n,r=$.su.serviceManager.get("device").getIsTriband(),l="on"===e.enable?"off":"on";for(n in e){var t=e[n];0<=n.indexOf("wireless_")||(s="wireless_2g_"+n,a="wireless_5g_"+n,i="wireless_5g_2_"+n,t!==undefined&&null!==t?(e[s]=t,e[a]=t,r&&(e[i]=t)):(delete e[s],delete e[a],delete e[i]),"disabled_all"===n&&(e[s]=l,e[a]=l,r&&(e[i]=l)),delete e[n])}return e["wireless_2g_hwmode"]=$.su.modelManager.get("wireless24g").hwmode.getValue()||"bgnax",e["wireless_5g_hwmode"]=$.su.modelManager.get("wireless5g1").hwmode.getValue()||"anacax_5",r&&(e["wireless_5g_2_hwmode"]=$.su.modelManager.get("wireless5g2").hwmode.getValue()||"anacax_5"),e},proxy:{url:$.su.url("/admin/wireless?form=wireless_2g")}}),$.su.modelManager.define("wirelessSmartConnView",{type:"model",fields:[{name:"editField"},{name:"pskEditField"},{name:"psk3EditField"},{name:"wpaEditField"},{name:"wepEditField"}]}),$.su.define("sysWirelessAdv2gAnd5gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_2g&form=wireless_5g"),writeFilter:function(e){return $.extend({operation:"write"},e)}}),$.su.define("sysWirelessAdv2gAnd5g2Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_2g&form=wireless_5g&form=wireless_5g_2"),writeFilter:function(e){return $.extend({operation:"write"},e)}});