<script>function doEscapeChar(a){for(var t="",e=0;e<a.length;e++)18==a.charCodeAt(e)?t+="\n":17==a.charCodeAt(e)?t+="\r":t+=a[e];return t}function tablePagesLteSms(a,t,e){var s,i=$(a),l=0,n=t,o=null==arguments[3]?7:arguments[3];if(param=[],i.next(".table-bottom-pages").remove(),!i.find("tr").hasClass("space-tr")&&0!=n){i.bind("repaginate",function(){if(i.find("tbody").empty(),$("#staticAll").prop("checked",!1),$("#staticAll").data("tpCheckbox").refresh(),!((l+=1)*t>=e+t)){$.act(ACT_SET,LTE_SMS_SENDMSGBOX,null,null,["PageNumber="+l]);var a=new Array,n=0,r="";smsOutboxPagelist=$.act(ACT_GL,LTE_SMS_SENDMSGENTRY,null,null,["index","to","content","sendTime"]),$.exe()||($.each(smsOutboxPagelist,function(){r=doEscapeChar(this.content),this.content=r,s=$.resizeStr(this.content,30),a.push([{text:'<div><input type="checkbox" id="staticCheckbox'+n+'"/><label></label></div>',width:"5%"},{text:""==this.to?" ":this.to,width:"15"},{text:$.htmlEncode(s),width:"45"},{text:this.sendTime,width:"25%"},{text:"<span class='table-grid-icon edit-modify-icon' onClick='doMsgRead("+n+")'></span><span class='table-grid-icon edit-trash-icon' id='del_"+n+"' onclick='doMsgDel("+n+");'></span>",width:"10%"}]),n++}),$.initTableBody($("#tableSmsOutbox"),a)),l-=1;var b=Math.floor((o-1)/2),g=Math.round((o-1)/2);if($("span[id$="+d+"]").show(),u.remove(),p.remove(),c>o+2){if(l>b+1){u.insertAfter($("#1-"+d));for(m=2;m<Math.min(l-b+1,c-o);m++)$("#"+m+"-"+d).hide()}if(l<c-g-2){p.insertBefore($("#"+c+"-"+d));for(var m=Math.max(l+g+2,o+2);m<c;m++)$("#"+m+"-"+d).hide()}}}});for(var r=e,c=Math.ceil(r/n),d=$.randomId("prev"),b=$.randomId("next"),u=$('<span id="left-'+d+'">...</span>'),p=$('<span id="right-'+d+'">...</span>'),g=$("<div class='table-bottom-pages'><span id='"+d+"' class='page'></span></div>"),m=1;m<=c;m++)$("<span id='"+m+"-"+d+"'>"+m+"</span>").on("click",{newPage:m-1},function(a){l=a.data.newPage,curPageNumGlobal=l+1,$(this).hasClass("click-page")||($(this).siblings("span").removeClass("click-page"),$(this).addClass("click-page"),i.trigger("repaginate"),l-1<0?$("#"+d).addClass("gray"):$("#"+d).removeClass("gray"),l+1>=c?$("#"+b).addClass("gray"):$("#"+b).removeClass("gray"))}).appendTo(g);var h=$("<span id='"+b+"' class='page right'></span>");if(g.append(h),g.insertAfter(i),0==c&&($("#"+d).addClass("gray"),$("#"+b).addClass("gray")),$("#"+d).on("click",function(){var a=$(this).siblings("span"),t=Number($(this).siblings("span.click-page").text())-1;curPageNumGlobal=(l=t-1)+1,l<0?curPageNumGlobal=1:(a.removeClass("click-page"),$("#"+t+"-"+d).addClass("click-page"),i.trigger("repaginate"),l-1<0&&$(this).addClass("gray"),$("#"+b).removeClass("gray"))}),$("#"+b).on("click",function(){var a=$(this).siblings("span"),t=Number($(this).siblings("span.click-page").text())+1;curPageNumGlobal=(l=t-1)+1,l>=c?curPageNumGlobal=c:(a.removeClass("click-page"),$("#"+t+"-"+d).addClass("click-page"),i.trigger("repaginate"),l+1>=c&&$(this).addClass("gray"),$("#"+d).removeClass("gray"))}),0==c){var f=new Array;$.initTableBody($("#tableSmsOutbox"),f)}$("span#1-"+d).click()}}function doMsgDel(a){$.confirm(c_str.del_choosed,function(){$("#staticCheckbox"+a).parents("tr").first().remove(),$.act(ACT_DEL,LTE_SMS_SENDMSGENTRY,smsOutboxPagelist[a].__stack,null),$.exe(function(a){a&&$.reload()}),$.reload()},function(){})}function doMsgRead(a){var t=$.act(ACT_GET,LTE_SMS_SENDMSGBOX,null,null);$.exe()||(param[0]=1,param[1]=curPageNumGlobal,param[2]=a,param[3]=smsOutboxPagelist,param[4]=t.totalNumber,$.loadMain("lteSmsReadMsg.htm",param))}function clickSelStaticAll(){for(var a=$("#staticAll").prop("data-checked"),t=0;t<smsOutboxPagelist.length;t++){var e=$("#staticCheckbox"+t);e.prop("data-checked")!=a&&(e.prop("checked",a),e.data("tpCheckbox").refresh())}}function delAllMsg(){for(var a=0;a<smsOutboxPagelist.length;a++){var t=$("#staticCheckbox"+a);if(t.prop("data-checked")&&(t.parents("tr").first().remove(),$.act(ACT_DEL,LTE_SMS_SENDMSGENTRY,smsOutboxPagelist[a].__stack,null),$.exe()))break}$.reload()}function clickStaticDel(){for(var a=0,t=0;t<smsOutboxPagelist.length;t++)if($("#staticCheckbox"+t).prop("data-checked")){a=1;break}a&&$.confirm(c_str.del_choosed,function(){setTimeout(delAllMsg,200)},function(){})}function initSmsOutboxTable(){$.act(ACT_SET,LTE_SMS_SENDMSGBOX,null,null,["PageNumber=0"]),$.exe(function(a){}),smsSendBoxObj=$.act(ACT_GET,LTE_SMS_SENDMSGBOX,null,null,["totalNumber"]),$.exe(function(a){a||tablePagesLteSms($("#tableSmsOutbox"),8,smsSendBoxObj.totalNumber)})}function initTableOutbox(){var a=[{text:'<div><input type="checkbox" id="staticAll" onClick="clickSelStaticAll();"/><label></label></div>',width:"5%"},{text:table_str.phoneNum,width:"15%"},{text:table_str.message,width:"45"},{text:m_str.send,width:"25%"},{text:table_str.modify,width:"10%"}];$.initTableHead($("#tableSmsOutbox"),a),$("#tableSmsOutbox").tpTable(initSmsOutboxTable)}function init(){initTableOutbox()}var smsOutboxPagelist,smsSendBoxObj,curPageNumGlobal,param</script>

<h3 id="t_et">Outbox</h3>
<div class="content-container">
    <form class="pure-form pure-form-aligned">
        <div class="table-op">
            <div class="table-btn">
                <span class="refresh-icon" id="staticRefresh"></span>
                <label class="T_refresh">Refresh</label>
                <span class="delete-icon" id="staticDel"></span>
                <label class="T_del">Delete</label>
            </div>
        </div>

        <table id="tableSmsOutbox">
            <thead></thead>
            <tbody id="tableSmsOutboxBody">
                <tr id="editSmsOutbox" class="nd">
                    <td colspan="6">
                        <div id="outboxStaticPage"></div>
                    </td>
                </tr>
            </tbody>
        </table>
    </form>
</div>

<script>$("#staticDel").click(function(c){clickStaticDel()}),$("#staticRefresh").click(function(c){$.reload()}),$.tpInit(init)</script>
