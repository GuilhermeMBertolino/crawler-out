<script>function init(){var e=$.act(ACT_GET,MANAGEMENT_SERVER,null,null),n=$.act(ACT_GL,WAN_IP_CONN,null,null,["enable","name","X_TP_IfName","connectionType"]),a=$.act(ACT_GL,WAN_PPP_CONN,null,null,["enable","name","X_TP_IfName"]),o=$.act(ACT_GL,WAN_PPTP_CONN,null,null,["enable","name","ifName"]),l=$.act(ACT_GL,WAN_L2TP_CONN,null,null,["enable","name","ifName"]);if(!$.exe()){1==e.enableCWMP?($("#cwmp_on").addClass("selected"),$("#cwmp_off").removeClass("selected")):($("#cwmp_on").removeClass("selected"),$("#cwmp_off").addClass("selected")),1==e.periodicInformEnable?($("#inform_on").addClass("selected"),$("#inform_off").removeClass("selected")):($("#inform_on").removeClass("selected"),$("#inform_off").addClass("selected")),$("#inform_interval").prop("value",e.periodicInformInterval),tmpInformInterval=e.periodicInformInterval,$("#acs_url").prop("value",e.URL),$("#acs_user_name").prop("value",e.username),$("#acs_user_pwd").prop("value",e.password);for(var t=0;t<n.length;t++)if("IP_Routed"==n[t].connectionType&&1==n[t].enable){var r=n[t].name,_=n[t].X_TP_IfName;$("#wanInf").append("<option value='"+_+"' text='"+r+"' >"+r+"</option>")}for(p=0;p<a.length;p++)if(1==a[p].enable){var r=a[p].name,_=a[p].X_TP_IfName;$("#wanInf").append("<option value='"+_+"' text='"+r+"' >"+r+"</option>")}for(p=0;p<o.length;p++)if(1==o[p].enable){var r=o[p].name,_=o[p].ifName;$("#wanInf").append("<option value='"+_+"' text='"+r+"' >"+r+"</option>")}for(var p=0;p<l.length;p++)if(1==l[p].enable){var r=l[p].name,_=l[p].ifName;$("#wanInf").append("<option value='"+_+"' text='"+r+"' >"+r+"</option>")}$('#wanInf option[value="'+e.X_TP_BoundIfName+'"]').prop("selected","selected");var c={};c.refresh=1,$("#wanInf").tpSelect(c),tmpCwmpFlag=e.X_TP_Flag,0!=(16&e.X_TP_Flag)?($("#soap_on").addClass("selected"),$("#soap_off").removeClass("selected")):($("#soap_on").removeClass("selected"),$("#soap_off").addClass("selected")),0!=(128&e.X_TP_Flag)?($("#CR_Auth_en").prop("checked",!1),$("#CR").addClass("nd")):($("#CR_Auth_en").prop("checked",!0),$("#CR").removeClass("nd")),$("#CR_name").prop("value",e.connectionRequestUsername),$("#CR_pwd").prop("value",e.connectionRequestPassword),$("#CR_url").prop("value",e.connectionRequestURL),$("#CR_path").prop("value",e.X_TP_connReqPath),$("#CR_port").prop("value",e.X_TP_ConnReqPort)}}var tmpInformInterval,tmpCwmpFlag;$("#cwmp_on").click(function(){$.addLoading($(this)),$.act(ACT_SET,MANAGEMENT_SERVER,null,null,["EnableCWMP=1"]),$.exe(function(e){$.removeLoading(),e||$.reload()})}),$("#cwmp_off").click(function(){$.addLoading($(this)),$.act(ACT_SET,MANAGEMENT_SERVER,null,null,["EnableCWMP=0"]),$.exe(function(e){$.removeLoading(),e||$.reload()})}),$("#inform_on").click(function(){$.addLoading($(this)),$.act(ACT_SET,MANAGEMENT_SERVER,null,null,["PeriodicInformEnable=1"]),$.exe(function(e){$.removeLoading(),e||$.reload()})}),$("#inform_off").click(function(){$.addLoading($(this)),$.act(ACT_SET,MANAGEMENT_SERVER,null,null,["PeriodicInformEnable=0"]),$.exe(function(e){$.removeLoading(),e||$.reload()})}),$("#soap_on").click(function(){$.addLoading($(this)),tmpCwmpFlag|=16,$.act(ACT_SET,MANAGEMENT_SERVER,null,null,["X_TP_Flag="+tmpCwmpFlag]),$.exe(function(e){$.removeLoading(),e||$.reload()})}),$("#soap_off").click(function(){tmpCwmpFlag&=-17,$.act(ACT_SET,MANAGEMENT_SERVER,null,null,["X_TP_Flag="+tmpCwmpFlag]),$.exe(function(e){$.removeLoading(),e||$.reload()})}),$("#t_save").click(function(){$.addLoading($(this));var e={},n=$("#inform_interval").prop("value");if(!(1==!$.num(n,!0)&&n>0))return $.alert(ERR_NUM_INVAD),void $("#inform_interval").focus().select();if(e.periodicInformInterval=parseInt(n),""==$("#acs_url").prop("value"))return $.alert(ERR_CWMP_URL_INVAD),void((a=$("#acs_url"))&&(a.focus(),a.select()));if(e.URL=$("#acs_url").prop("value"),e.username=$("#acs_user_name").prop("value"),e.password=$("#acs_user_pwd").prop("value"),e.X_TP_BoundIfName=$("#wanInf").data("value"),$("#CR_Auth_en").prop("data-checked")?tmpCwmpFlag&=-129:tmpCwmpFlag|=128,e.X_TP_Flag=tmpCwmpFlag,e.connectionRequestUsername=$("#CR_name").prop("value"),e.connectionRequestPassword=$("#CR_pwd").prop("value"),"/"!=$("#CR_path").prop("value").charAt(0))return $.alert(ERR_CWMP_PATH_INVAD),(a=$("#CR_path"))&&(a.focus(),a.select()),!1;if(e.X_TP_connReqPath=$("#CR_path").prop("value"),$.num($("#CR_port").prop("value"),!0)||!($("#CR_port").prop("value")>=1e3)){$.alert(ERR_CWMP_PORT_INVAD);var a=$("#CR_port");return a&&(a.focus(),a.select()),!1}e.X_TP_ConnReqPort=parseInt($("#CR_port").prop("value"),10),$.act(ACT_SET,MANAGEMENT_SERVER,null,null,e),$.exe(function(e){$.removeLoading(),e||$.reload()})}),$("#getRPCMethods").click(function(){var e=4|tmpCwmpFlag;$.act(ACT_SET,MANAGEMENT_SERVER,null,null,["X_TP_Flag="+e]),$.exe(function(e){e||$.reload("cwmp.htm")})}),$("#CR_Auth_en").click(function(){$("#CR_Auth_en").prop("data-checked")?$("#CR").removeClass("nd"):$("#CR").addClass("nd")})</script>
<h3 id="et">CWMP Settings</h3>
<div class="content-container">
	<form class="pure-form pure-form-aligned">
		<div class="button-group-container">
			<b class="xxxl" id="t_cwmp">CWMP: </b>
			<ul>
				<li>
					<button id="cwmp_on" class="fst" value="on">On</button>
				</li>
				<li>
					<button id="cwmp_off" class="lst" value="off">Off</button>
				</li>
			</ul>
		</div>
		<div class="button-group-container">
			<b class="xxxl" id="t_inform">Inform: </b>
			<ul>
				<li>
					<button id="inform_on" class="fst" value="on">On</button>
				</li>
				<li>
					<button id="inform_off" class="lst" value="off">Off</button>
				</li>
			</ul>
		</div>
		<br>
		<div>
			<b class="xxxl" id="t_interval">Inform Interval: </b>
			<input class="l" type="text" size="15" id="inform_interval">
			<span id="t_seconds"></span>
		</div>
		<div>
			<b class="xxxl" id="t_acsurl">ACS URL: </b>
			<input class="xl" type="text" size="15" id="acs_url">
		</div>
		<div>
			<b class="xxxl" id="t_acsusername">ACS Username: </b>
			<input class="xl" type="text" size="15" id="acs_user_name">
		</div>
		<div>
			<b class="xxxl" id="t_acspasswd">ACS Password: </b>
			<input class="xl" type="password" size="15" id="acs_user_pwd">
		</div>
		<div>
			<b class="xxxl" id="t_if">Interface used by TR-069 client: </b>
			<select class="xl" id="wanInf">
				<option value="Any_WAN" id="t_anywan">Any_WAN</option>
				<option value="LAN" id="t_lan">LAN</option>
			</select>
		</div>
		<div class="button-group-container">
			<b class="xxxl" id="t_display">Display SOAP messages on serial console: </b>
			<ul>
				<li>
					<button id="soap_on" class="fst" value="on">On</button>
				</li>
				<li>
					<button id="soap_off" class="lst" value="off">Off</button>
				</li>
			</ul>
		</div>
		<br>
		
		<div>
			<input class="xl" type="checkbox" id="CR_Auth_en">
			<label id="t_auth">Connection Request Authentication</label>
		</div>
		<div id="CR">
			<div>
				<b class="xxxl" id="t_cr_name">Username: </b>
				<input class="xl" type="text" size="15" id="CR_name">
			</div>
			<div>
				<b class="xxxl" id="t_cr_pwd">Password: </b>
				<input class="xl" type="password" size="15" id="CR_pwd">
			</div>
			<div>
				<b class="xxxl" id="t_cr_path">Path: </b>
				<input class="xl" type="text" size="15" id="CR_path">
			</div>
			<div>
				<b class="xxxl" id="t_cr_port">Port: </b>
				<input class="xl" type="text" size="15" id="CR_port">
			</div>
			<div>
				<b class="xxxl" id="t_cr_url">URL: </b>
				<input class="xl" type="text" size="15" id="CR_url">
			</div>
		</div>

		<button type="submit" id="getRPCMethods" class="green left l_auto">Get RPC Methods</button>
		<div class="part-separate">
			<button type="submit" id="t_save" class="green T_save">Save</button> 
		</div>
	</form>
</div>
<script>$.tpInit(init)</script>