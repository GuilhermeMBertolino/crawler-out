<script>function isValidPinLen(_){return _.length>=MIN_PIN_LEN&&_.length<=MAX_PIN_LEN}function isValidPukLen(_){return _.length>=MIN_PUK_LEN&&_.length<=MAX_PUK_LEN}function simStatusNum2Str(_){return _>simStatusString.length-1||_<0?simStatusString[0]:simStatusString[_]}function selectObj(_){_&&(_.focus(),_.select())}function pinManageShow(_){switch(_){case"3":$("#pin_unlock_div").addClass("nd"),$("#pin_enable_div").removeClass("nd"),$("#pin_disableModify_div").addClass("nd"),$("#puk_unlock_div").addClass("nd"),$("#refreshBtn_div").addClass("nd"),$("#pinLockDis").click();break;case"4":$("#pin_unlock_div").removeClass("nd"),$("#pin_enable_div").addClass("nd"),$("#pin_disableModify_div").addClass("nd"),$("#puk_unlock_div").addClass("nd"),$("#refreshBtn_div").addClass("nd"),1==simLock.autoUnlockPin?$("#autoUnlockEn_u").addClass("selected"):$("#autoUnlockDis_u").addClass("selected"),$("#pinRemainingNumber_u").text(simLock.remainPinUnlockTime);break;case"5":$("#pin_unlock_div").addClass("nd"),$("#pin_enable_div").addClass("nd"),$("#pin_disableModify_div").removeClass("nd"),$("#puk_unlock_div").addClass("nd"),$("#refreshBtn_div").addClass("nd"),$("#radioDisable").click(),$("#pinRemainingNumber_m").text(simLock.remainPinUnlockTime),1==simLock.autoUnlockPin?$("#autoUnlockEn_m").addClass("selected"):$("#autoUnlockDis_m").addClass("selected");break;case"6":$("#pin_unlock_div").addClass("nd"),$("#pin_enable_div").addClass("nd"),$("#pin_disableModify_div").addClass("nd"),$("#puk_unlock_div").removeClass("nd"),$("#refreshBtn_div").addClass("nd"),$("#pukRemainingNumber").text(simLock.remainPukUnlockTime);break;default:$("#pin_unlock_div").addClass("nd"),$("#pin_enable_div").addClass("nd"),$("#pin_disableModify_div").addClass("nd"),$("#puk_unlock_div").addClass("nd"),$("#saveBtn_div").addClass("nd")}}function getSimStatusNum(_,n){var e=MP_SIM_STATUS_UNINSERTED;switch(_){case MP_SIM_CARDSTATE_ABSENT:e=MP_SIM_STATUS_UNINSERTED;break;case MP_SIM_CARDSTATE_PRESENT:switch(n){case MP_SIM_PINSTATE_UNKNOWN:e=MP_SIM_STATUS_UNINSERTED_OR_ERROR;break;case MP_SIM_PINSTATE_ENABLED_NOT_VERIFIED:e=MP_SIM_STATUS_PIN_LOCKED;break;case MP_SIM_PINSTATE_ENABLED_VERIFIED:e=MP_SIM_STATUS_PIN_VERIFIED;break;case MP_SIM_PINSTATE_DISABLED:e=MP_SIM_STATUS_READY;break;case MP_SIM_PINSTATE_ENABLED_BLOCKED:e=MP_SIM_STATUS_PUK_LOCKED;break;case MP_SIM_PINSTATE_ENABLED_PERM_BLOCKED:e=MP_SIM_STATUS_LOCKED_FOREVER;break;default:e=MP_SIM_STATUS_UNINSERTED_OR_ERROR}break;case MP_SIM_CARDSTATE_ERROR:e=MP_SIM_STATUS_ERROR;break;default:e=MP_SIM_STATUS_UNINSERTED_OR_ERROR}return e.toString()}function init(){var _,n=$.act(ACT_GL,WAN_LTE_LINK_CFG,null,null,null),e=$.act(ACT_GL,WAN_COMMON_INTF_CFG,null,null,["WANAccessType"]),i=0,a=0;$.exe()||($.each(e,function(){"LTE"==this.WANAccessType&&(_=this.__stack)}),$.each(n,function(){var n=$.stkPop(this.__stack,1);if(_==n)return simStatusNum=this.simStatus,a=this.simCardState,simLockStk=this.__stack,simLock=$.act(ACT_GET,LTE_SIMLOCK,this.__stack,null,null),i=1,!1}),(0==i||$.exe())&&(simStatusNum=0),1==i&&0==simStatusNum&&void 0!=simLock&&(simStatusNum=getSimStatusNum(parseInt(a),parseInt(simLock.pinState))),$("#simStatus").text(simStatusNum2Str(simStatusNum)),pinManageShow(simStatusNum))}function checkParam(_){switch(_){case"3":i=$("#pinInput_e").val();if(!$("#pinLockEn").hasClass("selected"))return!1;if(!i)return $.alert(ERR_LTE_PIN_EMPTY),selectObj($("#pinInput_e")),!1;if(!isValidPinLen(i))return $.alert(ERR_LTE_PIN_LENGTH_ERROR),selectObj($("#pinInput_e")),!1;if(!$.isnum(i))return $.alert(ERR_LTE_PIN_ILLEGAL_CHAR),selectObj($("#pinInput_e")),!1;break;case"4":if(!(n=$("#pinInput_u").val()))return $.alert(ERR_LTE_PIN_EMPTY),selectObj($("#pinInput_u")),!1;if(!isValidPinLen(n))return $.alert(ERR_LTE_PIN_LENGTH_ERROR),selectObj($("#pinInput_u")),!1;if(!$.isnum(n))return $.alert(ERR_LTE_PIN_ILLEGAL_CHAR),selectObj($("#pinInput_u")),!1;break;case"5":if($("#radioDisable").prop("checked")){var n=$("#pinInput_d").val();if(!n)return $.alert(ERR_LTE_PIN_EMPTY),selectObj($("#pinInput_d")),!1;if(!isValidPinLen(n))return $.alert(ERR_LTE_PIN_LENGTH_ERROR),selectObj($("#pinInput_d")),!1;if(!$.isnum(n))return $.alert(ERR_LTE_PIN_ILLEGAL_CHAR),selectObj($("#pinInput_d")),!1}else{var e=$("#pinInput_m").val(),i=$("#newPinInput_m").val(),a=$("#confirmPinInput_m").val();if(0!=e.length||0!=i.length||0!=a.length){if(!isValidPinLen(e))return $.alert(ERR_LTE_PIN_LENGTH_ERROR),selectObj($("#pinInput_m")),!1;if(!$.isnum(e))return $.alert(ERR_LTE_PIN_ILLEGAL_CHAR),selectObj($("#pinInput_m")),!1;if(!isValidPinLen(i))return $.alert(ERR_LTE_PIN_LENGTH_ERROR),selectObj($("#newPinInput_m")),!1;if(!$.isnum(i))return $.alert(ERR_LTE_PIN_LENGTH_ERROR),selectObj($("#newPinInput_m")),!1;if(i!=a)return $.alert(ERR_LTE_PIN_CONFIRM_VALUE_ERROR),selectObj($("#confirmPinInput_m")),!1}}break;case"6":var t=$("#pukInput").val(),i=$("#newPinInput_p").val();if(!t)return $.alert(ERR_LTE_PUK_EMPTY),selectObj($("#pukInput")),!1;if(!isValidPukLen(t))return $.alert(ERR_LTE_PUK_LENGTH_ERROR),selectObj($("#pukInput")),!1;if(!$.isnum(t))return $.alert(ERR_LTE_PUK_ILLEGAL_CHAR),selectObj($("#pukInput")),!1;if(!i)return $.alert(ERR_LTE_PIN_EMPTY),selectObj($("#newPinInput_p")),!1;if(!isValidPinLen(i))return $.alert(ERR_LTE_PIN_LENGTH_ERROR),selectObj($("#newPinInput_p")),!1;if(!$.isnum(i))return $.alert(ERR_LTE_PIN_ILLEGAL_CHAR),selectObj($("#newPinInput_p")),!1}return!0}var lteLinkCfg,simLock,simLockStk,simStatusNum,SIMLOCK_ACTION_ENABLE_PIN=1,SIMLOCK_ACTION_DISABLE_PIN=2,SIMLOCK_ACTION_MODIFY_PIN=3,SIMLOCK_ACTION_UNLOCK_PIN=4,SIMLOCK_ACTION_UNLOCK_PUK=5,SIMLOCK_ACTION_AUTOUNLOCK=6,MP_SIM_STATUS_UNINSERTED_OR_ERROR=0,MP_SIM_STATUS_UNINSERTED=1,MP_SIM_STATUS_ERROR=2,MP_SIM_STATUS_READY=3,MP_SIM_STATUS_PIN_LOCKED=4,MP_SIM_STATUS_PIN_VERIFIED=5,MP_SIM_STATUS_PUK_LOCKED=6,MP_SIM_STATUS_LOCKED_FOREVER=7,MP_SIM_PINSTATE_INVALID=-1,MP_SIM_PINSTATE_UNKNOWN=0,MP_SIM_PINSTATE_ENABLED_NOT_VERIFIED=1,MP_SIM_PINSTATE_ENABLED_VERIFIED=2,MP_SIM_PINSTATE_DISABLED=3,MP_SIM_PINSTATE_ENABLED_BLOCKED=4,MP_SIM_PINSTATE_ENABLED_PERM_BLOCKED=5,MP_SIM_CARDSTATE_INVALID=-2,MP_SIM_CARDSTATE_INIT=-1,MP_SIM_CARDSTATE_ABSENT=0,MP_SIM_CARDSTATE_PRESENT=1,MP_SIM_CARDSTATE_ERROR=2,MAX_PIN_LEN=8,MIN_PIN_LEN=4,MAX_PUK_LEN=8,MIN_PUK_LEN=8;$("#pinLockEn").click(function(){$("#pinRemainingNumber_e").text(simLock.remainPinUnlockTime),$("#enablePinPara").removeClass("nd")}),$("#pinLockDis").click(function(){$("#enablePinPara").addClass("nd")}),$("#radioDisable").click(function(){$("#pinRemainingNumber_d").text(simLock.remainPinUnlockTime),$("#pin_disable_div").removeClass("nd"),$("#pin_modify_div").addClass("nd")}),$("#radioModify").click(function(){$("#pin_modify_div").removeClass("nd"),$("#pin_disable_div").addClass("nd")}),$("#refreshBtn").click(function(){$.reload()}),$("#saveBtn").click(function(){var _={},n=!1;if(0==checkParam(simStatusNum))return!1;switch(simStatusNum){case"3":e=$("#pinInput_e").val();_.simAction=SIMLOCK_ACTION_ENABLE_PIN,_.pin=e,_.autoUnlockPin=$("#autoUnlockEn_e").hasClass("selected")?1:0;break;case"4":var e=$("#pinInput_u").val(),i=$("#autoUnlockEn_u").hasClass("selected")?1:0;n=!0,_.simAction=SIMLOCK_ACTION_UNLOCK_PIN,_.autoUnlockPin=i,_.pin=e;break;case"5":if($("#radioDisable").prop("checked")){e=$("#pinInput_d").val();_.simAction=SIMLOCK_ACTION_DISABLE_PIN,_.pin=e}else{var a=$("#pinInput_m").val(),t=$("#newPinInput_m").val(),s=$("#confirmPinInput_m").val(),i=$("#autoUnlockEn_m").hasClass("selected")?1:0;!0,_.simAction=SIMLOCK_ACTION_AUTOUNLOCK,_.autoUnlockPin=i,0!=a.length&&0!=t.length&&0!=s.length&&(_.simAction=SIMLOCK_ACTION_MODIFY_PIN,_.pin=a,_.newPin=t)}break;case"6":var l=$("#pukInput").val(),t=$("#newPinInput_p").val();n=!0,_.simAction=SIMLOCK_ACTION_UNLOCK_PUK,_.puk=l,_.newPin=t;break;default:return!1}$.act(ACT_SET,LTE_SIMLOCK,simLockStk,null,_),$.addLoading($(this)),$.exe(function(_){setTimeout(function(){$.act(ACT_GET,LTE_SIMLOCK,simLockStk,null,null),$.exe(),$.removeLoading(),$.reload()},n?3500:1e3)})})</script>
<h3 id="t_sett">PIN Management</h3>

<div class="content-container">
    <form class="pure-form pure-form-aligned">

		<div id="SIMStatus" class="pure-control-group">
				<label class="label-title l" id="t_simCardStatus">SIM Card Status:</label>
				<span class="T" id="simStatus">ready</span>
		</div>

		<div id="pin_enable_div" class="pure-control-group">
			<div id="enablePinSwitch" class="button-group-container">
				<label class="label-title l T_pinLock">PIN Lock:</label>
				<ul><li><button id="pinLockEn" class="fst" value="on">On</button></li>
					<li><button id="pinLockDis" class="lst" value="off">Off</button></li>
				</ul>
			</div>

			<div id="enablePinPara">
				<div class="button-group-container">
					<label class="label-title l T_autoUnlockPin">Auto-unlock PIN:</label>
					<ul><li><button id="autoUnlockEn_e" class="fst" value="on">On</button></li>
						<li><button id="autoUnlockDis_e" class="lst" value="off">Off</button></li>
					</ul>
				</div>
				<div>
					<label class="label-title l T_pin">PIN:</label>
					<input type="text" id="pinInput_e" required maxlength="8">
					<span id="pinRemainingLbl_e" class="T_remainingTry">Remaining Attempts:</span>
					<span id="pinRemainingNumber_e">3</span>
				</div>
			</div>
		</div>

    	<div id="pin_unlock_div" class="pure-control-group">
			<div>
				<label class="label-title l T_pin">PIN:</label>
				<input type="text" id="pinInput_u" required>
				<span id="pinRemainingLbl_u" class="T_remainingTry">Remaining Attempts:</span>
				<span id="pinRemainingNumber_u">2</span>
			</div>
			<div class="button-group-container">
				<label class="label-title l T_autoUnlockPin">Auto-unlock PIN:</label>
				<ul><li><button id="autoUnlockEn_u" class="fst" value="on">On</button></li>
					<li><button id="autoUnlockDis_u" class="lst" value="off">Off</button></li>
				</ul>
			</div>
		</div>

		<div id="pin_disableModify_div">
			<div id="pin_disableModifySel">
				<input type="radio" name="pinActionType" id="radioDisable">
				<label id="t_disable">Disable</label>
				<input type="radio" name="pinActionType" id="radioModify">
				<label id="t_modify">Modify</label>
			</div>

			<div id="pin_disable_div" class="pure-control-group">
				<label class="label-title l T_pin">PIN:</label>
				<input type="text" id="pinInput_d" required>
				<span id="pinRemainingLbl_d" class="T_remainingTry">Remaining Attempts:</span>
				<span id="pinRemainingNumber_d">3</span>
			</div>

			<div id="pin_modify_div" class="pure-control-group">
				<div class="button-group-container">
					<label class="label-title l T_autoUnlockPin">Auto-unlock PIN:</label>
					<ul><li><button id="autoUnlockEn_m" class="fst" value="on">On</button></li>
						<li><button id="autoUnlockDis_m" class="lst" value="off">Off</button></li>
					</ul>
				</div>
				<div>
					<label class="label-title l T_pin">PIN:</label>
					<input type="text" id="pinInput_m" required>
					<span id="pinRemainingLbl_m" class="T_remainingTry">Remaining Attempts:</span>
					<span id="pinRemainingNumber_m">3</span>
				</div>
				<div>
					<label class="label-title l T_newPin">New PIN:</label>
					<input type="text" id="newPinInput_m" required>
				</div>
				<div>
					<label class="label-title l" id="t_confirmPin">Confirm PIN:</label>
					<input type="text" id="confirmPinInput_m" required>
				</div>
			</div>
		</div>

		<div id="puk_unlock_div" class="pure-control-group">
			<div>
				<label class="label-title l" id="t_puk">PUK:</label>
				<input type="text" id="pukInput" required>
				<span id="pukRemainingLbl" class="T_remainingTry">Remaining Attempts:</span>
				<span id="pukRemainingNumber">10</span>
			</div>
			<div>
				<label class="label-title l T_newPin">New PIN:</label>
				<input type="text" id="newPinInput_p" required>
			</div>
		</div>

         <div id="saveBtn_div" style="text-align:right" class="part-separate">
            <button type="submit" class="green inline T_save" id="saveBtn">Save</button>
        </div>

		<div id="refreshBtn_div" style="text-align:right" class="part-separate">
            <button type="submit" class="green inline T_refresh" id="refreshBtn">Refresh</button>
        </div>

    </form>
</div>

<script>$.tpInit(init)</script>