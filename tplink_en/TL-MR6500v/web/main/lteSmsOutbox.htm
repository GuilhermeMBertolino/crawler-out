<script>var smsOutboxPagelist,smsSendBoxObj,curPageNumGlobal,param;function doEscapeChar(t){for(var a="",e=0;e<t.length;e++)18==t.charCodeAt(e)?a+="\n":17==t.charCodeAt(e)?a+="\r":a+=t[e];return a}function tablePagesLteSms(t,n,o){var r,c=$(t),d=0,a=n,u=null==arguments[3]?7:arguments[3];if(param=[],c.next(".table-bottom-pages").remove(),!c.find("tr").hasClass("space-tr")&&0!=a){c.bind("repaginate",function(){if(c.find("tbody").empty(),$("#staticAll").prop("checked",!1),$("#staticAll").data("tpCheckbox").refresh(),!(o+n<=(d+=1)*n)){$.act(ACT_SET,LTE_SMS_SENDMSGBOX,null,null,["PageNumber="+d]);var t=new Array,a=0,e="";smsOutboxPagelist=$.act(ACT_GL,LTE_SMS_SENDMSGENTRY,null,null,["index","to","content","sendTime"]),$.exe()||($.each(smsOutboxPagelist,function(){e=doEscapeChar(this.content),this.content=e,r=$.resizeStr(this.content,30),t.push([{text:'<div><input type="checkbox" id="staticCheckbox'+a+'"/><label></label></div>',width:"5%"},{text:""==this.to?" ":this.to,width:"15"},{text:$.htmlEncode(r),width:"45"},{text:this.sendTime,width:"25%"},{text:"<span class='table-grid-icon edit-modify-icon' onClick='doMsgRead("+a+")'></span><span class='table-grid-icon edit-trash-icon' id='del_"+a+"' onclick='doMsgDel("+a+");'></span>",width:"10%"}]),a++}),$.initTableBody($("#tableSmsOutbox"),t)),d-=1;var s=Math.floor((u-1)/2),i=Math.round((u-1)/2);if($("span[id$="+p+"]").show(),g.remove(),m.remove(),u+2<b){if(s+1<d){g.insertAfter($("#1-"+p));for(var l=2;l<Math.min(d-s+1,b-u);l++)$("#"+l+"-"+p).hide()}if(d<b-i-2){m.insertBefore($("#"+b+"-"+p));for(l=Math.max(d+i+2,u+2);l<b;l++)$("#"+l+"-"+p).hide()}}}});for(var e=o,b=Math.ceil(e/a),p=$.randomId("prev"),s=$.randomId("next"),g=$('<span id="left-'+p+'">...</span>'),m=$('<span id="right-'+p+'">...</span>'),i=$("<div class='table-bottom-pages'><span id='"+p+"' class='page'></span></div>"),l=1;l<=b;l++)$("<span id='"+l+"-"+p+"'>"+l+"</span>").on("click",{newPage:l-1},function(t){d=t.data.newPage,curPageNumGlobal=d+1,$(this).hasClass("click-page")||($(this).siblings("span").removeClass("click-page"),$(this).addClass("click-page"),c.trigger("repaginate"),d-1<0?$("#"+p).addClass("gray"):$("#"+p).removeClass("gray"),b<=d+1?$("#"+s).addClass("gray"):$("#"+s).removeClass("gray"))}).appendTo(i);var h=$("<span id='"+s+"' class='page right'></span>");if(i.append(h),i.insertAfter(c),0==b&&($("#"+p).addClass("gray"),$("#"+s).addClass("gray")),$("#"+p).on("click",function(){var t=$(this).siblings("span"),a=Number($(this).siblings("span.click-page").text())-1;curPageNumGlobal=(d=a-1)+1,d<0?curPageNumGlobal=1:(t.removeClass("click-page"),$("#"+a+"-"+p).addClass("click-page"),c.trigger("repaginate"),d-1<0&&$(this).addClass("gray"),$("#"+s).removeClass("gray"))}),$("#"+s).on("click",function(){var t=$(this).siblings("span"),a=Number($(this).siblings("span.click-page").text())+1;curPageNumGlobal=(d=a-1)+1,b<=d?curPageNumGlobal=b:(t.removeClass("click-page"),$("#"+a+"-"+p).addClass("click-page"),c.trigger("repaginate"),b<=d+1&&$(this).addClass("gray"),$("#"+p).removeClass("gray"))}),0==b){var f=new Array;$.initTableBody($("#tableSmsOutbox"),f)}$("span#1-"+p).click()}}function doMsgDel(t){$.confirm(c_str.del_choosed,function(){$("#staticCheckbox"+t).parents("tr").first().remove(),$.act(ACT_DEL,LTE_SMS_SENDMSGENTRY,smsOutboxPagelist[t].__stack,null),$.exe(function(t){t&&$.reload()}),$.reload()},function(){return})}function doMsgRead(t){param[0]=1,param[1]=curPageNumGlobal,param[2]=t,param[3]=smsOutboxPagelist,$.loadMain("lteSmsReadMsg.htm",param)}function clickSelStaticAll(){for(var t=$("#staticAll").prop("data-checked"),a=0;a<smsOutboxPagelist.length;a++){var e=$("#staticCheckbox"+a);e.prop("data-checked")!=t&&(e.prop("checked",t),e.data("tpCheckbox").refresh())}}function delAllMsg(){for(var t=0;t<smsOutboxPagelist.length;t++){var a=$("#staticCheckbox"+t);if(a.prop("data-checked")&&(a.parents("tr").first().remove(),$.act(ACT_DEL,LTE_SMS_SENDMSGENTRY,smsOutboxPagelist[t].__stack,null),$.exe()))break}$.reload()}function clickStaticDel(){for(var t=0,a=0;a<smsOutboxPagelist.length;a++){if($("#staticCheckbox"+a).prop("data-checked")){t=1;break}}t&&$.confirm(c_str.del_choosed,function(){return void setTimeout(delAllMsg,200)},function(){return})}function initSmsOutboxTable(){$.act(ACT_SET,LTE_SMS_SENDMSGBOX,null,null,["PageNumber=0"]),$.exe(function(t){}),smsSendBoxObj=$.act(ACT_GET,LTE_SMS_SENDMSGBOX,null,null,["totalNumber"]),$.exe(function(t){t||tablePagesLteSms($("#tableSmsOutbox"),8,smsSendBoxObj.totalNumber)})}function initTableOutbox(){var t=[{text:'<div><input type="checkbox" id="staticAll" onClick="clickSelStaticAll();"/><label></label></div>',width:"5%"},{text:table_str.phoneNum,width:"15%"},{text:table_str.message,width:"45"},{text:m_str.send,width:"25%"},{text:table_str.modify,width:"10%"}];$.initTableHead($("#tableSmsOutbox"),t),$("#tableSmsOutbox").tpTable(initSmsOutboxTable)}function init(){initTableOutbox()}</script>
<h3 id="t_et">Outbox</h3>
<div class="content-container">
    <form class="pure-form pure-form-aligned">
        <div class="table-op">
            <div class="table-btn">
                <span class="refresh-icon" id="staticRefresh"></span>
                <label class="T_refresh">Refresh</label>
                <span class="delete-icon" id="staticDel"></span>
                <label class="T_del">Delete</label>
            </div>
        </div>
        <table id="tableSmsOutbox">
            <thead></thead>
            <tbody id="tableSmsOutboxBody">
                <tr id="editSmsOutbox" class="nd">
                    <td colspan="6">
                        <div id="outboxStaticPage"></div>
                    </td>
                </tr>
            </tbody>
        </table>
    </form>
</div>
<script>$("#staticDel").click(function(c){clickStaticDel()}),$("#staticRefresh").click(function(c){$.reload()}),$.tpInit(init)</script>
