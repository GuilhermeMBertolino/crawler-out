<script language="javascript">var voipDialPlan=[],voipDialPlanAll=[],emgcDialPlan=[];function initDialPlan(i){if(voipDialPlanAll=$.act(ACT_GL,XTP_IGD_MULTIISPDP_LIST,null,null,["attr","prefix"]),0==$.exe()){var t=0;for($.each(voipDialPlanAll,function(a,l){var e=parseInt(this.attr,10);t<5&&0!=(e&EMERGENCY_MASK)&&(i||($.id("enable"+t).checked=0!=(e&ENABLE_MASK),$.id("emgcNum"+t).value=this.prefix),t++,emgcDialPlan.push(this)),0!=((e&EMERGENCY_MASK)>>>EMERGENCY_SHIFT==0&&(e&ENABLE_MASK)>>>ENABLE_SHIFT)&&voipDialPlan.push(this)});t<5;t++)emgcDialPlan.push({})}}function selectAllOnclick(a){for(var l=0;l<5;l++)$.id("enable"+l).checked=a}function EnterCheck(){var a,l,e;try{temp=[];for(var i=0;i<5;i++)if(temp[i]={},e=n_str.voice_emergencycall.t_name+(i+1),l=$.id("emgcNum"+i),a=getValue(l,e,0,16),0!=(l.value=a).length){getValue(l,e,3,16),checkNum(l,e);for(var t=0;t<voipDialPlan.length;t++)if(voipDialPlan[t].__stack!=emgcDialPlan[i].__stack&&a==voipDialPlan[t].prefix)return alert(aemerg[i]),setFocus(l),!1;for(t=0;t<i;t++)if(a==temp[t].prefix)return alert(aemerg[i+5]),setFocus(l),!1;temp[i].prefix=a}else temp[i].prefix=a}catch(a){if(!1===a)return!1;throw a}return!0}function saveOnclick(){if(initDialPlan(!0),0!=EnterCheck()){$.addLoading($.id("save"));for(var a=0;a<5;a++){var l=0,e={};if(e.prefix=$.id("emgcNum"+a).value,0!=e.prefix.length){if(emgcDialPlan[a].__stack)if(e.prefix!=emgcDialPlan[a].prefix){var i={};i.prefix=emgcDialPlan[a].prefix,i.attr=parseInt(emgcDialPlan[a].attr,10)&BARRING_MASK,i.replace="",i.attr&&$.act(ACT_ADD,XTP_IGD_MULTIISPDP_LIST,null,null,i)}else l=parseInt(emgcDialPlan[a].attr,10)&BARRING_MASK;e.replace="";for(var t=0;t<voipDialPlanAll.length;t++)if(voipDialPlanAll[t].__stack!=emgcDialPlan[a].__stack&&e.prefix==voipDialPlanAll[t].prefix&&0==(parseInt(voipDialPlanAll[t].attr,10)&EMERGENCY_MASK)){l=parseInt(voipDialPlanAll[t].attr,10)&BARRING_MASK,$.act(ACT_DEL,XTP_IGD_MULTIISPDP_LIST,voipDialPlanAll[t].__stack,null,null);break}l|=1<<EMERGENCY_SHIFT,l|=1<<PSTN_SHIFT,l|=e.prefix.length<<LENGTH_SHIFT&LENGTH_MASK,1==$.id("enable"+a).checked&&(l|=3<<ENABLE_SHIFT),e.attr=l,emgcDialPlan[a].__stack?$.act(ACT_SET,XTP_IGD_MULTIISPDP_LIST,emgcDialPlan[a].__stack,null,e):$.act(ACT_ADD,XTP_IGD_MULTIISPDP_LIST,null,null,e)}else emgcDialPlan[a].__stack&&(0==(l=parseInt(emgcDialPlan[a].attr,10)&BARRING_MASK)?$.act(ACT_DEL,XTP_IGD_MULTIISPDP_LIST,emgcDialPlan[a].__stack,null,null):((e={}).prefix=emgcDialPlan[a].prefix,e.attr=l,e.replace="",$.act(ACT_SET,XTP_IGD_MULTIISPDP_LIST,emgcDialPlan[a].__stack,null,e)))}actForSendMsg(),$.exe(function(a){a||$.reload()})}}</script>
<p class="et"><b class="T T_emergencycall">Emergency Call Setting(PSTN).</b></p>
<div class="con1 XXL">
<p class="ct T T_emergencycall">Emergency Call Setting(PSTN).</p>
<p class="bl"></p>
<div class="con2">
	<p class="red T" id="t_info">Please note that some emergency phone numbers (e.g. 911) can only be dialed through the PSTN line, but not the VoIP line.</p>
	<table id="dialPlanTlb" align="center" class="S" cellpadding="0" cellspacing="0">
		<tr>
			<th class="T T_en" style="width:40px">Enable</th>
			<th class="tl T" id="t_emphonenum">Emergency Phone Number</th>
		</tr>
		<tr>
			<th><input type="checkbox" id="enable0"></th>
			<th class="tl"><input type="text" class="text" size="20" maxlength="48" id="emgcNum0"></th>
		</tr>
		<tr>
			<th><input type="checkbox" id="enable1"></th>
			<th class="tl"><input type="text" class="text" size="20" maxlength="48" id="emgcNum1"></th>
		</tr>
		<tr>
			<th><input type="checkbox" id="enable2"></th>
			<th class="tl"><input type="text" class="text" size="20" maxlength="48" id="emgcNum2"></th>
		</tr>
		<tr>
			<th><input type="checkbox" id="enable3"></th>
			<th class="tl"><input type="text" class="text" size="20" maxlength="48" id="emgcNum3"></th>
		</tr>
		<tr>
			<th><input type="checkbox" id="enable4"></th>
			<th class="tl"><input type="text" class="text" size="20" maxlength="48" id="emgcNum4"></th>
		</tr>
	</table>
</div>
<p class="bl"></p>
<p class="tail">
	<input type="button" id="selectAll" class="button L T T_selectall" value="Select All" onclick="selectAllOnclick(!0)">
	<input type="button" id="unselectAll" class="button L T T_unselectall" value="Deselect All" onclick="selectAllOnclick(!1)">
	<input type="button" id="save" class="button L T T_save" value="Save" onclick="saveOnclick()">
</p>
</div>
<script language="javascript">$.loadHelp(),initDialPlan()</script>
