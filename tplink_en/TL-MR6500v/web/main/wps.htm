<style>#wps_container{position:relative;height:100px;margin-bottom:50px}#wps_button,#wps_mask{width:84px;height:84px;position:absolute;left:50%;margin-left:-42px;background:#4acbd6;cursor:pointer;border-radius:42px;-webkit-border-radius:42px;-ms-border-radius:42px;-moz-border-radius:42px;-o-border-radius:42px}#wps_button.disabled,#wps_button.disabled:hover{background:#b2b2b2;cursor:not-allowed}#wps_button.starting{background:#ffcb00}#wps_button.starting #wps_title_op{display:none}#wps_button.starting #wps_title{margin-top:-9px}#wps_button.starting:hover{background:#ffcb00}#wps_mask.starting{background:#ffcb00;opacity:.2;animation:Breathing 1.5s ease-out infinite alternate;-webkit-animation:Breathing 1.5s ease-out infinite alternate;-moz-animation:Breathing 1.5s ease-out infinite alternate;-o-animation:Breathing 1.5s ease-out infinite alternate;-ms-animation:Breathing 1.5s ease-out infinite alternate}#wps_button:hover{background:#23c4c4}#wps_title{text-align:center;position:absolute;top:50%;margin-top:-18px;width:100%}#wps_title span.wps{color:#fff;font-size:16px;display:block}#wps_title span{font-size:13px;color:#fff}@-webkit-keyframes Breathing{0%{-webkit-transform:scale(1)}100%{-webkit-transform:scale(1.36)}}@-moz-keyframes Breathing{0%{-webkit-transform:scale(1)}100%{-webkit-transform:scale(1.36)}}@-o-keyframes Breathing{0%{-webkit-transform:scale(1)}100%{-webkit-transform:scale(1.36)}}@-ms-keyframes Breathing{0%{-webkit-transform:scale(1)}100%{-webkit-transform:scale(1.36)}}@keyframes Breathing{0%{transform:scale(1)}100%{transform:scale(1.36)}}#wps_container .status-container{position:absolute;top:100px}div#page-message-container{position:absolute;bottom:-35px}div#page-message-container span.fail-icon,div#page-message-container span.success-icon{margin-right:4px}div#pin-conn-result{position:relative;margin-left:29px}div#pin-conn-result span.fail-icon,div#pin-conn-result span.success-icon{position:absolute;left:-25px;top:0;bottom:0;margin-top:auto;margin-bottom:auto}</style>
<h3 id="et">wps method</h3>
<div class="content-container">
    <div>
        <p class="cfg-line T_methodOne">method one</p>
        <div id="wps_container" class="part-separate">
            <div id="wps_mask">
            </div>
            <div id="wps_button" class="">
                <div id="wps_title">
                    <span id="wps_title_op">start</span>
                    <span class="wps">WPS</span>
                </div>
            </div>
            <div id="page-message-container">
                <p id="push-conn-result"></p>
            </div>
        </div>
        <p id="page-message"></p>
    </div>
    <div class="advanced-block part-separate" type="button">
        <span class="advanced-icon advanced-hide-icon" id="methodTwoClick"></span>
        <span class="T_methodTwo">method two</span>
    </div>
	<div>
		<span id="AP_Lock_Warning_First" style="display:none"></span>
	</div>
    <div class="nd" id="methodTwoDiv">
        <form class="pure-form pure-form-aligned">
            <div>
                <input type="radio" name="methodTwoType" id="routerPinRadio" checked="checked">
                <label class="T_routerpin">router</label>
                <input type="radio" name="methodTwoType" id="clientPinRadio">
                <label class="T_clientPin">client</label>
            </div>
            <div id="routerPinDiv">
                <div class="button-group-container" id="pinLock">
                    <b class="T_routerpin">Enable Router's PIN:</b>
                    <ul>
                        <li>
                            <button id="pinEn" class="fst" value="on">On</button>
                        </li>
                        <li>
                            <button id="pinDis" class="lst" value="off">Off</button>
                        </li>
                    </ul>
                </div>
                <div class="inline">
                    <b class="T_c_curpin">Current PIN:</b>
                    <input type="text" disabled="disabled" id="pinNum" class="m">
                </div>
                <div class="inline" style="margin-left:10px">
                    <button type="submit" class="blue inline l T T_c_genPin_2g" id="genPin">Generate</button>
                    <button type="submit" class="blue inline l T T_c_defPin_2g" id="defPin">Default</button>
                </div>
                <div>
                    <span id="AP_Lock_Warning" style="display:none"></span>
                </div>
            </div>
            <div class="nd" id="clientPinDiv">
                <b class="T_client">Enter the client's PIN:</b>
                <input type="text" id="clientPinInput" maxlength="8">
                <div>
                    <button type="submit" class="blue inline left T_conn" id="pinConn">Connect</button>
                    <div class="inline" id="pin-conn-result">
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
<script>!function(){var u,N,s,a,_=void 0,T=0;$("#methodTwoClick").on("click",function(){$("#methodTwoDiv").toggleClass("nd"),T=(T+1)%2,document.getElementById("AP_Lock_Warning_First").style.display=T?"none":"inline"}),$("#routerPinRadio").on("click",function(){$("#routerPinDiv").show(),$("#clientPinDiv").hide()}),$("#clientPinRadio").on("click",function(){$("#routerPinDiv").hide(),$("#clientPinDiv").show()}),$("#pinEn").on("click.wps",function(e){$.addLoading($(this)),t(0)}),$("#pinDis").on("click.wps",function(e){$.addLoading($(this)),t(1)}),$("#genPin").on("click.wps",function(e){$.addLoading($("#defPin")),$.act(ACT_OP,ACT_OP_WLAN_GET_NEW_PIN,s.__stack),$.exe(function(e){if(!e){var n=$.act(ACT_GET,LAN_WLAN_WPS,s.__stack,null,["DevicePassword"]);$.exe(function(e){if(!e){var t=f(n.devicePassword);INCLUDE_LAN_WLAN_DUALBAND&&($.act(ACT_SET,LAN_WLAN_WPS,a.__stack,null,["DevicePassword="+n.devicePassword]),$.exe()),$("#pinNum").prop("value",t)}$.removeLoading()})}})}),$("#defPin").on("click.wps",function(e){$.addLoading($(this)),$.act(ACT_OP,ACT_OP_WLAN_RESTORE_PIN,s.__stack),$.exe(function(e){if(!e){var n=$.act(ACT_GET,LAN_WLAN_WPS,s.__stack,null,["DevicePassword"]);$.exe(function(e){if(!e){var t=f(n.devicePassword);INCLUDE_LAN_WLAN_DUALBAND&&($.act(ACT_SET,LAN_WLAN_WPS,a.__stack,null,["DevicePassword="+n.devicePassword]),$.exe()),$("#pinNum").prop("value",t)}$.removeLoading()})}})}),$("#wps_button").on("click",function(){$(this).hasClass("starting")||$(this).hasClass("disabled")||(r("InProgress",0),l("InProgress",0),n(0))}),$("#pinConn").on("click",function(){var e=$("#clientPinInput").val();!0===function(e){if(0==e.length)$.alert(ERR_WLAN_PIN_EMPTY);else if(ret=$.num(e,[0,99999999],!0))ret==ERR_NUM_INVAD?$.alert(ERR_WLAN_PIN_INVALID):$.alert(ERR_WLAN_PIN_LEGNTH_INVALID),e.length<8&&$.alert(ERR_WLAN_PIN_LEGNTH_INVALID);else{if(0!=function(e){var t=parseInt(e,10);if(0==t)return!1;var n=0;return n+=Math.floor(t/1e7)%10*3,n+=Math.floor(t/1e6)%10*1,n+=Math.floor(t/1e5)%10*3,n+=Math.floor(t/1e4)%10*1,n+=Math.floor(t/1e3)%10*3,n+=Math.floor(t/100)%10*1,n+=Math.floor(t/10)%10*3,(n+=t%10*1)%10==0}(e))return!0;$.alert(ERR_WLAN_PIN_CHECKSUM_FAIL)}return!1}(e)?(r("InProgress",e=parseInt(e,10)),l("InProgress",e),n(e)):$("#clientPinInput").focus().select()});var i,I,o="Microsoft Internet Explorer"==navigator.appName&&"MSIE8.0"==navigator.appVersion.split(";")[1].replace(/[ ]/g,"");function r(e,t){var n,s=$("p#push-conn-result");if("Idle"==e||"Success"==e||"fail"==e)$("#wps_button").removeClass("starting"),$("#wps_mask").removeClass("starting"),"close"!=I&&$("#wps_button").removeClass("disabled"),$("#wps_title_op").text(m_str.start),o&&clearInterval(i),0==t?"Idle"==e?s.html(""):"Success"==e?s.html('<span class="success-icon"></span>'+s_str.qss_ok):"fail"==e&&s.html('<span class="fail-icon"></span>'+s_str.qss_fail):s.html("");else if("InProgress"==e){if(0==t){if($("#wps_button").hasClass("starting"))return;$("#wps_button").addClass("starting"),$("#wps_mask").addClass("starting"),$("#wps_title_op").text(m_str.cancel),o&&(clearInterval(i),i=setInterval((n=0,$("#wps_button").animate({opacity:.3},1e3,function(){$("#wps_button").css({filter:"alpha(opacity=30)"})}),function(){"wps.htm"==$.curPage?(n%2?$("#wps_button").animate({opacity:.3},1e3,function(){$("#wps_button").css({filter:"alpha(opacity=30)"})}):$("#wps_button").animate({opacity:1},1e3,function(){$("#wps_button").css({filter:"alpha(opacity=100)"})}),n++):clearInterval(i)}),1e3))}else $("#wps_button").addClass("disabled");s.html("")}}function l(e,t){var n=$("#pin-conn-result"),s=$("#pinConn");"Idle"==e||"Success"==e||"fail"==e?(s.nextAll("div:has(span.load)").remove(),s.prop("disabled","close"==I),0<t?"Idle"==e?n.html(""):"Success"==e?n.html('<span class="success-icon"></span>'+s_str.qss_ok):"fail"==e&&n.html('<span class="fail-icon"></span>'+s_str.qss_fail):n.html("")):"InProgress"==e&&(s.prop("disabled",!0),0<t?($.addLoading(s,null,null,1),n.html(m_str.connecting)):n.html(""))}function t(e){$.act(ACT_SET,LAN_WLAN_WPS,s.__stack,null,["SetupLock="+e]),INCLUDE_LAN_WLAN_DUALBAND&&$.act(ACT_SET,LAN_WLAN_WPS,a.__stack,null,["SetupLock="+e]),$.exe(function(){$.removeLoading()})}function n(e){switch(e=e||0,I){case"both":$.act(ACT_SET,LAN_WLAN_WPS,s.__stack,null,["X_TP_State=InProgress","X_TP_PeerPassword="+e]),INCLUDE_LAN_WLAN_DUALBAND&&$.act(ACT_SET,LAN_WLAN_WPS,a.__stack,null,["X_TP_State=InProgress","X_TP_PeerPassword="+e]);break;case"2":$.act(ACT_SET,LAN_WLAN_WPS,s.__stack,null,["X_TP_State=InProgress","X_TP_PeerPassword="+e]),INCLUDE_LAN_WLAN_DUALBAND&&$.act(ACT_SET,LAN_WLAN_WPS,a.__stack,null,["X_TP_State=Idle","X_TP_PeerPassword=0"]);break;case"5":INCLUDE_LAN_WLAN_DUALBAND&&$.act(ACT_SET,LAN_WLAN_WPS,a.__stack,null,["X_TP_State=InProgress","X_TP_PeerPassword="+e]),$.act(ACT_SET,LAN_WLAN_WPS,s.__stack,null,["X_TP_State=Idle","X_TP_PeerPassword=0"])}$.exe(function(e){}),E()}function E(){clearTimeout(_);var t=$.act(ACT_GET,LAN_WLAN_WPS,s.__stack,null,["Enable","X_TP_State","X_TP_PeerPassword"]);if(INCLUDE_LAN_WLAN_DUALBAND)var n=$.act(ACT_GET,LAN_WLAN_WPS,a.__stack,null,["Enable","X_TP_State","X_TP_PeerPassword"]);$.exe(function(e){e||function(e,t){var n="Idle";n="Idle"!=e.X_TP_State||INCLUDE_LAN_WLAN_DUALBAND&&"Idle"!=t.X_TP_State?"InProgress"==e.X_TP_State&&(!INCLUDE_LAN_WLAN_DUALBAND||"Success"!=t.X_TP_State)||INCLUDE_LAN_WLAN_DUALBAND&&"InProgress"==t.X_TP_State&&"Success"!=e.X_TP_State?"InProgress":"Success"==e.X_TP_State||INCLUDE_LAN_WLAN_DUALBAND&&"Success"==t.X_TP_State?"Success":"fail":"Idle";var s=e.X_TP_PeerPassword;0<e.X_TP_PeerPassword?s=e.X_TP_PeerPassword:INCLUDE_LAN_WLAN_DUALBAND&&0<t.X_TP_PeerPassword&&(s=t.X_TP_PeerPassword);r(n,s),l(n,s),"InProgress"==n&&(clearTimeout(_),_=$.timeout(E,5e3))}(t,n)})}function f(e){for(var t=e.toString(),n="",s=t.length+1;s<=8;s++)n+="0";return n+=t}function S(e,t){if(0==e.enable)return ERR_WLAN_DISABLED;if("Basic"==e.beaconType){if("WEPEncryption"==e.basicEncryptionModes)return ERR_WLAN_QSS_CONFLICT}else if("WPA"==e.beaconType){if("PSKAuthentication"!=e.WPAAuthenticationMode||"TKIPEncryption"==e.WPAEncryptionModes)return ERR_WLAN_QSS_CONFLICT}else if(!("11i"!=e.beaconType&&"WPAand11i"!=e.beaconType||"PSKAuthentication"==e.IEEE11iAuthenticationMode&&"TKIPEncryption"!=e.IEEE11iEncryptionModes))return ERR_WLAN_QSS_CONFLICT;return!0}$("#wps_title_op").html(m_str.start),$("#wps_button").corner("round 42px"),$.tpInit(function(){var e=$.act(ACT_GL,LAN_WLAN,null,null,["name","Enable","SSIDAdvertisementEnabled","X_TP_Configuration_Modified","BeaconType","WPAAuthenticationMode","WPAEncryptionModes","IEEE11iEncryptionModes","IEEE11iAuthenticationMode","BasicEncryptionModes","X_TP_Band"]);$.exe()||($.each(e,function(){"2.4GHz"==this.X_TP_Band?u=this:INCLUDE_LAN_WLAN_DUALBAND&&"5GHz"==this.X_TP_Band&&(N=this)}),s=$.act(ACT_GET,LAN_WLAN_WPS,u.__stack,null,["Enable","DevicePassword","SetupLockedState","X_TP_SetupLockedTime","SetupLock","X_TP_State","X_TP_PeerPassword"]),$.exe(),INCLUDE_LAN_WLAN_DUALBAND&&(a=$.act(ACT_GET,LAN_WLAN_WPS,N.__stack,null,["Enable","DevicePassword","SetupLockedState","X_TP_SetupLockedTime","SetupLock","X_TP_State","X_TP_PeerPassword"]),$.exe())),function(e,t,n,s){var a,_,i=0;if(i=INCLUDE_LAN_WLAN_DUALBAND?parseInt(e.X_TP_SetupLockedTime)+parseInt(n.X_TP_SetupLockedTime):parseInt(e.X_TP_SetupLockedTime),"Unlocked"==e.setupLockedState||INCLUDE_LAN_WLAN_DUALBAND&&"Unlocked"==n.setupLockedState)$("#pinEn").addClass("selected");else if(0==i)$("#pinDis").addClass("selected");else if(-1==i||-2==i)$("#pinLock").addClass("disabled"),a=$.tpLang.wps_nstr.c_wpsPinFailedLock,(_=document.getElementById("AP_Lock_Warning")).innerHTML=a,_.style.color="red",_.style.display="inline",T||(a=$.tpLang.wps_nstr.c_wpsPinFailedLock,(_=document.getElementById("AP_Lock_Warning_First")).innerHTML=a,_.style.color="red",_.style.display="inline");else{$("#pinLock").addClass("disabled"),a=$.tpLang.wps_nstr.c_wpsPinFailed;var o=i;0<o&&((_=document.getElementById("AP_Lock_Warning")).innerHTML=a.replace("$",o),_.style.color="red",_.style.display="inline",T||((_=document.getElementById("AP_Lock_Warning_First")).innerHTML=a.replace("$",o),_.style.color="red",_.style.display="inline")),window.intervalInWPS=window.intervalInWPS||null,clearInterval(window.intervalInWPS),window.intervalInWPS=window.setInterval(function(){if("wps.htm"==$.curPage){if(!(0<=--o))return clearInterval(window.intervalInWPS),void $.reload();(_=document.getElementById("AP_Lock_Warning")).innerHTML=a.replace("$",o),_.style.color="red",_.style.display="inline",T||((_=document.getElementById("AP_Lock_Warning_First")).innerHTML=a.replace("$",o),_.style.color="red",_.style.display="inline")}else clearInterval(window.intervalInWPS)},1e3)}var r=e.devicePassword;if(0==e.setupLock?r=e.devicePassword:INCLUDE_LAN_WLAN_DUALBAND&&0==n.setupLock&&(r=n.devicePassword),$("#pinNum").prop("value",f(r)),0==e.enable)I="close",d='<span class="green">'+$.tpLang.m_str.note+": </span>"+($.tpLang.wps_nstr.c_closeNote||"To use WPS Wizard, you should go to <a href='#'>Advanced > Wireless > Advanced Settings</a> to enable WPS first.");else{var l=S(u),c=!1;INCLUDE_LAN_WLAN_DUALBAND&&(c=S(N));var d="";!0===l&&!0===c?I="both":!0===l?I="2":!0===c?I="5":(I="close",d=l===c?e_str[l]:INCLUDE_LAN_WLAN_DUALBAND?$.tpLang.s_str.ghz24+" "+e_str[l]+"<br>"+$.tpLang.s_str.ghz5+" "+e_str[c]:$.tpLang.s_str.ghz24+" "+e_str[l])}"close"==I&&($("#wps_button").addClass("disabled"),$("#pinConn").prop("disabled",!0),$("p#page-message").html(d));var P=e.X_TP_PeerPassword;if(0<e.X_TP_PeerPassword?P=e.X_TP_PeerPassword:INCLUDE_LAN_WLAN_DUALBAND&&0<n.X_TP_PeerPassword&&(P=n.X_TP_PeerPassword),0<P){$("#methodTwoClick").click();for(var L="",A=P.toString(),p=A.length+1;p<=8;p++)L+="0";L+=A,$("#clientPinRadio").prop("checked",!0),$("#clientPinInput").prop("value",L)}1==e.enable?E():$("p#page-message").find("a").on("click",function(e){e.preventDefault(),$.goToOtherPage("wirelessAdv.htm","advanced")})}(s,0,a)})}()</script>
