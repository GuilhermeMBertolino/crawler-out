<script language="javascript">function addEthIspAttrs(){var d=$("#ispList").data("value");return-1!=d?($.qd.eth.isp=$.qd.ispArray[d].name,$.qd.eth.vid=$.qd.ispArray[d].X_TP_VID,$.qd.type=$.qd.ispArray[d].connectionType,$.qd.eth.ispIdx=$.qd.ispArray[d].ispIndex,$.qd.dslType=$.qd.currDslType):($.qd.eth.isp="Other",$.qd.eth.ispIdx=-1,$.qd.dslType=$.qd.currDslType,$.qd.eth.vid=-1),null!=$.ewanProfile.iptv[$.qd.country]&&($.qd.eth.iptv=$.ewanProfile.iptv[$.qd.country][d]||void 0),!0}function addIspAttrs(){var d={PPPoE:"ppp",PPPoA:"pppoa","Dynamic IP":"dhcp","Static IP":"staip",IPoA:"ipoa",Bridge:"br"},s=$("#ispList").data("value");return-1!=s?($.qd.dsl.isp=$.qd.ispArray[s][0],-1!=$.qd.ispArray[s][0].search("_VDSL")?($.qd.dslType="vdsl",$.qd.dsl.vid=$.qd.ispArray[s][1],$.qd.type=d[$.qd.ispArray[s][2]],$.qd.dsl.ispIdx=$.qd.ispArray[s][3]):($.qd.dslType="adsl",$.qd.dsl.vpi=$.qd.ispArray[s][1],$.qd.dsl.vci=$.qd.ispArray[s][2],$.qd.type=d[$.qd.ispArray[s][3]],$.qd.dsl.ispIdx=$.qd.ispArray[s][6],$.qd.dsl.vtag=$.qd.ispArray[s][5],-1!=$.qd.ispArray[s][4].search("LLC")?$.qd.dsl.ATM="LLC":-1!=$.qd.ispArray[s][4].search("MUX")&&($.qd.dsl.ATM="VCMUX"))):($.qd.dsl.isp="Other",$.qd.dsl.ispIdx=-1,"Unknown"==$.qd.currDslType?$.qd.dslType=$.qd.dslType?$.qd.dslType:INCLUDE_VDSLWAN?"vdsl":"adsl":$.qd.dslType=$.qd.currDslType,$.qd.dsl.vid=void 0,$.qd.dsl.vpi=void 0,$.qd.dsl.vci=void 0,$.qd.dsl.vtag=void 0),ispList[$.qd.country]&&(ispList[$.qd.country].iptv&&($.qd.dsl.iptv=ispList[$.qd.country].iptv[$.qd.dsl.isp]),INCLUDE_VOIP&&ispList[$.qd.country].voip&&($.qd.dsl.voip=ispList[$.qd.country].voip[$.qd.dsl.isp])),!0}function initIspList(){var d=$.qd.country,s=$("#ispList"),i=0,p="",r="",e="";if("ETH"!=$.qd.sysMode){if(ispList[d]){var t=!0,q=0;if(-1!=$.qd.dsl.ispIdx&&""!=$.qd.dsl.ispName&&ispList[d].internet[$.qd.dsl.ispIdx][0]!=$.qd.dsl.ispName){for(t=!1;ispList[d].internet[q];)t||ispList[d].internet[q][0]!=$.qd.dsl.ispName||($.qd.dsl.ispIdx=q,t=!0),q++;t||($.qd.dsl.ispIdx=-1)}for(i=0;i<ispList[d].internet.length;i++)$.qd.ispArray.push(ispList[d].internet[i]),-1!=$.qd.ispArray[i][0].search("_VDSL")?$.qd.ispArray[i][3]=i:$.qd.ispArray[i][6]=i,i==$.qd.dsl.ispIdx&&(r=$.qd.ispArray[i][0])}for(i=0;i<$.qd.ispArray.length;i++)-1!=$.qd.ispArray[i][0].search("_VDSL")?!INCLUDE_VDSLWAN||"vdsl"!=$.qd.currDslType&&"Unknown"!=$.qd.currDslType||(r==$.qd.ispArray[i][0]?p+="<option value="+i+" selected>"+$.qd.ispArray[i][0]+"</option>":p+="<option value="+i+">"+$.qd.ispArray[i][0]+"</option>"):"adsl"!=$.qd.currDslType&&"Unknown"!=$.qd.currDslType||(e=$.qd.ispArray[i][0],INCLUDE_VDSLWAN||-1==$.qd.ispArray[i][0].search("_ADSL")||(e=$.qd.ispArray[i][0].substring(0,$.qd.ispArray[i][0].search("_ADSL"))),r==$.qd.ispArray[i][0]?p+="<option value="+i+" selected>"+e+"</option>":p+="<option value="+i+">"+e+"</option>");-1==$.qd.dsl.ispIdx?p+="<option value=-1 selected>"+m_str.other+"</option>":p+="<option value=-1>"+m_str.other+"</option>",s.append(p)}else{if(null!=$.ewanProfile.isp[d]){for(index in $.ewanProfile.isp[d])$.ewanProfile.isp[d][index].ispIndex==$.qd.eth.ispIdx&&(r=$.ewanProfile.isp[d][index].ispIndex),$.qd.ispArray.push($.ewanProfile.isp[d][index]);for(r||(r=$.qd.eth.ispIdx||$.qd.ispArray[0].ispIndex),i=0;i<$.qd.ispArray.length;i++)r==$.qd.ispArray[i].ispIndex?p+="<option value="+i+" selected>"+$.qd.ispArray[i].name+"</option>":p+="<option value="+i+">"+$.qd.ispArray[i].name+"</option>";p+="-1"==r?"<option value=-1 selected>"+m_str.other+"</option>":"<option value=-1>"+m_str.other+"</option>"}else p+="<option value=-1 selected>"+m_str.other+"</option>";s.append(p)}}function goNext(){if("ETH"==$.sysMode){if(0==addEthIspAttrs())return}else if(0==addIspAttrs())return;1==$.qd.internetDiag?"ETH"==$.sysMode?loadSubPage("qsEwan.htm"):loadSubPage("qsDsl.htm"):$.qf.next()}</script>
<div id="quicksetup_isp_container">
	<form class="pure-form pure-form-aligned">
		<p id="t_ispNote"></p>
	    <div>
	        <b id="t_ispList">Select Your ISP:</b>
	        <select id="ispList" class="xxl"></select>
	    </div>
	</form>
</div>
<div class="inline-btn-right quicksetup-button-container">
    <div class="inline">
        <button type="submit" class="green T_exit nd" id="exit" onclick="$.qf.exit()">Exit</button>
    </div>
    <div class="inline">
        <button type="submit" class="green T_back nd" id="back" onclick="$.qf.prev()">Back</button>
    </div>
    <div class="inline">
        <button type="submit" class="green T_next" id="next" onclick="goNext()">Next</button>
    </div>
</div>
<script language="javascript">$(document).ready(function(){var i,d,s={};if(INCLUDE_GERMANY_SPEC?($("#back").hide(),$("#exit").show()):($("#back").show(),$("#exit").hide()),!flowSteps[currIndex].__v){if($.qd.dsl={},!$.qd.country)for(var n="Germany",e=0;e<regionCodeInfo.length;e++){if($.qd.dmRegion==regionCodeInfo[e][1]){$.qd.country=regionCodeInfo[e][4],$.qd.regionIndex=e;break}regionCodeInfo[e][4]==n&&($.qd.country=n,$.qd.regionIndex=e)}$.qd.currDslType="Unknown"}if($.qd.ispArray?$.qd.ispArray.length=0:$.qd.ispArray=[],"ETH"==$.qd.sysMode){$.qd.currDslType="eth",$.qd.eth={},localObj=$.act(ACT_GET,LOCAL,null,null);var o=$.exe();return o?void $.alert(o):($.qd.eth.ispIdx=localObj.ewanIspIndex,void $.tpInit(initIspList))}$.qd.dsl.iptv=void 0,localObj=$.act(ACT_GET,LOCAL,null,null),i=$.act(ACT_GL,WAN_COMMON_INTF_CFG,null,null,["WANAccessType"]),INCLUDE_VDSLWAN&&(s=$.act(ACT_GL,WAN_DSL_INTF_CFG,null,null,["LinkEncapsulationUsed","Status"])),$.exe(function(n){if(n)$.alert(n);else{if($.qd.dsl.ispIdx=localObj.ispIndex,$.qd.dsl.ispName=localObj.ispName,!$.qd.isSetCountry)for(var e=0;e<regionCodeInfo.length;e++)if($.qd.country==regionCodeInfo[e][4]){localObj.country!=regionCodeInfo[e][1].substring(0,2)&&($.qd.dsl.ispIdx=0);break}$.each(i,function(){if("DSL"==this.WANAccessType)return d=this.__stack,!1}),INCLUDE_VDSLWAN&&$.each(s,function(){this.__stack==d&&("Up"==this.status?"G.992.3_Annex_K_ATM"==this.linkEncapsulationUsed?$.qd.currDslType="adsl":"G.993.2_Annex_K_PTM"==this.linkEncapsulationUsed&&($.qd.currDslType="vdsl"):$.qd.currDslType="Unknown")}),$.tpInit(initIspList)}})})</script>
