<script>var smsInboxPagelist,smsRecvBoxObj,curPageNumGlobal,param;function doEscapeChar(a){for(var e="",t=0;t<a.length;t++)18==a.charCodeAt(t)?e+="\n":17==a.charCodeAt(t)?e+="\r":e+=a[t];return e}function tablePagesLteSms(a,n,r){var c,o=$(a),d=0,e=n,b=null==arguments[3]?7:arguments[3];if(param=[],o.next(".table-bottom-pages").remove(),!o.find("tr").hasClass("space-tr")&&0!=e){o.bind("repaginate",function(){if(o.find("tbody").empty(),$("#staticAll").prop("checked",!1),$("#staticAll").data("tpCheckbox").refresh(),!(r+n<=(d+=1)*n)){$.act(ACT_SET,LTE_SMS_RECVMSGBOX,null,null,["PageNumber="+d]);var a=new Array,e=0,t="";smsInboxPagelist=$.act(ACT_GL,LTE_SMS_RECVMSGENTRY,null,null,["index","from","content","receivedTime","unread"]),$.exe()||($.each(smsInboxPagelist,function(){t=doEscapeChar(this.content),this.content=t,c=$.resizeStr(t,30),a.push([{text:'<div><input type="checkbox" id="staticCheckbox'+e+'"/><label></label></div>',width:"5%"},{text:1==this.unread?"<span class='table-grid-icon-lte unread-msg-icon-lte' id='msg_"+e+"' onClick='doMsgRead("+e+")'></span>":"<span class='table-grid-icon-lte read-msg-icon-lte' id='msg_"+e+"' onClick='doMsgRead("+e+")'></span>",width:"10%"},{text:""==this.from?" ":this.from,width:"15"},{text:$.htmlEncode(c),width:"35"},{text:this.receivedTime,width:"25%"},{text:"<span class='table-grid-icon edit-modify-icon' onClick='doMsgRead("+e+")'></span><span class='table-grid-icon edit-trash-icon' id='del_"+e+"' onclick='doMsgDel("+e+");'></span>",width:"10%"}]),e++}),$.initTableBody($("#tableSmsInbox"),a)),d-=1;var s=Math.floor((b-1)/2),i=Math.round((b-1)/2);if($("span[id$="+m+"]").show(),p.remove(),h.remove(),b+2<g){if(s+1<d){p.insertAfter($("#1-"+m));for(var l=2;l<Math.min(d-s+1,g-b);l++)$("#"+l+"-"+m).hide()}if(d<g-i-2){h.insertBefore($("#"+g+"-"+m));for(l=Math.max(d+i+2,b+2);l<g;l++)$("#"+l+"-"+m).hide()}}}});for(var t=r,g=Math.ceil(t/e),m=$.randomId("prev"),s=$.randomId("next"),p=$('<span id="left-'+m+'">...</span>'),h=$('<span id="right-'+m+'">...</span>'),i=$("<div class='table-bottom-pages'><span id='"+m+"' class='page'></span></div>"),l=1;l<=g;l++)$("<span id='"+l+"-"+m+"'>"+l+"</span>").on("click",{newPage:l-1},function(a){d=a.data.newPage,curPageNumGlobal=d+1,$(this).hasClass("click-page")||($(this).siblings("span").removeClass("click-page"),$(this).addClass("click-page"),o.trigger("repaginate"),d-1<0?$("#"+m).addClass("gray"):$("#"+m).removeClass("gray"),g<=d+1?$("#"+s).addClass("gray"):$("#"+s).removeClass("gray"))}).appendTo(i);var u=$("<span id='"+s+"' class='page right'></span>");if(i.append(u),i.insertAfter(o),0==g&&($("#"+m).addClass("gray"),$("#"+s).addClass("gray")),$("#"+m).on("click",function(){var a=$(this).siblings("span"),e=Number($(this).siblings("span.click-page").text())-1;curPageNumGlobal=(d=e-1)+1,d<0?curPageNumGlobal=1:(a.removeClass("click-page"),$("#"+e+"-"+m).addClass("click-page"),o.trigger("repaginate"),d-1<0&&$(this).addClass("gray"),$("#"+s).removeClass("gray"))}),$("#"+s).on("click",function(){var a=$(this).siblings("span"),e=Number($(this).siblings("span.click-page").text())+1;curPageNumGlobal=(d=e-1)+1,g<=d?curPageNumGlobal=g:(a.removeClass("click-page"),$("#"+e+"-"+m).addClass("click-page"),o.trigger("repaginate"),g<=d+1&&$(this).addClass("gray"),$("#"+m).removeClass("gray"))}),0==g){var f=new Array;$.initTableBody($("#tableSmsInbox"),f)}$("span#1-"+m).click()}}function doMsgDel(a){$.confirm(c_str.del_choosed,function(){$("#staticCheckbox"+a).parents("tr").first().remove(),$.act(ACT_DEL,LTE_SMS_RECVMSGENTRY,smsInboxPagelist[a].__stack,null),$.exe(function(a){a&&$.reload()}),$.reload()},function(){return})}function doMsgRead(a){$.act(ACT_SET,LTE_SMS_RECVMSGENTRY,smsInboxPagelist[a].__stack,null,["unread=0"]);var e=$.act(ACT_GET,LTE_SMS_RECVMSGBOX,null,null);$.exe()||(param[0]=0,param[1]=curPageNumGlobal,param[2]=a,param[3]=smsInboxPagelist,param[4]=e.totalNumber,$.loadMain("lteSmsReadMsg.htm",param))}function clickSelStaticAll(){for(var a=$("#staticAll").prop("data-checked"),e=0;e<smsInboxPagelist.length;e++){var t=$("#staticCheckbox"+e);t.prop("data-checked")!=a&&(t.prop("checked",a),t.data("tpCheckbox").refresh())}}function delAllMsg(){for(var a=0;a<smsInboxPagelist.length;a++){var e=$("#staticCheckbox"+a);if(e.prop("data-checked")&&(e.parents("tr").first().remove(),$.act(ACT_DEL,LTE_SMS_RECVMSGENTRY,smsInboxPagelist[a].__stack,null),$.exe()))break}$.reload()}function clickStaticDel(){for(var a=0,e=0;e<smsInboxPagelist.length;e++){if($("#staticCheckbox"+e).prop("data-checked")){a=1;break}}a&&$.confirm(c_str.del_choosed,function(){return void setTimeout(delAllMsg,200)},function(){return})}function initSmsInboxTable(){$.act(ACT_SET,LTE_SMS_RECVMSGBOX,null,null,["PageNumber=0"]),$.exe(function(a){}),smsRecvBoxObj=$.act(ACT_GET,LTE_SMS_RECVMSGBOX,null,null,["totalNumber"]),$.exe(function(a){a||tablePagesLteSms($("#tableSmsInbox"),8,smsRecvBoxObj.totalNumber)})}function initTableInbox(){var a=[{text:'<div><input type="checkbox" id="staticAll" onClick="clickSelStaticAll();"/><label></label></div>',width:"5%"},{text:table_str.status,width:"10%"},{text:table_str.phoneNum,width:"15%"},{text:table_str.message,width:"35"},{text:table_str.received,width:"25%"},{text:table_str.modify,width:"10%"}];$.initTableHead($("#tableSmsInbox"),a),$("#tableSmsInbox").tpTable(initSmsInboxTable)}function init(){initTableInbox()}</script>
<h3 id="t_et">Inbox</h3>
<div class="content-container">
    <form class="pure-form pure-form-aligned">
        <div class="table-op">
            <div class="table-btn">
                <span class="refresh-icon" id="staticRefresh"></span>
                <label class="T_refresh">Refresh</label>
                <span class="delete-icon" id="staticDel"></span>
                <label class="T_del">Delete</label>
            </div>
        </div>
        <table id="tableSmsInbox">
            <thead></thead>
            <tbody id="tableSmsInboxBody">
                <tr id="editSmsInbox" class="nd">
                    <td colspan="6">
                        <div id="outboxStaticPage"></div>
                    </td>
                </tr>
            </tbody>
        </table>
    </form>
</div>
<script>$("#staticDel").click(function(c){clickStaticDel()}),$("#staticRefresh").click(function(c){$.reload()}),$.tpInit(init)</script>
