<style>#scheduleRepeatDay .checkbox-label{width:55px}</style>
<h3 id="et">Task Schedule</h3>
<div id="wireless-schedule-24g">
    <div class="content-container">
        <form class="pure-form pure-form-aligned">
            <div class="button-group-container">
                <b class="T_c_en">Enable Wireless Schedule:</b>
                <ul>
                    <li>
                        <button id="enableWirelessScheduleOn" class="fst" value="on">On</button>
                    </li>
                    <li>
                        <button id="enableWirelessScheduleOff" class="lst" value="off">Off</button>
                    </li>
                </ul>
            </div>
        </form>
    </div>
    <div id="schedule-list-container">
        <h3 class="T_c_off">Wireless Off Time</h3>
        <div class="content-container">
            <form class="pure-form pure-form-aligned">
                <div class="table-op">
                    <div class="table-btn">
                        <span class="add-icon" id="addSch"></span>
                        <label class="T_add">Add</label>
                        <span class="delete-icon" id="delSch"></span>
                        <label class="T_del">Delete</label>
                    </div>
                </div>
                <table id="schedulelist">
                    <thead></thead>
                    <tbody id="schedulelistBody">
                        <tr id="editSchedule" class="nd">
                            <td colspan="8">
                                <div>
                                    <b class="T_from m">From:</b>
                                    <select class="l" id="startTime">
                                        <option value="none" class="T_c_plsSel"></option>
                                        <option value="0">00:00</option>
                                        <option value="1">00:30</option>
                                        <option value="2">01:00</option>
                                        <option value="3">01:30</option>
                                        <option value="4">02:00</option>
                                        <option value="5">02:30</option>
                                        <option value="6">03:00</option>
                                        <option value="7">03:30</option>
                                        <option value="8">04:00</option>
                                        <option value="9">04:30</option>
                                        <option value="10">05:00</option>
                                        <option value="11">05:30</option>
                                        <option value="12">06:00</option>
                                        <option value="13">06:30</option>
                                        <option value="14">07:00</option>
                                        <option value="15">07:30</option>
                                        <option value="16">08:00</option>
                                        <option value="17">08:30</option>
                                        <option value="18">09:00</option>
                                        <option value="19">09:30</option>
                                        <option value="20">10:00</option>
                                        <option value="21">10:30</option>
                                        <option value="22">11:00</option>
                                        <option value="23">11:30</option>
                                        <option value="24">12:00</option>
                                        <option value="25">12:30</option>
                                        <option value="26">13:00</option>
                                        <option value="27">13:30</option>
                                        <option value="28">14:00</option>
                                        <option value="29">14:30</option>
                                        <option value="30">15:00</option>
                                        <option value="31">15:30</option>
                                        <option value="32">16:00</option>
                                        <option value="33">16:30</option>
                                        <option value="34">17:00</option>
                                        <option value="35">17:30</option>
                                        <option value="36">18:00</option>
                                        <option value="37">18:30</option>
                                        <option value="38">19:00</option>
                                        <option value="39">19:30</option>
                                        <option value="40">20:00</option>
                                        <option value="41">20:30</option>
                                        <option value="42">21:00</option>
                                        <option value="43">21:30</option>
                                        <option value="44">22:00</option>
                                        <option value="45">22:30</option>
                                        <option value="46">23:00</option>
                                        <option value="47">23:30</option>
                                        <option value="48">24:00</option>
                                    </select>
                                </div>
                                <div>
                                    <b class="T_to m">To:</b>
                                    <select class="l" id="endTime">
                                        <option value="none" class="T_c_plsSel"></option>
                                        <option value="0">00:00</option>
                                        <option value="1">00:30</option>
                                        <option value="2">01:00</option>
                                        <option value="3">01:30</option>
                                        <option value="4">02:00</option>
                                        <option value="5">02:30</option>
                                        <option value="6">03:00</option>
                                        <option value="7">03:30</option>
                                        <option value="8">04:00</option>
                                        <option value="9">04:30</option>
                                        <option value="10">05:00</option>
                                        <option value="11">05:30</option>
                                        <option value="12">06:00</option>
                                        <option value="13">06:30</option>
                                        <option value="14">07:00</option>
                                        <option value="15">07:30</option>
                                        <option value="16">08:00</option>
                                        <option value="17">08:30</option>
                                        <option value="18">09:00</option>
                                        <option value="19">09:30</option>
                                        <option value="20">10:00</option>
                                        <option value="21">10:30</option>
                                        <option value="22">11:00</option>
                                        <option value="23">11:30</option>
                                        <option value="24">12:00</option>
                                        <option value="25">12:30</option>
                                        <option value="26">13:00</option>
                                        <option value="27">13:30</option>
                                        <option value="28">14:00</option>
                                        <option value="29">14:30</option>
                                        <option value="30">15:00</option>
                                        <option value="31">15:30</option>
                                        <option value="32">16:00</option>
                                        <option value="33">16:30</option>
                                        <option value="34">17:00</option>
                                        <option value="35">17:30</option>
                                        <option value="36">18:00</option>
                                        <option value="37">18:30</option>
                                        <option value="38">19:00</option>
                                        <option value="39">19:30</option>
                                        <option value="40">20:00</option>
                                        <option value="41">20:30</option>
                                        <option value="42">21:00</option>
                                        <option value="43">21:30</option>
                                        <option value="44">22:00</option>
                                        <option value="45">22:30</option>
                                        <option value="46">23:00</option>
                                        <option value="47">23:30</option>
                                        <option value="48">24:00</option>
                                    </select>
                                </div>
                                <div id="scheduleRepeat">
                                    <b class="T_c_repeat m">Repeat:</b>
                                    <input type="radio" name="scheduleRepeat" id="repeatEveryday">
                                    <label class="T_c_everyday">Every Day</label>
                                    <input type="radio" name="scheduleRepeat" id="repeatSelected">
                                    <label class="T_c_selectday">Selected Day</label>
                                </div>
                                <div id="scheduleRepeatDay">
                                    <b class="m" id="t_selDay"></b>
                                    <input type="checkbox" id="scheduleSun">
                                    <label class="T_sun">Sun</label>
                                    <input type="checkbox" id="scheduleMon">
                                    <label class="T_mon">Mon</label>
                                    <input type="checkbox" id="scheduleTue">
                                    <label class="T_tues">Tue</label>
                                    <input type="checkbox" id="scheduleWed">
                                    <label class="T_wed">Wed</label>
                                    <input type="checkbox" id="scheduleThu">
                                    <label class="T_thur">Thu</label>
                                    <input type="checkbox" id="scheduleFri">
                                    <label class="T_fri">Fri</label>
                                    <input type="checkbox" id="scheduleSat">
                                    <label class="T_sat">Sat</label>
                                </div>
                                <div class="inline-btn-right">
                                    <button type="submit" class="green T_cancel" id="editCancel">Cancel</button>
                                    <button type="submit" class="green T_save" id="editOk">Save</button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>
        </div>
    </div>
</div>
<script language="javascript">!function(){var s,i,o=0,r={},c=[],_=["sun","mon","tue","wed","thu","fri","sat"],e=[{text:'<div><input type="checkbox" id="checkbox_1" class="table-select-all"/><label></label></div>',width:"5%"},{text:table_str.id,width:"10%"},{text:table_str.wirelessoff,width:"25%"},{text:table_str.repeat,width:"35%"},{text:table_str.modify,width:"25%"}];function a(){for(var e,t=[],a=0;a<r.length;a++)e=n(r[a]),c[a]=e,t.push([{text:'<div><input type="checkbox" id="schedule_item_'+a+'" data-id="'+a+'" data-stack="'+r[a].__stack+'" class="table-select-one" /><label></label></div>',width:"5%"},{text:a+1,width:"10%"},{text:e.timeRange,width:"25%"},{text:e.repeat.text,width:"35%"},{text:"<span class='table-grid-icon edit-modify-icon' data-stack='"+r[a].__stack+"'></span><span class='table-grid-icon edit-trash-icon' data-stack='"+r[a].__stack+"'></span>",width:"25%"}]);$.initTableBody($("#schedulelist"),t)}function n(e){var t,a={},r=-1,n=!0,s=!1,d=0,i=0,o=-1,c=-1;for(t=0;t<_.length;t++){var l=_[t]+"Am",p=_[t]+"Pm",h=parseInt(e[l])+parseInt(e[p])*Math.pow(2,24);-1===r?r=h:-1!==r&&h!==r&&(n=!1)}if(n){if(0===(m=A(e.sunAm,e.sunPm))[0]||0===m[47])for(s=!1,t=0;t<48;t++)-1===o&&1===m[t]?o=t:-1!==o&&0===m[t]&&-1===c&&(c=t);else for(c=o=-1,t=0;t<48;t++)0===d&&1===m[t]?d=1:1===d&&0===m[t]?-(i=1)===c&&(c=t):1===i&&1===m[t]&&(-1===o&&(o=t),47===t&&(s=!0));a.repeat={text:$.tpLang.wirelessSchedule_nstr.c_everyday}}else{for(t in e)if(e.hasOwnProperty(t)&&0!=e[t]&&"__stack"!=t){var u=(v=t.substr(0,3))+"Am",f=v+"Pm";break}var m;if(0===(m=A(e[u],e[f]))[0]&&0===m[47])for(s=!(c=o=-1),t=0;t<48;t++)-1===o&&1===m[t]?o=t:-1!==o&&0===m[t]&&-1===c&&(c=t);else{for(r=-1,t=0;t<_.length;t++){l=_[t]+"Am",p=_[t]+"Pm",h=parseInt(e[l])+parseInt(e[p])*Math.pow(2,24);if(-1===r&&0!==h)r=h;else if(-1!==r&&0!==h&&h!==r){s=!0;break}}if(s){for(t in e)if(e.hasOwnProperty(t)&&0!=e[t]&&"__stack"!=t){var v;f=(v=t.substr(0,3))+"Pm";if(1===(m=A(e[u=v+"Am"],e[f]))[i=d=0])for(c=-1,t=0;t<48;t++)0===i&&0===m[t]&&-(i=1)===c&&(c=t);else if(1===m[47])for(o=-1,t=0;t<48;t++)0===d&&1===m[t]&&-(d=1)===o&&(o=t)}}else for(c=o=-1,t=0;t<48;t++)-1===o&&1===m[t]?o=t:-1!==o&&0===m[t]&&-1===c&&(c=t)}a.repeat=function(e,t){var a={sun:s_str.sun,mon:s_str.mon,tue:s_str.tues,wed:s_str.wed,thu:s_str.thur,fri:s_str.fri,sat:s_str.sat},r=-1,n=0,s={};if(t)for(var d=0;d<_.length;d++){var i=_[d]+"Am",o=_[d]+"Pm",c=A(e[i],e[o]);1!==c[47]||s.hasOwnProperty(_[d])||(s[_[d]]=a[_[d]])}else for(var d=0;d<_.length;d++){var i=_[d]+"Am",o=_[d]+"Pm",l=parseInt(e[i]),p=parseInt(e[o]),n=l+p*Math.pow(2,24);-1===r&&0!==n?(r=n,s[_[d]]=a[_[d]]):-1!==r&&0!==n&&n===r&&(t=!0,s.hasOwnProperty(_[d])||(s[_[d]]=a[_[d]]))}var h=[];for(var d in s)h.push(s[d]);return{selected:s,text:h.join(" ")}}(e,s)}return-1!==o&&-1!==c||(o=-1===o?0:o,c=-1===c?0:c),a.start=o,0==(a.end=c)&&(c=a.end=48),a.everyday=n,a.timeRange=k(o)+"-"+k(c),a}function A(e,t){for(var a=[],r=0;r<24;r++)parseInt(e)&Math.pow(2,r)?a[r]=1:a[r]=0,parseInt(t)&Math.pow(2,r)?a[r+24]=1:a[r+24]=0;return a}function k(e){return e%2==1?Math.floor(e/2)+":30":e/2+":00"}function t(){idIndex=[];var e=$.act(ACT_GS,LAN_WLAN_TASK_SCHEDULE,null,"1,1,0,0,0,0");if(!$.exe()){var t=e[0];s=t.__stack,1==t.enable?($("#schedule-list-container").removeClass("nd"),$("#enableWirelessScheduleOn").addClass("selected")):($("#schedule-list-container").addClass("nd"),$("#enableWirelessScheduleOff").addClass("selected")),r=$.act(ACT_GS,"LAN_WLAN_SCHEDULEITEM",null,s),$.exe()||$("#schedulelist").tpTable(a)}}$.initTableHead($("#schedulelist"),e),$.tpInit(t),$("#repeatEveryday").on("click",function(){$("#repeatEveryday").prop("checked")&&$("#scheduleRepeatDay").addClass("nd")}),$("#repeatSelected").on("click",function(){$("#repeatSelected").prop("checked")&&$("#scheduleRepeatDay").removeClass("nd")}),$("#editCancel").on("click",function(){$.hideEditArea($("#schedulelist")),$("#startTime").find("option:first").prop("selected",!0),$("#endTime").find("option:first").prop("selected",!0),$("#startTime").tpSelect({refresh:1}),$("#endTime").tpSelect({refresh:1}),$("#repeatEveryday").prop("checked",!0).tpRadio(),$("#repeatSelected").prop("checked",!1).tpRadio(),$("#scheduleSun").prop("checked",!1).tpCheckbox(),$("#scheduleMon").prop("checked",!1).tpCheckbox(),$("#scheduleTue").prop("checked",!1).tpCheckbox(),$("#scheduleWed").prop("checked",!1).tpCheckbox(),$("#scheduleThu").prop("checked",!1).tpCheckbox(),$("#scheduleFri").prop("checked",!1).tpCheckbox(),$("#scheduleSat").prop("checked",!1).tpCheckbox()}),$("#schedulelist").on("click","span.edit-modify-icon",function(){o=1,i=$(this).attr("data-stack");var e=$(this).parent().parent().find("input:checkbox").attr("data-id"),t=c[e].start,a=c[e].end,r=c[e].everyday,n=c[e].repeat.selected;if($("#startTime").find("option[value="+t+"]").prop("selected",!0),$("#endTime").find("option[value="+a+"]").prop("selected",!0),$("#repeatEveryday").prop("checked",r).tpRadio(),$("#repeatSelected").prop("checked",!r).tpRadio(),!r)for(var s in n){var d="schedule"+s.toUpperCase().substr(0,1)+s.substr(1,2);$("#"+d).prop("checked",!0).tpCheckbox()}$("#startTime").tpSelect({refresh:1}),$("#endTime").tpSelect({refresh:1})}).on("click","span.edit-trash-icon",function(){$.addLoading();var e=$(this).attr("data-stack");$.act(ACT_DEL,"LAN_WLAN_SCHEDULEITEM",e,null,null),$.exe(function(e){$.removeLoading(),t()})}),$("#addSch").on("click",function(){4<=r.length?($.alert(CMM_REACH_MAX_INSTANCE_NUM),$.hideEditArea($("#schedulelist"))):o=0}),$("#delSch").on("click",function(){$.addLoading();for(var e=0;e<r.length;e++)$("#schedule_item_"+e).prop("checked")&&$.act(ACT_DEL,"LAN_WLAN_SCHEDULEITEM",$("#schedule_item_"+e).attr("data-stack"),null,null);$.exe(function(e){$.removeLoading(),t()})}),$("#editOk").on("click",function(){!function(e){var t={};{if(parseInt($("#endTime").data("value"))<=parseInt($("#startTime").data("value")))return $.alert(ERR_WLAN_WIRELESS_SCHEDULE_INVALID);if(t.start=$("#startTime").data("value"),t.end=$("#endTime").data("value"),t.everyday=$("#repeatEveryday").prop("checked"),t.repeat={},"none"==t.end||"none"==t.start)return $.alert($.tpLang.wirelessSchedule_nstr.c_plsSetOffTime)}for(var a=0;a<_.length;a++){var r="#schedule"+_[a].substr(0,1).toUpperCase()+_[a].substr(1);$(r).prop("checked")?t.repeat[_[a]]=!0:t.repeat[_[a]]=!1}var n=function(e){var t,a,r=parseInt(e.start),n=parseInt(e.end),s={sunAm:0,sunPm:0,monAm:0,monPm:0,tueAm:0,tuePm:0,wedAm:0,wedPm:0,thuAm:0,thuPm:0,friAm:0,friPm:0,satAm:0,satPm:0},d=!1;for(t in e.repeat)e.repeat.hasOwnProperty(t)&&e.repeat[t]&&(d=!0);if(!e.everyday&&!d)return!1;var i=n-r;if(0===i){for(a=Math.pow(2,24)-1,t=0;t<_.length;t++)e.everyday?(s[_[t]+"Am"]=a,s[_[t]+"Pm"]=a):e.repeat[_[t]]&&(s[_[t]+"Am"]=a,s[_[t]+"Pm"]=a);return s}if(0<i){if(23<r)for(a=Math.pow(2,n-24)-1-(Math.pow(2,r-24)-1),t=0;t<_.length;t++)e.everyday?s[_[t]+"Pm"]=a:e.repeat[_[t]]&&(s[_[t]+"Pm"]=a);else if(n<25)for(a=Math.pow(2,n)-1-(Math.pow(2,r)-1),t=0;t<_.length;t++)e.everyday?s[_[t]+"Am"]=a:e.repeat[_[t]]&&(s[_[t]+"Am"]=a);else{var o=Math.pow(2,24)-1-(Math.pow(2,r)-1),c=Math.pow(2,n-24)-1-(Math.pow(2,0)-1);for(t=0;t<_.length;t++)e.everyday?(s[_[t]+"Am"]=o,s[_[t]+"Pm"]=c):e.repeat[_[t]]&&(s[_[t]+"Am"]=o,s[_[t]+"Pm"]=c)}return s}if(i<0){if(r<24){var l=Math.pow(2,24)-1-(Math.pow(2,r)-1),c=Math.pow(2,24)-1,p=Math.pow(2,n)-1;for(t=0;t<_.length;t++)e.everyday?(s[_[t]+"Am"]+=l,s[_[t]+"Pm"]=c,s[_[(t+1)%7]+"Am"]+=p):e.repeat[_[t]]&&(s[_[t]+"Am"]+=l,s[_[t]+"Pm"]=c,s[_[(t+1)%7]+"Am"]+=p)}else if(24<n){var h=Math.pow(2,24)-1-(Math.pow(2,r-24)-1),o=Math.pow(2,24)-1,u=Math.pow(2,n-24)-1;for(t=0;t<_.length;t++)e.everyday?(s[_[t]+"Pm"]+=h,s[_[(t+1)%7]+"Am"]=o,s[_[(t+1)%7]+"Pm"]+=u):e.repeat[_[t]]&&(s[_[t]+"Pm"]+=h,s[_[(t+1)%7]+"Am"]=o,s[_[(t+1)%7]+"Pm"]+=u)}else{var c=Math.pow(2,24)-1-(Math.pow(2,r-24)-1),o=Math.pow(2,n)-1;for(t=0;t<_.length;t++)e.everyday?(s[_[t]+"Pm"]+=c,s[_[(t+1)%7]+"Am"]=o):e.repeat[_[t]]&&(s[_[t]+"Pm"]+=c,s[_[(t+1)%7]+"Am"]=o)}return s}return!1}(t);n&&($.addLoading(),1===e?$.act(ACT_SET,"LAN_WLAN_SCHEDULEITEM",i,null,n):0===e&&$.act(ACT_ADD,"LAN_WLAN_SCHEDULEITEM",null,s,n),$.exe(function(e){$.removeLoading(),e||$.reload()}))}(o)}),$("#repeatEveryday").prop("checked",!0).tpRadio(),$("#repeatSelected").prop("checked",!1).tpRadio(),$("#enableWirelessScheduleOn").on("click",function(){$.addLoading($(this)),$.exe(),$.act(ACT_SET,LAN_WLAN_TASK_SCHEDULE,s,null,["enable=1","isUsrCtrl=0"]),$.exe(function(e){$.removeLoading(),e||($.removeLoading(),t(),$("#schedule-list-container").removeClass("nd"))})}),$("#enableWirelessScheduleOff").on("click",function(){$.addLoading($(this)),$.act(ACT_SET,LAN_WLAN_TASK_SCHEDULE,s,null,["enable=0","isUsrCtrl=0"]),$.exe(function(e){$.removeLoading(),e||($.removeLoading(),t(),$("#schedule-list-container").addClass("nd"))})})}()</script>
