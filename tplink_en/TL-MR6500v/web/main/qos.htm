<script language="javascript">var upQosEntry,downQosEntry;function init(){var e=$.act(ACT_GL,QOS_INTF,null,null);$.exe()||(upQosEntry=e[0],downQosEntry=e[1],$("#qos_up_en").prop("checked",1==upQosEntry.interfaceEnable),$("#up_bandwidth").val(0==upQosEntry.totalBandwidth?"":upQosEntry.totalBandwidth),1==upQosEntry.schedulerAlgorithm?($("#up_car").prop("checked",!0),$("#up_dscp_en").prop("checked",!1),$("#up_8021p_en").prop("checked",!1),$("#up_mark").addClass("nd")):2==upQosEntry.schedulerAlgorithm?($("#up_sp").prop("checked",!0),$("#up_dscp_en").prop("checked",1==upQosEntry.dscpMarkEnable),$("#up_8021p_en").prop("checked",1==upQosEntry.ethernetPriorityMarkEnable),$("#up_mark").removeClass("nd")):3==upQosEntry.schedulerAlgorithm&&($("#up_wrr").prop("checked",!0),$("#up_dscp_en").prop("checked",1==upQosEntry.dscpMarkEnable),$("#up_8021p_en").prop("checked",1==upQosEntry.ethernetPriorityMarkEnable),$("#up_mark").removeClass("nd")),$("#qos_down_en").prop("checked",1==downQosEntry.interfaceEnable),$("#down_bandwidth").val(0==downQosEntry.totalBandwidth?"":downQosEntry.totalBandwidth),1==downQosEntry.schedulerAlgorithm?($("#down_car").prop("checked",!0),$("#down_dscp_en").prop("checked",!1),$("#down_8021p_en").prop("checked",!1),$("#down_mark").addClass("nd")):2==downQosEntry.schedulerAlgorithm?($("#down_sp").prop("checked",!0),$("#down_dscp_en").prop("checked",1==downQosEntry.dscpMarkEnable),$("#down_8021p_en").prop("checked",1==downQosEntry.ethernetPriorityMarkEnable),$("#down_mark").removeClass("nd")):3==downQosEntry.schedulerAlgorithm&&($("#down_wrr").prop("checked",!0),$("#down_dscp_en").prop("checked",1==downQosEntry.dscpMarkEnable),$("#down_8021p_en").prop("checked",1==downQosEntry.ethernetPriorityMarkEnable),$("#down_mark").removeClass("nd")))}function selectObj(e){var n=$("#"+e);n&&(n.focus(),n.select())}function doSave(){if(""==$("#up_bandwidth").val()||!$.isnum($("#up_bandwidth").val())||0==parseInt($("#up_bandwidth").val(),10))return $.alert(ERR_QOS_TOTALBW_INVAD),selectObj("up_bandwidth"),!1;if(""==$("#down_bandwidth").val()||!$.isnum($("#down_bandwidth").val())||0==parseInt($("#down_bandwidth").val(),10))return $.alert(ERR_QOS_TOTALBW_INVAD),selectObj("down_bandwidth"),!1;var o,p;$("#up_sp").prop("checked")?o=2:$("#up_wrr").prop("checked")?o=3:$("#up_car").prop("checked")&&(o=1),$("#down_sp").prop("checked")?p=2:$("#down_wrr").prop("checked")?p=3:$("#down_car").prop("checked")&&(p=1);var e=function(){var e=1==$("#qos_up_en").prop("data-checked")?1:0,n=""==$("#up_bandwidth").val()?0:parseInt($("#up_bandwidth").val(),10),d=1==$("#up_dscp_en").prop("data-checked")?1:0,r=1==$("#up_8021p_en").prop("data-checked")?1:0;$.act(ACT_SET,QOS_INTF,upQosEntry.__stack,null,["interfaceEnable="+e,"schedulerAlgorithm="+o,"linkType=0","totalBandwidth="+n,"dscpMarkEnable="+d,"ethernetPriorityMarkEnable="+r]),e=1==$("#qos_down_en").prop("data-checked")?1:0,n=""==$("#down_bandwidth").val()?0:parseInt($("#down_bandwidth").val(),10),d=1==$("#down_dscp_en").prop("data-checked")?1:0,r=1==$("#down_8021p_en").prop("data-checked")?1:0,$.act(ACT_SET,QOS_INTF,downQosEntry.__stack,null,["interfaceEnable="+e,"schedulerAlgorithm="+p,"linkType=0","totalBandwidth="+n,"dscpMarkEnable="+d,"ethernetPriorityMarkEnable="+r]),$.exe(function(e){e||($.removeLoading(),$.reload())})};upQosEntry.schedulerAlgorithm!=o||downQosEntry.schedulerAlgorithm!=p?$.confirm(c_str.qos_chg_alg,e):e()}function doClick(e){1==e||2==e?$("#up_mark").removeClass("nd"):3==e?$("#up_mark").addClass("nd"):4==e||5==e?$("#down_mark").removeClass("nd"):6==e&&$("#down_mark").addClass("nd")}$("#editOK").on("click",function(){$.addLoading($(this)),doSave()})</script>
<div class="content-container">
    <form class="pure-form pure-form-aligned">
    	<div> <h3 id="et_up">QoS of UpStream</h3> </div>
        <div id="qosUpEnableBox">
            <b class="xxl" id="t_up_en">Upstream:</b>
            <input type="checkbox" id="qos_up_en">
            <label class="T_enable">Enable</label>
        </div>
        <div id="qosUpCont">
            <div>
                <b class="xxl" id="t_type">Scheduler Algorithm:</b>
                <input type="radio" id="up_sp" name="up_alg" onclick="doClick(1)">
                <label>SP</label>
                <input type="radio" id="up_wrr" name="up_alg" onclick="doClick(2)">
                <label>WRR</label>
                <input type="radio" id="up_car" name="up_alg" onclick="doClick(3)">
                <label>Traffic Control</label>
            </div>
            <div>
                <b class="xxl" id="t_tup">Tatal Bandwidth:</b>
                <input type="text" id="up_bandwidth" maxlength="7">
                <span class="T_kbps">Kbps</span>
            </div>
            <div id="up_mark" class="nd">
	            <div>
	                <b class="xxl" id="t_dscp">DSCP Mark:</b>
	                <input type="checkbox" id="up_dscp_en">
	                <label class="T_enable">Enable</label>
	            </div>
	            <div id="up_8021p_mark" class="nd">
	                <b class="xxl" id="t_8021p">802.1P Mark:</b>
	                <input type="checkbox" id="up_8021p_en">
	                <label class="T_enable">Enable</label>
	            </div>
            </div>
        </div>
        <div> <h3 id="et_down">QoS of DownStream</h3> </div>
        <div id="qosDownEnableBox">
            <b class="xxl" id="t_down_en">Downstream:</b>
            <input type="checkbox" id="qos_down_en">
            <label class="T_enable">Enable</label>
        </div>
        <div id="qosDownCont">
            <div>
                <b class="xxl" id="t_type">Scheduler Algorithm:</b>
                <input type="radio" id="down_sp" name="down_alg" onclick="doClick(4)">
                <label>SP</label>
                <input type="radio" id="down_wrr" name="down_alg" onclick="doClick(5)">
                <label>WRR</label>
                <input type="radio" id="down_car" name="down_alg" onclick="doClick(6)">
                <label>Traffic Control</label>
            </div>
            <div>
                <b class="xxl" id="t_tup">Tatal Bandwidth:</b>
                <input type="text" id="down_bandwidth" maxlength="7">
                <span class="T_kbps">Kbps</span>
            </div>
            <div id="down_mark" class="nd">
	            <div>
	                <b class="xxl" id="t_dscp">DSCP Mark:</b>
	                <input type="checkbox" id="down_dscp_en">
	                <label class="T_enable">Enable</label>
	            </div>
	            <div id="down_8021p_mark" class="nd">
	                <b class="xxl" id="t_8021p">802.1P Mark:</b>
	                <input type="checkbox" id="down_8021p_en">
	                <label class="T_enable">Enable</label>
	            </div>
            </div>
        </div>
        <div id="saveBtn">
            <p class="br"></p>
            <div class="btn-right">
                <button type="submit" class="green T_save" id="editOK">Save</button>
            </div>
        </div>
    </form>
</div>
<script language="javascript">$.tpInit(init),$("#up_8021p_mark").removeClass("nd"),$("#down_8021p_mark").removeClass("nd")</script>
