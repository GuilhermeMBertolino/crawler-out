<script language="javascript"></script>
<h3 id="et1">Internet Connection Setup</h3>
<div id="dslIsp">
    <div class="content-container">
        <form class="pure-form pure-form-aligned">
            <b id="t_ispList">ISP List:</b>
            <select id="isp" class="xxl"></select>
            <div id="dslMode" class="nd">
                <b class="T T_dslmode">DSL Modulation Type:</b>
                <input type="radio" name="radio_name_dslMode" id="vdslRadio">
                <label>VDSL</label>
                <input type="radio" name="radio_name_dslMode" id="adslRadio">
                <label>ADSL</label>
            </div>
            <div id="vdslLogicInf" class="nd">
                <div><b class="T_vlan">VLAN ID:</b>
                    <input type="checkbox" id="vidEn">
                    <label class="T_enable">Enable VLAN ID</label>
                </div>
                <div id="vid_div" class="nd"><b class="T_vlanrange">VLAN ID (1-4094):</b>
                    <input type="text" class="xl" maxlength="4" id="vid" value="7">
                </div>
                <p class="T_c_vlanidInfo">Note: VLAN ID cannot be disabled when Ethernet Connection is enabled.</p>
            </div>
            <div id="adslLogicInf" class="nd">
                <p id="t_adslVlanNote" class="nd">If you use Telekom BNG line, please enable VLAN.</p>
                <div><b class="T_vpi">VPI :</b>
                    <input type="text" class="xl" maxlength="3" id="vpi">
                    <span>(0-255)</span>
                </div>
                <div><b class="T_vci">VCI :</b>
                    <input type="text" class="xl" maxlength="5" id="vci">
                    <span>(1-65535)</span>
                </div>
                <div id="dsl_vlan_add" class="nd">
                    <div><b class="T_vlan">VLAN ID:</b>
                        <input type="checkbox" id="vlanEn_add">
                        <label class="T_enable">Enable VLAN ID</label>
                    </div>
                    <div id="vlan_div_add" class="nd"><b class="T_vlanrange">VLAN ID (1-4094):</b>
                        <input type="text" id="vlanid_add" class="xl" maxlength="4" value="7">
                    </div>
                    <p class="T_c_vlanidInfo">Note: VLAN ID cannot be disabled when Ethernet Connection is enabled.</p>
                </div>
            </div>
        </form>
    </div>
</div>
<div class="content-container">
    <form class="pure-form pure-form-aligned">
        <div id="div_detectStatus" class="pure-control-group nd">
            <b id="t_netstatus">Internet Status:</b>
            <input type="text" readonly="ture" class="tp-input-text l" style="padding-left:0" id="internetStatus">
        </div>
        <b class="T_conntype">Internet Connection Type:</b>
        <select id="linkType" class="xl"></select>
        <div id="PPPoEBasic" class="nd">
            <div><b class="T_pppusr">Username:</b>
                <input type="text" class="xl" id="usrPPPoE" maxlength="255">
            </div>
            <div><b class="T_ppppwd">Password:</b>
                <input type="password" class="xl" id="pwdPPPoE" maxlength="255">
            </div>
        </div>
        <div id="PPPoABasic" class="nd">
            <div><b class="T_pppusr">Username:</b>
                <input type="text" class="xl" id="usrPPPoA" maxlength="255">
            </div>
            <div><b class="T_ppppwd">Password:</b>
                <input type="password" class="xl" id="pwdPPPoA" maxlength="255">
            </div>
        </div>
        <div id="DynamicIpBasic" class="nd">
            <div id="mer_div" class="nd">
                <div>
                    <b class="T_username">User Name:</b>
                    <input type="text" class="xl" id="mer_username" maxlength="31">
                </div>
                <div>
                    <b class="T_passwd">Password:</b>
                    <input type="password" class="xl" id="mer_password" maxlength="31">
                </div>
            </div>
        </div>
        <div id="StaticIpBasic" class="nd">
            <div><b class="T_ipaddr">IP Address:</b>
                <input type="text" class="xl ip-address" id="ipStaticIp">
            </div>
            <div><b class="T_netmask">Subnet Mask:</b>
                <input type="text" class="xl ip-address" id="maskStaticIp">
            </div>
            <div><b class="T_defgw">Default Gateway:</b>
                <input type="text" class="xl ip-address" id="gwStaticIp">
            </div>
            <div><b class="T_dns">Primary DNS:</b>
                <input type="text" class="xl ip-address" id="priDnsStaticIp">
            </div>
            <div><b class="T_secdns">Secondary DNS:</b>
                <input type="text" class="xl ip-address" id="secDnsStaticIp">
                <span class="T_optional">(Optional)</span>
            </div>
        </div>
        <div id="IPoABasic" class="nd">
            <div><b class="T_ipaddr">IP Address:</b>
                <input type="text" class="xl ip-address" id="ipIPoA">
            </div>
            <div><b class="T_netmask">Subnet Mask:</b>
                <input type="text" class="xl ip-address" id="maskIPoA">
            </div>
            <div><b class="T_defgw">Default Gateway:</b>
                <input type="text" class="xl ip-address" id="gwIPoA">
            </div>
            <div><b class="T_dns">Primary DNS:</b>
                <input type="text" class="xl ip-address" id="priDnsIPoA">
            </div>
            <div><b class="T_secdns">Secondary DNS:</b>
                <input type="text" class="xl ip-address" id="secDnsIPoA">
                <span class="T_optional">(Optional)</span>
            </div>
        </div>
        <div id="PptpBasic" class="nd">
            <div><b class="T_username">Username:</b>
                <input type="text" class="xl" id="usrPptp" size="15" maxlength="255">
            </div>
            <div><b class="T_passwd">Password:</b>
                <input type="password" class="xl" id="pwdPptp" size="15" maxlength="255">
            </div>
            <div>
                <b class="T_addrMode">DNS Address Mode:</b>
                <input type="radio" name="dnsModePptp" id="dnsModeDynPptp" checked="checked">
                <label class="T_dynip">Dynamic IP</label>
                <input type="radio" name="dnsModePptp" id="dnsModeStaPptp">
                <label class="T_staip">Static IP</label>
            </div>
            <div>
                <b class="T_srvIpName">Server IP Address/Name:</b>
                <input type="text" class="xl" id="serverIpOrNamePptp">
            </div>
            <div id="dnsModeParamStaPptp" style="display:none">
                <div><b class="T_ipaddr">IP Address:</b>
                    <input type="text" class="xl ip-address" id="ipPptp">
                </div>
                <div><b class="T_netmask">Subnet Mask:</b>
                    <input type="text" class="xl ip-address" id="maskPptp">
                </div>
                <div><b class="T_gateway">Default Gateway:</b>
                    <input type="text" class="xl ip-address" id="gwPptp">
                </div>
                <div><b class="T_dns">Primary DNS:</b>
                    <input type="text" class="xl ip-address" id="priDnsPptp">
                </div>
                <div><b class="T_secdns">Secondary DNS:</b>
                    <input type="text" class="xl ip-address" id="secDnsPptp">
                    <span class="T_optional">(Optional)</span>
                </div>
            </div>
        </div>
        <div id="L2tpBasic" class="nd">
            <div><b class="T_username">Username:</b>
                <input type="text" class="xl" id="usrL2tp" size="15" maxlength="255">
            </div>
            <div><b class="T_passwd">Password:</b>
                <input type="password" class="xl" id="pwdL2tp" size="15" maxlength="255">
            </div>
            <div>
                <b class="T_addrMode">DNS Address Mode:</b>
                <input type="radio" name="dnsModeL2tp" id="dnsModeDynL2tp" checked="checked">
                <label class="T_dynip">Dynamic IP</label>
                <input type="radio" name="dnsModeL2tp" id="dnsModeStaL2tp">
                <label class="T_staip">Static IP</label>
            </div>
            <div>
                <b class="T_srvIpName">Server IP Address/Name:</b>
                <input type="text" class="xl" id="serverIpOrNameL2tp">
            </div>
            <div id="dnsModeParamStaL2tp" style="display:none">
                <div><b class="T_ipaddr">IP Address:</b>
                    <input type="text" class="xl ip-address" id="ipL2tp">
                </div>
                <div><b class="T_netmask">Subnet Mask:</b>
                    <input type="text" class="xl ip-address" id="maskL2tp">
                </div>
                <div><b class="T_gateway">Default Gateway:</b>
                    <input type="text" class="xl ip-address" id="gwL2tp">
                </div>
                <div><b class="T_dns">Primary DNS:</b>
                    <input type="text" class="xl ip-address" id="priDnsL2tp">
                </div>
                <div><b class="T_secdns">Secondary DNS:</b>
                    <input type="text" class="xl ip-address" id="secDnsL2tp">
                    <span class="T_optional">(Optional)</span>
                </div>
            </div>
        </div>
        <button type="submit" class="green T_save" id="saveBtn">Save</button>
    </form>
</div>
<script language="javascript">!function(){var _,t={ADSL:"<option value='PPPoE' text='"+s_str.pppoe+"'>"+s_str.pppoe+"</option><option value='PPPoA' text='"+s_str.pppoa+"'>"+s_str.pppoa+"</option><option value='DynamicIp' text='"+s_str.dynip+"'>"+s_str.dynip+"</option><option value='StaticIp' text='"+s_str.staip+"'>"+s_str.staip+"</option><option value='IPoA' text='"+s_str.ipoa+"'>"+s_str.ipoa+"</option>",VDSL:"<option value='PPPoE' text='"+s_str.pppoe+"'>"+s_str.pppoe+"</option><option value='DynamicIp' text='"+s_str.dynip+"'>"+s_str.dynip+"</option><option value='StaticIp' text='"+s_str.staip+"'>"+s_str.staip+"</option>",ETH:"<option value='PPPoE' text='"+s_str.pppoe+"'>"+s_str.pppoe+"</option><option value='DynamicIp' text='"+s_str.dynip+"'>"+s_str.dynip+"</option><option value='StaticIp' text='"+s_str.staip+"'>"+s_str.staip+"</option>"};function p(e,s){"DSL"==e&&(e="PTM"==W?"VDSL":"ADSL"),INCLUDE_WAN_VLAN&&"ADSL"==e&&"PPPoA"!=s&&"IPoA"!=s&&$("#dsl_vlan_add").removeClass("nd"),$("#linkType").empty().append(t[e]),"ETH"==e&&(INCLUDE_PPTP&&$("#linkType").append("<option value='Pptp'>PPTP</option>"),INCLUDE_L2TP&&$("#linkType").append("<option value='L2tp'>L2TP</option>")),null!=s&&$("#linkType option[value='"+s+"']").prop("selected","selected"),$("#linkType").data("tpSelect")?$("#linkType").tpSelect({refresh:1}):$("#linkType").tpSelect({refresh:0})}function d(e){INCLUDE_WAN_VLAN&&"Telekom(Privat)_ADSL"==$("#isp").data("value")&&$("#t_adslVlanNote").removeClass("nd"),$("#isp").data("value")==m_str.other&&S&&S.wan&&(V&&V.name?INCLUDE_VDSLWAN&&1==T?($("#vdslRadio").prop("checked",!0),$("#vdslLogicInf").removeClass("nd"),$("#adslLogicInf").addClass("nd"),$("#vidEn").prop("checked",!(parseInt(S.vid,10)<=0)),$("#vidEn").tpCheckbox(),$("#vid").val(0==S.vid?"0":S.vid),l()):($("#adslRadio").prop("checked",!0),$("#adslLogicInf").removeClass("nd"),$("#vdslLogicInf").addClass("nd"),$("#vpi").val(S.vpi),$("#vci").val(S.vci)):"PTM"==W?($("#vdslRadio").prop("checked",!0),$("#vdslLogicInf").removeClass("nd"),$("#adslLogicInf").addClass("nd")):($("#adslRadio").prop("checked",!0),$("#adslLogicInf").removeClass("nd"),$("#vdslLogicInf").addClass("nd"))),INCLUDE_WAN_VLAN&&"ATM"==W&&(1==e.X_TP_8021QEnabled?($("#vlanEn_add").prop("checked",!0),$("#vlan_div_add").removeClass("nd"),$("#vlanid_add").val(e.X_TP_VlanID)):($("#vlanEn_add").prop("checked",!1),$("#vlanid_add").addClass("nd")));var s=e.linkType;switch(s){case"PPPoE":case"PPPoA":$("#usr"+s).val(e.usr),$("#pwd"+s).val(e.pwd);break;case"StaticIp":case"IPoA":$("#ip"+s).tpAddress("val",e.ip),$("#mask"+s).tpAddress("val",e.mask),$("#gw"+s).tpAddress("val",e.gw),$("#priDns"+s).tpAddress("val",e.dns),$("#secDns"+s).tpAddress("val",e.dns2?e.dns2:"0.0.0.0");break;case"Pptp":case"L2tp":$("#usr"+s).val(e.usr),$("#pwd"+s).val(e.pwd),$("#serverIpOrName"+s).val(e.srvAddrName),"DHCP"==e.addressingType?($("#dnsModeDyn"+s).prop("checked",!0),$("#dnsModeParamSta"+s).hide()):($("#dnsModeSta"+s).prop("checked",!0),$("#dnsModeParamSta"+s).show(),$("#ip"+s).tpAddress("val",e.ip),$("#mask"+s).tpAddress("val",e.mask),$("#gw"+s).tpAddress("val",e.gw),$("#priDns"+s).tpAddress("val",e.dns),$("#secDns"+s).tpAddress("val",e.dns2?e.dns2:"0.0.0.0"));break;case"DynamicIp":INCLUDE_MER&&r()&&($("#mer_username").val(e.merUsername),$("#mer_password").val(e.merPassword))}}function l(){$("#vidEn").prop("data-checked")?$("#vid_div").show():$("#vid_div").hide()}$("#vidEn").click(function(){l()}),$("#linkType").click(function(){var e,s;INCLUDE_WAN_VLAN&&"IPoA"!=$("#linkType").data("value")&&"PPPoA"!=$("#linkType").data("value")?$("#dsl_vlan_add").removeClass("nd"):$("#dsl_vlan_add").addClass("nd"),e=$("#linkType").data("value"),s=null==e?"PPPoE":e,$("#linkType option[value='"+s+"']").prop("selected","selected"),$("div[id$='Basic']").hide(),INCLUDE_MER&&P(),$("#"+s+"Basic").show()}),$("input[id^='dnsMode']").click(function(){var e=-1!=$(this).attr("id").search("Pptp")?"Pptp":"L2tp";-1!=$(this).attr("id").search("dnsModeDyn")?$("#dnsModeParamSta"+e).hide():$("#dnsModeParamSta"+e).show()});var L=function(e){if(INCLUDE_IPTV_V2){var s,t=$("#isp").data("value");if((t!=I||e)&&ispList[f]&&ispList[f].iptv&&ispList[f].iptv[t]){var a=ispList[f].iptv[t],n=null;"Bridge"==(n="vdsl"==a.dslType?{iptvVLANID:a.vid,iptvVLANEnabled:0<a.vid?"1":"0",iptvVLANPriority:a.priority||"0",connectionType:a.connType,iptvLinkType:"1",enable:"1",ispIndex:"1"}:{iptvLinkType:"0",IptvVPI:a.vpi,IptvVCI:a.vci,connectionType:a.connType,enable:"1",ispIndex:"1"}).connectionType&&(s=$.act(ACT_GET,DSL_IPTV_CFG,null,null,null),$.exe()),"Bridge"==n.connectionType&&"Bridge"!=s.connectionType&&(n={ispIndex:"0"}),$.act(ACT_SET,DSL_IPTV_CFG,null,null,n),$.exe()||(I=t)}}};function e(){var s,e=$("#linkType").data("value");if("DSL"==o&&0==(s=!0,INCLUDE_VDSLWAN&&"ATM"!=W?(1==$("#vidEn").prop("data-checked")&&$.num($("#vid").val(),[1,4094],!0)&&($.alert(ERR_WAN_VLAN_ID_INVALID),$("#vid").focus().select(),s=!1),$.each(y,function(){if(0==$("#vidEn").prop("data-checked")&&-1==this.X_TP_VID&&1==this.X_TP_Used){var e;if("PTM"==W&&(e=$.act(ACT_GET,DSL_IPTV_CFG,null,null)),$.exe())return;1==e.enable&&1==e.iptvLinkType&&e.iptvVLANID<=0&&($.alert(ERR_WAN_VLAN_ID_INVALID),s=!1)}})):$.num($("#vpi").val(),[0,255],!0)?($.alert(ERR_WAN_VPI_VCI_INVAD),$("#vpi").select().focus(),s=!1):$.num($("#vci").val(),[1,65535],!0)&&($.alert(ERR_WAN_VPI_VCI_INVAD),$("#vci").select().focus(),s=!1),s))return!1;var t,a,n={};switch(e){case"PPPoE":case"PPPoA":a={enable:1,transportType:t=e,username:$("#usr"+t).val(),password:$("#pwd"+t).val()},n=INCLUDE_CZ||""!=a.username?a:($.alert(ERR_USERNAME_INVAD),$("#usr"+t).focus().select(),null);break;case"StaticIp":case"IPoA":n=function(e){var s=$("#ip"+e).tpAddress("val"),t=$("#mask"+e).tpAddress("val"),a=$("#gw"+e).tpAddress("val");if($.ifip(s))return $("#ip"+e).tpAddress("focus"),null;if($.mask(t))return $("#mask"+e).tpAddress("focus"),null;if($.ipmask(s,t))return $("#mask"+e).tpAddress("focus"),null;if($.ifip(a,!0))return $.alert(ERR_IP_FORMAT),$("#gw"+e).tpAddress("focus"),null;if(!$.isSameLan(a,t,s,t))return $.alert(ERR_GATEWAY_INVAD),$("#gw"+e).tpAddress("focus"),null;var n=$("#priDns"+e).tpAddress("val"),i=$("#secDns"+e).tpAddress("val"),p="";if($.ifip(n,!0))return $.alert(ERR_WAN_DNSADDR_INVAD),$("#priDns"+e).tpAddress("focus"),null;if(""!=i&&"0.0.0.0"!=i&&$.ifip(i,!0))return $.alert(ERR_WAN_SECDNS_INVAD),$("#secDns"+e).tpAddress("focus"),null;return n=n?$.ip2ip(n):"0.0.0.0",i=i?$.ip2ip(i):"0.0.0.0",p=n+","+i,{enable:1,connectionType:"IP_Routed",addressingType:"Static",NATEnabled:1,externalIPAddress:$.ip2ip(s),subnetMask:$.ip2ip(t),defaultGateway:a?$.ip2ip(a):"0.0.0.0",DNSOverrideAllowed:"0.0.0.0,0.0.0.0"==p?0:1,DNSServers:p}}(e);break;case"Pptp":case"L2tp":n=function(e){if(""==$("#usr"+e).val())return $.alert(ERR_USERNAME_INVAD),$("#usr"+e).focus().select(),null;if(""==$("#pwd"+e).val())return $.alert(ERR_WAN_PWD_INVAD),$("#pwd"+e).focus().select(),null;var s,t=$("#serverIpOrName"+e).val();if(""==t)return $.alert(ERR_WAN_DA_SERVER_NAME_EMPTY),$("#serverIpOrName"+e).focus().select(),null;var a=$("span.radio-click").parent("label"),n="";if($.each(a,function(){if(-1!=$(this).attr("for").search(e))return n=$(this).attr("for"),!1}),n=="dnsModeDyn"+e){var i=$.getDefaultHostname();s={enable:1,connectionTypeIP:"IP_Routed",addressingType:"DHCP",NATEnabled:1,serverIpOrName:t,username:$("#usr"+e).val(),password:$("#pwd"+e).val(),hostname:i}}else if(n=="dnsModeSta"+e){var p=$("#ip"+e).tpAddress("val"),d=$("#mask"+e).tpAddress("val"),l=$("#gw"+e).tpAddress("val");if($.ifip(p)||$.mask(d)||$.ipmask(p,d))return null;if($.ifip(l,!0))return $.alert(ERR_IP_FORMAT),$("#gw"+e).tpAddress("focus"),null;if(!$.isSameLan(l,d,p,d))return $.alert(ERR_GATEWAY_INVAD),$("#gw"+e).tpAddress("focus"),null;var r=$("#priDns"+e).tpAddress("val"),_=$("#secDns"+e).tpAddress("val"),o="";if($.ifip(r,!0))return $.alert(ERR_WAN_DNSADDR_INVAD),$("#priDns"+e).tpAddress("focus"),null;if(""!=_&&"0.0.0.0"!=_&&$.ifip(_,!0))return $.alert(ERR_WAN_SECDNS_INVAD),$("#secDns"+e).tpAddress("focus"),null;if(r=r?$.ip2ip(r):"0.0.0.0",_=_?$.ip2ip(_):"0.0.0.0",o=r+","+_,$.ifip(t,!0)&&"0.0.0.0"==r&&"0.0.0.0"==_)return $.alert(ERR_WAN_DA_DNS_EMPTY),$("#priDns"+e).tpAddress("focus"),null;s={enable:1,connectionTypeIP:"IP_Routed",addressingType:"Static",NATEnabled:1,serverIpOrName:t,username:$("#usr"+e).val(),password:$("#pwd"+e).val(),externalIPAddressIP:$.ip2ip(p),subnetMaskIP:$.ip2ip(d),defaultGatewayIP:$.ip2ip(l),DNSServersIP:o}}return s}(e);break;case"DynamicIp":n=function(){var e={enable:1,connectionType:"IP_Routed",addressingType:"DHCP",NATEnabled:1,X_TP_Hostname:$.getDefaultHostname()};INCLUDE_MER&&(r()?(e.X_TP_MerEnabled=1,e.X_TP_Username=$("#mer_username").val(),e.X_TP_Password=$("#mer_password").val()):e.X_TP_MerEnabled=0);return e}();break;case"Bridge":n={enable:1,connectionType:"IP_Bridged"}}return null!=n&&("DSL"==o?(n.name="",INCLUDE_WAN_VLAN&&"ATM"==W&&"IPoA"!=e&&"PPPoA"!=e&&(n.X_TP_8021QEnabled=1==$("#vlanEn_add").prop("data-checked")?1:0,n.X_TP_VlanID=n.X_TP_8021QEnabled?parseInt($("#vlanid_add").val(),10):0),function(a,e){var s,t,n,p,d,l=ispList[f]?ispList[f].internet.length:0,r=$("#isp").data("value");if(INCLUDE_VDSLWAN&&"ATM"!=W)for(p=0;p<l&&(ispList[f].internet[p][0]!=r||ispList[f].internet[p][1]!=parseInt($("#vid").val(),10));p++);else for(p=0;p<l&&(ispList[f].internet[p][0]!=r&&(INCLUDE_VDSLWAN||ispList[f].internet[p][0].substring(0,ispList[f].internet[p][0].indexOf("_ADSL"))!=r)||ispList[f].internet[p][1]!=parseInt($("#vpi").val(),10)||ispList[f].internet[p][2]!=parseInt($("#vci").val(),10));p++);if(p==l&&(p=-1),$.act(ACT_SET,LOCAL,null,null,{ispIndex:p,ispName:r}),C(),-1==p&&INCLUDE_VDSLWAN&&null==b&&$("#dslMode").removeClass("nd"),$("#dslMode").hasClass("nd")?-1!=$("#isp").data("value").indexOf("_VDSL")?W="PTM":-1==$("#isp").data("value").indexOf("_ADSL")&&INCLUDE_VDSLWAN||(W="ATM"):$("#vdslRadio").prop("checked")?W="PTM":$("#adslRadio").prop("checked")&&(W="ATM"),INCLUDE_VDSLWAN&&"ATM"!=W){var _=parseInt($("#vid").val(),10);for(0==$("#vidEn").prop("data-checked")&&(_=0),$.each(y,function(){$.stkPop(this.__stack)==S.wan&&1==this.enable&&(this.X_TP_VID==_||0==_&&-1==this.X_TP_VID)&&(t=this)}),n="vdsl",p=0;p<l&&(ispList[f].internet[p][0]!=r||ispList[f].internet[p][1]!=_);p++);}else{var o="PVC:"+parseInt($("#vpi").val(),10)+"/"+parseInt($("#vci").val(),10);for($.each(h,function(){this.destinationAddress==o&&(s=this)}),n="adsl",p=0;p<l;p++)if(ispList[f].internet[p][0].substring(0,ispList[f].internet[p][0].indexOf("_ADSL"))==r&&ispList[f].internet[p][1]==parseInt($("#vpi").val(),10)&&ispList[f].internet[p][2]==parseInt($("#vci").val(),10)){d=-1!=ispList[f].internet[p][4].indexOf("LLC")?"LLC":"VCMUX";break}d||(d="PPPoA"==a?"VCMUX":"LLC")}V&&V.name&&(-1!=V.name.indexOf("ppp")?(D=$.act(ACT_GS,WAN_PPP_CONN_PORTMAPPING,null,V.__stack),k=$.act(ACT_GS,PPP_CONN_PORTTRIGGERING,null,V.__stack)):-1!=V.name.indexOf("ip")&&(D=$.act(ACT_GS,WAN_IP_CONN_PORTMAPPING,null,V.__stack),k=$.act(ACT_GS,IP_CONN_PORTTRIGGERING,null,V.__stack))),$.exe();var c="adsl"==n?{enable:1,destinationAddress:o,linkType:("PPPoA"==a?"PPPoA":"IPoA"==a&&"IPoA")||"EoA",ATMEncapsulation:d}:{enable:1,X_TP_Used:1,X_TP_VlanEnabled:$("#vidEn").prop("data-checked")?1:0,X_TP_VID:_},u=[];if(V&&V.name&&u.push({stack:V.__stack,type:V.transportType?"ppp":"ip",name:V.name}),INCLUDE_VDSLWAN&&"vdsl"==n&&t)$.each(g,function(){$.stkPop(this.__stack)!=t.__stack||V&&this.name==V.name||u.push({stack:this.__stack,type:this.transportType?"ppp":"ip",name:this.name})});else if(!s||"IPoA"!=s.linkType&&"PPPoA"!=s.linkType&&"IPoA"!=a&&"PPPoA"!=a&&c.ATMEncapsulation==s.ATMEncapsulation){if(!V&&8<=g.length){var P=0;$.each(g,function(){if("IP_Bridged"==this.connectionType)P?this.__stack>u[0].__stack&&(u[0]={stack:this.__stack,type:this.transportType?"ppp":"ip",name:this.name}):(P=1,u[0]={stack:this.__stack,type:this.transportType?"ppp":"ip",name:this.name});else if(P)return;u[0]={stack:this.__stack,type:this.transportType?"ppp":"ip",name:this.name}})}}else $.each(g,function(){$.stkPop(this.__stack)!=s.__stack||V&&this.name==V.name||u.push({stack:this.__stack,type:this.transportType?"ppp":"ip",name:this.name})});var A,N,T=function(s,t){A=$.act(ACT_ADD,-1!=s.indexOf("PPP")?WAN_PPP_CONN:WAN_IP_CONN,null,N,e),$.exe(function(e){if(e)return t&&($.act(ACT_DEL,WAN_CONN_DEVICE,A.__stack,null),$.exe()),void $.removeLoading();if("Bridge"!=s){if($.act(ACT_SET,L3_FORWARDING,null,null,{__ifAliasName:A.name,__ifName:"",defaultConnectionService:""}),D)for(i=0;i<D.length;i++)$.act(ACT_ADD,-1!=s.indexOf("PPP")?WAN_PPP_CONN_PORTMAPPING:WAN_IP_CONN_PORTMAPPING,null,A.__stack,D[i]);if(k)for(i=0;i<k.length;i++)$.act(ACT_ADD,-1!=s.indexOf("PPP")?PPP_CONN_PORTTRIGGERING:IP_CONN_PORTTRIGGERING,null,A.__stack,k[i]);$.exe(function(e){L(!0),$.removeLoading(),O=s,R=A.__stack,m=!(w=0),E()})}else L(!0),$.removeLoading()},!0)},v=0;if(0<u.length)$.confirm(c_str.del_conflict_conns,function(){m=!1,$.addLoading($("#saveBtn")),addFlag=1;for(var e=[],s=[];A=u.shift();)N=$.stkPop(A.stack),$.act(ACT_DEL,"ppp"==A.type?WAN_PPP_CONN:WAN_IP_CONN,A.stack),$.inArray(N,e)||e.push(N);for(;N=e.shift();)s.push($.act(ACT_GET,WAN_CONN_DEVICE,N));if($.exe())$.removeLoading();else{for(;A=s.shift();)0==A.WANIPConnectionNumberOfEntries&&0==A.WANPPPConnectionNumberOfEntries&&$.act(ACT_DEL,WAN_CONN_DEVICE,A.__stack);if(!$.exe()){if(INCLUDE_IPTV_V2&&($.act(ACT_OP,ACT_IPTV_UPDATE_DSL_IPTV_CFG,null,null),$.exe()),v=0,!INCLUDE_VDSLWAN||"adsl"==n){var t=$.act(ACT_GL,WAN_DSL_LINK_CFG,null,null,["destinationAddress"]);if($.exe())return;$.each(t,function(){if((!INCLUDE_VDSLWAN||"adsl"==n)&&this.destinationAddress==o)return v=1,N=this.__stack,!1})}v?T(a,v):INCLUDE_VDSLWAN&&"adsl"!=n?(A=$.act(ACT_ADD,WAN_CONN_DEVICE,null,S.wan),$.exe(function(e){e?$.removeLoading():(N=A.__stack,$.act(ACT_SET,WAN_PTM_LINK_CFG,N,null,c),T(a,v))},!0)):(A=$.act(ACT_ADD,WAN_CONN_DEVICE,null,S.wan),$.exe(function(e){e?$.removeLoading():(N=A.__stack,$.act(ACT_SET,WAN_DSL_LINK_CFG,N,null,c),T(a,v))},!0))}}},function(){$.removeLoading()});else{if($.addLoading($("#saveBtn")),v=0,!INCLUDE_VDSLWAN||"adsl"==n){var I=$.act(ACT_GL,WAN_DSL_LINK_CFG,null,null,["destinationAddress"]);if($.exe())return;$.each(I,function(){if((!INCLUDE_VDSLWAN||"adsl"==n)&&this.destinationAddress==o)return v=1,N=this.__stack,!1})}v?T(a,v):INCLUDE_VDSLWAN&&"adsl"!=n?(A=$.act(ACT_ADD,WAN_CONN_DEVICE,null,S.wan),$.exe(function(e){e?$.removeLoading():(N=A.__stack,$.act(ACT_SET,WAN_PTM_LINK_CFG,N,null,c),T(a,v))},!0)):(A=$.act(ACT_ADD,WAN_CONN_DEVICE,null,S.wan),$.exe(function(e){e?$.removeLoading():(N=A.__stack,$.act(ACT_SET,WAN_DSL_LINK_CFG,N,null,c),T(a,v))},!0))}}(e,n)):"ETH"==o&&function(s,e){m=!1,$.addLoading($("#saveBtn"));var t={__ifAliasName:N.dynamicIp.name,__ifName:"",defaultConnectionService:""};switch($.act(ACT_SET,WAN_IP_CONN,N.staticIp.stack,null,["enable=0"]),$.act(ACT_SET,WAN_IP_CONN,N.dynamicIp.stack,null,["enable=0"]),$.act(ACT_SET,WAN_PPP_CONN,N.pppoe.stack,null,["enable=0"]),INCLUDE_L2TP&&$.act(ACT_SET,WAN_L2TP_CONN,N.l2tp.stack,null,["enable=0"]),INCLUDE_PPTP&&$.act(ACT_SET,WAN_PPTP_CONN,N.pptp.stack,null,["enable=0"]),s){case"PPPoE":t.__ifAliasName=N.pppoe.name,$.act(ACT_SET,WAN_PPP_CONN,N.pppoe.stack,null,e),R=N.pppoe.stack;break;case"DynamicIp":t.__ifAliasName=N.dynamicIp.name,$.act(ACT_SET,WAN_IP_CONN,N.dynamicIp.stack,null,e),R=N.dynamicIp.stack;break;case"StaticIp":t.__ifAliasName=N.staticIp.name,$.act(ACT_SET,WAN_IP_CONN,N.staticIp.stack,null,e),R=N.staticIp.stack;break;case"Pptp":t.__ifAliasName=N.pptp.name,$.act(ACT_SET,WAN_PPTP_CONN,N.pptp.stack,null,e),R=N.pptp.stack;break;case"L2tp":t.__ifAliasName=N.l2tp.name,$.act(ACT_SET,WAN_L2TP_CONN,N.l2tp.stack,null,e),R=N.l2tp.stack;break;default:t.__ifAliasName=N.dynamicIp.name,$.act(ACT_SET,WAN_IP_CONN,N.dynamicIp.stack,null,e),R=N.dynamicIp.stack}$.act(ACT_SET,L3_FORWARDING,null,null,t),$.exe(function(e){e||($.removeLoading(),O=s,m=!(w=0),E())})}(e,n),!0)}function C(){var e=$.act(ACT_GET,SYS_MODE,null,null),a=$.act(ACT_GL,WAN_COMMON_INTF_CFG,null,null,["WANAccessType"]);if(h=$.act(ACT_GL,WAN_DSL_LINK_CFG,null,null,["autoConfig","destinationAddress","linkType","ATMEncapsulation"]),INCLUDE_WAN_VLAN){if(INCLUDE_MER)var s=$.act(ACT_GL,WAN_IP_CONN,null,null,["name","connectionType","addressingType","externalIPAddress","subnetMask","defaultGateway","DNSServers","X_TP_8021QEnabled","X_TP_VlanID","X_TP_MerEnabled","X_TP_Username","X_TP_Password"]);else s=$.act(ACT_GL,WAN_IP_CONN,null,null,["name","connectionType","addressingType","externalIPAddress","subnetMask","defaultGateway","DNSServers","X_TP_8021QEnabled","X_TP_VlanID"]);var t=$.act(ACT_GL,WAN_PPP_CONN,null,null,["name","transportType","username","password","X_TP_8021QEnabled","X_TP_VlanID"])}else{if(INCLUDE_MER)s=$.act(ACT_GL,WAN_IP_CONN,null,null,["name","connectionType","addressingType","externalIPAddress","subnetMask","defaultGateway","DNSServers","X_TP_MerEnabled","X_TP_Username","X_TP_Password"]);else s=$.act(ACT_GL,WAN_IP_CONN,null,null,["name","connectionType","addressingType","externalIPAddress","subnetMask","defaultGateway","DNSServers"]);t=$.act(ACT_GL,WAN_PPP_CONN,null,null,["name","transportType","username","password"])}var n=$.act(ACT_GL,WAN_DSL_INTF_CFG,null,null,INCLUDE_VDSLWAN?["status","linkEncapsulationUsed","X_TP_SupportAdslMode"]:["status"]),i=$.act(ACT_GET,L3_FORWARDING,null,null,["__ifAliasName"]);if(INCLUDE_USB_3G_DONGLE)var p=$.act(ACT_GL,WAN_USB_3G_LINK_CFG,null,null,["enable","MainConnObjName"]);if(INCLUDE_VDSLWAN&&(y=$.act(ACT_GL,WAN_PTM_LINK_CFG,null,null,["enable","X_TP_Used","X_TP_VID","X_TP_VlanEnabled"])),INCLUDE_L2TP)var d=$.act(ACT_GL,WAN_L2TP_CONN,null,null,["enable","name","addressingType","transportType","Username","Password","ServerIpOrName","ExternalIPAddressIP","SubnetMaskIP","DefaultGatewayIP","DNSServersIP"]);if(INCLUDE_PPTP)var l=$.act(ACT_GL,WAN_PPTP_CONN,null,null,["enable","name","addressingType","transportType","Username","Password","ServerIpOrName","ExternalIPAddressIP","SubnetMaskIP","DefaultGatewayIP","DNSServersIP"]);if(!$.exe()){var r;if(o=e.mode,"ppp_USB_3G"===i.__ifAliasName&&$.each(p,function(){1==this.enable&&(i.__ifAliasName=this.mainConnObjName)}),INCLUDE_VDSLWAN)b=null,W="G.993.2_Annex_K_PTM"==n[0].linkEncapsulationUsed?"PTM":"ATM","Up"==n[0].status&&(b=W),r=n[0].X_TP_SupportAdslMode.split(";"),$.each(r,function(){"ADSL Auto Sync-up"==this.split(":")[0]?"Annex "+this.split(":")[1]:"VDSL2"==this.split(":")[0]&&"Annex "+this.split(":")[1]});A={},g=[],"DSL"==o?($.merge(s,t),$.each(s,function(){var e;if("DSL"!==$.arr2obj(a,"__stack")[$.stkPop(this.__stack,2)].WANAccessType||(g.push(this),this.name!==i.__ifAliasName));else if(V=this,_=$.stkPop(this.__stack,2),INCLUDE_VDSLWAN&&(T=$.arr2obj(y,"__stack")[$.stkPop(this.__stack)].X_TP_Used),INCLUDE_VDSLWAN&&1==T)e=$.arr2obj(y,"__stack")[$.stkPop(this.__stack)],S={vid:e.X_TP_VID,wan:$.stkPop(this.__stack,2)},A="IP_Routed"==this.connectionType?"Static"==this.addressingType?(dns=this.DNSServers.split(","),{linkType:"StaticIp",ip:this.externalIPAddress,mask:this.subnetMask,gw:this.defaultGateway,dns:dns[0],dns2:dns[1]}):INCLUDE_MER?{linkType:"DynamicIp",merEnabled:this.X_TP_MerEnabled,merUsername:this.X_TP_Username,merPassword:this.X_TP_Password}:{linkType:"DynamicIp"}:"PPPoE"==this.transportType?{linkType:"PPPoE",usr:this.username,pwd:this.password,cfm:this.password}:{linkType:"Bridge"};else{var s,t=(e=$.arr2obj(h,"__stack")[$.stkPop(this.__stack)]).destinationAddress.split(":")[1].split("/");S={vpi:t[0],vci:t[1],wan:$.stkPop(this.__stack,2)},s="EoA"==e.linkType?"PPPoE"==this.transportType?"PPPoE":"Static"==this.addressingType?"StaticIp":"DynamicIp":e.linkType,A="EoA"==e.linkType&&"Static"==this.addressingType||"IPoA"==e.linkType?(dns=this.DNSServers.split(","),{linkType:s,ip:this.externalIPAddress,mask:this.subnetMask,gw:this.defaultGateway,dns:dns[0],dns2:dns[1]}):"EoA"==e.linkType&&"PPPoE"==this.transportType||"PPPoA"==e.linkType?{linkType:s,usr:this.username,pwd:this.password}:{linkType:s},INCLUDE_WAN_VLAN&&(A.X_TP_8021QEnabled=this.X_TP_8021QEnabled,A.X_TP_VlanID=this.X_TP_VlanID)}}),S.wan||(S={},$.each(a,function(){"DSL"===this.WANAccessType&&(S.wan=this.__stack)})),function(){var e,s=0,t=[],a=$.act(ACT_GET,LOCAL,null,null,["Country"]),n=$.act(ACT_GET,LOCAL,null,null,["ispIndex","ispName"]);if(!$.exe()){c=n.ispIndex;for(var i=0;i<regionCodeInfo.length;i++)if(a.country+" "==regionCodeInfo[i][1]){f=regionCodeInfo[i][4];break}if(f&&ispList[f]){var p=!0;for(-1!=n.ispIndex&&""!=n.ispName&&ispList[f].internet[n.ispIndex][0]!=n.ispName&&(p=!1);ispList[f].internet[s];)null==b?INCLUDE_VDSLWAN?t.push(ispList[f].internet[s][0]):-1!=ispList[f].internet[s][0].indexOf("_ADSL")&&t.push(ispList[f].internet[s][0].substring(0,ispList[f].internet[s][0].indexOf("_ADSL"))):INCLUDE_VDSLWAN&&"PTM"==b&&-1!=ispList[f].internet[s][0].indexOf("_VDSL")?t.push(ispList[f].internet[s][0]):"ATM"==b&&-1!=ispList[f].internet[s][0].indexOf("_ADSL")&&t.push(ispList[f].internet[s][0]),p||ispList[f].internet[s][0]!=n.ispName||(c=s,p=!0),s++;for(p||(c=-1),t=t.reverse();e=t.pop();)$("#isp").append("<option value='"+e+"'>"+e+"</option>");$("#isp").append("<option value='"+m_str.other+"'>"+m_str.other+"</option>"),-1==c?$("#isp option[value='"+m_str.other+"']").prop("selected","selected"):"PTM"==b&&-1!=ispList[f].internet[c][0].indexOf("_ADSL")||"ATM"==b&&-1!=ispList[f].internet[c][0].indexOf("_VDSL")?$("#isp option[value='"+ispList[f].internet[0][0]+"']").prop("selected","selected"):INCLUDE_VDSLWAN?$("#isp option[value='"+ispList[f].internet[c][0]+"']").prop("selected","selected"):$("#isp option[value='"+ispList[f].internet[c][0].substring(0,ispList[f].internet[c][0].indexOf("_ADSL"))+"']").prop("selected","selected")}else null==ispList[f]?($("#isp").append("<option value='"+m_str.other+"'>"+m_str.other+"</option>"),$("#isp option[value='"+m_str.other+"']").prop("selected","selected")):$("#isp").addClass("nd");$("#isp").tpSelect(),null!=b&&$("#dslMode").addClass("nd")}}()):"ETH"==o&&($.each(s,function(){var e;"Ethernet"===$.arr2obj(a,"__stack")[$.stkPop(this.__stack,2)].WANAccessType&&("Static"==this.addressingType?(e="StaticIp",N.staticIp={enable:this.enable,name:this.name,stack:this.__stack,wan:$.stkPop(this.__stack,2)}):"DHCP"==this.addressingType&&(e="DynamicIp",N.dynamicIp={enable:this.enable,name:this.name,stack:this.__stack,wan:$.stkPop(this.__stack,2)}),this.name===i.__ifAliasName&&(_=$.stkPop(this.__stack,1),A="Static"==this.addressingType?(dns=this.DNSServers.split(","),{linkType:e,ip:this.externalIPAddress,mask:this.subnetMask,gw:this.defaultGateway,dns:dns[0],dns2:dns[1]}):{linkType:"DynamicIp"}))}),$.each(t,function(){"Ethernet"===$.arr2obj(a,"__stack")[$.stkPop(this.__stack,2)].WANAccessType&&"PPPoE"==this.transportType&&(N.pppoe={enable:this.enable,name:this.name,stack:this.__stack,wan:$.stkPop(this.__stack,2)},this.name===i.__ifAliasName&&(_=$.stkPop(this.__stack,1),A={linkType:this.transportType,usr:this.username,pwd:this.password}))}),INCLUDE_PPTP&&$.each(l,function(){if("Ethernet"===$.arr2obj(a,"__stack")[$.stkPop(this.__stack,2)].WANAccessType&&(N.pptp={enable:this.enable,name:this.name,stack:this.__stack,wan:$.stkPop(this.__stack,1)},this.name===i.__ifAliasName))return _=$.stkPop(this.__stack,1),void("Static"==this.addressingType?(dns=this.DNSServersIP.split(","),A={linkType:"Pptp",addressingType:"Static",usr:this.username,pwd:this.password,srvAddrName:this.serverIpOrName,ip:this.externalIPAddressIP,mask:this.subnetMaskIP,gw:this.defaultGatewayIP?this.defaultGatewayIP:"0.0.0.0",dns:dns[0],dns2:dns[1]}):"DHCP"==this.addressingType&&(A={linkType:"Pptp",addressingType:"DHCP",usr:this.username,pwd:this.password,srvAddrName:this.serverIpOrName}))}),INCLUDE_L2TP&&$.each(d,function(){if("Ethernet"===$.arr2obj(a,"__stack")[$.stkPop(this.__stack,2)].WANAccessType&&(N.l2tp={enable:this.enable,name:this.name,stack:this.__stack,wan:$.stkPop(this.__stack,1)},this.name===i.__ifAliasName))return _=$.stkPop(this.__stack,1),void("Static"==this.addressingType?(dns=this.DNSServersIP.split(","),A={linkType:"L2tp",addressingType:"Static",usr:this.username,pwd:this.password,srvAddrName:this.serverIpOrName,ip:this.externalIPAddressIP,mask:this.subnetMaskIP,gw:this.defaultGatewayIP?this.defaultGatewayIP:"0.0.0.0",dns:dns[0],dns2:dns[1]}):"DHCP"==this.addressingType&&(A={linkType:"L2tp",addressingType:"DHCP",usr:this.username,pwd:this.password,srvAddrName:this.serverIpOrName}))}),$("#dslIsp").addClass("nd")),_||$.each(a,function(){if("DSL"==this.WANAccessType)return _=this.__stack,!1})}}$("#saveBtn").click(function(){e()}),$("#vlanid_add").on("change",function(){!function(){var e=1==$("#vlanEn_add").prop("data-checked")?parseInt($("#vlanid_add").val(),10):0;if($("#vlanEn_add").prop("data-checked")&&$.num(e,[0,4094],!0))return $.alert(ERR_WAN_VLAN_ID_INVALID),$("#vlanid_add").focus().select()}()}),$("#vlanEn_add").click(function(){$("#vlanEn_add").prop("data-checked")?$("#vlan_div_add").removeClass("nd"):$("#vlan_div_add").addClass("nd")});var h,o,f,c,D,k,m=!0,a=$.getAsync();function E(){var e=n_str.wanBasic.t_detecting;if(0!=m&&$.checkAsync(a))if($("#div_detectStatus").removeClass("nd"),$("#internetStatus").prop("value",e+"...".substr(0,n)),n++,!1&(n&=3))$.timeout(E,500);else switch(w){case 0:var s=function(e){e||("DSL"==o?"Up"==dslIntfConfig.status?(w++,$.timeout(E,500)):"NoSignal"==dslIntfConfig.status||"Disabled"==dslIntfConfig.status?$("#internetStatus").prop("value",m_str.disconnected):$.timeout(E,500):"ETH"==o&&("Up"==ethLinkConfig.ethernetLinkStatus?(w++,"Pptp"==O||"L2tp"==O?$.timeout(E,5e3):$.timeout(E,500)):"Down"==ethLinkConfig.ethernetLinkStatus||"Unavailable"==ethLinkConfig.ethernetLinkStatus?$("#internetStatus").prop("value",m_str.disconnected):$.timeout(E,500)))};"DSL"==o?(dslIntfConfig=$.act(ACT_GET,WAN_DSL_INTF_CFG,_,null,["Status"]),$.exe(s)):"ETH"==o&&(ethLinkConfig=$.act(ACT_GET,WAN_ETH_LINK_CFG,_,null,["EthernetLinkStatus"]),$.exe(s));break;case 1:"PPPoE"==O||"PPPoA"==O?wanConn=$.act(ACT_GET,WAN_PPP_CONN,R,null,["LastConnectionError","ConnectionStatus"]):"DynamicIp"==O||"StaticIp"==O||"IPoA"==O?wanConn=$.act(ACT_GET,WAN_IP_CONN,R,null,["ConnectionStatus"]):INCLUDE_PPTP&&"Pptp"==O?wanConn=$.act(ACT_GET,WAN_PPTP_CONN,R,null,["ConnectionStatus"]):INCLUDE_PPTP&&"L2tp"==O&&(wanConn=$.act(ACT_GET,WAN_L2TP_CONN,R,null,["ConnectionStatus"])),$.exe(function(e){e||("Connected"==wanConn.connectionStatus?(w++,$.timeout(E,500)):"Connecting"==wanConn.connectionStatus?$.timeout(E,500):$("#internetStatus").prop("value",m_str.disconnected))});break;case 2:diagTool=$.act(ACT_GET,DIAG_TOOL,null,null,["LastResult"]),$.exe(function(e){e||(3==diagTool.lastResult?$.timeout(E,500):1==v?1==diagTool.lastResult?$("#internetStatus").prop("value",m_str.connected):$("#internetStatus").prop("value",m_str.disconnected):(v=!0,$.act(ACT_OP,ACT_OP_DIAG_DNSDIAG,diagTool.__stack),$.exe(function(e){e||$.timeout(E,500)})))})}}if(INCLUDE_MER){function r(){return"Sky(MER)_VDSL"==$("#isp").data("value")&&"DynamicIp"==$("#linkType").data("value")}function u(){$("#DynamicIpBasic").removeClass("nd"),$("#mer_div").removeClass("nd")}function P(){$("#DynamicIpBasic").addClass("nd"),$("#mer_div").addClass("nd")}}$("input[id$='dslRadio']").click(function(){if(!$("#dslMode").hasClass("nd")){var e=A.linkType?A.linkType:$("#linkType").data("value");"DSL"==o&&("vdslRadio"==$(this).attr("id")?(W="PTM",$("#adslLogicInf").hide(),$("#vdslLogicInf").show(),p("VDSL",e)):(W="ATM",$("#vdslLogicInf").hide(),$("#adslLogicInf").show(),p("ADSL",e)))}}),$("#isp").click(function(){var e=0,s=null==ispList[f]?0:ispList[f].internet.length;for($("#linkType").attr("disabled",!1),$("#linkType").tpSelect({refresh:1});e<s&&$(this).data("value")!=ispList[f].internet[e][0]&&(INCLUDE_VDSLWAN||$(this).data("value")!=ispList[f].internet[e][0].substring(0,ispList[f].internet[e][0].indexOf("_ADSL")));e++);if(e==s)return INCLUDE_VDSLWAN&&null==b&&$("#dslMode").removeClass("nd"),$("#isp option[value='"+m_str.other+"']").prop("selected","selected"),"PTM"==W?($("#vdslRadio").prop("checked",!0),$("#vdslRadio").tpRadio({refresh:1}),$("#adslRadio").tpRadio({refresh:1})):($("#adslRadio").prop("checked",!0),$("#adslRadio").tpRadio({refresh:1}),$("#vdslRadio").tpRadio({refresh:1})),$("#vid").prop("disabled",!1),$("#vpi").prop("disabled",!1),$("#vci").prop("disabled",!1),$("#vidEn").prop("disabled",!1),$("#vidEn").tpCheckbox({refresh:1}),p(o,A.linkType),void(INCLUDE_MER&&(r()?u():P()));if(INCLUDE_WAN_VLAN&&"Telekom(Privat)_ADSL"==$("#isp").data("value")&&$("#t_adslVlanNote").removeClass("nd"),$("#dslMode").addClass("nd"),-1!=$(this).data("value").indexOf("_VDSL"))W="PTM",$("#adslLogicInf").hide(),$("#vdslLogicInf").show(),p("VDSL",$("#linkType").data("value")),$("#vidEn").prop("checked",0!=ispList[f].internet[e][1]),$("#vidEn").prop("disabled",!0),$("#vidEn").tpCheckbox({refresh:1}),$("#vid").val(ispList[f].internet[e][1]),$("#vid").prop("disabled",!0),l(),"Dynamic IP"==(n=ispList[f].internet[e][2])?n="DynamicIp":"Static IP"==n&&(n="StaticIp"),$("#linkType option[value='"+n+"']").prop("selected","selected");else if(-1!=$(this).data("value").indexOf("_ADSL")||!INCLUDE_VDSLWAN){W="ATM",$("#vdslLogicInf").hide(),$("#adslLogicInf").show(),p("ADSL",$("#linkType").data("value")),$("#vpi").val(ispList[f].internet[e][1]),$("#vci").val(ispList[f].internet[e][2]),$("#vpi").prop("disabled",!0),$("#vci").prop("disabled",!0),"Dynamic IP"==(n=ispList[f].internet[e][3])?n="DynamicIp":"Static IP"==n&&(n="StaticIp"),INCLUDE_WAN_VLAN&&ispList[f].internet[e][5]?($("#vlanEn_add").prop("checked",!0),$("#vlanEn_add").tpCheckbox({refresh:1}),$("#vlan_div_add").removeClass("nd"),$("#vlanid_add").val(ispList[f].internet[e][5])):($("#vlan_div_add").addClass("nd"),$("#vlanEn_add").prop("checked",!1),$("#vlanEn_add").tpCheckbox({refresh:1})),$("#linkType option[value='"+n+"']").prop("selected","selected")}e!=s&&$("#linkType").attr("disabled",!0),$("#linkType").tpSelect({refresh:1}),INCLUDE_MER&&(r()?u():P());var t=$(this).data("value");if(specialIspList[f]&&specialIspList[f][t]){var a=$.extend({},A),n="";"Dynamic IP"==(n=-1!=$(this).data("value").indexOf("_VDSL")?ispList[f].internet[e][2]:ispList[f].internet[e][3])?n="DynamicIp":"Static IP"==n&&(n="StaticIp"),a.linkType=n,specialIspList[f][t].usrname&&(a.usr=specialIspList[f][t].usrname,INCLUDE_MER&&r()&&(a.merUsername=specialIspList[f][t].usrname)),specialIspList[f][t].passwd&&(a.pwd=specialIspList[f][t].passwd,INCLUDE_MER&&r()&&(a.merPassword=specialIspList[f][t].passwd)),d(a)}else d(A)});var S={},A={},N={};if(INCLUDE_VDSLWAN)var y={},T=0;var b,V={},g=[],W="ATM",w=0,n=0,v=!1,O="",R="",I="";$.tpInit(function(){C(),"ETH"==o&&p(o,A.linkType),d(A),"DSL"==o&&INCLUDE_IPTV_V2&&($.act(ACT_OP,ACT_IPTV_UPDATE_DSL_IPTV_CFG,null,null),$.exe()),INCLUDE_MER&&(initCompleted=1)}),INCLUDE_IPTV_V2&&(I=$("#isp").data("value"))}()</script>
