<script language="javascript">function init(){var e=$.act(ACT_GET,DMZ_HOST_CFG,null,null);$.exe()||($("#dmzIp").tpAddress("val",e.IPAddress?e.IPAddress:"0.0.0.0"),1==e.enable?$("#dmz_en").prop("checked",!0):$("#dmz_en").prop("checked",!1))}function saveDMZ(){var e=$.ip2ip($("#dmzIp").tpAddress("val")),n=$("#dmz_en").prop("data-checked")?1:0;$.act(ACT_SET,DMZ_HOST_CFG,null,null,["enable="+n,"IPAddress="+e]),$.exe(function(e){$.removeLoading(),e||$.loadMain("dmz.htm")})}$("#save").click(function(){if($.addLoading($(this)),$.ifip($("#dmzIp").tpAddress("val"),!0))return $.alert(ERR_IP_FORMAT),void $("#dmzIp").tpAddress("focus");var e=!1,n=!1,d=!1;if(INCLUDE_USB_FTP_SERVER){var a=$.act(ACT_GET,FTP_SERVER,null,null,null);if($.exe())return;1==a.enable&&1==a.accessFromInternet&&(e=!0)}var l=$.act(ACT_GET,PPTPVPN,null,null),r=$.act(ACT_GET,OPENVPN,null,null);return $.exe()?void 0:(1==l.enable&&(n=!0),1==r.enable&&(d=!0),n&&$("#dmz_en").prop("data-checked")?($.alert(CMM_PVPN_PORT_CONFLICT_WITH_DMZ),$.removeLoading(),void $.reload()):d&&$("#dmz_en").prop("data-checked")?($.alert(CMM_OVPN_PORT_CONFLICT_WITH_DMZ),$.removeLoading(),void $.reload()):void(e&&$("#dmz_en").prop("data-checked")?$.confirm(c_str.forwarding_ftp_conflict,function(){$.act(ACT_SET,FTP_SERVER,null,null,["accessFromInternet=0"]),$.exe(),saveDMZ()},function(){$.removeLoading(),$.reload()}):saveDMZ()))})</script>
<h3>DMZ</h3>
<div class="content-container">
    <form class="pure-form pure-form-aligned">
        <div>
            <b class="1">DMZ:</b>
            <input type="checkbox" id="dmz_en">
            <label id="t_endmz">Enable DMZ</label>
        </div>
        <div class="pure-control-group">
            <b id="t_hostip">DMZ Host IP Address:</b>
            <input type="text" class="tp-input-text ip-address" id="dmzIp">
        </div>
        <button type="submit" class="green T_save" id="save">Save</button>
    </form>
</div>
<script language="javascript">$.tpInit(init)</script>
