<h3 id="t_led">LED</h3>
<form class="pure-form pure-form-aligned">
    <div class="button-group-container" id="led-status-group">
        <b class="T m" id="t_ledStatus">LED Control: </b>
        <ul>
            <li>
                <button id="led_on" class="fst" value="on">On</button>
            </li>
            <li>
                <button id="led_off" class="lst" value="off">Off</button>
            </li>
        </ul>
    </div>
</form>
<h3 id="t_ledMode">LED MODE</h3>
<form class="pure-form pure-form-aligned">
    <p id="t_note" class="note"></p>
    <div>
        <b id="t_curtime">Current Time:</b>
        <input id="current-time" type="text" readonly="readonly">
    </div>
    <div>
        <b id="t_nightMode">Night Mode:</b>
        <input type="checkbox" id="enableNightMode">
        <label id="t_en">Enable Night Mode</label>
    </div>
    <div id="led-off-time-div">
        <b id="t_ledOffTime" class="label-title">LED Off Time:</b>
        <input id="led-off-time" type="text">
    </div>
    <div class="time-setting-ctn">
        <div>
            <span id="t_from" class="time-setting-label"></span>
            <div id="start-time-12" class="start">123</div>
        </div>
        <div>
            <span id="t_to" class="time-setting-label"></span>
            <div id="end-time-12" class="end">123</div>
        </div>
    </div>
    <button type="submit" class="green T_save" id="save">Save</button>
</form>
<script>function parseFormat(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e}function time_24to12(e){var t=e.split(":"),n=parseInt(t[0],10),a=parseInt(t[1],10),i=parseInt(t[2],10);return 0==n?"12:"+parseFormat(a,2)+":"+parseFormat(i,2)+" AM":n<12?n.toString()+":"+parseFormat(a,2)+":"+parseFormat(i,2)+" AM":12==n?"12:"+parseFormat(a,2)+":"+parseFormat(i,2)+" PM":(n-12).toString()+":"+parseFormat(a,2)+":"+parseFormat(i,2)+" PM"}function renderTimeSetting(e,t,n,a){var i="",r=t||"00",d=n||"00",s=a||$.tpLang.ledSchedule_nstr.am;i+='<div class="time-setting-container" data-target=".hour">',i+='<div class="time-board">',i+='<input type="text" class="hour" value="'+r+'">:<input type="text" class="minute" value="'+d+'">',12==$.timeSettingCfg.timeMode&&(i+='<input type="text" class="halfday" value="'+s+'">'),i+="</div></div>",i+='<div class="controller"><div class="up"></div><div class="down"></div></div>',$(e).html(i)}function renderCurrentTime(e){var t=e.month;t<10&&(t="0"+t);var n,a=e.day;a<10&&(a="0"+a),n=1==INCLUDE_DAY_MONTH_YEAR?a+"/"+t+"/"+e.year:t+"/"+a+"/"+e.year;var i=e.hours;i<10&&(i="0"+i);var r=e.minutes;r<10&&(r="0"+r);var d=e.seconds;d<10&&(d="0"+d);var s=i+":"+r+":"+d,l="";l=12==$.timeSettingCfg.timeMode?time_24to12(s)+", "+n:n+" "+s,$("#current-time").val(l)}function init(){var e,t,n,a=$.act(ACT_GET,LED_SCHEDULE_CFG,null),i=$.act(ACT_GET,LED_BUTTON,null),r=$.act(ACT_GET,HOUR,null,null,["year","month","day","hours","minutes","seconds"]),d=$.act(ACT_GET,TIME,null,null,["sysMode"]);$.exe(),12==d.sysMode?$.timeSettingCfg.timeMode=12:$.timeSettingCfg.timeMode=24,renderCurrentTime(r),renderTimeSetting($("#start-time-12")),renderTimeSetting($("#end-time-12")),12==$.timeSettingCfg.timeMode?(e=parseInt(a.startTime/60)%12,t=parseInt(a.startTime%60),n=720<=a.startTime?$.tpLang.ledSchedule_nstr.pm:$.tpLang.ledSchedule_nstr.am):(e=parseInt(a.startTime/60),t=parseInt(a.startTime%60)),e<10&&(e="0"+e),t<10&&(t="0"+t),timeBoard($("#start-time-12"),"set",[e,t,n]),12==$.timeSettingCfg.timeMode?(e=parseInt(a.endTime/60)%12,t=parseInt(a.endTime%60),n=720<=a.endTime?$.tpLang.ledSchedule_nstr.pm:$.tpLang.ledSchedule_nstr.am):(e=parseInt(a.endTime/60),t=parseInt(a.endTime%60)),e<10&&(e="0"+e),t<10&&(t="0"+t),timeBoard($("#end-time-12"),"set",[e,t,n]),1==i.enable?($("#led_on").addClass("selected"),$("#led_off").removeClass("selected")):($("#led_on").removeClass("selected"),$("#led_off").addClass("selected")),1==a.enable?($("#enableNightMode").prop("checked",!0),$("#led-off-time").prop("disabled",!1),$(".time-setting-ctn").find(".hour,.minute,.halfday").prop("disabled",!1),$(".time-setting-ctn").find(".time-setting-label,.time-setting-container").removeClass("disable")):($("#enableNightMode").prop("checked",!1),$("#led-off-time").prop("disabled",!0),$(".time-setting-ctn").find(".hour,.minute,.halfday").prop("disabled",!0),$(".time-setting-ctn").find(".time-setting-label,.time-setting-container").addClass("disable")),$.auto(function(){var e=$.act(ACT_GET,HOUR,null,null,["year","month","day","hours","minutes","seconds"]),t=$.act(ACT_GET,LED_BUTTON,null);if($.exe())return!1;renderCurrentTime(e),1==t.enable?($("#led_on").addClass("selected"),$("#led_off").removeClass("selected")):($("#led_on").removeClass("selected"),$("#led_off").addClass("selected")),$("#led-status-group").data("tpBtnGroup").refresh()},1e3)}function timeBoard(e,t,n){switch(t){case"enable":$(e).removeClass("disable");break;case"disable":$(e).addClass("disable");break;case"get":return[$(e).find(".hour").val(),$(e).find(".minute").val(),$(e).find(".halfday").val()];case"set":$(e).find(".hour").val(n[0]),$(e).find(".minute").val(n[1]),$(e).find(".halfday").val(n[2])}}function changeValue(){var e,t=$.timeSettingCfg.timeTarget.find($.timeSettingCfg.timeTarget.data("target")),n=t.val(),a=23;12==$.timeSettingCfg.timeMode&&(a=11),n==$.tpLang.ledSchedule_nstr.am||n==$.tpLang.ledSchedule_nstr.pm?t.val(n==$.tpLang.ledSchedule_nstr.am?$.tpLang.ledSchedule_nstr.pm:$.tpLang.ledSchedule_nstr.am):(e="up"==$.timeSettingCfg.direction?parseInt(n,10)+1:parseInt(n,10)-1,".hour"==$.timeSettingCfg.timeTarget.data("target")?a<e?e=0:e<0&&(e=a):60==e?e=0:-1==e&&(e=59),t.val(e<10?"0"+e:e)),$.timeSettingCfg.intervalId=setTimeout(arguments.callee,200)}$.timeSettingCfg={},$.timeSettingCfg.timeTarget="",$.timeSettingCfg.direction="",$.timeSettingCfg.intervalId=null,$.timeSettingCfg.timeMode=24,$("#t_note").html($.tpLang.ledSchedule_nstr.t_nightModeNote),$("#led_on").click(function(){$.addLoading($(this));$.act(ACT_SET,LED_BUTTON,null,null,{enable:1}),$.exe(function(e){$.removeLoading(),e||$.reload()})}),$("#led_off").click(function(){$.addLoading($(this));$.act(ACT_SET,LED_BUTTON,null,null,{enable:0}),$.exe(function(e){$.removeLoading(),e||$.reload()})}),$("#enableNightMode").click(function(){$("#enableNightMode").prop("data-checked")?($("#led-off-time").prop("disabled",!1),$(".time-setting-ctn").find(".hour,.minute,.halfday").prop("disabled",!1),$(".time-setting-ctn").find(".time-setting-label,.time-setting-container").removeClass("disable")):($("#led-off-time").prop("disabled",!0),$(".time-setting-ctn").find(".hour,.minute,.halfday").prop("disabled",!0),$(".time-setting-ctn").find(".time-setting-label,.time-setting-container").addClass("disable"))}),$("#save").click(function(e){$.addLoading();var t=timeBoard($("#start-time-12"),"get"),n=timeBoard($("#end-time-12"),"get");n=12==$.timeSettingCfg.timeMode?(t=60*parseInt(t[0])+parseInt(t[1])+("PM"==t[2]?720:0),60*parseInt(n[0])+parseInt(n[1])+("PM"==n[2]?720:0)):(t=60*parseInt(t[0])+parseInt(t[1]),60*parseInt(n[0])+parseInt(n[1]));var a={enable:$("#enableNightMode").prop("checked")?1:0,startTime:t,endTime:n};$.act(ACT_SET,LED_SCHEDULE_CFG,null,null,a),$.exe(function(e){$.removeLoading(),$.reload()})}),$.tpInit(init),$(".time-setting-ctn").delegate(".time-setting-container input","focus",function(e){var t=$(e.currentTarget),n=t.parents(".time-setting-container");t.hasClass("hour")?n.data("target",".hour"):t.hasClass("minute")?n.data("target",".minute"):n.data("target",".halfday")}).delegate(".time-setting-container input","blur",function(e){var t=parseInt($(e.currentTarget).val(),10)||0,n=24==$.timeSettingCfg.timeMode?23:11;$(e.currentTarget).hasClass("hour")?n<t||t<0?t="00":t<10&&(t="0"+t):$(e.currentTarget).hasClass("minute")?59<t||t<0?t="00":t<10&&(t="0"+t):$(e.currentTarget).hasClass("halfday")&&(t=$(e.currentTarget).val())!=$.tpLang.ledSchedule_nstr.am&&t!=$.tpLang.ledSchedule_nstr.pm&&(t=$.tpLang.ledSchedule_nstr.am),$(e.currentTarget).val(t)}),$(".time-setting-ctn").delegate(".controller .up,.controller .down","mousedown mouseup mouseout",function(e){$.timeSettingCfg.timeTarget=$(e.target).parents(".start,.end").find(".time-setting-container"),$.timeSettingCfg.timeTarget.hasClass("disable")||("mousedown"==e.type?($(e.currentTarget).hasClass("up")?$.timeSettingCfg.direction="up":$.timeSettingCfg.direction="down",changeValue()):"mouseup"!=e.type&&"mouseout"!=e.type||clearTimeout($.timeSettingCfg.intervalId))}),$("input.halfday").on("keypress",function(e){e.preventDefault(),$(e.target).parents(".time-setting-container").hasClass("disable")||(97==e.keyCode||97==e.which?$(e.target).val($.tpLang.ledSchedule_nstr.am):112!=e.keyCode&&112!=e.which||$(e.target).val($.tpLang.ledSchedule_nstr.pm))}),$("#t_note").on("click","a",function(){$.goToOtherPage("time.htm","advanced")})</script>
