!function($){function timeBoard(id,options){this.element=$("#"+id),this.options=$.extend({},timeBoard.prototype.options,options),this._create(options),$.isFunction(this._init)&&this.init()}timeBoard.prototype={constructor:timeBoard,options:{textLabel:"",textLabelClass:"",textLabelConnector:":",parentClass:"pure-control-group",borderRadius:!0,vtype:null,vtypeText:null,allowBlank:!0,blankText:null,validator:null,invalidText:null,prefix:"",timeMode:12},_create:function(){this.id=this.element.attr("id"),this.element.addClass(this.options.parentClass);var inHTML="";inHTML+='<label class="label-title '+this.options.textLabelClass+'">'+this.options.textLabel+(this.options.textLabel?this.options.textLabelConnector:"")+"</label> ",this.options.prefix&&(inHTML+='<span class="time-setting-label">'+this.options.prefix+"</span>"),inHTML+='<div class="time-setting-container">',inHTML+='<div class="time-board pure-control-group">',inHTML+='<input type="text" class="hour tp-input-text" value="00" maxlength="2">:',inHTML+='<input type="text" class="minute tp-input-text" value="00" maxlength="2">',inHTML+='<input type="text" class="halfday tp-input-text" value="'+$.tpLang.ledSchedule_nstr.am+'" maxlength="2">',inHTML+="</div>",inHTML+='<div class="controller">',inHTML+='<div class="up"></div>',inHTML+='<div class="down"></div>',inHTML+="</div>",inHTML+="</div>",this.element.append(inHTML),this.container=this.element.find(".time-setting-container"),this._registerHandler(),this._setOption("timeMode",this.options.timeMode)},_registerHandler:function(){var me=this,changeValue=function(target,direction){var newValue,value=(target=target||me.container.find("input.hour")).val(),maxHour=23;12==me.options.timeMode&&(maxHour=11),target.hasClass("halfday")?newValue=value==$.tpLang.ledSchedule_nstr.am?$.tpLang.ledSchedule_nstr.pm:$.tpLang.ledSchedule_nstr.am:(value=parseInt(value),newValue="up"==direction?value+1:value-1,target.hasClass("hour")?maxHour<newValue?newValue=0:newValue<0&&(newValue=maxHour):59<newValue?newValue=0:newValue<0&&(newValue=59),newValue<10&&(newValue="0"+newValue)),target.val(newValue),me.changeValueTimer=setTimeout(function(){changeValue(target,direction)},200)};this.container.on("mousedown mouseup mouseout",".controller .up,.controller .down",function(e){if(!me.container.hasClass("disable")){var target=me.container.data("target");"mousedown"==e.type?$(this).hasClass("up")?changeValue(target,"up"):changeValue(target,"down"):clearTimeout(me.changeValueTimer)}}).on("focus","input",function(e){me.container.hasClass("disable")||me.container.data("target",$(this))}).on("blur","input",function(e){if(!me.container.hasClass("disable")){var value=parseInt($(this).val(),10),maxHour=24==me.options.timeMode?23:11;$(this).hasClass("hour")?maxHour<value||value<0?value="00":value<10&&(value="0"+value):$(this).hasClass("minute")?59<value||value<0?value="00":value<10&&(value="0"+value):$(this).hasClass("halfday")&&(value=$(this).val())!=$.tpLang.ledSchedule_nstr.am&&value!=$.tpLang.ledSchedule_nstr.pm&&(value=$.tpLang.ledSchedule_nstr.am),$(this).val(value)}}).on("keypress","input.halfday",function(e){e.preventDefault(),me.container.hasClass("disable")||(97==e.keyCode||97==e.which?$(this).val($.tpLang.ledSchedule_nstr.am):112!=e.keyCode&&112!=e.which||$(e.target).val($.tpLang.ledSchedule_nstr.pm))})},_unregisterHandlers:function(){this.container.off()},_setOption:function(key,value){if("timeMode"==key){if(12!=value&&24!=value)return;12==(this.options.timeMode=value)?this.container.find("input.halfday").show():this.container.find("input.halfday").hide()}else"value"==key?this.val(value):"disabled"==key&&this.disabled(value)},showError:function(text){this.error.show().find("span.text").text(text),this.container.addClass("err"),0==this.options.bubbleError&&this.container.parent(".pure-control-group").addClass("err");var me=this;me.options.clickHideError&&$(window).one("click",function(){me.hideError(!1)}),this.hideUnderHint()},disabled:function(flag){!0===flag?(this.element.addClass("disabled"),this.container.addClass("disable"),this.container.find("input").prop("disabled",!0)):(this.element.removeClass("disabled"),this.container.removeClass("disable"),this.container.find("input").prop("disabled",!1))},val:function(val){var hourValue,minuteValue,hour=this.container.find(".hour"),minute=this.container.find(".minute"),halfday=this.container.find(".halfday");if(!$.isArray(val))return hourValue=parseInt(hour.val()),12==this.options.timeMode&&halfday.val()==$.tpLang.ledSchedule_nstr.pm&&(hourValue+=12),[hourValue,parseInt(minute.val())];12==this.options.timeMode?(hourValue=11<val[0]?val[0]-12:val[0],halfday.val(11<val[0]?$.tpLang.ledSchedule_nstr.pm:$.tpLang.ledSchedule_nstr.am)):hourValue=val[0],hourValue<10&&(hourValue="0"+hourValue),minuteValue=val[1]<10?"0"+val[1]:""+val[1],hour.val(hourValue),minute.val(minuteValue)},focus:function(){},_destroy:function(){this._unregisterHandlers(),this.element.empty()}},$.fn.timeBoard=function(options){var result,arg=arguments;return this.each(function(){var input=$(this).data("timeBoard");if(input||"destroy"==options)"option"==options?result=input._setOption.apply(input,Array.prototype.slice.call(arg,1)):"destroy"==options?(result=input._destroy(),$(this).removeData("timeBoard")):$.isFunction(input[options])&&(result=input[options].apply(input,Array.prototype.slice.call(arg,1)));else{var instance=new timeBoard(this.id,options);$(this).data("timeBoard",instance)}}),result}}(jQuery);