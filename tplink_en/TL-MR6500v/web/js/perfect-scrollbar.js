!function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?factory(require("jquery")):factory(jQuery)}(function($){"use strict";var incrementingId,defaultSettings={wheelSpeed:10,wheelPropagation:!1,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:!1},getEventClassName=(incrementingId=0,function(){var id=incrementingId;return incrementingId+=1,".perfect-scrollbar-"+id});$.fn.perfectScrollbar=function(suppliedSettings,option){return this.each(function(){var settings=$.extend(!0,{},defaultSettings),$this=$(this);if("object"==typeof suppliedSettings?$.extend(!0,settings,suppliedSettings):option=suppliedSettings,"update"===option)return $this.data("perfect-scrollbar-update")&&$this.data("perfect-scrollbar-update")(),$this;if("destroy"===option)return $this.data("perfect-scrollbar-destroy")&&$this.data("perfect-scrollbar-destroy")(),$this;if($this.data("perfect-scrollbar"))return $this.data("perfect-scrollbar");$this.addClass("ps-container");var scrollbarXActive,scrollbarYActive,containerWidth,containerHeight,contentWidth,contentHeight,scrollbarXWidth,scrollbarXLeft,scrollbarYHeight,scrollbarYTop,stopPropagation,applyTouchMove,startCoords,startTime,speed,breakingProcess,inGlobalTouch,ieMatch,hovered,version,mouseenter,mouseleave,$scrollbarXRail=$("<div class='ps-scrollbar-x-rail'></div>").appendTo($this),$scrollbarYRail=$("<div class='ps-scrollbar-y-rail'></div>").appendTo($this),$scrollbarX=$("<div class='ps-scrollbar-x'></div>").appendTo($scrollbarXRail),$scrollbarY=$("<div class='ps-scrollbar-y'></div>").appendTo($scrollbarYRail),scrollbarXBottom=parseInt($scrollbarXRail.css("bottom"),10),isScrollbarXUsingBottom=scrollbarXBottom==scrollbarXBottom,scrollbarXTop=isScrollbarXUsingBottom?null:parseInt($scrollbarXRail.css("top"),10),scrollbarYRight=parseInt($scrollbarYRail.css("right"),10),isScrollbarYUsingRight=scrollbarYRight==scrollbarYRight,scrollbarYLeft=isScrollbarYUsingRight?null:parseInt($scrollbarYRail.css("left"),10),isRtl="rtl"===$this.css("direction"),eventClassName=getEventClassName(),railBorderXWidth=parseInt($scrollbarXRail.css("borderLeftWidth"),10)+parseInt($scrollbarXRail.css("borderRightWidth"),10),railBorderYWidth=parseInt($scrollbarXRail.css("borderTopWidth"),10)+parseInt($scrollbarXRail.css("borderBottomWidth"),10),getSettingsAdjustedThumbSize=function(thumbSize){return settings.minScrollbarLength&&(thumbSize=Math.max(thumbSize,settings.minScrollbarLength)),settings.maxScrollbarLength&&(thumbSize=Math.min(thumbSize,settings.maxScrollbarLength)),thumbSize},updateScrollbarCss=function(){var scrollbarXStyles={width:containerWidth,display:scrollbarXActive?"inherit":"none"};scrollbarXStyles.left=isRtl?$this.scrollLeft()+containerWidth-contentWidth:$this.scrollLeft(),isScrollbarXUsingBottom?scrollbarXStyles.bottom=scrollbarXBottom-$this.scrollTop():scrollbarXStyles.top=scrollbarXTop+$this.scrollTop(),$scrollbarXRail.css(scrollbarXStyles);var scrollbarYStyles={top:$this.scrollTop(),height:containerHeight,display:scrollbarYActive?"inherit":"none"};isScrollbarYUsingRight?scrollbarYStyles.right=isRtl?contentWidth-$this.scrollLeft()-scrollbarYRight-$scrollbarY.outerWidth():scrollbarYRight-$this.scrollLeft():scrollbarYStyles.left=isRtl?$this.scrollLeft()+2*containerWidth-contentWidth-scrollbarYLeft-$scrollbarY.outerWidth():scrollbarYLeft+$this.scrollLeft(),$scrollbarYRail.css(scrollbarYStyles),$scrollbarX.css({left:scrollbarXLeft,width:scrollbarXWidth-railBorderXWidth}),$scrollbarY.css({top:scrollbarYTop,height:scrollbarYHeight-railBorderYWidth}),scrollbarXActive?$this.addClass("ps-active-x"):$this.removeClass("ps-active-x"),scrollbarYActive?$this.addClass("ps-active-y"):$this.removeClass("ps-active-y")},updateBarSizeAndPosition=function(){containerWidth=settings.includePadding?$this.innerWidth():$this.width(),containerHeight=settings.includePadding?$this.innerHeight():$this.height(),contentWidth=$this.prop("scrollWidth"),contentHeight=$this.prop("scrollHeight"),!settings.suppressScrollX&&containerWidth+settings.scrollXMarginOffset<contentWidth?(scrollbarXActive=!0,scrollbarXWidth=getSettingsAdjustedThumbSize(parseInt(containerWidth*containerWidth/contentWidth,10)),scrollbarXLeft=parseInt($this.scrollLeft()*(containerWidth-scrollbarXWidth)/(contentWidth-containerWidth),10)):(scrollbarXActive=!1,scrollbarXLeft=scrollbarXWidth=0,$this.scrollLeft(0)),!settings.suppressScrollY&&containerHeight+settings.scrollYMarginOffset<contentHeight?(scrollbarYActive=!0,scrollbarYHeight=getSettingsAdjustedThumbSize(parseInt(containerHeight*containerHeight/contentHeight,10)),scrollbarYTop=parseInt($this.scrollTop()*(containerHeight-scrollbarYHeight)/(contentHeight-containerHeight),10)):(scrollbarYActive=!1,scrollbarYTop=scrollbarYHeight=0,$this.scrollTop(0)),containerHeight-scrollbarYHeight<=scrollbarYTop&&(scrollbarYTop=containerHeight-scrollbarYHeight),containerWidth-scrollbarXWidth<=scrollbarXLeft&&(scrollbarXLeft=containerWidth-scrollbarXWidth),updateScrollbarCss()},bindMouseScrollXHandler=function(){var currentLeft,currentPageX;$scrollbarX.bind("mousedown"+eventClassName,function(e){currentPageX=e.pageX,currentLeft=$scrollbarX.position().left,$scrollbarXRail.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),$(document).bind("mousemove"+eventClassName,function(e){$scrollbarXRail.hasClass("in-scrolling")&&(!function(currentLeft,deltaX){var newLeft=currentLeft+deltaX,maxLeft=containerWidth-scrollbarXWidth;scrollbarXLeft=newLeft<0?0:maxLeft<newLeft?maxLeft:newLeft;var scrollLeft=parseInt(scrollbarXLeft*(contentWidth-containerWidth)/(containerWidth-scrollbarXWidth),10);$this.scrollLeft(scrollLeft)}(currentLeft,e.pageX-currentPageX),updateBarSizeAndPosition(),e.stopPropagation(),e.preventDefault())}),$(document).bind("mouseup"+eventClassName,function(e){$scrollbarXRail.hasClass("in-scrolling")&&$scrollbarXRail.removeClass("in-scrolling")}),currentLeft=currentPageX=null},bindMouseScrollYHandler=function(){var currentTop,currentPageY;$scrollbarY.bind("mousedown"+eventClassName,function(e){currentPageY=e.pageY,currentTop=$scrollbarY.position().top,$scrollbarYRail.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),$(document).bind("mousemove"+eventClassName,function(e){$scrollbarYRail.hasClass("in-scrolling")&&(!function(currentTop,deltaY){var newTop=currentTop+deltaY,maxTop=containerHeight-scrollbarYHeight;scrollbarYTop=newTop<0?0:maxTop<newTop?maxTop:newTop;var scrollTop=parseInt(scrollbarYTop*(contentHeight-containerHeight)/(containerHeight-scrollbarYHeight),10);$this.scrollTop(scrollTop)}(currentTop,e.pageY-currentPageY),updateBarSizeAndPosition(),e.stopPropagation(),e.preventDefault())}),$(document).bind("mouseup"+eventClassName,function(e){$scrollbarYRail.hasClass("in-scrolling")&&$scrollbarYRail.removeClass("in-scrolling")}),currentTop=currentPageY=null},shouldPreventDefault=function(deltaX,deltaY){var scrollTop=$this.scrollTop();if(0===deltaX){if(!scrollbarYActive)return!1;if(0===scrollTop&&0<deltaY||contentHeight-containerHeight<=scrollTop&&deltaY<0)return!settings.wheelPropagation}var scrollLeft=$this.scrollLeft();if(0===deltaY){if(!scrollbarXActive)return!1;if(0===scrollLeft&&deltaX<0||contentWidth-containerWidth<=scrollLeft&&0<deltaX)return!settings.wheelPropagation}return!0},destroy=function(){$this.unbind(eventClassName),$(window).unbind(eventClassName),$(document).unbind(eventClassName),$this.data("perfect-scrollbar",null),$this.data("perfect-scrollbar-update",null),$this.data("perfect-scrollbar-destroy",null),$scrollbarX.remove(),$scrollbarY.remove(),$scrollbarXRail.remove(),$scrollbarYRail.remove(),$scrollbarXRail=$scrollbarYRail=$scrollbarX=$scrollbarY=scrollbarXActive=scrollbarYActive=containerWidth=containerHeight=contentWidth=contentHeight=scrollbarXWidth=scrollbarXLeft=scrollbarXBottom=isScrollbarXUsingBottom=scrollbarXTop=scrollbarYHeight=scrollbarYTop=scrollbarYRight=isScrollbarYUsingRight=scrollbarYLeft=isRtl=eventClassName=null},supportsTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch;return(ieMatch=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/))&&"msie"===ieMatch[1]&&(version=parseInt(ieMatch[2],10),$this.addClass("ie").addClass("ie"+version),6===version&&(mouseenter=function(){$(this).addClass("hover")},mouseleave=function(){$(this).removeClass("hover")},$this.bind("mouseenter"+eventClassName,mouseenter).bind("mouseleave"+eventClassName,mouseleave),$scrollbarXRail.bind("mouseenter"+eventClassName,mouseenter).bind("mouseleave"+eventClassName,mouseleave),$scrollbarYRail.bind("mouseenter"+eventClassName,mouseenter).bind("mouseleave"+eventClassName,mouseleave),$scrollbarX.bind("mouseenter"+eventClassName,mouseenter).bind("mouseleave"+eventClassName,mouseleave),$scrollbarY.bind("mouseenter"+eventClassName,mouseenter).bind("mouseleave"+eventClassName,mouseleave),updateScrollbarCss=function(){var scrollbarXStyles={left:scrollbarXLeft+$this.scrollLeft(),width:scrollbarXWidth};isScrollbarXUsingBottom?scrollbarXStyles.bottom=scrollbarXBottom:scrollbarXStyles.top=scrollbarXTop,$scrollbarX.css(scrollbarXStyles);var scrollbarYStyles={top:scrollbarYTop+$this.scrollTop(),height:scrollbarYHeight};isScrollbarYUsingRight?scrollbarYStyles.right=scrollbarYRight:scrollbarYStyles.left=scrollbarYLeft,$scrollbarY.css(scrollbarYStyles),$scrollbarX.hide().show(),$scrollbarY.hide().show()})),updateBarSizeAndPosition(),$this.bind("scroll"+eventClassName,function(e){updateBarSizeAndPosition()}),bindMouseScrollXHandler(),bindMouseScrollYHandler(),stopPropagation=function(e){e.stopPropagation()},$scrollbarY.bind("click"+eventClassName,stopPropagation),$scrollbarYRail.bind("click"+eventClassName,function(e){var halfOfScrollbarLength=parseInt(scrollbarYHeight/2,10),positionRatio=(e.pageY-$scrollbarYRail.offset().top-halfOfScrollbarLength)/(containerHeight-scrollbarYHeight);positionRatio<0?positionRatio=0:1<positionRatio&&(positionRatio=1),$this.scrollTop((contentHeight-containerHeight)*positionRatio)}),$scrollbarX.bind("click"+eventClassName,stopPropagation),$scrollbarXRail.bind("click"+eventClassName,function(e){var halfOfScrollbarLength=parseInt(scrollbarXWidth/2,10),positionRatio=(e.pageX-$scrollbarXRail.offset().left-halfOfScrollbarLength)/(containerWidth-scrollbarXWidth);positionRatio<0?positionRatio=0:1<positionRatio&&(positionRatio=1),$this.scrollLeft((contentWidth-containerWidth)*positionRatio)}),supportsTouch&&(applyTouchMove=function(differenceX,differenceY){$this.scrollTop($this.scrollTop()-differenceY),$this.scrollLeft($this.scrollLeft()-differenceX),updateBarSizeAndPosition()},startCoords={},startTime=0,breakingProcess=null,inGlobalTouch=!(speed={}),$(window).bind("touchstart"+eventClassName,function(e){inGlobalTouch=!0}),$(window).bind("touchend"+eventClassName,function(e){inGlobalTouch=!1}),$this.bind("touchstart"+eventClassName,function(e){var touch=e.originalEvent.targetTouches[0];startCoords.pageX=touch.pageX,startCoords.pageY=touch.pageY,startTime=(new Date).getTime(),null!==breakingProcess&&clearInterval(breakingProcess),e.stopPropagation()}),$this.bind("touchmove"+eventClassName,function(e){if(!inGlobalTouch&&1===e.originalEvent.targetTouches.length){var touch=e.originalEvent.targetTouches[0],currentCoords={};currentCoords.pageX=touch.pageX,currentCoords.pageY=touch.pageY;var differenceX=currentCoords.pageX-startCoords.pageX,differenceY=currentCoords.pageY-startCoords.pageY;applyTouchMove(differenceX,differenceY),startCoords=currentCoords;var currentTime=(new Date).getTime(),timeGap=currentTime-startTime;0<timeGap&&(speed.x=differenceX/timeGap,speed.y=differenceY/timeGap,startTime=currentTime),e.preventDefault()}}),$this.bind("touchend"+eventClassName,function(e){clearInterval(breakingProcess),breakingProcess=setInterval(function(){Math.abs(speed.x)<.01&&Math.abs(speed.y)<.01?clearInterval(breakingProcess):(applyTouchMove(30*speed.x,30*speed.y),speed.x*=.8,speed.y*=.8)},10)})),$this.mousewheel&&function(){settings.wheelSpeed/=10;var shouldPrevent=!1;$this.bind("mousewheel"+eventClassName,function(e,deprecatedDelta,deprecatedDeltaX,deprecatedDeltaY){var deltaX=e.deltaX*e.deltaFactor||deprecatedDeltaX,deltaY=e.deltaY*e.deltaFactor||deprecatedDeltaY;shouldPrevent=!1,settings.useBothWheelAxes?scrollbarYActive&&!scrollbarXActive?(deltaY?$this.scrollTop($this.scrollTop()-deltaY*settings.wheelSpeed):$this.scrollTop($this.scrollTop()+deltaX*settings.wheelSpeed),shouldPrevent=!0):scrollbarXActive&&!scrollbarYActive&&(deltaX?$this.scrollLeft($this.scrollLeft()+deltaX*settings.wheelSpeed):$this.scrollLeft($this.scrollLeft()-deltaY*settings.wheelSpeed),shouldPrevent=!0):($this.scrollTop($this.scrollTop()-deltaY*settings.wheelSpeed),$this.scrollLeft($this.scrollLeft()+deltaX*settings.wheelSpeed)),updateBarSizeAndPosition(),(shouldPrevent=shouldPrevent||shouldPreventDefault(deltaX,deltaY))&&(e.stopPropagation(),e.preventDefault())}),$this.bind("MozMousePixelScroll"+eventClassName,function(e){shouldPrevent&&e.preventDefault()})}(),settings.useKeyboard&&(hovered=!1,$this.bind("mouseenter"+eventClassName,function(e){hovered=!0}),$this.bind("mouseleave"+eventClassName,function(e){hovered=!1}),$(document).bind("keydown"+eventClassName,function(e){if((!e.isDefaultPrevented||!e.isDefaultPrevented())&&hovered&&!$(document.activeElement).is(":input,[contenteditable]")){var deltaX=0,deltaY=0;switch(e.which){case 37:deltaX=-30;break;case 38:deltaY=30;break;case 39:deltaX=30;break;case 40:deltaY=-30;break;case 33:deltaY=90;break;case 32:case 34:deltaY=-90;break;case 35:deltaY=-containerHeight;break;case 36:deltaY=containerHeight;break;default:return}$this.scrollTop($this.scrollTop()-deltaY),$this.scrollLeft($this.scrollLeft()+deltaX),shouldPreventDefault(deltaX,deltaY)&&e.preventDefault()}})),$this.data("perfect-scrollbar",$this),$this.data("perfect-scrollbar-update",updateBarSizeAndPosition),$this.data("perfect-scrollbar-destroy",destroy),$this})}});