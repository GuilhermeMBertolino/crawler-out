!function($){"use strict";function TPRadio(){}TPRadio.prototype={constructor:TPRadio,instances:[],init:function(id){var tag="";this.id=id,this.$radio=$("#"+id);var divTmp=this.$radio.parent("div").not(".pure-control-group"),bTmp=$(divTmp).find("b");$(divTmp).addClass("pure-control-group"),void 0!==$(bTmp).attr("class")&&(tag=$(bTmp).attr("class")),$(bTmp).replaceWith("<label class='label-title "+tag+"'>"+$(bTmp).html()+"</label>");var labelTmp=this.$radio.next("label:first");this.$radio.addClass("radio-radio");var str="<label class='radio-label "+$(labelTmp).attr("class")+"' for='"+this.$radio.attr("id")+"'>";str+="<span class='icon'></span><span class='text'>"+labelTmp.text()+"</span></label>",this.$radio.next("label:first").replaceWith(str),this.$label=this.$radio.next("label:first");var errorTips='<div class="widget-error-tips" id="'+this.$radio.attr("id")+'_tips"><div class="shadow-top-left"></div><div class="shadow-top"></div><div class="shadow-top-right"></div><div class="shadow-left"><div class="shadow-right"><span class="widget-error-tips-delta"></span><div class="widget-error-tips-wrap"><div class="content error-tips-content"><span id="'+this.$radio.attr("id")+'_tips_content"></span></div></div></div></div><div class="shadow-bot-left"></div><div class="shadow-bot"></div><div class="shadow-bot-right"></div></div>';this.errorTip=$(errorTips),this.$label.append(this.errorTip),this.refresh()},refresh:function(){var radioText=this.$radio.next("label.radio-label").find(".text"),radioIcon=this.$radio.next("label.radio-label").find(".icon");radioText.addClass("span-click").removeClass("span-disable-click"),radioIcon.removeClass("radio-click").removeClass("radio-disable-unchecked").removeClass("radio-disable-click"),this.$radio.prop("disabled")?1==this.$radio.prop("checked")||"checked"==this.$radio.prop("checked")?(radioText.addClass("span-disable-click"),radioIcon.addClass("radio-disable-click")):(radioText.addClass("span-disable-click"),radioIcon.addClass("radio-disable-unchecked")):(this.registerHandlers(),1==this.$radio.prop("checked")||"checked"==this.$radio.prop("checked")?(radioText.addClass("span-click"),radioIcon.addClass("radio-click"),this.$radio.click()):(radioText.removeClass("span-click"),radioIcon.removeClass("radio-click")))},registerHandlers:function(){var self=this;self.unregisterHandlers(),self.$label.on("mouseenter.tpRadio",function(e){self.labelMouseEnter(e)}),self.$label.on("mouseleave.tpRadio",function(e){self.labelMouseLeave(e)}),self.$label.on("click.tpRadio",function(e){self.labelClick(e)}),self.errorTip.on("click.tpRadio",function(e){$(this).hide()})},labelMouseEnter:function(){this.$label.find(".text").addClass("span-hover"),this.$label.prev(".radio-radio").prop("checked")?this.$label.find(".icon").removeClass("radio-click").addClass("radio-hover-checked"):this.$label.find(".icon").addClass("radio-hover-unchecked")},labelMouseLeave:function(){this.$label.prev(".radio-radio").prop("checked")&&this.$label.find(".icon").addClass("radio-click"),this.$label.find(".text").removeClass("span-hover"),this.$label.find(".icon").removeClass("radio-hover-checked").removeClass("radio-hover-unchecked")},labelClick:function(e){e.preventDefault();if(1!=this.$radio.prop("checked")&&"checked"!=this.$radio.prop("checked")&&!this.$radio.prop("disabled")){var radioName=this.$label.prev("input[id="+this.$label.prop("for")+"]").prop("name"),checkedRadioLabel=$("input[name= "+radioName+"][id!= "+this.$label.prop("for")+"]:checked").next(".radio-label");checkedRadioLabel.find(".text").removeClass("span-click"),checkedRadioLabel.find(".icon").removeClass("radio-click"),this.$label.find(".text").removeClass("span-hover").addClass("span-click"),this.$label.find(".icon").removeClass("radio-hover-checked").removeClass("radio-hover-unchecked").addClass("radio-click"),this.$radio.prop("checked",!0),this.$radio.click()}},unregisterHandlers:function(){this.$label.off(".tpRadio")},destroy:function(){this.unregisterHandlers(),delete Object.getPrototypeOf(this).instances[this.id],$(this).removeData("tpRadio")}},$.fn.tpRadio=function(options){this.each(function(){var tpradio=$(this).data("tpRadio");if(tpradio)"destroy"===options&&tpradio?tpradio.destroy():$(this).data("tpRadio").refresh();else{var instance=new TPRadio;$(this).data("tpRadio",instance),(instance.instances[this.id]=instance).init(this.id)}})}}(jQuery);