var ACT_GET=1,ACT_SET=2,ACT_ADD=3,ACT_DEL=4,ACT_GL=5,ACT_GS=6,ACT_OP=7,ACT_CGI=8,ACT_OP_REBOOT="ACT_REBOOT",ACT_OP_RESET="ACT_RESET",ACT_OP_FACTORY_RESET="ACT_FACTORY_RESET",ACT_OP_DHCP_RENEW="ACT_DHCP_RENEW",ACT_OP_DHCP_RELEASE="ACT_DHCP_RELEASE",ACT_OP_DHCP_RENEW_BY_USER="ACT_DHCP_RENEW_BY_USER",ACT_OP_DHCP_RELEASE_BY_USER="ACT_DHCP_RELEASE_BY_USER",ACT_OP_PPP_CONN="ACT_PPP_CONN",ACT_OP_PPP_DISCONN="ACT_PPP_DISCONN",ACT_OP_WAN6_IP_CONN="ACT_WAN6_IP_CONN",ACT_OP_WAN6_IP_DISCONN="ACT_WAN6_IP_DISCONN",ACT_OP_WAN6_IP_CONN_BY_USER="ACT_WAN6_IP_CONN_BY_USER",ACT_OP_WAN6_IP_DISCONN_BY_USER="ACT_WAN6_IP_DISCONN_BY_USER",ACT_OP_WAN6_PPP_CONN="ACT_WAN6_PPP_CONN",ACT_OP_WAN6_PPP_DISCONN="ACT_WAN6_PPP_DISCONN",ACT_OP_DUAL_ACCESS_RENEW="ACT_DUAL_ACCESS_RENEW",ACT_OP_DUAL_ACCESS_RELEASE="ACT_DUAL_ACCESS_RELEASE",ACT_OP_WLAN_GET_NEW_PIN="ACT_WLAN_GET_NEW_PIN",ACT_OP_WLAN_RESTORE_PIN="ACT_WLAN_RESTORE_PIN",ACT_OP_WLAN_UPDATE_ASSOC="ACT_WLAN_UPDATE_ASSOC",ACT_OP_WLAN_WPS_PBC="ACT_WLAN_WPS_PBC",ACT_OP_WLAN_WPS_PIN="ACT_WLAN_WPS_PIN",ACT_OP_WLAN_SCAN="ACT_WLAN_SCAN",ACT_OP_NTP_REQUEST="ACT_NTP_REQUEST",ACT_OP_DLNA_MANUAL_SCAN="ACT_DLNA_MANUAL_SCAN",ACT_OP_L2TP_CONN="ACT_L2TP_CONN",ACT_OP_L2TP_DISCONN="ACT_L2TP_DISCONN",ACT_OP_PPTP_CONN="ACT_PPTP_CONN",ACT_OP_PPTP_DISCONN="ACT_PPTP_DISCONN",ACT_OP_DIAG_STARTDIAG="ACT_DIAG_STARTDIAG",ACT_OP_DIAG_DNSDIAG="ACT_DIAG_DNSDIAG",ACT_DECT_ALLOW_REGISTER="ACT_DECT_ALLOW_REGISTER",ACT_DECT_HANDSET_PAGING="ACT_DECT_HANDSET_PAGING",ACT_DECT_HANDSET_DATETIME_SYNC="ACT_DECT_HANDSET_DATETIME_SYNC",ACT_DECT_HANDSET_UNREGISTER="ACT_DECT_HANDSET_UNREGISTER",ACT_DECT_HANDSET_START_TEST="ACT_DECT_HANDSET_START_TEST",ACT_DECT_HANDSET_STOP_TEST="ACT_DECT_HANDSET_STOP_TEST",ACT_VOIP_CLEAR_LOG="ACT_VOIP_CLEAR_LOG",ACT_VOICEAPP_INFO_REMOVE="ACT_VOICEAPP_INFO_REMOVE",ACT_OP_OVPN_REGEN_KEYS="ACT_OVPN_REGEN_KEYS",ACT_MAIL_SEND_TEST_MAIL="ACT_MAIL_SEND_TEST_MAIL",ACT_IPTV_UPDATE_DSL_IPTV_CFG="ACT_IPTV_UPDATE_DSL_IPTV_CFG",ACT_UPDATE_INTF_STS_ENTRIES="ACT_UPDATE_INTF_STS_ENTRIES",ACT_DO_WAN_DETECT="ACT_DO_WAN_DETECT",ACT_CLOUD_CHECKNEWFWINFO="ACT_CLOUD_CHECKNEWFWINFO",ACT_CLOUD_CHECKNEWFWINFO_BY_USER="ACT_CLOUD_CHECKNEWFWINFO_BY_USER";$.debug=0,$.extend({tokenid:token||0,dhtml:function(str,hook,midhook){$.div.innerHTML="div"+str,$.div.removeChild($.div.firstChild);var scripts=[];$.chgChd($.div.childNodes,function(){this.nodeName&&"script"===this.nodeName.toLowerCase()?scripts.push(this):($.isMobileFlag||$.trans($(this)),hook.call($(this).get(0)))}),midhook&&midhook(),$.each(scripts,function(){$.script(this.text||this.textContent||this.innerHTML||"")}),$.emptyElem($.div)},script:function(data){if(data&&/\S/.test(data)){var script=$.d.createElement("script");script.type="text/javascript",void 0===script.text?script.appendChild($.d.createTextNode(data)):script.text=data,$.head.insertBefore(script,$.head.firstChild),$.head.removeChild(script)}},tpAjax:function(s){if(s.type?s.type=s.type.toUpperCase():s.type="GET",s.data&&"string"!=typeof s.data)return!1;"GET"==s.type&&(s.url+=(s.url.match(/\?/)?"&":"?")+"_="+ +new Date);var requestDone=!1,xhr=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest;try{xhr.open(s.type,s.url,s.async)}catch(e){return s.error&&s.error(ERR_EXIT),!1}if(xhr.setRequestHeader("TokenID",$.tokenid),xhr.setRequestHeader("Content-Type","text/plain"),INCLUDE_LOGIN_GDPR_ENCRYPT&&"GET"!=s.type&&null!=s.url.match("/cgi_gdpr"))try{var stmp;$.debug&&console.log("Request:{\n"+s.data+"\n}"),stmp=$.Iencryptor.AESEncrypt(s.data,0),s.data="sign="+stmp.sign+"\r\ndata="+stmp.data+"\r\n"}catch(e){console.log("can't AESEncrypt"),window.location.reload()}var onreadystatechange=function(){if(0==xhr.readyState)ival&&(clearInterval(ival),ival=null);else if(!requestDone&&xhr&&4==xhr.readyState){if(requestDone=!0,ival&&(clearInterval(ival),ival=null),$.ajok(xhr)){var responseTextTmp=xhr.responseText;if(INCLUDE_LOGIN_GDPR_ENCRYPT&&1==$.checkUrlmatch(s.url))try{responseTextTmp=$.Iencryptor.AESDecrypt(xhr.responseText),$.debug&&console.log("return de responseTextTmp: \n",responseTextTmp)}catch(e){console.log("----------------------------------"),console.log("can't find $.newencryptorManager ")}s.bScript&&$.script(responseTextTmp),s.success&&s.success(s.bScript?0:responseTextTmp)}else s.error&&s.error("number"!=typeof xhr.status?ERR_INTERNAL:xhr.status+ERR_INTERNAL);s.async&&(xhr=null)}};if(s.async)var ival=setInterval(onreadystatechange,13);try{xhr.send(s.data)}catch(e){s.error&&s.error(ERR_NONE_FILE)}s.async||onreadystatechange()},ajok:function(xhr){try{return!xhr.status&&$.local||200<=xhr.status&&xhr.status<300||304==xhr.status||0===xhr.status}catch(e){}return!1},io:function(path,bScript,hook,data,noquit,unerr){var id,ret=0,async=!!hook;return(hook="function"==typeof hook?hook:null)&&!noquit&&(id=$.getAsync()),$.tpAjax({type:data?"POST":"",url:path,bScript:bScript,async:async,data:data||null,success:function(data){hook?($.checkAsync(id)||noquit)&&hook(data):ret=data},error:function(errno){errno==ERR_NOT_ACCEPTED?window.location.reload(!0):errno==ERR_NONE_FILE?($.cgi("/cgi/logout"),window.location.reload(!0)):(errno>ERR_NETWORK&&(errno=ERR_NETWORK),$.err("io",errno,unerr)),hook?($.checkAsync(id)||noquit)&&hook(data):ret=errno}}),ret},stkPop:function(stack,times){times=times||1,stack instanceof Array&&(stack=stack.join(","));for(var i=1,l=(stack=stack.split(",")).length;i<l&&0!=stack[i];i++);for(i--;0<times;i--,times--)stack[i]=0;return stack.join(",")},cgi:function(path,arg,hook,noquit,unerr){path=$.local||$.sim?$.params:(path||$.curPage.replace(/\.htm$/,".cgi"))+(arg?"?"+$.toStr(arg,"=","&"):""),$.ret=0;var func=hook?function(ret){!ret&&(ret=$.ret)&&$.err("cgi",$.ret,unerr),"function"==typeof hook&&hook(ret)}:null,ret=$.io(path,!0,func,null,noquit,unerr);return!ret&&(ret=$.ret)&&$.err("cgi",$.ret,unerr),ret},ansiarg:[],ansi:function(str){for(var arr=str.split("\r\n"),i=0,l=arr.length;i<l;i++){var ret=arr[i].split("=");(ret=[ret.shift(),ret.join("=")])[1]&&$.asc(ret[1],!0)&&(arr[i]="\\"+ret[0],$.ansiarg.push(ret))}return arr.join("\r\n")},as:[],ds:[],act:function(type,oid,stack,pStack,attrs){if(!type||!oid)return!1;stack=stack||"0,0,0,0,0,0",pStack=pStack||"0,0,0,0,0,0",attrs=(attrs=$.toStr(attrs,"=","\r\n",!0)).replace(/__stack=[0-9,]*\r\n/,"");var ret=null;switch(type){case ACT_ADD:$.cn&&(attrs=$.ansi(attrs));case ACT_GET:ret={};break;case ACT_GL:case ACT_GS:ret=[];break;case ACT_SET:case ACT_CGI:case ACT_DEL:oid=oid||$.curPage.replace(/\.htm$/,".cgi"),$.cn&&(attrs=$.ansi(attrs));case ACT_OP:break;default:return!1}return $.as.push([type,null,oid,stack,pStack,attrs,attrs?attrs.match(/\r\n/g).length:0]),$.ds.push(ret),ret},exe:function(hook,unerr,securityLevel){var url,data,tmpdata,index,obj,bAnsi=!1;if(0==$.as.length||$.local||$.sim){for(hook&&"function"==typeof hook&&$.timeout(hook,200);void 0!==$.as.pop(););for(;void 0!==$.ds.pop(););return 0}for($.emptyElem($.id("ansiform"));$.ansiarg.length;)obj=$.ansiarg.shift(),$.appendElem($.id("ansiform"),"<input type='hidden' name='"+obj[0]+"' value='"+obj[1].replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/'/g,"&apos;")+"' />"),bAnsi=!0;for(var savedds=$.mkArr($.ds);0<$.as.length;){var tmpheader,tmpds=[];if(url="/cgi?",index=0,tmpdata=data="",INCLUDE_LOGIN_GDPR_ENCRYPT&&0!=securityLevel&&(url="/cgi_gdpr?"),INCLUDE_LOGIN_GDPR_ENCRYPT&&null!=url.match("/cgi_gdpr")){for(;obj=$.as.shift();){if(tmpheader=tmpdata+obj[0]+(obj[1]?"="+obj[1]:"")+"&",1519<(tmpdata+obj[0]+(obj[1]?"="+obj[1]:"")+"&\r\n"+data+"["+obj[2]+"#"+obj[3]+"#"+obj[4]+"]"+index+","+obj[6]+"\r\n"+obj[5]).length||60<tmpheader.length){$.as.unshift(obj);break}tmpdata+=obj[0]+(obj[1]?"="+obj[1]:"")+"&",data+="["+obj[2]+"#"+obj[3]+"#"+obj[4]+"]"+index+","+obj[6]+"\r\n"+obj[5],index++,$.ds.shift(),0<savedds.length&&tmpds.push(savedds.shift())}tmpdata=tmpdata.substr(0,tmpdata.length-1),data=tmpdata=tmpdata+"\r\n"+data}else for(;obj=$.as.shift();){if(2048<(data+"["+obj[2]+"#"+obj[3]+"#"+obj[4]+"]"+index+","+obj[6]+"\r\n"+obj[5]).length){$.as.unshift(obj);break}url+=obj[0]+(obj[1]?"="+obj[1]:"")+"&",data+="["+obj[2]+"#"+obj[3]+"#"+obj[4]+"]"+index+","+obj[6]+"\r\n"+obj[5],index++,$.ds.shift(),0<savedds.length&&tmpds.push(savedds.shift())}url=url.substr(0,url.length-1);var resolve=function(ret,ds){if("number"!=typeof ret){var lines=ret.split("\n");ret=0;for(var scripts="",i=$.ret=0,l=lines.length;i<l;i++)if(""!=lines[i])if("["==lines[i].charAt(0)){if(""!=scripts){if($.script(scripts),$.ret){ret=$.ret,$.err("cgi",ret,unerr);break}scripts=""}var instance,n=lines[i].indexOf("]"),j=parseInt(lines[i].substr(n+1),10),stack=lines[i].substr(1,n-1);if("error"==stack){if(j){71017!=(ret=j)&&$.err("exe",ret,unerr);break}}else ds[j]instanceof Array?(instance={__stack:stack},ds[j].push(instance)):null!=ds[j]&&((instance=ds[j]).__stack=stack)}else if("cgi"==stack)scripts+=lines[i]+"\n";else{var attr=lines[i].split("=");instance[attr[0]]=attr.slice(1).join("=")}}for(;ds.length;)ds.pop();return ret};if(bAnsi){var formObj=$.d.forms[0];try{formObj.target="up_frame",formObj.action="/cgi/ansi",formObj.submit()}catch(e){}}if(hook){var resolve2=function(){$.io(url,!1,function(ret){ret=resolve(ret,tmpds),"function"==typeof hook&&hook(ret)},data,!1,unerr)};if(bAnsi?$.timeout(resolve2,100):resolve2(),0==$.as.length)return 0}else for(;ret=$.io(url,!1,null,data,!1,unerr);){if(ret=resolve(ret,tmpds),71017!=ret){if(0==$.as.length)return ret;break}if(count++,3<count)return $.err("exe",71017,unerr)}}}});