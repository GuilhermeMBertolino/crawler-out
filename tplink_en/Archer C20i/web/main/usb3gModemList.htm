<script language="javascript" type="text/javascript">
var usb3gLinkCfgStk;
var usbModemParams;
var usb3gList;

function escapeStr(str) 
{
	return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
}

function init()
{
	usb3gList = $.act(ACT_GL, WAN_USB_3G_LINK_CFG, null, null, ["enable"]);
	if (!$.exe())
	{
		$.each(usb3gList, function()
		{
			if (this.enable == 1) 
			{
				usb3gLinkCfgStk = this.__stack;
				usbModemParams = $.act(ACT_GS, USB_MODEM_PARAM, null, this.__stack, null);
				return false;
			}
		});
		if (!$.exe())
		{
			var i = 0;
			$.each(usbModemParams, function()
			{
				i++;
				var modem_tbl = $.id("modem_tbl");
				var newrow = modem_tbl.insertRow(-1);
				var cell = newrow.insertCell(-1);
				cell.innerHTML = i;
				var cell = newrow.insertCell(-1);
				cell.innerHTML = escapeStr(this.vendorName);
				var cell = newrow.insertCell(-1);
				cell.innerHTML = escapeStr(this.productName);
				var cell = newrow.insertCell(-1);
				var idx = i - 1;
				cell.innerHTML = "<span class='a T T_del' onClick='doDel(" + idx + ");'>"+m_str.del+"</span>";
			});
			
			if (i == 0)
			{
				$.id("DelBtn").disabled = true;
			}
			else if (i >= 4)
			{
				$.id("AddBtn").disabled = true;
			}
		}
	}
}

function doBack()
{
	$.loadMain("usb3g.htm");
}

function doAdd()
{
	$.loadMain("usb3gUpload.htm");
}

function doDel(idx)
{
	$.act(ACT_DEL, USB_MODEM_PARAM, usbModemParams[idx].__stack, null, null);
	if (!$.exe())
	{
		$.reload();
	}
}

function doDelAll()
{
	if(confirm(c_str.usb3g_del_all))
	{
		$.addLoading($.id("DelBtn"));
		$.each(usbModemParams, function()
		{
			$.act(ACT_DEL, USB_MODEM_PARAM, this.__stack, null, null);
		});
		$.exe(function(ret){if (!ret) $.reload();});
	}
	else
	{
		$.reload();
	}
}
</script>

<p class="et T" id="et">3G USB Modem Settings</p>
<div class="con1 L">
	<p class="ct"></p>
	<p class="bl"></p>
	<div class="con2">
		<table class="XL tc" id="modem_tbl">
			<tr>
				<th><b class="T" id="t_id">ID</b></th>
				<th><b class="T" id="t_vendor">Vendor</b></th>
				<th><b class="T" id="t_model">Model</b></th>
				<th><b class="T T_del">Delete</b></th>
			</tr>
		</table>
		<p class="br"></p>
		<p class="br"></p>
		<p class="L1">
			<input type="button" class="button XL T T_addnew" id="AddBtn" value="Add New" onclick="doAdd();"/>
			<input type="button" class="button XL T T_delall" id="DelBtn" value="Delete All" onclick="doDelAll();"/>
		</p>
	</div>
	<div id="back_line_btn">
	<p class="bl"></p>
	<p class="tail">
		<input type="button" class="button L T T_back" value="Back" id="back" onClick="doBack()"/>
	</p>
	</div>
</div>
<script language="javascript" type="text/javascript">
init();
</script>