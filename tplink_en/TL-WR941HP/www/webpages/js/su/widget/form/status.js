(function(a){a.su.Widget("status",{defaults:{proxy:null,fieldLabel:null,interval:500,loadingText:a.su.CHAR.OPERATION.CONNECTING,loadedText:a.su.CHAR.OPERATION.CONNECTED,loadedFailedText:a.su.CHAR.OPERATION.CONNECTFAILED,unloadingText:a.su.CHAR.OPERATION.DISCONNECTING,unloadedText:a.su.CHAR.OPERATION.DISCONNECTED,unloadedFailedText:a.su.CHAR.OPERATION.DISCONNECTFAILED,showText:true},create:function(d,b){var c=this;c.each(function(j,l){var e=a(l);a.extend(l,d,b);var k='<div class="container widget-container status-container '+l.cls+'">';if(l.fieldLabel!==null){k+='<div class="widget-fieldlabel-wrap '+l.labelCls+'">';k+='<label class="widget-fieldlabel status-fieldlabel">'+l.fieldLabel+"</label>";if(l.fieldLabel!==""){k+='<span class="widget-separator">'+l.separator+"</span>"}k+="</div>"}k+='<div class="widget-wrap status-wrap">';k+='<span class="icon"></span>';var h=l.textCls||"";k+='<span class="text '+h+'"></span>';k+="</div>";k+="</div>";var f=a(k);e.replaceWith(f);f.append(e.addClass("hidden"));if(!l.showText){f.find("span.text").css("display","none")}var g=l.proxy;if(g&&!g.isProxy){l.proxy=new a.su.Proxy(g)}});c.status("setNormal");return c},sync:function(d,h){var d=d||this,g=d.get(0),b=g.proxy,e=h[1]||{},f=h[2]||null,c=h[3]||null;if(!b||!b.isProxy){return d}b.write(e,function(j,i,k){if(f){f.call(d,j,i,k)}},function(k,i,j){if(c){c.call(d,i,j)}});return d},connect:function(c,g){var c=c||this,f=c.get(0),d=g[1]||{},e=g[2]||null,b=g[3]||null,d=a.extend({operation:"connect"},d);c.status("setLoading",f.loadingText);c.status("sync",d,function(i,h,j){c.status("setSuccess",f.loadedText);if(e){e.call(c,i,h,j)}},function(h,i){loadedFailedTextArray;c.status("setFailed",f.loadedFailedText);if(b){b.call(c,h,i)}});return c},disconnect:function(c,g){var c=c||this,f=c.get(0),d=g[1]||{},e=g[2]||null,b=g[3]||null,d=a.extend({operation:"disconnect"},d);c.status("setLoading",f.unloadingText);c.status("sync",d,function(i,h,j){c.status("setSuccess",f.unloadedText);if(e){e.call(c,i,h,j)}},function(h,i){c.status("setFailed",f.unloadedFailedText);if(b){b.call(c,h,i)}});return c},refresh:function(c,g){var c=c||this,f=c.get(0),d=g[1]||{},e=g[2]||null,b=g[3]||null;d=a.extend({operation:"refresh"},d);c.status("sync",d,function(i,h,j){if(e){e.call(c,i,h,j)}},function(h,i){if(b){b.call(c,h,i)}});return c},reset:function(c){var c=c||this,b=c.closest("div.status-container"),d=b.find("div.status-wrap span.text");d.empty();b.removeClass("loading failed success normal");return c},setNormal:function(c,d){var c=c||this,b=c.closest("div.status-container"),d=d[1]||"";c.status("reset");b.addClass("normal");c.status("setText",d);return c},setSuccess:function(c,d){var c=c||this,b=c.closest("div.status-container"),d=d[1]||"";c.status("reset");b.addClass("success");c.status("setText",d);return c},setFailed:function(c,d){var c=c||this,b=c.closest("div.status-container"),d=d[1]||"";c.status("reset");b.addClass("failed");c.status("setText",d);return c},setLoading:function(c,d){var c=c||this,b=c.closest("div.status-container"),d=d[1]||"";c.status("reset");b.addClass("loading");c.status("setText",d);return c},setText:function(c,e){var c=c||this,b=c.closest("div.status-container"),d=b.find("div.status-wrap span.text"),e=e[1]||"";d.empty().html(e);return c}})})(jQuery);