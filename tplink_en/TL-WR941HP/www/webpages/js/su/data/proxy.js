(function(a){a.su.Proxy=function(b){var d={xtype:"proxy",url:null,async:true,timeout:10*1000,reader:{url:null,root:"data",type:null,timeout:null},writer:{url:null,root:"data",type:null,timeout:null},type:"POST",dataType:"json"};var c=a.extend(d,b);c.reader.url=c.reader.url||c.url;c.reader.type=c.reader.type||c.type;c.reader.timeout=c.reader.timeout||c.timeout;c.reader.type=c.reader.type.toUpperCase();c.writer.url=c.writer.url||c.url;c.writer.type=c.writer.type||c.type;c.writer.timeout=c.writer.timeout||c.timeout;c.writer.type=c.writer.type.toUpperCase();a.extend(this,c);this.isProxy=true};a.su.Proxy.prototype.read=function(f,i,h,c,g,d){var f=a.extend({operation:"read"},f);var e=d||this,i=i||function(){},h=h||function(){},c=c||function(){},g=g===false?false:true;var b=e.reader.url;return a.ajax({url:e.reader.url,type:e.reader.type,timeout:e.reader.timeout,dataType:e.dataType,async:e.async,cache:false,data:f,traditional:true,success:function(m,l,n){if(m.success){var k=e.reader.root,j=null;if(k){j=m[k]}else{j=m}i.call(e,j,m.others,l,n);if(g){a(e).trigger("ev_read",[j,m.others,l,n])}}else{switch(m.errorcode){case"timeout":location.href="/";break;case"user conflict":if(a.su.app&&a.su.app.errorOperation&&a.su.app.errorOperation.userConflict){a.su.app.errorOperation.userConflict()}break;case"permission denied":if(a.su.app&&a.su.app.errorOperation&&a.su.app.errorOperation.denied){a.su.app.errorOperation.denied()}break;default:}h.call(e,m.errorcode,m.others,m.data);a(e).trigger("ev_failed",[m.errorcode,m.others,m.data])}},error:function(l,j,k){if(!e.preventErrorDefault){}c.call(e,l,j,k,b);a(e).trigger("ev_error",[l,j,k,b])}})};a.su.Proxy.prototype.write=function(f,i,h,c,g,d){var f=a.extend({operation:"write"},f);var e=d||this,i=i||function(){},h=h||function(){},c=c||function(){},g=g===false?false:true;var b=e.writer.url;return a.ajax({url:e.writer.url,type:e.writer.type,timeout:e.writer.timeout,dataType:e.dataType,cache:false,async:e.async,data:f,traditional:true,success:function(m,l,n){if(m.success){var k=e.writer.root,j=null;if(k){j=m[k]}else{j=m}i.call(e,j,m.others,l,n);if(g){a(e).trigger("ev_write",[j,m.others,l,n])}}else{switch(m.errorcode){case"timeout":location.href="/";break;case"user conflict":if(a.su.app&&a.su.app.errorOperation&&a.su.app.errorOperation.userConflict){a.su.app.errorOperation.userConflict()}break;case"permission denied":if(a.su.app&&a.su.app.errorOperation&&a.su.app.errorOperation.denied){a.su.app.errorOperation.denied()}break;default:}h.call(e,m.errorcode,m.others,m.data);a(e).trigger("ev_failed",[m.errorcode,m.others,m.data])}},error:function(l,j,k){if(!e.preventErrorDefault){}c.call(e,l,j,k);a(e).trigger("ev_error",[l,j,k,b])}})}})(jQuery);