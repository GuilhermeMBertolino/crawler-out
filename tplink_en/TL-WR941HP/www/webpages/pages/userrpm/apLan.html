<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Internet</title>
<style type="text/css">
	div.container.widget-container.text-container.offset{
		position: absolute;
		top:200px;
		left:540px;
	}
</style>
</head>
<body>
<div class="func-container">
	<div id="lan_panel">
		 <div id="lan-ipv4">
		 	<form id="lan-ipv4-setting">
		    	<input type="text"  id="ipv4_lan_mac_address" name="macaddr" value="" />
				<input id="rdo-type" name="lan_type"/>
		    	<input type="text"  id="ipv4_lan_ip_address" name="ipaddr" value="" />
		    	<input id="ipv4_lan_mask_address" name="mask_type" value="" />
		    	<input id="custom" name="custom_value" value="" />
				<input id="lan_gateway" name="lan_gw"/>
		    	<button id="lan_submit" type="button"></button>
		    </form>
		 </div>
	</div>
	<div id="lan_help"></div>
	<div id="lan_pro_msg" class="hidden">
		<div class="reboot-loading-msg">
			<p id="reboot_tips"></p>
			<input id="lan_pro" />
		</div>
	</div>
</div>
<script type="text/javascript">try{$}catch(e){location.href="/"}$(document).ready(function(h){$("div.func-container").page({title:$.su.CHAR.LAN.TITLE,help:""});var c=0;var o=0;var d=0;var b=0;var a=0;var g=0;var i=0;var f=new $.su.Proxy({url:$.su.url("/admin/network?form=status_ipv4")});f.read({},function(p){c=p.lan_ipv4_ipaddr;o=p.lan_ipv4_netmask;d=p.wan_ipv4_ipaddr;b=p.wan_ipv4_netmask;i=p.wan_ipv4_conntype;p.wan_ipv4_snd_ipaddr?a=p.wan_ipv4_snd_ipaddr:1;p.wan_ipv4_snd_netmask?g=p.wan_ipv4_snd_netmask:1});$("div#lan_panel").panel({title:$.su.CHAR.LAN.TITLE,collapsible:false});$("input#rdo-type").combobox({fieldLabel:"",items:[{name:$.su.CHAR.LAN.STATIC,value:"static"},{name:$.su.CHAR.LAN.DHCP,value:"dynamic"}]}).on("ev_change",function(q,p,r){if(r=="dynamic"){$("input#ipv4_lan_mac_address").closest(".widget-wrap").css("border-color","transparent");$("input#ipv4_lan_ip_address").textbox("disable");$("input#ipv4_lan_mask_address").combobox("disable");$("input#custom").textbox("disable");$("input#lan_gateway").textbox("disable")}else{$("input#ipv4_lan_ip_address").textbox("enable");$("input#ipv4_lan_mask_address").combobox("enable");$("input#custom").textbox("enable");$("input#lan_gateway").textbox("enable")}});$("input#ipv4_lan_mac_address").textbox({fieldLabel:$.su.CHAR.LAN.MAC_ADDRESS,readOnly:true});$("input#ipv4_lan_ip_address").textbox({fieldLabel:$.su.CHAR.LAN.IP_ADDRESS,allowBlank:false,textFormat:$.su.format.ip,vtype:"ip"});$("input#ipv4_lan_mask_address").combobox({fieldLabel:$.su.CHAR.LAN.SUBNET_MASK,cls:"inline",items:[{name:"255.255.255.0",value:"255.255.255.0"},{name:"255.255.0.0",value:"255.255.0.0"},{name:"255.0.0.0",value:"255.0.0.0"},{name:$.su.CHAR.LAN.CUSTOM,value:"custom"}]}).on("ev_change",function(r,p,q){switch(q[0]){case"custom":$("input#custom").get(0).allowBlank=false;$("input#custom").textbox("getContainer").css({display:"inline-block"});$("input#custom").textbox("enable");break;default:$("input#custom").get(0).allowBlank=true;$("input#custom").textbox("hide");$("input#custom").textbox("disable")}});$("input#custom").textbox({fieldLabel:null,cls:"inline-block hidden",allowBlank:false,vtype:"netmask"});$("input#lan_gateway").textbox({fieldLabel:$.su.CHAR.LAN.DEFAULT_GATEWAY,textFormat:$.su.format.ip,vtype:"ip",allowBlank:false});$("p#reboot_tips").html($.su.CHAR.LAN.REBOOT_TIP);var n=$("div#lan_pro_msg").msg({type:"window",global:true,closeBtn:false,cls:"warning reboot-confirm-size"});var m=$("input#lan_pro").progressbar({height:6,width:326});var k=new $.su.Proxy({timeout:20000,url:$.su.url("/admin/network?form=lan_ipv4")});var j="";$("form#lan-ipv4-setting").form({proxy:k,fields:[{name:"lan_type",mapping:"lan_type"},{name:"macaddr",mapping:"macaddr"},{name:"ipaddr",mapping:"ipaddr"},{name:"mask_type",mapping:"mask_type"},{name:"custom_value",mapping:"custom_value"},{name:"lan_gw",mapping:"lan_gw"}],submitBtn:"#lan_submit",validator:function(){if($("input#rdo-type").radio("getValue")=="dynamic"){return true}var p=$("input#ipv4_lan_ip_address").textbox("getValue");var q=$("input#ipv4_lan_mask_address").combobox("getValue")[0]=="custom"?$("input#custom").textbox("getValue"):$("input#ipv4_lan_mask_address").combobox("getValue")[0];var r=$("input#lan_gateway").textbox("getValue");if(!$.su.func.isNetIpLegal(p,q)){$("form#lan-ipv4-setting").form("setError",$.su.CHAR.ERROR["00000059"]);$("input#ipv4_lan_ip_address").textbox("setError");$("input#ipv4_lan_mask_address").combobox("setError");return false}if($.su.func.isNetIp(p,q)||$.su.func.isBroadCastIp(p,q)){$("form#lan-ipv4-setting").form("setError",$.su.CHAR.ERROR["00000059"]);$("input#ipv4_lan_ip_address").textbox("setError");return false}if(!$.su.func.isSameNet(p,r,q)){$("input#lan_gateway").textbox("setError",$.su.CHAR.ERROR["00000045"]);return false}if(!$.su.func.isNetIpLegal(r,q)){$("form#lan-ipv4-setting").form("setError",$.su.CHAR.ERROR["00000059"]);$("input#lan_gateway").textbox("setError");$("input#ipv4_lan_mask_address").combobox("setError");return false}if($.su.func.isNetIp(r,q)||$.su.func.isBroadCastIp(r,q)){$("form#lan-ipv4-setting").form("setError",$.su.CHAR.ERROR["00000059"]);$("input#lan_gateway").textbox("setError");return false}return true}}).on("ev_loadData",function(q,p){j=p.lan_type});$("button#lan_submit").button({text:$.su.CHAR.LAN.SAVE,cls:"submit",handler:function(){$("form#lan-ipv4-setting").form("submit",{},function(q){function p(u){var s=top.location.href;var t=s.indexOf("//");if(-1!=s.indexOf("tplink")){top.location.href=top.location.href}else{top.location.href=s.slice(0,t+2)+u}}if(q.new_ipaddr||j!=q.lan_type){n.msg("show");m.progressbar("reset");m.progressbar("animate",0,1,32000);var r=setTimeout(function(){p("tplinkwifi.net")},32000)}})}});var l=new $.su.Help({container:"div#lan_help",content:["LAN_IPV4"]})});</script>
</body>
</html>
