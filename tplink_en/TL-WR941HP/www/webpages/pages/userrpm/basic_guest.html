<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Guest</title>
</head>
<body>
<div class="func-container">
	<div id="guest_cnt">
	    <form id="guest_network">
			<div>
    		<input type="checkbox" id="isolate" name="guest_isolate"/>
			<input type="checkbox" id="access" name="guest_access"/>
			</div>
			<div>
		    	<input type="text"  id="status_2g" name="guest_2g_enable" value="" />
		    	<input type="text"  id="network_name_2g" name="guest_2g_ssid" value="" />
		    	<input type="checkbox"  id="enable_ssid_2g" name="guest_2g_hidden" value="" />
		    	<input type="hidden" name="guest_2g_encryption" id="guest_2g_encryption" disabled="disabled"  />
		    	<input type="hidden" name="guest_2g_psk_version" id="guest_2g_psk_version" disabled="disabled"  />
		    	<input type="hidden" name="guest_2g_psk_cipher" id="guest_2g_psk_cipher" disabled="disabled"   />
			</div>
			<div id="guest_password_2g">
				<div id="guest_static_dynamic_2g" class="hidden">
					<input type="text" name="guest_2g_passwd_cycle" id="guest_password_cycle_2g" />
					<div id="guest_password1_2g">
						<input type="text" id="guest_dynamic_password_2g"/>
					</div>
				</div>
				<div id="guest_password2_2g">
		    		<input type="text" id="guest_static_password_2g" />
					<input type="text"  class="hidden" name="guest_2g_psk_key" id="guest_2g_password"/>
		    	</div>
		    </div>
	    	<br/>
	    	<br/>
	    	<p class="note hidden" id="note_title_all">
		    	<span class="title note-title"></span>
		    	<span class="text" id="note_title_text"></span>
		    </p>
	    </form>
	    <button id="total_save" type="button"></button> 
	</div>
	<div id="help_basic_guest_network"></div>
</div>
<script type="text/javascript">try{$}catch(e){location.href="/"}$(document).ready(function(s){var m="./data/wireless.24g.json";var h=$.su.url("/admin/wireless?form=guest&form=guest_2g");var l=$.su.url("/admin/wireless?form=wireless_2g");var o=$.su.url("/admin/wireless?form=syspara_2g");var t=$.su.url("/admin/wireless?form=region");var v=new $.su.Proxy({url:o});var d="off";var a="off";var p="psk";var n="auto";var r="auto";var b="";var i="";$("span.note-title").text($.su.CHAR.OPERATION.NOTE);$("#note_title_text").html($.su.CHAR.ERROR["00000101"]);$("div#guest_cnt").panel({title:$.su.CHAR.BASIC_GUEST.TITLE,collapsible:false});$("input#isolate").checkbox({fieldLabel:"",labelCls:"l",items:[{boxlabel:$.su.CHAR.GUEST_SETTINGS.ALLOW_EACH,uncheckedValue:"off",inputValue:"on",id:"chk_allow_each"}]});$("input#access").checkbox({fieldLabel:"",labelCls:"l",items:[{boxlabel:$.su.CHAR.GUEST_SETTINGS.ALLOW_LOCAL,uncheckedValue:"off",inputValue:"on",id:"chk_allow_local"}]});if(window.sysMode=="ap"){$("input#access").checkbox("hide")}else{$("input#access").checkbox("show")}$("input#status_2g").checkbox({fieldLabel:$.su.CHAR.BASIC_GUEST.MODE_2G,labelCls:"l",tips:"",tipsCls:"s",cls:"part-separate",items:[{boxlabel:$.su.CHAR.BASIC_GUEST.ENABLE_WIRELESS,uncheckedValue:"off",inputValue:"on",id:"chk_enable_guest_24g"}]});$("input#guest_2g_password").textbox({});$("input#network_name_2g").textbox({fieldLabel:$.su.CHAR.BASIC_GUEST.WIRELESS_NETWORK_NAME,labelCls:"l",vtype:{vtype:"string_visible_allow_blank",maxLength:32},maxLength:32,autoTrim:false,tipsCls:"after-checkbox",allowBlank:false,cls:"inline-block",validator:function(y){var x=encodeURIComponent(y);x=x.replace(/%[A-F\d]{2}/g,"U").length;if(x>32){return $.su.CHAR.ERROR["00000210"]}return true}}).on("ev_change",function(x,z){var y=encodeURIComponent(z);y=y.replace(/%[A-F\d]{2}/g,"U").length;if(y==32){$(this).attr("maxLength",z.length)}else{if(y>32){$(this).attr("maxLength",z.length-1)}else{if(y<32){$(this).attr("maxLength",32)}}}});$("input#enable_ssid_2g").checkbox({fieldLabel:null,cls:"inline-block",items:[{boxlabel:$.su.CHAR.BASIC_GUEST.HIDE_SSID,uncheckedValue:"off",inputValue:"on",id:"chk_enable_ssid_broadcast"}]});var c={};var u=false;var k=new $.su.Proxy({url:t,async:false});k.read({},function(x){c=x.capability});var w=new $.su.Proxy({url:h});var j=w;var f=$("form#guest_network").form({proxy:j,fields:[{name:"guest_access"},{name:"guest_isolate"},{name:"guest_2g_enable"},{name:"guest_2g_ssid"},{name:"guest_2g_hidden"},{name:"guest_2g_passwd_cycle"},{name:"guest_2g_psk_key"}],autoLoad:true,submitBtn:"#total_save",validator:function(){var y=$("input#guest_password_cycle_2g").radio("getValue");var x=y=="never"?$("input#guest_static_password_2g").textbox("getValue"):$("input#guest_dynamic_password_2g").textbox("getValue");if(y=="never"){if(x==""){$("#guest_2g_encryption").val("none");$("#guest_2g_psk_version").val(r);$("#guest_2g_psk_cipher").val(n);$("#guest_2g_encryption").prop("disabled",false);$("#guest_2g_psk_version").prop("disabled",false);$("#guest_2g_psk_cipher").prop("disabled",false);$("#guest_2g_password").val(b)}}if(x!=""){if(p=="none"){var z=/^([A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\|\/\?\.\,\<\>\ ]{8,63}|[0-9a-fA-F]{8,64})$/;if(z.test(x)){}else{y=="never"?$("input#guest_static_password_2g").textbox("setError",$.su.CHAR.ERROR["00000066"]):$("input#guest_dynamic_password_2g").textbox("setError",$.su.CHAR.ERROR["00000066"]);return false}$("#guest_2g_encryption").val("psk");$("#guest_2g_psk_version").val("auto");$("#guest_2g_psk_cipher").val("auto");$("#guest_2g_encryption").prop("disabled",false);$("#guest_2g_psk_version").prop("disabled",false);$("#guest_2g_psk_cipher").prop("disabled",false)}if(p=="psk"){var z=/^([A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\|\/\?\.\,\<\>\ ]{8,63}|[0-9a-fA-F]{8,64})$/;if(z.test(x)){}else{y=="never"?$("input#guest_static_password_2g").textbox("setError",$.su.CHAR.ERROR["00000066"]):$("input#guest_dynamic_password_2g").textbox("setError",$.su.CHAR.ERROR["00000066"]);return false}$("#guest_2g_encryption").val(p);$("#guest_2g_psk_version").val(r);$("#guest_2g_psk_cipher").val(n);$("#guest_2g_encryption").prop("disabled",false);$("#guest_2g_psk_version").prop("disabled",false);$("#guest_2g_psk_cipher").prop("disabled",false)}$("#guest_2g_password").val(x)}return true}}).on("ev_loadData",function(z,y){var x=$("input#guest_2g_password").textbox("getValue");$("#guest_password_2g").css({display:"block"});b=y.guest_2g_psk_key;i=y.guest_2g_extinfo.support_guest_dynpasswd;if(i=="no"){$("#guest_password_cycle_2g").radio("setValue","never");$("#guest_static_dynamic_2g").css({display:"none"})}$("#guest_static_password_2g").textbox("setValue",x);$("#guest_dynamic_password_2g").textbox("setValue",x);if(y.guest_2g_passwd_cycle=="never"){if(y.guest_2g_encryption=="none"){$("#guest_static_password_2g").textbox("setValue","")}else{$("div#guest_password1_2g").css({display:"none"})}}else{$("div#guest_password2_2g").css({display:"none"})}p=y.guest_2g_encryption;n=y.guest_2g_psk_cipher;r=y.guest_2g_psk_version;if(p=="none"){$("#guest_2g_encryption").prop("disabled",false);$("#guest_2g_psk_version").prop("disabled",false);$("#guest_2g_psk_cipher").prop("disabled",false)}if(p=="psk"){$("#guest_2g_encryption").prop("disabled",true);$("#guest_2g_psk_version").prop("disabled",true);$("#guest_2g_psk_cipher").prop("disabled",true)}});$("#total_save").button({text:$.su.CHAR.BASIC_GUEST.SAVE,cls:"submit",handler:function(){var x=$("input#guest_password_cycle_2g").radio("getValue");if(x=="never"){switch(p){case"none":break;case"psk":$("#guest_network input[name='guest_2g_psk_key']").val($("#guest_static_password_2g").textbox("getValue"));break}}else{$("#guest_network input[name='guest_2g_psk_key']").val($("#guest_dynamic_password_2g").textbox("getValue"))}$("form#guest_network").form("submit")}});$.post(l,function(y){if(typeof y.data=="undefined"){return}d=y.data.disabled;a=y.data.disabled_all;var x=y.data.extinfo.wds_guest_compatible;if(d=="on"){$("input#status_2g").checkbox("disable");$("input#network_name_2g").textbox("disable");$("input#enable_ssid_2g").checkbox("disable");$("input#guest_password_cycle_2g").radio("disable");$("input#guest_dynamic_password_2g").textbox("disable");$("input#guest_static_password_2g").textbox("disable");$("#note_title_all").removeClass("hidden")}else{$("input#status_2g").checkbox("enable");$("input#network_name_2g").textbox("enable");$("input#enable_ssid_2g").checkbox("enable");$("input#guest_password_cycle_2g").radio("enable");$("input#guest_dynamic_password_2g").textbox("enable");$("input#guest_static_password_2g").textbox("enable");$("#note_title_all").addClass("hidden");if(a=="on"){$("#status_2g").checkbox("disable");$("#status_2g").checkbox("setTips",$.su.CHAR.WIRELESS.ENABLE_TIPS)}else{$("#status_2g").checkbox("enable");$("#status_2g").checkbox("setTips","");if(x=="no"){v.read({},function(z){enable=z.enable;if(enable=="on"){$("input#status_2g").checkbox("disable");$("input#status_2g").checkbox("setTips",$.su.CHAR.ERROR["00000113"])}else{}})}}}},"json");var g=new $.su.Help({container:"div#help_basic_guest_network",content:["BASIC_GUEST_NETWORK"],afterLoad:function(){if(i=="no"){$("#pwd_mode").hide();$("#pwd_no_random").show();$("#pwd_random").hide()}else{$("#pwd_mode").show();$("#pwd_no_random").hide();$("#pwd_random").show()}if(window.sysMode=="ap"){$("#guest_local").hide()}else{$("#guest_local").show()}}});$("input#guest_password_cycle_2g").radio({fieldLabel:$.su.CHAR.BASIC_GUEST.PASSWORD_CHANGE_CYCLE,columns:4,labelCls:"l",cls:"hidden",items:[{boxlabel:$.su.CHAR.BASIC_GUEST.PER_DAY,inputValue:"daily"},{boxlabel:$.su.CHAR.BASIC_GUEST.PER_WEEK,inputValue:"weekly"},{boxlabel:$.su.CHAR.BASIC_GUEST.PER_MONTH,inputValue:"monthly"},{boxlabel:$.su.CHAR.BASIC_GUEST.NEVER,inputValue:"never"}]}).on("ev_change",function(z,x,y){switch(y){case"never":$("div#guest_password1_2g").css({display:"none"});$("div#guest_password2_2g").css({display:"block"});$("div#guest_password2_2g").fadeIn(150);break;default:if(x!="never"){break}$("div#guest_password1_2g").css({display:"block"});$("div#guest_password2_2g").css({display:"none"});$("div#guest_password1_2g").fadeIn(150);$("input#guest_dynamic_password_2g").textbox("setValue",q());break}});$("#guest_password_2g").css({display:"none"});$("input#guest_static_password_2g").textbox({fieldLabel:$.su.CHAR.BASIC_GUEST.WIRELESS_PASSWORD,labelCls:"l",autoTrim:false,maxLength:64});$("input#guest_dynamic_password_2g").textbox({fieldLabel:$.su.CHAR.BASIC_GUEST.DYNAMIC_PASSWORD,labelCls:"l",readOnly:true});$("input#guest_dynamic_password_2g").css({"margin-left":"15px"});var q=function(){var x="";x+=parseInt(Math.random()*100000000,10);while(x.length<8){x="0"+x}return x};$("input#guest_dynamic_password_2g").textbox("setValue",q())});</script>
</body>
</html>
