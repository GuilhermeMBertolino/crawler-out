!function(r){r.su.moduleManager.define("mapInternet",{services:["moduleLoader","device","ajax","moduleManager"],models:["statusAll","internetConnect","lanAPNetworkMapModel","speedTestStatusModel"],stores:[],views:["mapInternetView"],listeners:{"ev_on_launch":function(e,t,n,i,o,s,r){this.unRegisterAutoSaveData([i.speedTestStatusModel]),n.mapInternetView.internetFieldset.hide(),n.mapInternetView.noInternetFieldset.hide(),n.mapInternetView.poorInternetFieldset.hide(),t.initSpeedTest()},"ev_before_destroy":function(e,t){t.beforeDestroy()}},init:function(e,t,n,i,o,s){this.configViews({id:"mapInternetView",items:[{id:"internet-conn-note",title:r.su.CHAR.NETWORK_MAP.TRY_FOLLOW,items:[{text:r.su.CHAR.NETWORK_MAP.TRY_1},{text:r.su.CHAR.NETWORK_MAP.TRY_2},{text:r.su.CHAR.NETWORK_MAP.TRY_3},{text:r.su.CHAR.NETWORK_MAP.TRY_4}]},{id:"internet-conn-note-poor",title:r.su.CHAR.NETWORK_MAP.POOR_TRY_FOLLOW,items:[{text:r.su.CHAR.NETWORK_MAP.POOR_TRY_1},{text:r.su.CHAR.NETWORK_MAP.POOR_TRY_2},{text:r.su.CHAR.NETWORK_MAP.POOR_TRY_3},{text:r.su.CHAR.NETWORK_MAP.POOR_TRY_4}]}]}),this.listen({}),this.control({"#support":{"click":function(){location.href="https://www.tp-link.com/"}}})}},function(t,n,i,e,o,s){return{initSpeedTest:function(){"router"==s.device.getCurrentMode()?(t.loadNetworkMap(),i.speedTestStatusModel.getProxy().getStatus({success:function(e){i.speedTestStatusModel.loadData(e,!0),t.loadSpeedTest(0!=e.is_available)},error:function(){t.loadSpeedTest(!0)},fail:function(){t.loadSpeedTest(!0)}})):t.loadApNetworkMap()},loadSpeedTest:function(e){e&&(i.speedTestStatusModel.isAvailable.setValue(!0),s.moduleLoader.load({module:"mapInternet"},{module:"speedTest",view:"speedTestView"},n.mapInternetView.speedTestLoader))},loadNetworkMap:function(){n.mapInternetView.internetStatusPanel.show(),n.mapInternetView.lanStatusPanel.hide()},loadApNetworkMap:function(){i.lanAPNetworkMapModel.load(),n.mapInternetView.internetStatusPanel.hide(),n.mapInternetView.lanStatusPanel.show()},setInternetStatus:function(e){"router"!==s.device.getCurrentMode()||"CONNECTED"===e.internetStatus.toUpperCase()?(n.mapInternetView.internetFieldset.show(),n.mapInternetView.poorInternetFieldset.hide(),n.mapInternetView.noInternetFieldset.hide()):"POOR_CONNECTED"===e.internetStatus.toUpperCase()?(n.mapInternetView.internetFieldset.hide(),n.mapInternetView.poorInternetFieldset.show(),n.mapInternetView.noInternetFieldset.hide()):(n.mapInternetView.internetFieldset.hide(),n.mapInternetView.poorInternetFieldset.hide(),n.mapInternetView.noInternetFieldset.show())},beforeDestroy:function(){}}})}(jQuery);