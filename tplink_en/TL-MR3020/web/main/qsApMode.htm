<script language="javascript" type="text/javascript">
var curMode = "AP";
var curApType = '0';

function initMode(modeObj)
{
	if(modeObj.mode == "AP" && $.qd.setApModeType)
	{
		if($.qd.setApModeType == '0')
			$("#AP").prop("checked", true);
		else if($.qd.setApModeType == '3')
			$("#RE").prop("checked", true); 
		else
			$("#AP").prop("checked", true);
	}
	else
	if (modeObj.mode == "AP" && modeObj.apModeType == '0')
	{
		$("#AP").prop("checked", true);
	}else if (modeObj.mode == "AP" && modeObj.apModeType == '3') {
		$("#RE").prop("checked", true);        	
	} else {
		$("#AP").prop("checked", true);
	}
}
function sysModeInit() {

    var sysMode = $.act(ACT_GET, SYS_MODE, null, null);
	var modeObj = {};

    if (!$.exe()) {
		modeObj = sysMode;
		curMode = sysMode.mode;
		curApType = sysMode.apModeType;
        initMode(modeObj);		
    }
}
function realNext()
{
	/*if ($.qd.setMode == "AP" && $.qd.apModeType == '0')
		loadSubPage("qsWl.htm");
    else if ($.qd.setMode == "AP" && $.qd.apModeType == '3')
        loadSubPage("qsWlClient.htm");
	else */
	if($.qd.curApModeType == '0' && $.qd.setApModeType == '3')
		flowSteps[2].file = "qsWlClient.htm";
	else if($.qd.curApModeType == '3' && $.qd.setApModeType == '0')
		flowSteps[2].file = "qsWl.htm";
	else if($.qd.curApModeType == '0' && $.qd.setApModeType == '0')
		flowSteps[2].file = "qsWl.htm";
	else if($.qd.curApModeType == '3' && $.qd.setApModeType == '3')
		flowSteps[2].file = "qsWlClient.htm";
	
	$.qf.next();
}

function goNext() {
    var sysModeArg = {};
	$.qd.setMode = "AP";
	if($.qd.setApModeType)
		$.qd.lastSetApModeType = $.qd.setApModeType;
    if ($("#AP").prop("checked")) {
        $.qd.setApModeType = "0";		
		$.qd.modeName = "Access Point Mode";
    } 
	else if ($("#RE").prop("checked")) {
        $.qd.setApModeType = "3";
		$.qd.modeName = "Repeater/Bridge Mode";
    } 
	
	$.qd.sysModeChg = 1;
	if ($.qd.setApModeType == curApType)
		$.qd.sysModeChg = 0;
	
	$.qd.curMode = curMode;
	$.qd.curApModeType = curApType;

	if ($.qd.curApModeType != $.qd.setApModeType)
	{
		$.confirm(c_str.qschgmod,
	        function() {realNext();},
	        function() {return;}
	    );
	}
	else
		realNext();
}
</script>
<div class="quicksetup_sysMode_container">
    <form class="pure-form pure-form-aligned">
        <div id="typeAP" >
            <input type="radio" name="sysMode" id="AP" value="AP" />
            <label id="t_sysmod1">Access Point Mode</label>
        </div>
        <div id="typeRE">
            <input type="radio" name="sysMode" id="RE" value="RE" />
            <label id="t_sysmod2">Repeater/Bridge Mode</label>
        </div>
        <!--
        <button type="submit" class="green T_save" value="Save" id="b_save" onclick="doSave()">Save</button>
		-->
    </form>
</div>
<div class="inline-btn-right quicksetup-button-container">
	<div class="inline">
		<button type="submit" class="green T_back" id="back" onclick="$.qf.prev()">Back</button>
	</div>
	<div class="inline">
		<button type="submit" class="green T_next" id="next" onclick="goNext()">Next</button>
	</div>
</div>
<script language="javascript" type="text/javascript">
$.tpInit(sysModeInit);
</script>
