<h3 id="t_manualReboot"></h3>
<div class="content-container">
    <form class="pure-form pure-form-aligned">
        <button type="submit" class="green T_reboot" id="rebootBtn"></button> 
    </form>
</div>
<h3 id="t_autoRebootT"></h3>
<div class="content-container">
    <form class="pure-form pure-form-aligned">
        <div class="button-group-container">
            <b id="t_autoReboot" class="l"></b>
            <ul>
                <li>
                    <button id="t_on" class="fst" value="on"></button>
                </li>
                <li>
                    <button id="t_off" class="lst" value="off"></button>
                </li>
            </ul>
        </div>
        <div id="timeCont">
                <b id="t_time" class="l pl-m it-xxs"></b>
                <select id="hours" class="xs inline">
                    <option value="0">00</option>
                    <option value="1">01</option>
                    <option value="2">02</option>
                    <option value="3">03</option>
                    <option value="4">04</option>
                    <option value="5">05</option>
                    <option value="6">06</option>
                    <option value="7">07</option>
                    <option value="8">08</option>
                    <option value="9">09</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                </select>
                <b class="time-separater">:</b>
                <select id="minutes" class="xs inline">
                    <option value="0" id="t_min0">00</option>
                    <option value="1" id="t_min1">01</option>
                    <option value="2" id="t_min2">02</option>
                    <option value="3" id="t_min3">03</option>
                    <option value="4" id="t_min4">04</option>
                    <option value="5" id="t_min5">05</option>
                    <option value="6" id="t_min6">06</option>
                    <option value="7" id="t_min7">07</option>
                    <option value="8" id="t_min8">08</option>
                    <option value="9" id="t_min9">09</option>
                    <option value="10" id="t_min10">10</option>
                    <option value="11" id="t_min11">11</option>
                    <option value="12" id="t_min12">12</option>
                    <option value="13" id="t_min13">13</option>
                    <option value="14" id="t_min14">14</option>
                    <option value="15" id="t_min15">15</option>
                    <option value="16" id="t_min16">16</option>
                    <option value="17" id="t_min17">17</option>
                    <option value="18" id="t_min18">18</option>
                    <option value="19" id="t_min19">19</option>
                    <option value="20" id="t_min20">20</option>
                    <option value="21" id="t_min21">21</option>
                    <option value="22" id="t_min22">22</option>
                    <option value="23" id="t_min23">23</option>
                    <option value="24" id="t_min24">24</option>
                    <option value="25" id="t_min25">25</option>
                    <option value="26" id="t_min26">26</option>
                    <option value="27" id="t_min27">27</option>
                    <option value="28" id="t_min28">28</option>
                    <option value="29" id="t_min29">29</option>
                    <option value="30" id="t_min30">30</option>
                    <option value="31" id="t_min31">31</option>
                    <option value="32" id="t_min32">32</option>
                    <option value="33" id="t_min33">33</option>
                    <option value="34" id="t_min34">34</option>
                    <option value="35" id="t_min35">35</option>
                    <option value="36" id="t_min36">36</option>
                    <option value="37" id="t_min37">37</option>
                    <option value="38" id="t_min38">38</option>
                    <option value="39" id="t_min39">39</option>
                    <option value="40" id="t_min40">40</option>
                    <option value="41" id="t_min41">41</option>
                    <option value="42" id="t_min42">42</option>
                    <option value="43" id="t_min43">43</option>
                    <option value="44" id="t_min44">44</option>
                    <option value="45" id="t_min45">45</option>
                    <option value="46" id="t_min46">46</option>
                    <option value="47" id="t_min47">47</option>
                    <option value="48" id="t_min48">48</option>
                    <option value="49" id="t_min49">49</option>
                    <option value="50" id="t_min50">50</option>
                    <option value="51" id="t_min51">51</option>
                    <option value="52" id="t_min52">52</option>
                    <option value="53" id="t_min53">53</option>
                    <option value="54" id="t_min54">54</option>
                    <option value="55" id="t_min55">55</option>
                    <option value="56" id="t_min56">56</option>
                    <option value="57" id="t_min57">57</option>
                    <option value="58" id="t_min58">58</option>
                    <option value="59" id="t_min59">59</option>
                </select>
                <span class="time-separater" style="margin-left:20px;">(HH:MM)</span> 
        </div>
        <div id="rebootInterval">
            <b class="l" id="t_interval"></b>
            <input type="radio" name="interval" id="interval_three" checked="checked"/>
            <label id="t_three"></label>
            <input type="radio" name="interval" id="interval_seven" />
            <label id="t_seven"></label>
            <input type="radio" name="interval" id="interval_thirty" />
            <label id="t_thirty"></label>
        </div>
        <div class="part-separate" id="t_note"></div>
        <div class="part-separate"></div>
        <button type="submit" class="green T_save" id="t_save"></button>
    </form>
</div>

<script type="text/javascript">
(function() {

    $.tpInit(init);

    function init() {
        var rsCfg = $.act(ACT_GET, REBOOT_SCHEDULE_CFG);

        if (!$.exe()) {
            if (rsCfg.enable == 1) {
                $("#t_on").addClass("selected");
                $("#timeCont").removeClass("nd");
                $("#rebootInterval").removeClass("nd");
            } else if (rsCfg.enable == 0) {
                $("#t_off").addClass("selected");
                $("#timeCont").addClass("nd");
                $("#rebootInterval").addClass("nd");
            }

            $('#hours').find('option[value="' + rsCfg.hours + '"]').prop('selected', 'selected');
            $('#minutes').find('option[value="' + rsCfg.minutes + '"]').prop('selected', 'selected');

            if (rsCfg.interval == 3) {
                $("#interval_three").prop("checked", true);
            } else if (rsCfg.interval == 7) {
                $("#interval_seven").prop("checked", true);
            }else {
                $("#interval_thirty").prop("checked", true);
            }
        }

    }

    $("#rebootBtn").click(function() {
        $.confirm(c_str.creboot, function() {
            $.clearAsync();
            $.guage(["<span class='T T_rebooting'>" + s_str.rebooting + "</span>", "<span class='T T_wait_reboot'>" + s_str.wait_reboot + "</span>"], 100, $.guageInterval, function() {
                $.refresh();
            });
            $.act(ACT_OP, ACT_OP_REBOOT);
            $.exe(true);
        });
        return false;
    });

    $("#t_on").click(function() {
        $.act(ACT_SET, REBOOT_SCHEDULE_CFG, null, null, ["enable=1"]);
        $.exe(function() {
            $.reload();
        });
    });

    $("#t_off").click(function() {
        $.act(ACT_SET, REBOOT_SCHEDULE_CFG, null, null, ["enable=0"]);
        $.exe(function() {
            $.reload();
        });
    });

    $("#t_save").click(function() {
        $.addLoading($(this));
        var rsCfg = {};
        var refresh = false;
        
        rsCfg.hours = $("#hours").data('value');
        rsCfg.minutes = $("#minutes").data('value');
        if (true ==$("#interval_three").prop("checked")) {
            rsCfg.interval = 3;
        } else if (true ==$("#interval_seven").prop("checked")) {
            rsCfg.interval = 7;
        } else{
            rsCfg.interval = 30;
        }
        
        $.act(ACT_SET, REBOOT_SCHEDULE_CFG, null, null, rsCfg);
        
        $.exe(function() {
            $.removeLoading();
            $.reload();
        });
    });
})();
</script>