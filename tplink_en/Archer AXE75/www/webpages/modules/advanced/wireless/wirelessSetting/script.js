!function(b){b.su.moduleManager.define("wirelessSettings",{models:["lanAdvLanModel","regionWirelessModel","regionWirelessCapabilityModel","wirelessSettingsControl","ofdmaModel","twtModel","wirelessSmartConn","wireless24g","wireless5g1","wireless5g2","wireless6g","ffsModel"],stores:["regionStore"],services:["moduleLoader","ajax","device","moduleManager"],views:["wirelessSettingsView"],deps:["utils","main"],listeners:{"ev_on_launch":function(e,s,a,i,n,l,r){i.ofdmaModel.enable.hide(),r.device.getOFDMA()&&(i.ofdmaModel.enable.show(),i.ofdmaModel.load()),r.device.getConfig().supportTWT&&(i.twtModel.enable.show(),i.twtModel.load()),s.isTriband&&s.supportWifi6E||a.wirelessSettingsView.wirelessDisappearDfsNote.hide(),s.supportWifi6E&&(a.wirelessSettingsView.wirelessSettingsPanel.setInstruction(b.su.CHAR.WIRELESS_SETTINGS.WIRELESS_SETTINGS_INTRO_6G),i.wirelessSmartConn.smartEnable.setToolTip(b.su.CHAR.WIRELESS_SETTINGS.SMART_CONN_NOTE_6G)),this.prepare().done(function(){s.launchModules()})},ev_region_reload:function(){}},init:function(m,c,h,e,_,S){this.control({".index-common-save-btn":{"ev_will_auto_save":function(e,s,a){for(var i,n,l,r,t,o,g,w,p=!1,d=0,u=a.length;d<u;d++)-1<a[d].dataObj.name.indexOf("wireless")&&(p=!0);p&&(i=S.moduleManager.get("wirelessAdv24g"),n=S.moduleManager.get("wirelessAdv5g1"),l=i.getWifiInfo(),r=n.getWifiInfo(),m.isTriband?o=(t=S.moduleManager.get("wirelessAdv5g2")).getWifiInfo():m.supportWifi6E&&(w=(g=S.moduleManager.get("wirelessAdv6g")).getWifiInfo()),"on"===h.wirelessSmartConn.smartEnable.getValue()&&(c.wirelessSettingsView.wirelessNetwork24g.setLabelField(b.su.CHAR.WIRELESS_SETTINGS.SMART_CONN),m.supportWifi6E&&c.wirelessSettingsView.wirelessNetwork24g.setLabelField(b.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G_5G),r.enable=l.enable,m.isTriband&&(o.enable=l.enable)),!i.beforeSubmit()||!n.beforeSubmit()||t&&!t.beforeSubmit()||g&&!g.beforeSubmit()||(l.enable||r.enable||m.isTriband&&o.enable||m.supportWifi6E&&w.enable?l.enable||r.enable||m.isTriband&&o.enable||!m.supportWifi6E||!w.enable?m.submitWirelessSetting():_.main.confirm(b.su.CHAR.WIRELESS_SETTINGS.WLAN_ONLY_6G_NOTE,function(){m.submitWirelessSetting()},null,b.su.CHAR.WIRELESS_SETTINGS.DISABLE_ANYWAY):_.main.confirm(b.su.CHAR.WIRELESS_SETTINGS.WLAN_ONT_ON_NOTE,function(){m.submitWirelessSetting()},null,b.su.CHAR.WIRELESS_SETTINGS.DISABLE_ANYWAY)))}}}),this.listen({"models.regionWirelessModel":{"ev_loaded":function(e,s){var a=h.regionWirelessModel.capability.getValue();h.regionWirelessCapabilityModel.loadData(a,!0),m.region=s.country.toUpperCase(),m.initRegionData(),m.trigger("ev_region_reload")}},"models.ffsModel":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wireless24g":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wireless5g1":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wireless5g2":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wireless6g":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wirelessSmartConn":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wirelessSmartConn.smartEnable":{"ev_value_change":function(e,s,a){"on"===s?(S.moduleManager.get("wirelessAdv5g1").setEnableLabel(!0),S.moduleManager.get("wirelessAdv24g").setEnableLabel(!0),m.isTriband&&S.moduleManager.get("wirelessAdv5g2").setEnableLabel(!0)):(S.moduleManager.get("wirelessAdv5g1").setEnableLabel(),S.moduleManager.get("wirelessAdv24g").setEnableLabel(),m.isTriband&&S.moduleManager.get("wirelessAdv5g2").setEnableLabel())}}})}},function(_,t,S,e,f,v){var o=null,n=!0,l=!0,r=!0,g=!0,s=!0;return{isTriband:v.device.getIsTriband()&&!v.device.getConfig().supportWifi6E,supportWifi6E:v.device.getConfig().supportWifi6E,getLanIP:function(){return S.lanAdvLanModel.ipaddr.getValue()},prepare:function(){var e=b.Deferred(),s=!1,a=!1;return S.regionWirelessModel.load({success:function(){a=!0,s&&e.resolve(!0)}}),S.lanAdvLanModel.load({success:function(){s=!0,a&&e.resolve(!0)}}),e.promise()},MODE:{"ADVANCED":"advanced","BASIC":"basic","QUICK_SETUP":"qs"},setMode:function(e){o=e},getMode:function(){return o},launchChildrenModules:function(){var e;switch(o){case _.MODE.ADVANCED:e="wirelessAdvSmartConnView";break;case _.MODE.BASIC:e="wirelessAdvSmartConnViewBasic"}v.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdvSmartConn",view:e},S.wirelessSettingsControl.wirelessSettingsSmartConnLoader)},has2g:function(){return n},has5g1:function(){return l},has5g2:function(){return r},has6g:function(){return g},launchModules:function(){var e=function(e){var s;switch(o){case _.MODE.ADVANCED:s=e+"View";break;case _.MODE.BASIC:s=e+"ViewBasic";break;case _.MODE.QUICK_SETUP:s=e+"ViewQs";break;default:s=e+"View"}return s},s=(S.wirelessSettingsControl.detailFreqConfigField.show(),b.Deferred()),a=b.Deferred(),i=b.Deferred(),n=(dfd6g=b.Deferred(),""),l="",r="";enable6g="",_.has2g()&&v.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv24g",view:e("wirelessAdv24g")},S.wirelessSettingsControl.wirelessSettings24gLoader,function(){var e=v.moduleManager.get("wirelessAdv24g");b.when(e.dfd).then(function(){n=e.getHwMode(),s.resolve()})}),_.has5g1()&&v.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv5g1",view:e("wirelessAdv5g1")},S.wirelessSettingsControl.wirelessSettings5g1Loader,function(){_.isTriband||(v.moduleManager.get("wirelessAdv5g1").set5g1Name(),t.wirelessSettingsView.wirelessTitle5g.setLabelField(b.su.CHAR.WIRELESS_SETTINGS.NETWORK_5G));var e=v.moduleManager.get("wirelessAdv5g1");b.when(e.dfd).then(function(){l=e.getHwMode(),a.resolve()})}),_.isTriband?(v.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv5g2",view:e("wirelessAdv5g2")},S.wirelessSettingsControl.wirelessSettings5g2Loader,function(){var e=v.moduleManager.get("wirelessAdv5g2");b.when(e.dfd).then(function(){r=e.getHwMode(),i.resolve()})}),b.when(s,a,i).then(function(){"bgn"==n&&"anac_5"==l&&"anac_5"==r?(S.ofdmaModel.enable.disable(),S.twtModel.enable.disable()):(S.ofdmaModel.enable.enable(),S.twtModel.enable.enable())})):_.supportWifi6E?(v.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv6g",view:e("wirelessAdv6g")},S.wirelessSettingsControl.wirelessSettings6gLoader,function(){var e=v.moduleManager.get("wirelessAdv6g");b.when(e.dfd).then(function(){enable6g=e.getWirelessEnable(),dfd6g.resolve()})}),b.when(s,a,dfd6g).then(function(){"bgn"==n&&"anac_5"==l&&"off"==enable6g?(S.ofdmaModel.enable.disable(),S.twtModel.enable.disable()):(S.ofdmaModel.enable.enable(),S.twtModel.enable.enable())})):b.when(s,a).then(function(){"bgn"==n&&"anac_5"==l?(S.ofdmaModel.enable.disable(),S.twtModel.enable.disable()):(S.ofdmaModel.enable.enable(),S.twtModel.enable.enable())})},showDetailFreqConfig:function(){S.wirelessSettingsControl.detailFreqConfigField.show()},hideDetailFreqConfig:function(){S.wirelessSettingsControl.detailFreqConfigField.hide()},initRegionData:function(){var e=S.regionWirelessCapabilityModel.channel2g.getValue(),s=S.regionWirelessCapabilityModel.channel5g.getValue(),a=S.regionWirelessCapabilityModel.channel5g2.getValue(),i=S.regionWirelessCapabilityModel.channel6g.getValue();f.utils.isEmptyObject(e)&&(n=!1),f.utils.isEmptyObject(s)&&(l=!1),f.utils.isEmptyObject(a)&&(r=!1),f.utils.isEmptyObject(i)&&(g=!1)},showWlanOnlyOn6gSaveNote:function(){t.wirelessSettingsView.wirelessOnlyOn6gNote.show()},showWlanOffSaveNote:function(){t.wirelessSettingsView.wirelessOffNote.show()},showWlanOnSaveNote:function(e,s){t.wirelessSettingsView.wirelessName.setValue(e),t.wirelessSettingsView.wirelessPassword.setValue(s),t.wirelessSettingsView.wirelessOnNote.show()},showWlanOnSmartOffSaveNote:function(){t.wirelessSettingsView.wirelessOnSmartOffNote.show()},loadWifiInfo:function(e,s,a,i){var n=t.wirelessSettingsView,l=S.wirelessSmartConn.smartEnable.getValue();"on"===l?_.supportWifi6E&&t.wirelessSettingsView.wirelessNetwork24g.setLabelField(b.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G_5G):t.wirelessSettingsView.wirelessNetwork24g.setLabelField(b.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G),e.enable?(n.wirelessNote24g.show(),n.wirelessName24g.setValue(e.ssid),n.wirelessPassword24g.setValue(""===e.password?b.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:e.password)):n.wirelessNote24g.hide(),s.enable&&"on"!==l?(n.wirelessNote5g.show(),n.wirelessName5g.setValue(s.ssid),n.wirelessPassword5g.setValue(""===s.password?b.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:s.password)):n.wirelessNote5g.hide(),a&&a.enable&&"on"!==l?(n.wirelessNote5g2.show(),n.wirelessName5g2.setValue(a.ssid),n.wirelessPassword5g2.setValue(""===a.password?b.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:a.password)):n.wirelessNote5g2.hide(),i&&i.enable?(n.wirelessNote6g.show(),n.wirelessName6g.setValue(i.ssid),n.wirelessPassword6g.setValue(""===i.password?b.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:i.password)):n.wirelessNote6g.hide()},showWlanScheduleNote:function(){t.wirelessSettingsView.wirelessSwitchNote.setText(b.su.CHAR.WIRELESS_SETTINGS.NOTICE2),t.wirelessSettingsView.wirelessSwitchNote.show()},hideWlanOffNote:function(){t.wirelessSettingsView.wirelessSwitchNote.hide()},getSwitchSt:function(){return s},setSwitchSt:function(e){s=e},updateGuestNetwork:function(){var e;"basic"==_.getMode()&&(e=v.moduleManager.get("guestNetworkModule"))&&e.checkStatus()},replaceData:function(){var e=S.wireless24g.getData();delete e.htmode,delete e.hwmode,delete e.channel,S.wireless5g1.replaceData(e),_.isTriband&&S.wireless5g2.replaceData(e)},submitWirelessSetting:function(){var e,s,a,i,n,l,r,t,o,g,w=S.wireless24g.enable.getValue(),p=(v.device.getConfig().supportAmazonFFS&&S.ffsModel.isDirty()&&"on"===w&&S.ffsModel.submit(),"on"===S.wirelessSmartConn.smartEnable.getValue()&&_.replaceData(),v.moduleManager.get("wirelessAdv24g")),d=v.moduleManager.get("wirelessAdv5g1"),u="/admin/wireless?form=wireless_2g&form=wireless_5g",m=p.getHwMode(),c=d.getHwMode(),w=S.wireless5g1.enable.getValue(),h=S.wireless5g2.enable.getValue();_.isTriband&&(e=v.moduleManager.get("wirelessAdv5g2"),a=e.getHwMode(),u="/admin/wireless?form=wireless_2g&form=wireless_5g&form=wireless_5g_2"),_.supportWifi6E&&(s=v.moduleManager.get("wirelessAdv6g"),i=s.getWirelessEnable(),u="/admin/wireless?form=wireless_2g&form=wireless_5g&form=wireless_6g"),!p.beforeSubmit()||!d.beforeSubmit()||e&&!e.beforeSubmit()||s&&!s.beforeSubmit()||(n=[52,56,60,64,100,104,108,112,116,120,124,128,132,136,140,144],g=parseInt(S.wireless5g1.channel.getValue()),l=parseInt(S.wireless5g2.channel.getValue()),r=""!=v.device.getConfig().support5GQuickSetupBW160,t=S.wireless5g1.channel.isDirty()||S.wireless5g1.htmode.isDirty(),o=S.wireless5g2.channel.isDirty()||S.wireless5g2.htmode.isDirty(),w="on"==w&&(0<=n.indexOf(g)||"160"==S.wireless5g1.htmode.getValue())&&t,g=_.isTriband&&"on"==h&&(0<=n.indexOf(l)||"160"==S.wireless5g2.htmode.getValue())&&o,r&&(w||g)?f.main.confirm(b.su.CHAR.WIRELESS_SETTINGS.SECOND_CHECK_ENABLE_160_MHZ_NOTE,function(){_.doSubmitWirelessSetting(p,d,e,s,m,c,a,i,u)},null,b.su.CHAR.NETWORK_INTERNET.CONTINUE,b.su.CHAR.OPERATION.CANCEL):_.doSubmitWirelessSetting(p,d,e,s,m,c,a,i,u))},doSubmitWirelessSetting:function(n,l,r,t,o,g,w,p,e){var s=n.syncMainModel(),a=l.syncMainModel(),i=r&&r.syncMainModel(),d=t&&t.syncMainModel();if("on"===S.wirelessSmartConn.smartEnable.getValue()){delete s.wireless_2g_channel,delete s.wireless_2g_htmode,delete s.wireless_2g_hwmode;var u,m=[];for(u in s)m.push(u);for(var c=0;c<m.length;c++){var h=s[m[c]];a[m[c].replace(/_2g/g,"_5g")]=h,_.isTriband&&(a[m[c].replace(/_2g/g,"_5g_2")]=h)}a.wireless_5g_hwmode=g,_.isTriband&&(i.wireless_5g_2_hwmode=w),s=n.syncMainModel()}S.wirelessSmartConn.submit(),v.ajax.request({url:b.su.url(e),data:b.extend(!0,{operation:"write"},s,a,i,d),success:function(){var e,s,a=n.getWifiInfo(),i=l.getWifiInfo();_.isTriband?(e=r.getWifiInfo(),"bgn"==o&&"anac_5"==g&&"anac_5"==w?(S.ofdmaModel.enable.disable(),S.twtModel.enable.disable()):(S.ofdmaModel.enable.enable(),S.twtModel.enable.enable())):_.supportWifi6E?(s=t.getWifiInfo(),"bgn"==o&&"anac_5"==g&&"off"==p?(S.ofdmaModel.enable.disable(),S.twtModel.enable.disable()):(S.ofdmaModel.enable.enable(),S.twtModel.enable.enable())):"bgn"==o&&"anac_5"==g?(S.ofdmaModel.enable.disable(),S.twtModel.enable.disable()):(S.ofdmaModel.enable.enable(),S.twtModel.enable.enable()),_.loadWifiInfo(a,i,e,s),_.showWlanOnSmartOffSaveNote(),n.syncWifiSharingData(),l.syncWifiSharingData(),r&&r.syncWifiSharingData(),t&&t.syncWifiSharingData(),_.updateGuestNetwork(),S.wireless24g.record(),S.wireless5g1.record(),S.wireless5g2.record(),S.wireless6g.record()}})}}})}(jQuery),$.su.storeManager.define("encryptionStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{"value":"none","name":$.su.CHAR.WIRELESS_SETTINGS.NO_SECURITY},{"value":"psk","name":$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2_PERSONAL},{"value":"psk_sae","name":$.su.CHAR.WIRELESS_SETTINGS.WPA2_WPA3_PERSONAL},{"value":"wpa","name":$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2_ENTERPRISE}]}),$.su.storeManager.define("encryption6GStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{"value":"owe","name":$.su.CHAR.WIRELESS_SETTINGS.ENHANCED_OPEN},{"value":"psk_sae","name":$.su.CHAR.WIRELESS_SETTINGS.WPA3_PERSONAL}]}),$.su.storeManager.define("wirelessVersionStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2_PSK,value:"auto"},{name:$.su.CHAR.WIRELESS_SETTINGS.WPA2_PSK,value:"rsn"}]}),$.su.storeManager.define("wirelessVersionEpStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2,value:"auto"},{name:$.su.CHAR.WIRELESS_SETTINGS.WPA2,value:"rsn"}]}),$.su.storeManager.define("wirelessWpa3VersionStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"sae_transition"},{name:$.su.CHAR.WIRELESS_SETTINGS.WPA3_SAE,value:"sae_only"}]}),$.su.storeManager.define("wirelessCipherStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.TKIP_AES,value:"auto"},{name:$.su.CHAR.WIRELESS_SETTINGS.AES,value:"aes"}]}),$.su.storeManager.define("wireless24gWpa3CipherStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"aes"}]}),$.su.storeManager.define("wireless5gWpa3CipherStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"ccmp"}]}),$.su.storeManager.define("wepTypeStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto",itemCls:"fix_min",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.OPEN_SYSTEM,value:"open"},{name:$.su.CHAR.WIRELESS_SETTINGS.SHARED_KEY,value:"shared"}]}),$.su.storeManager.define("wepKeySelectedStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{"value":"1","name":$.su.CHAR.WIRELESS_SETTINGS.KEY1},{"value":"2","name":$.su.CHAR.WIRELESS_SETTINGS.KEY2},{"value":"3","name":$.su.CHAR.WIRELESS_SETTINGS.KEY3},{"value":"4","name":$.su.CHAR.WIRELESS_SETTINGS.KEY4}]}),$.su.storeManager.define("wepKeyFormatStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.ASCII,value:"asic",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.HEXADECIMAL,value:"hex"}]}),$.su.storeManager.define("wepKeyTypeStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.BIT64,value:"64",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.BIT128,value:"128"}]}),$.su.storeManager.define("transPowerStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.LOW,value:"low",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.MIDDLE,value:"middle"},{name:$.su.CHAR.WIRELESS_SETTINGS.HIGH,value:"high"}]}),$.su.modelManager.define("regionWirelessModel",{type:"model",fields:[{name:"country",mapping:"country"},{name:"capability",mapping:"capability"}],proxy:{url:$.su.url("/admin/wireless?form=region")}}),$.su.modelManager.define("regionWirelessCapabilityModel",{type:"model",fields:[{name:"hwmode2g",mapping:"hwmode_2g"},{name:"hwmode5g",mapping:"hwmode_5g"},{name:"hwmode5g2",mapping:"hwmode_5g_2"},{name:"hwmode6g",mapping:"hwmode_6g"},{name:"htmode2g",mapping:"htmode_2g"},{name:"htmode5g",mapping:"htmode_5g"},{name:"htmode5g2",mapping:"htmode_5g_2"},{name:"htmode6g",mapping:"htmode_6g"},{name:"channel2g",mapping:"channel_2g"},{name:"channel5g",mapping:"channel_5g"},{name:"channel5g2",mapping:"channel_5g_2"},{name:"channel6g",mapping:"channel_6g"}]}),$.su.modelManager.define("localeCountryModel",{type:"model",fields:[{name:"country",mapping:"country"}],proxy:{url:"./data/locale.country.json"}}),$.su.storeManager.define("regionStore",{type:"store",fields:[{name:"name",convert:function(e){return $.su.CHAR.REGION[e]}},{name:"value"},{name:"noAutodetect",mapping:"no_autodetect"}],proxy:{url:"./data/region.json"}}),$.su.modelManager.define("wirelessSettingsControl",{type:"model",fields:[{name:"wirelessSettingsSmartConnLoader"},{name:"detailFreqConfigField"},{name:"wirelessSettings24gLoader"},{name:"wirelessSettings5g1Loader"},{name:"wirelessSettings5g2Loader"},{name:"wirelessSettings6gLoader"}]}),$.su.modelManager.define("ofdmaModel",{type:"model",fields:[{name:"enable",mapping:"enable"}],proxy:{url:$.su.url("/admin/wireless?form=ofdma")}}),$.su.modelManager.define("twtModel",{type:"model",fields:[{name:"enable",mapping:"enable"}],proxy:{url:$.su.url("/admin/wireless?form=twt")}}),function(d){d.su.moduleManager.define("wirelessAdv24g",{services:["moduleManager","ajax","device"],stores:["encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless24gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode2gStore","htmode2gStore","channel2gStore"],models:["wireless24g","wireless24gControl","regionWirelessCapabilityModel","quickSetupModel","wirelessSmartConn","ffsModel"],views:["wirelessAdv24gView","wirelessAdv24gViewBasic","wirelessAdv24gViewQs"],listeners:{"ev_on_launch":function(e,s,a,i,n,l,r){s.handleRegionInfo(),s.dfd=d.Deferred(),i.wirelessSmartConn.load(),i.wireless24g.load({success:function(){s.dfd.resolve()}}),s.supportAmazonFFS()&&(i.ffsModel.enable.show(),i.ffsModel.load())}},deps:["utils","wirelessSettings"],init:function(r,e,t,l,o,i){this.listen({"models.wirelessSmartConn.smartEnable":{"ev_value_change":function(e,s,a){i.moduleManager.get("wirelessSettings").getMode();"on"!==t.wireless24g.enable.getValue()&&"on"!==s?t.wireless24gControl.editField.hide():t.wireless24gControl.editField.show(),"on"===s?(t.wireless24g.htmode.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH_2G),t.wireless24g.channel.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.CHANNEL_2G),t.wireless24g.hwmode.hide()):(t.wireless24g.htmode.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH),t.wireless24g.channel.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.CHANNEL),t.wireless24g.hwmode.show())}},"models.wireless24g.enable":{"ev_value_change":function(e,s,a){var i=t.wirelessSmartConn.smartEnable.getValue(),n=r.supportAmazonFFS(),l="";"on"===s?(this.disableAll=!1,t.wireless24gControl.editField.show(),n&&(t.ffsModel.enable.enable(),t.ffsModel.enable.setTips(l))):(this.disableAll=!0,l="on"!==i?(t.wireless24gControl.editField.hide(),d.su.CHAR.WIRELESS_SETTINGS.AMAZON_WIFI_24G_DISABLE_NOTE):d.su.CHAR.WIRELESS_SETTINGS.AMAZON_WIFI_DISABLE_NOTE,n&&(t.ffsModel.enable.disable(),t.ffsModel.enable.setTips(l)))}},"models.wireless24g.encryption":{"ev_value_change":function(e,s,a){switch(t.wireless24gControl.wpaPersonal24g.hide(),t.wireless24gControl.wpa3Personal24g.hide(),t.wireless24gControl.wpaEnterprise24g.hide(),t.wireless24gControl.wep24g.hide(),t.wireless24g.hwmode.enableItems(["n","an"]),s){case"psk":t.wireless24gControl.wpaPersonal24g.show(),t.wireless24g.pskCipher.show();var i=t.wireless24g.pskVersion.getValue(),n=(0<=d.inArray(i,["sae_transition","sae_only"])&&t.wireless24g.pskVersion.setValue("auto"),t.wireless24g.hwmode.enableItems(["n","an"]),t.wireless24g.pskCipher.getValue()),l=t.wireless24g.hwmode.getValue();("tkip"==n&&"n"==l||"tkip"==n&&"an"==l)&&t.wireless24g.pskCipher.setValue("auto"),"tkip"==n&&t.wireless24g.hwmode.disableItems(["n","an"]),"n"!=l&&"an"!=l||(t.wireless24g.wpaCipher.disableItems(["tkip"]),t.wireless24g.pskCipher.disableItems(["tkip"])),t.wireless24g.pskKey.setVtype("psk_password");break;case"psk_sae":t.wireless24gControl.wpa3Personal24g.show(),t.wireless24g.pskCipher.hide();i=t.wireless24g.pskVersion.getValue();d.inArray(i,["sae_transition","sae_only"])<0&&t.wireless24g.pskVersion.setValue("sae_transition"),t.wireless24g.hwmode.enableItems(["n","an"]),"n"!=(l=t.wireless24g.hwmode.getValue())&&"an"!=l||(t.wireless24g.wpaCipher.disableItems(["tkip"]),t.wireless24g.pskCipher.disableItems(["tkip"])),t.wireless24g.pskKey.setVtype("wpa3_password");break;case"wpa":t.wireless24gControl.wpaEnterprise24g.show(),t.wireless24g.hwmode.enableItems(["n","an"]);n=t.wireless24g.wpaCipher.getValue(),l=t.wireless24g.hwmode.getValue();("tkip"==n&&"n"==l||"tkip"==n&&"an"==l)&&t.wireless24g.wpaCipher.setValue("auto"),"tkip"==n&&t.wireless24g.hwmode.disableItems(["n","an"]),"n"!=l&&"an"!=l||(t.wireless24g.wpaCipher.disableItems(["tkip"]),t.wireless24g.pskCipher.disableItems(["tkip"]));break;case"wep":t.wireless24gControl.wep24g.show(),t.wireless24g.hwmode.disableItems(["n","an"])}r.setWpa3VersionTip()}},"models.wireless24g.pskVersion":{"ev_value_change":function(e,s,a){var i=t.wireless24g.encryption.getValue();"psk"==i&&"rsn"==s?(t.wireless24g.pskCipher.hideItems("auto"),"auto"==t.wireless24g.pskCipher.getValue()&&t.wireless24g.pskCipher.setValue("aes")):"psk"==i&&"rsn"!=s&&t.wireless24g.pskCipher.showItems("auto"),r.setWpa3VersionTip()}},"models.wireless24g.pskCipher":{"ev_value_change":function(e,s,a){switch(s){case"auto":case"aes":t.wireless24g.hwmode.enableItems(["n","an"]);break;case"tkip":t.wireless24g.hwmode.disableItems(["n","an"])}}},"models.wireless24g.wpaVersion":{"ev_value_change":function(e,s,a){var i=t.wireless24g.encryption.getValue();"wpa"==i&&"rsn"==s?(t.wireless24g.wpaCipher.hideItems("auto"),"auto"==t.wireless24g.wpaCipher.getValue()&&t.wireless24g.wpaCipher.setValue("aes")):"wpa"==i&&"rsn"!=s&&t.wireless24g.wpaCipher.showItems("auto")}},"models.wireless24g.wpaCipher":{"ev_value_change":function(e,s,a){switch(s){case"auto":case"aes":t.wireless24g.hwmode.enableItems(["n","an"]);break;case"tkip":t.wireless24g.hwmode.disableItems(["n","an"])}}},"models.wireless24g.hwmode":{"ev_value_change":function(e,s,a){switch(s){case"n":case"an":t.wireless24g.encryption.disableItems(["wep"]),t.wireless24g.wpaCipher.disableItems(["tkip"]),t.wireless24g.pskCipher.disableItems(["tkip"]);break;default:t.wireless24g.encryption.enableItems(["wep"]),t.wireless24g.wpaCipher.enableItems(["tkip"]),t.wireless24g.pskCipher.enableItems(["tkip"])}var i,n=t.regionWirelessCapabilityModel.channel2g.getValue();switch(n&&13<n.length&&(i=t.wireless24g.channel.getValue(),n=r.getHtChannel(n,20),"b"!=s&&n.pop(),l.channel2gStore.loadItems(n),o.utils.valInObjArr(i,n)?t.wireless24g.channel.setValue(i):t.wireless24g.channel.setValue("auto")),s){case"b":case"g":case"bg":t.wireless24g.htmode.disableItems(["40"]),t.wireless24g.htmode.setValue("auto"),t.wireless24g.htmode.hide();break;default:t.wireless24g.htmode.enableItems(["40"]),t.wireless24g.htmode.show()}}},"models.wireless24g":{"ev_loaded":function(e,s){i.ajax.request({proxy:"sysWireless2gProxy",data:{"operation":"read"},success:function(e){e&&t.wireless24g&&t.wireless24g.channel&&("on"==e.ENABLE?t.wireless24g.channel.disable():t.wireless24g.channel.enable(),"wep"==(e=t.wireless24g.encryption.getValue())?t.wireless24g.hwmode.disableItems(["n"]):"psk"!=e&&"psk_sae"!=e||"tkip"==t.wireless24g.pskCipher.getValue()&&t.wireless24g.hwmode.disableItems(["n"]),"n"==t.wireless24g.hwmode.getValue()&&(t.wireless24g.wpaCipher.disableItems(["tkip"]),t.wireless24g.pskCipher.disableItems(["tkip"])))}}),this.syncWifiSharingData()},"ev_model_submit":function(e,s){this.syncWifiSharingData()},"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.ffsModel":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wirelessSmartConn":{"ev_will_auto_save":function(e,s){s.preventDefault()}}})}},function(i,n,w,p,l,s){return{dfd:null,SYS_WIRELESS_2G_URL:d.su.url("/admin/wireless?form=syspara_2g"),supportAmazonFFS:function(){var e=s.moduleManager.get("wirelessSettings").getMode();return s.device.getConfig().supportAmazonFFS&&"router"===s.device.getCurrentMode()&&"advanced"===e},onDestroy:function(){var e=s.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",i.handleRegionInfo)},handleRegionInfo:function(){var e=w.regionWirelessCapabilityModel.hwmode2g.getValue();if(e){for(var s=[],a=e.length,i=0;i<a;i++){var n={},l="MODE_"+e[i].toUpperCase();n.name=d.su.CHAR.WIRELESS_SETTINGS[l],n.value=e[i],s.push(n)}p.hwmode2gStore.loadData(s)}var r=w.regionWirelessCapabilityModel.htmode2g.getValue();if(r){var t=[],a=r.length;t[0]={name:"20/40"+d.su.CHAR.WIRELESS_SETTINGS.MHZ,value:"auto"};for(i=0;i<a;i++)(n={}).name=r[i]+d.su.CHAR.WIRELESS_SETTINGS.MHZ,n.value=r[i],t.push(n);p.htmode2gStore.loadData(t)}var o=w.regionWirelessCapabilityModel.channel2g.getValue();if(o){var g=[],a=o.length;g[0]={name:d.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"};for(i=0;i<a;i++)(n={}).name=o[i],n.value=o[i],g.push(n);p.channel2gStore.loadData(g)}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var a=[],i=(a[0]={"name":d.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length);if(!(s%20))for(var n=-1,l=0,r=0;r<=i;r++){var t={},o=parseInt(e[r]);if(n<0||n+4==o)l+=20;else{for(;l%s;)a.pop(),l-=20;if(isNaN(o))break;l=20}t.name=n=o,t.value=o,a.push(t)}return a},setWepEncrpyVtype:function(){var e,s=w.wireless24g.wepFormat1.getValue(),a=w.wireless24g.wepType1.getValue();"asic"==s?"64"==a?e="asic_64":"128"==a&&(e="asic_128"):"hex"==s&&("64"==a?e="hex_64":"128"==a&&(e="hex_128")),w.wireless24g.wepKey1.setVtype(e)},beforeSubmit:function(){var e=w.wireless24g.server.getValue(),s=w.wireless24g.encryption.getValue(),a=w.wireless24g.enable.getValue();return w.wireless24g.disabled_all.setValue(this.disableAll?"on":"off"),"on"==a&&"wpa"==s?w.wireless24g.server.setValidator(function(){return l.utils.ipToInt(e)!=l.utils.ipToInt(l.wirelessSettings.getLanIP())||d.su.CHAR.ERROR["00000077"]}):"on"==a&&"wep"==s&&i.setWepEncrpyVtype(),w.wireless24g.validate()},syncQsData:function(e){var s=w.wireless24g.getData();return!(!w.wireless24g.pskKey.validate()||!w.wireless24g.ssid.validate())&&(w.quickSetupModel.replaceData({wireless2gEnable:s.enable,wireless2gSsid:s.ssid,wireless2gEncryPassword:s.pskKey,wireless2gDisabledAll:"on"===s.enable?"off":"on"}),e&&(w.quickSetupModel.replaceData({wireless5gEnable:s.enable,wireless5gSsid:s.ssid,wireless5gEncryPassword:s.pskKey,wireless5gDisabledAll:"on"===s.enable?"off":"on",wireless5gRegionEnable:"on"}),w.quickSetupModel.replaceData({wireless5g2Enable:s.enable,wireless5g2Ssid:s.ssid,wireless5g2EncryPassword:s.pskKey,wireless5g2DisabledAll:"on"===s.enable?"off":"on",wireless5g2regionEnable:"on"})),s.pskKey?(w.quickSetupModel.replaceData({wireless2gPskKey:s.pskKey,wireless2gEncryption:"psk",wireless2gPskVersion:"auto",wireless2gPskCipher:"auto"}),e&&(w.quickSetupModel.replaceData({wireless5gPskKey:s.pskKey,wireless5gEncryption:"psk",wireless5gPskVersion:"auto",wireless5gPskCipher:"auto"}),w.quickSetupModel.replaceData({wireless5g2PskKey:s.pskKey,wireless5g2Encryption:"psk",wireless5g2PskVersion:"auto",wireless5g2PskCipher:"auto"}))):(w.quickSetupModel.replaceData({wireless2gEncryption:"none"}),e&&(w.quickSetupModel.replaceData({wireless5gEncryption:"none"}),w.quickSetupModel.replaceData({wireless5g2Encryption:"none"}))),!0)},isQsDirty:function(){for(var e=w.wireless24g,s=[e.enable,e.ssid,e.pskKey],a=0,i=s.length;a<i;a++)if(s[a].isDirty())return!0},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,a=e.password,e=e.security,i=n[this.getEffectiveView()].wifisharing;i&&i.setValue({ssid:s,password:a,security:e})},getWifiInfo:function(){var e,s,a="on"===w.wireless24g.enable.getValue(),i=w.wireless24g.ssid.getValue();switch(w.wireless24g.encryption.getValue()){case"psk":e=w.wireless24g.pskKey.getValue(),s="psk";break;case"psk_sae":e=w.wireless24g.pskKey.getValue(),s="psk_sae";break;case"wpa":e=w.wireless24g.wpaKey.getValue(),s="wpa";break;case"wep":e=w.wireless24g.wepKey1.getValue(),s="wep";break;default:e="",s="none"}return{enable:a,ssid:i,password:e,security:s}},setEnableLabel:function(e){e?(w.wireless24g.enable.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.WIRELESS_RADIO),s.device.getConfig().supportWifi6E&&w.wireless24g.enable.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.MODE_2G_5G)):w.wireless24g.enable.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.MODE_2G)},syncMainModel:function(){var e,s=w.wireless24g.getData("submit",!0),a=[];for(e in s)a.push(e);for(var i=0;i<a.length;i++){var n="wireless_2g_"+a[i],l=s[a[i]];s[n]=l,delete s[a[i]]}return s},getHwMode:function(){return w.wireless24g.hwmode.getValue()},setWpa3VersionTip:function(){var e=w.wireless24g.encryption.getValue(),s=w.wireless24g.pskVersion.getValue();"psk_sae"==e&&"sae_only"==s?w.wireless24g.pskVersion.setTips(d.su.CHAR.WIRELESS_SETTINGS.VERSION_TIP):w.wireless24g.pskVersion.setTips("")}}})}(jQuery),$.su.modelManager.define("ffsModel",{type:"model",fields:[{name:"enable"}],proxy:{url:$.su.url("/admin/ffs?form=config")}}),$.su.modelManager.define("wireless24g",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption"},{name:"pskVersion",mapping:"psk_version"},{name:"pskCipher",mapping:"psk_cipher"},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wpaVersion",mapping:"wpa_version"},{name:"wpaCipher",mapping:"wpa_cipher"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"wepMode",mapping:"wep_mode"},{name:"wepFormat1",mapping:"wep_format1"},{name:"wepType1",mapping:"wep_type1"},{name:"wepKey1",mapping:"wep_key1",allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0}],convert:function(e){var s=e.encryption,a=e.psk_cipher,i=e.hwmode,n=e.wpa_cipher,l=e.capability&&e.capability.channel_2g,r=e.channel;if(l){switch(s){case"psk":"tkip"!=a||"n"!=i&&"an"!=i||(e.psk_cipher="auto");break;case"wpa":"tkip"!=n||"n"!=i&&"an"!=i||(e.wpa_cipher="auto")}switch(l&&13<l.length&&(s=function(e,s){if(!e)return[];var a=[],i=(a[0]={"name":$.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length);if(!(s%20))for(var n=-1,l=0,r=0;r<=i;r++){var t={},o=parseInt(e[r]);if(n<0||n+4==o)l+=20;else{for(;l%s;)a.pop(),l-=20;if(isNaN(o))break;l=20}n=o,t.name=o,t.value=o,a.push(t)}return a}(l,20),"b"!=i&&s.pop(),function(e,s){for(var a=s.length,i=0;i<a;i++)if(e==s[i].value)return 1;return}(r,s)||(e.channel="auto")),i){case"b":case"g":case"bg":e.htmode="auto"}}return e},proxy:"wirelessModule24gProxy"}),$.su.define("wirelessModule24gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_2g"),sync:function(e){var s=e.operation,a=this,i=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){a.read.call(a,$.extend({},e,{success:function(e){e=$.extend(s,e);a.trigger("ev_load",[e]),i.call(a,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless24gControl",{type:"model",fields:[{name:"totalField"},{name:"editField"},{name:"wpaPersonal24g"},{name:"wpa3Personal24g"},{name:"wpaEnterprise24g"},{name:"wep24g"}]}),$.su.storeManager.define("hwmode2gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode2gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel2gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless2gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_2g"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(d){d.su.moduleManager.define("wirelessAdv5g1",{services:["moduleManager","ajax","device"],stores:["encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless5gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode5g1Store","htmode5g1Store","channel5g1Store"],models:["wireless5g1","wireless5g1Control","regionWirelessCapabilityModel","quickSetupModel"],deps:["utils","wirelessSettings"],views:["wirelessAdv5g1View","wirelessAdv5g1ViewBasic","wirelessAdv5g1ViewQs"],listeners:{"ev_on_launch":function(e,s,a,i,n,l,r){s.handleRegionInfo(),s.dfd=d.Deferred(),i.wireless5g1.load({success:function(){s.dfd.resolve()}})},"ev_before_destroy":function(){}},init:function(r,e,t,s,a,i){this.listen({"models.wireless5g1.enable":{"ev_value_change":function(e,s,a){"on"===s?(this.disableAll=!1,t.wireless5g1Control.editField.show(),0!=i.device.getConfig().supportMUMIMO&&0!=i.device.getConfig().support5G1MUMIMO||(t.wireless5g1.mimo.hide(),t.wireless5g1.mimo.disable())):(this.disableAll=!0,t.wireless5g1Control.editField.hide())}},"models.wireless5g1.encryption":{"ev_value_change":function(e,s,a){switch(t.wireless5g1Control.wpaPersonal5g1.hide(),t.wireless5g1Control.wpa3Personal5g1.hide(),t.wireless5g1Control.wpaEnterprise5g1.hide(),t.wireless5g1Control.wep5g1.hide(),t.wireless5g1.hwmode.enableItems(["n_5","ac_5","nac_5"]),s){case"psk":t.wireless5g1Control.wpaPersonal5g1.show(),t.wireless5g1.pskCipher.show();var i=t.wireless5g1.pskVersion.getValue(),n=(0<=d.inArray(i,["sae_transition","sae_only"])&&t.wireless5g1.pskVersion.setValue("auto"),t.wireless5g1.hwmode.enableItems(["n_5","ac_5","nac_5"]),t.wireless5g1.pskCipher.getValue()),l=t.wireless5g1.hwmode.getValue();("tkip"==n&&"n_5"==l||"tkip"==n&&"ac_5"==l||"tkip"==n&&"nac_5"==l)&&t.wireless5g1.pskCipher.setValue("auto"),"tkip"==n&&t.wireless5g1.hwmode.disableItems(["n_5","ac_5","nac_5"]),"n_5"!=l&&"ac_5"!=l&&"nac_5"!=l||(t.wireless5g1.wpaCipher.disableItems(["tkip"]),t.wireless5g1.pskCipher.disableItems(["tkip"])),t.wireless5g1.pskKey.setVtype("psk_password");break;case"psk_sae":t.wireless5g1Control.wpa3Personal5g1.show(),t.wireless5g1.pskCipher.hide();i=t.wireless5g1.pskVersion.getValue();d.inArray(i,["sae_transition","sae_only"])<0&&t.wireless5g1.pskVersion.setValue("sae_transition"),t.wireless5g1.hwmode.enableItems(["n_5","ac_5","nac_5"]),"n_5"!=(l=t.wireless5g1.hwmode.getValue())&&"ac_5"!=l&&"nac_5"!=l||(t.wireless5g1.wpaCipher.disableItems(["tkip"]),t.wireless5g1.pskCipher.disableItems(["tkip"])),t.wireless5g1.pskKey.setVtype("wpa3_password");break;case"wpa":t.wireless5g1Control.wpaEnterprise5g1.show(),t.wireless5g1.hwmode.enableItems(["n_5","ac_5","nac_5"]);n=t.wireless5g1.wpaCipher.getValue(),l=t.wireless5g1.hwmode.getValue();("tkip"==n&&"n_5"==l||"tkip"==n&&"ac_5"==l||"tkip"==n&&"nac_5"==l)&&t.wireless5g1.wpaCipher.setValue("auto"),"tkip"==n&&t.wireless5g1.hwmode.disableItems(["n_5","ac_5","nac_5"]),"n_5"!=l&&"ac_5"!=l&&"nac_5"!=l||(t.wireless5g1.wpaCipher.disableItems(["tkip"]),t.wireless5g1.pskCipher.disableItems(["tkip"]));break;case"wep":t.wireless5g1Control.wep5g1.show(),t.wireless5g1.hwmode.disableItems(["n_5","ac_5"])}r.setWpa3VersionTip()}},"models.wireless5g1.pskVersion":{"ev_value_change":function(e,s,a){var i=t.wireless5g1.encryption.getValue();"psk"==i&&"rsn"==s?(t.wireless5g1.pskCipher.hideItems("auto"),"auto"==t.wireless5g1.pskCipher.getValue()&&t.wireless5g1.pskCipher.setValue("aes")):"psk"==i&&"rsn"!=s&&t.wireless5g1.pskCipher.showItems("auto"),r.setWpa3VersionTip()}},"models.wireless5g1.pskCipher":{"ev_value_change":function(e,s,a){switch(s){case"auto":case"aes":t.wireless5g1.hwmode.enableItems(["n_5","ac_5","nac_5"]);break;case"tkip":t.wireless5g1.hwmode.disableItems(["n_5","ac_5","nac_5"])}}},"models.wireless5g1.wpaVersion":{"ev_value_change":function(e,s,a){var i=t.wireless5g1.encryption.getValue();"wpa"==i&&"rsn"==s?(t.wireless5g1.wpaCipher.hideItems("auto"),"auto"==t.wireless5g1.wpaCipher.getValue()&&t.wireless5g1.wpaCipher.setValue("aes")):"wpa"==i&&"rsn"!=s&&t.wireless5g1.wpaCipher.showItems("auto")}},"models.wireless5g1.wpaCipher":{"ev_value_change":function(e,s,a){switch(s){case"auto":case"aes":t.wireless5g1.hwmode.enableItems(["n_5","ac_5","nac_5"]);break;case"tkip":t.wireless5g1.hwmode.disableItems(["n_5","ac_5","nac_5"])}}},"models.wireless5g1.hwmode":{"ev_value_change":function(e,s,a){switch(s){case"ac_5":case"n_5":t.wireless5g1.encryption.disableItems(["wep"]),t.wireless5g1.wpaCipher.disableItems(["tkip"]),t.wireless5g1.pskCipher.disableItems(["tkip"]);break;default:t.wireless5g1.encryption.enableItems(["wep"]),t.wireless5g1.wpaCipher.enableItems(["tkip"]),t.wireless5g1.pskCipher.enableItems(["tkip"])}switch(s){case"a_5":t.wireless5g1.htmode.disableItems(["40"]),t.wireless5g1.htmode.disableItems(["80"]),t.wireless5g1.htmode.setValue("auto"),t.wireless5g1.htmode.hide();break;case"n_5":case"an_5":var i=t.wireless5g1.htmode.getValue();t.wireless5g1.htmode.enableItems(["40"]),t.wireless5g1.htmode.disableItems(["80"]),"80"==i&&t.wireless5g1.htmode.setValue("auto"),t.wireless5g1.htmode.show();break;default:t.wireless5g1.htmode.enableItems(["40"]),t.wireless5g1.htmode.enableItems(["80"]),t.wireless5g1.htmode.show()}}},"models.wireless5g1.htmode":{"ev_value_change":function(e,s,a){r.set160MhzTips(),r.resetChannel(s)}},"models.wireless5g1.channel":{"ev_value_change":function(e,s,a){r.set160MhzTips()}},"models.wireless5g1":{"ev_loaded":function(e,s){i.ajax.request({proxy:"sysWireless5g1Proxy",data:{"operation":"read"},success:function(e){e&&t.wireless5g1&&t.wireless5g1.channel&&("on"==e.ENABLE?t.wireless5g1.channel.disable():t.wireless5g1.channel.enable(),"wep"==(e=t.wireless5g1.encryption.getValue())?t.wireless5g1.hwmode.disableItems(["ac_5","nac_5"]):"psk"!=e&&"psk_sae"!=e||"tkip"==t.wireless5g1.pskCipher.getValue()&&t.wireless5g1.hwmode.disableItems(["ac_5","nac_5"]),"n_5"!=(e=t.wireless5g1.hwmode.getValue())&&"ac_5"!=e&&"nac_5"!=e||(t.wireless5g1.wpaCipher.disableItems(["tkip"]),t.wireless5g1.pskCipher.disableItems(["tkip"])))}}),r.resetChannel(s.htmode),this.syncWifiSharingData()},"ev_model_submit":function(e,s){this.syncWifiSharingData()},"ev_will_auto_save":function(e,s){s.preventDefault()}}})}},function(n,l,g,w,p,s){return{dfd:null,SYS_WIRELESS_5G1_URL:d.su.url("/admin/wireless?form=syspara_5g"),onDestroy:function(){var e=s.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",n.handleRegionInfo)},handleRegionInfo:function(){var e=g.regionWirelessCapabilityModel.channel5g.getValue();if(p.utils.isEmptyObject(e))g.wireless5g1Control.totalField.hide();else{g.wireless5g1Control.totalField.show();var s=g.regionWirelessCapabilityModel.hwmode5g.getValue();if(s){for(var a=[],i=s.length,n=0;n<i;n++){var l={},r="MODE_"+s[n].toUpperCase();l.name=d.su.CHAR.WIRELESS_SETTINGS[r],l.value=s[n],a.push(l)}w.hwmode5g1Store.loadData(a)}var t=g.regionWirelessCapabilityModel.htmode5g.getValue();if(t){for(var o=[],i=t.length,n=0;n<i;n++){l={};switch(t[n]){case"20":l.name="20"+d.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"40":l.name="20/40"+d.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"80":l.name="20/40/80"+d.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"160":l.name="20/40/80/160"+d.su.CHAR.WIRELESS_SETTINGS.MHZ;break;default:l.name=t[n]+d.su.CHAR.WIRELESS_SETTINGS.MHZ}l.value=t[n],o.push(l)}w.htmode5g1Store.loadData(o)}}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var a=[],i=(a[0]={"name":d.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length);if(!(s%20))for(var n=-1,l=0,r=0;r<=i;r++){var t={},o=parseInt(e[r]);if(n<0||n+4==o)l+=20;else{for(;l%s;)a.pop(),l-=20;if(isNaN(o))break;l=20}t.name=n=o,t.value=o,a.push(t)}return a},get_ht_channel_160:function(e){for(var s=[],a=(s[0]={"name":d.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length),i="CA"===p.wirelessSettings.region?[36,40,44,48,52,56,60,64]:[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],n=0;n<=a;n++){var l={},r=parseInt(e[n]);-1<d.inArray(r,i)&&(l.name=r,l.value=r,s.push(l))}return s},channelDFS:function(e){for(var s=[],a=0;a<e.length;a++)s.push(e[a]),52!=e[a].value&&56!=e[a].value&&60!=e[a].value&&64!=e[a].value&&100!=e[a].value&&104!=e[a].value&&108!=e[a].value&&112!=e[a].value&&116!=e[a].value&&120!=e[a].value&&124!=e[a].value&&128!=e[a].value&&132!=e[a].value&&136!=e[a].value&&140!=e[a].value&&144!=e[a].value||(s[a].name+="(DFS)");return s},resetChannel:function(e){var s=g.regionWirelessCapabilityModel.channel5g.getValue(),a=g.wireless5g1.channel.getValue();switch(e){case"20":var i=n.getHtChannel(s,20);w.channel5g1Store.loadData(n.channelDFS(i)),p.utils.valInObjArr(a,i)?g.wireless5g1.channel.setValue(a):g.wireless5g1.channel.setValue("auto");break;case"40":i=n.getHtChannel(s,40);w.channel5g1Store.loadData(n.channelDFS(i)),p.utils.valInObjArr(a,i)?g.wireless5g1.channel.setValue(a):g.wireless5g1.channel.setValue("auto");break;case"80":i=n.getHtChannel(s,80);w.channel5g1Store.loadData(n.channelDFS(i)),p.utils.valInObjArr(a,i)?g.wireless5g1.channel.setValue(a):g.wireless5g1.channel.setValue("auto");break;case"160":i=n.get_ht_channel_160(s,160);w.channel5g1Store.loadData(n.channelDFS(i)),p.utils.valInObjArr(a,i)?g.wireless5g1.channel.setValue(a):g.wireless5g1.channel.setValue("auto")}},setWepEncrpyVtype:function(){var e,s=g.wireless5g1.wepFormat1.getValue(),a=g.wireless5g1.wepType1.getValue();"asic"==s?"64"==a?e="asic_64":"128"==a&&(e="asic_128"):"hex"==s&&("64"==a?e="hex_64":"128"==a&&(e="hex_128")),g.wireless5g1.wepKey1.setVtype(e)},beforeSubmit:function(){var e=g.wireless5g1.server.getValue(),s=g.wireless5g1.encryption.getValue(),a=g.wireless5g1.enable.getValue();return g.wireless5g1.disabled_all.setValue(this.disableAll?"on":"off"),"on"==a&&"wpa"==s?g.wireless5g1.server.setValidator(function(){return p.utils.ipToInt(e)!=p.utils.ipToInt(p.wirelessSettings.getLanIP())||d.su.CHAR.ERROR["00000077"]}):"on"==a&&"wep"==s&&n.setWepEncrpyVtype(),g.wireless5g1.validate()},syncQsData:function(){var e=g.wireless5g1.getData();return!(!g.wireless5g1.pskKey.validate()||!g.wireless5g1.ssid.validate())&&(g.quickSetupModel.replaceData({wireless5gEnable:e.enable,wireless5gSsid:e.ssid,wireless5gEncryPassword:e.pskKey,wireless5gDisabledAll:"on"===e.enable?"off":"on",wireless5gRegionEnable:"on"}),e.pskKey?g.quickSetupModel.replaceData({wireless5gPskKey:e.pskKey,wireless5gEncryption:"psk",wireless5gPskVersion:"auto",wireless5gPskCipher:"auto"}):g.quickSetupModel.replaceData({wireless5gEncryption:"none"}),!0)},isQsDirty:function(){for(var e=g.wireless5g1,s=[e.enable,e.ssid,e.pskKey],a=0,i=s.length;a<i;a++)if(s[a].isDirty())return!0},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,a=e.password,e=e.security,i=l[this.getEffectiveView()].wifisharing;i&&i.setValue({ssid:s,password:a,security:e})},getWifiInfo:function(){var e,s,a="on"===g.wireless5g1.enable.getValue(),i=g.wireless5g1.ssid.getValue();switch(g.wireless5g1.encryption.getValue()){case"psk":e=g.wireless5g1.pskKey.getValue(),s="psk";break;case"psk_sae":e=g.wireless5g1.pskKey.getValue(),s="psk_sae";break;case"wpa":e=g.wireless5g1.wpaKey.getValue(),s="wpa";break;case"wep":e=g.wireless5g1.wepKey1.getValue(),s="wep";break;default:e="",s="none"}return{enable:a,ssid:i,password:e,security:s}},syncMainModel:function(){var e,s=g.wireless5g1.getData("submit",!0),a=[];for(e in s)a.push(e);for(var i=0;i<a.length;i++){var n="wireless_5g_"+a[i],l=s[a[i]];s[n]=l,delete s[a[i]]}return s},setEnableLabel:function(e){e?(g.wireless5g1Control.totalField.hide(),g.wireless5g1Control.channelField.show(),s.device.getIsTriband()&&!s.device.getConfig().supportWifi6E?(g.wireless5g1.htmode.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH_5G1),g.wireless5g1.channel.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.CHANNEL_5G1)):(g.wireless5g1.htmode.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH_5G),g.wireless5g1.channel.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.CHANNEL_5G))):(g.wireless5g1Control.totalField.show(),g.wireless5g1Control.channelField.hide(),g.wireless5g1.htmode.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH),g.wireless5g1.channel.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.CHANNEL))},set5g1Name:function(){g.wireless5g1.enable.setLabelField(d.su.CHAR.WIRELESS_SETTINGS.MODE_5G)},dataChangeOn24g:function(e,s){e!==undefined?(l.wirelessAdv5g1ViewQs.wirelessQsAll.disable(),g.wireless5g1.ssid.setValue(e),g.wireless5g1.pskKey.setValue(s)):l.wirelessAdv5g1ViewQs.wirelessQsAll.enable()},disableQsAll:function(){l.wirelessAdv5g1ViewQs.wirelessQsAll.disable()},getHwMode:function(){return g.wireless5g1.hwmode.getValue()},setWpa3VersionTip:function(){var e=g.wireless5g1.encryption.getValue(),s=g.wireless5g1.pskVersion.getValue();"psk_sae"==e&&"sae_only"==s?g.wireless5g1.pskVersion.setTips(d.su.CHAR.WIRELESS_SETTINGS.VERSION_TIP):g.wireless5g1.pskVersion.setTips("")},set160MhzTips:function(){var e=g.wireless5g1.htmode.getValue(),s=g.wireless5g1.channel.getValue(),a="";(0<=[52,56,60,64,100,104,108,112,116,120,124,128,132,136,140,144].indexOf(parseInt(s))||"160"==e)&&(a=d.su.CHAR.WIRELESS_SETTINGS.ENABLE_160_MHZ_NOTE_DFS),g.wireless5g1.channel.setTips(a)}}})}(jQuery),$.su.modelManager.define("wireless5g1",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption"},{name:"pskVersion",mapping:"psk_version"},{name:"pskCipher",mapping:"psk_cipher"},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wpaVersion",mapping:"wpa_version"},{name:"wpaCipher",mapping:"wpa_cipher"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"wepMode",mapping:"wep_mode"},{name:"wepFormat1",mapping:"wep_format1"},{name:"wepType1",mapping:"wep_type1"},{name:"wepKey1",mapping:"wep_key1",allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0},{name:"mimo",mapping:"mu_mimo"}],convert:function(e){var s,a,i=e.htmode,n=e.capability&&e.capability.channel_5g,l=e.channel,r=e.encryption,t=e.psk_cipher,o=e.hwmode,g=e.wpa_cipher,w=e.country.toUpperCase();if(n){switch(i){case"20":a(l,s(n,20))||(e.channel="80");break;case"40":a(l,s(n,40))||(e.channel="80");break;case"80":a(l,s(n,80))||(e.channel="80");break;case"160":a(l,function(e){for(var s,a=[],i=(a[0]={"name":$.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length),n="CA"==w?[36,40,44,48,52,56,60,64]:[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],l=0;l<=i;l++){var r={};s=parseInt(e[l]),-1<$.inArray(s,n)&&(r.name=s,r.value=s,a.push(r))}return a}(n))||(e.channel="80")}switch(r){case"psk":"tkip"!=t||"n_5"!=o&&"nac_5"!=o||(e.psk_cipher="auto");break;case"wpa":"tkip"!=g||"n_5"!=o&&"ac_5"!=o&&"nac_5"!=o||(e.wpa_cipher="auto")}switch(o){case"a_5":e.htmode="auto";break;case"n_5":case"an_5":"80"==i&&(e.htmode="auto")}}return e;function s(e,s){if(!e)return[];var a=[],i=(a[0]={"name":$.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length);if(!(s%20))for(var n=-1,l=0,r=0;r<=i;r++){var t={},o=parseInt(e[r]);if(n<0||n+4==o)l+=20;else{for(;l%s;)a.pop(),l-=20;if(isNaN(o))break;l=20}t.name=n=o,t.value=o,a.push(t)}return a}function a(e,s){for(var a=s.length,i=0;i<a;i++)if(e==s[i].value)return 1}},proxy:"wirelessModule5g1Proxy"}),$.su.define("wirelessModule5g1Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_5g"),sync:function(e){var s=e.operation,a=this,i=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){a.read.call(a,$.extend({},e,{success:function(e){e=$.extend(s,e);a.trigger("ev_load",[e]),i.call(a,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless5g1Control",{type:"model",fields:[{name:"editField"},{name:"totalField"},{name:"wpaPersonal5g1"},{name:"wpa3Personal5g1"},{name:"wpaEnterprise5g1"},{name:"wep5g1"},{name:"channelField"}]}),$.su.storeManager.define("hwmode5g1Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode5g1Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel5g1Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless5g1Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_5g"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(d){d.su.moduleManager.define("wirelessAdv5g2",{services:["moduleManager","ajax","device"],stores:["encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless5gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode5g2Store","htmode5g2Store","channel5g2Store"],models:["wireless5g2","wireless5g2Control","regionWirelessCapabilityModel","quickSetupModel"],deps:["utils","wirelessSettings"],views:["wirelessAdv5g2View","wirelessAdv5g2ViewBasic","wirelessAdv5g2ViewQs"],listeners:{"ev_on_launch":function(e,s,a,i,n,l,r){s.handleRegionInfo(),s.dfd=d.Deferred(),i.wireless5g2.load({success:function(){s.dfd.resolve()}})},"ev_before_destroy":function(){}},init:function(r,e,t,o,g,i){this.listen({"models.wireless5g2.enable":{"ev_value_change":function(e,s,a){"on"===s?(this.disableAll=!1,t.wireless5g2Control.editField.show(),0==i.device.getConfig().supportMUMIMO&&(t.wireless5g2.mimo.hide(),t.wireless5g2.mimo.disable())):(this.disableAll=!0,t.wireless5g2Control.editField.hide())}},"models.wireless5g2.encryption":{"ev_value_change":function(e,s,a){switch(t.wireless5g2Control.wpaPersonal5g2.hide(),t.wireless5g2Control.wpa3Personal5g2.hide(),t.wireless5g2Control.wpaEnterprise5g2.hide(),t.wireless5g2Control.wep5g2.hide(),t.wireless5g2.hwmode.enableItems(["n_5","ac_5","nac_5"]),s){case"psk":case"psk_sae":var i=t.wireless5g2.pskVersion.getValue(),i=("psk"==s&&(t.wireless5g2Control.wpaPersonal5g2.show(),t.wireless5g2.pskCipher.show(),0<=d.inArray(i,["sae_transition","sae_only"])&&t.wireless5g2.pskVersion.setValue("auto"),t.wireless5g2.pskKey.setVtype("psk_password")),"psk_sae"==s&&(t.wireless5g2Control.wpa3Personal5g2.show(),t.wireless5g2.pskCipher.hide(),d.inArray(i,["sae_transition","sae_only"])<0&&t.wireless5g2.pskVersion.setValue("sae_transition"),t.wireless5g2.pskKey.setVtype("wpa3_password")),t.wireless5g2.hwmode.enableItems(["n_5","ac_5","nac_5"]),t.wireless5g2.pskCipher.getValue()),n=t.wireless5g2.hwmode.getValue();("tkip"==i&&"n_5"==n||"tkip"==i&&"ac_5"==n||"tkip"==i&&"nac_5"==n)&&t.wireless5g2.pskCipher.setValue("auto"),"tkip"==i&&t.wireless5g2.hwmode.disableItems(["n_5","ac_5","nac_5"]),"n_5"!=n&&"ac_5"!=n&&"nac_5"!=n||(t.wireless5g2.wpaCipher.disableItems(["tkip"]),t.wireless5g2.pskCipher.disableItems(["tkip"]));break;case"wpa":t.wireless5g2Control.wpaEnterprise5g2.show(),t.wireless5g2.hwmode.enableItems(["n_5","ac_5","nac_5"]);i=t.wireless5g2.wpaCipher.getValue(),n=t.wireless5g2.hwmode.getValue();("tkip"==i&&"n_5"==n||"tkip"==i&&"ac_5"==n||"tkip"==i&&"nac_5"==n)&&t.wireless5g2.wpaCipher.setValue("auto"),"tkip"==i&&t.wireless5g2.hwmode.disableItems(["n_5","ac_5","nac_5"]),"n_5"!=n&&"ac_5"!=n&&"nac_5"!=n||(t.wireless5g2.wpaCipher.disableItems(["tkip"]),t.wireless5g2.pskCipher.disableItems(["tkip"]));break;case"wep":t.wireless5g2Control.wep5g2.show()}r.setWpa3VersionTip()}},"models.wireless5g2.pskVersion":{"ev_value_change":function(e,s,a){var i=t.wireless5g2.encryption.getValue();"psk"==i&&"rsn"==s?(t.wireless5g2.pskCipher.hideItems("auto"),"auto"==t.wireless5g2.pskCipher.getValue()&&t.wireless5g2.pskCipher.setValue("aes")):"psk"==i&&"rsn"!=s&&t.wireless5g2.pskCipher.showItems("auto"),r.setWpa3VersionTip()}},"models.wireless5g2.pskCipher":{"ev_value_change":function(e,s,a){switch(s){case"auto":case"aes":t.wireless5g2.hwmode.enableItems(["n_5","ac_5","nac_5"]);break;case"tkip":t.wireless5g2.hwmode.disableItems(["n_5","ac_5","nac_5"])}}},"models.wireless5g2.wpaVersion":{"ev_value_change":function(e,s,a){var i=t.wireless5g2.encryption.getValue();"wpa"==i&&"rsn"==s?(t.wireless5g2.wpaCipher.hideItems("auto"),"auto"==t.wireless5g2.wpaCipher.getValue()&&t.wireless5g2.wpaCipher.setValue("aes")):"wpa"==i&&"rsn"!=s&&t.wireless5g2.wpaCipher.showItems("auto")}},"models.wireless5g2.wpaCipher":{"ev_value_change":function(e,s,a){switch(s){case"auto":case"aes":t.wireless5g2.hwmode.enableItems(["n_5","ac_5","nac_5"]);break;case"tkip":t.wireless5g2.hwmode.disableItems(["n_5","ac_5","nac_5"])}}},"models.wireless5g2.hwmode":{"ev_value_change":function(e,s,a){switch(s){case"ac_5":case"n_5":case"nac_5":t.wireless5g2.encryption.disableItems(["wep"]),t.wireless5g2.wpaCipher.disableItems(["tkip"]),t.wireless5g2.pskCipher.disableItems(["tkip"]);break;default:t.wireless5g2.encryption.enableItems(["wep"]),t.wireless5g2.wpaCipher.enableItems(["tkip"]),t.wireless5g2.pskCipher.enableItems(["tkip"])}switch(s){case"a_5":t.wireless5g2.htmode.disableItems(["40"]),t.wireless5g2.htmode.disableItems(["80"]),t.wireless5g2.htmode.setValue("auto"),t.wireless5g2.htmode.hide();break;case"n_5":case"an_5":var i=t.wireless5g2.htmode.getValue();t.wireless5g2.htmode.enableItems(["40"]),t.wireless5g2.htmode.disableItems(["80"]),"80"==i&&t.wireless5g2.htmode.setValue("auto"),t.wireless5g2.htmode.show();break;default:t.wireless5g2.htmode.enableItems(["40"]),t.wireless5g2.htmode.enableItems(["80"]),t.wireless5g2.htmode.show()}}},"models.wireless5g2.htmode":{"ev_value_change":function(e,s,a){r.set160MhzTips();var i=t.regionWirelessCapabilityModel.channel5g2.getValue(),n=t.wireless5g2.channel.getValue();switch(s){case"20":var l=r.getHtChannel(i,20);o.channel5g2Store.loadData(r.channelDFS(l)),g.utils.valInObjArr(n,l)?t.wireless5g2.channel.setValue(n):t.wireless5g2.channel.setValue("auto");break;case"40":l=r.getHtChannel(i,40);o.channel5g2Store.loadData(r.channelDFS(l)),g.utils.valInObjArr(n,l)?t.wireless5g2.channel.setValue(n):t.wireless5g2.channel.setValue("auto");break;case"80":l=r.getHtChannel(i,80);o.channel5g2Store.loadData(r.channelDFS(l)),g.utils.valInObjArr(n,l)?t.wireless5g2.channel.setValue(n):t.wireless5g2.channel.setValue("auto");break;case"160":l=r.get_ht_channel_160(i,160);o.channel5g2Store.loadData(r.channelDFS(l)),g.utils.valInObjArr(n,l)?t.wireless5g2.channel.setValue(n):t.wireless5g2.channel.setValue("auto")}}},"models.wireless5g2.channel":{"ev_value_change":function(e,s,a){r.set160MhzTips()}},"models.wireless5g2":{"ev_loaded":function(e,s){i.ajax.request({proxy:"sysWireless5g2Proxy",data:{"operation":"read"},success:function(e){e&&t.wireless5g2&&t.wireless5g2.channel&&("on"==e.ENABLE?t.wireless5g2.channel.disable():t.wireless5g2.channel.enable(),"wep"==(e=t.wireless5g2.encryption.getValue())?t.wireless5g2.hwmode.disableItems(["ac_5","nac_5"]):"psk"!=e&&"psk_sae"!=e||"tkip"==t.wireless5g2.pskCipher.getValue()&&t.wireless5g2.hwmode.disableItems(["ac_5","nac_5"]),"n_5"!=(e=t.wireless5g2.hwmode.getValue())&&"ac_5"!=e&&"nac_5"!=e||(t.wireless5g2.wpaCipher.disableItems(["tkip"]),t.wireless5g2.pskCipher.disableItems(["tkip"])))}}),this.syncWifiSharingData()},"ev_model_submit":function(e,s){this.syncWifiSharingData()},"ev_will_auto_save":function(e,s){s.preventDefault()}}})}},function(i,n,g,w,p,s){return{dfd:null,SYS_WIRELESS_5g2_URL:d.su.url("/admin/wireless?form=syspara_5g_2"),onDestroy:function(){var e=s.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",i.handleRegionInfo)},handleRegionInfo:function(){var e=g.regionWirelessCapabilityModel.channel5g.getValue();if(p.utils.isEmptyObject(e))g.wireless5g2Control.totalField.hide();else{g.wireless5g2Control.totalField.show();var s=g.regionWirelessCapabilityModel.hwmode5g2.getValue();if(s){for(var a=[],i=s.length,n=0;n<i;n++){var l={},r="MODE_"+s[n].toUpperCase();l.name=d.su.CHAR.WIRELESS_SETTINGS[r],l.value=s[n],a.push(l)}w.hwmode5g2Store.loadData(a)}var t=g.regionWirelessCapabilityModel.htmode5g2.getValue();if(t){for(var o=[],i=t.length,n=0;n<i;n++){l={};switch(t[n]){case"20":l.name="20"+d.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"40":l.name="20/40"+d.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"80":l.name="20/40/80"+d.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"160":l.name="20/40/80/160"+d.su.CHAR.WIRELESS_SETTINGS.MHZ;break;default:l.name=t[n]+d.su.CHAR.WIRELESS_SETTINGS.MHZ}l.value=t[n],o.push(l)}w.htmode5g2Store.loadData(o)}}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var a=[],i=(a[0]={"name":d.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length);if(!(s%20))for(var n=-1,l=0,r=0;r<=i;r++){var t={},o=parseInt(e[r]);if(n<0||n+4==o)l+=20;else{for(;l%s;)a.pop(),l-=20;if(isNaN(o))break;l=20}t.name=n=o,t.value=o,a.push(t)}return a},get_ht_channel_160:function(e){for(var s=[],a=(s[0]={"name":d.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length),i=[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],n=0;n<=a;n++){var l={},r=parseInt(e[n]);-1<d.inArray(r,i)&&(l.name=r,l.value=r,s.push(l))}return s},channelDFS:function(e){for(var s=[],a=0;a<e.length;a++)s.push(e[a]),52!=e[a].value&&56!=e[a].value&&60!=e[a].value&&64!=e[a].value&&100!=e[a].value&&104!=e[a].value&&108!=e[a].value&&112!=e[a].value&&116!=e[a].value&&120!=e[a].value&&124!=e[a].value&&128!=e[a].value&&132!=e[a].value&&136!=e[a].value&&140!=e[a].value&&144!=e[a].value||(s[a].name+="(DFS)");return s},setWepEncrpyVtype:function(){var e,s=g.wireless5g2.wepFormat1.getValue(),a=g.wireless5g2.wepType1.getValue();"asic"==s?"64"==a?e="asic_64":"128"==a&&(e="asic_128"):"hex"==s&&("64"==a?e="hex_64":"128"==a&&(e="hex_128")),g.wireless5g2.wepKey1.setVtype(e)},beforeSubmit:function(){var e=g.wireless5g2.server.getValue(),s=g.wireless5g2.encryption.getValue(),a=g.wireless5g2.enable.getValue();return g.wireless5g2.disabled_all.setValue(this.disableAll?"on":"off"),"on"==a&&"wpa"==s?g.wireless5g2.server.setValidator(function(){return p.utils.ipToInt(e)!=p.utils.ipToInt(p.wirelessSettings.getLanIP())||d.su.CHAR.ERROR["00000077"]}):"on"==a&&"wep"==s&&i.setWepEncrpyVtype(),g.wireless5g2.validate()},setEnableLabel:function(e){e?(g.wireless5g2Control.totalField.hide(),g.wireless5g2Control.channelField.show()):(g.wireless5g2Control.totalField.show(),g.wireless5g2Control.channelField.hide())},syncQsData:function(){var e=g.wireless5g2.getData();return!(!g.wireless5g2.pskKey.validate()||!g.wireless5g2.ssid.validate())&&(g.quickSetupModel.replaceData({wireless5g2Enable:e.enable,wireless5g2Ssid:e.ssid,wireless5g2EncryPassword:e.pskKey,wireless5g2DisabledAll:"on"===e.enable?"off":"on",wireless5g2regionEnable:"on"}),e.pskKey?g.quickSetupModel.replaceData({wireless5g2PskKey:e.pskKey,wireless5g2Encryption:"psk",wireless5g2PskVersion:"auto",wireless5g2PskCipher:"auto"}):g.quickSetupModel.replaceData({wireless5g2Encryption:"none"}),!0)},isQsDirty:function(){for(var e=g.wireless5g2,s=[e.enable,e.ssid,e.pskKey],a=0,i=s.length;a<i;a++)if(s[a].isDirty())return!0},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,a=e.password,e=e.security,i=n[this.getEffectiveView()].wifisharing;i&&i.setValue({ssid:s,password:a,security:e})},getWifiInfo:function(){var e,s,a="on"===g.wireless5g2.enable.getValue(),i=g.wireless5g2.ssid.getValue();switch(g.wireless5g2.encryption.getValue()){case"psk":e=g.wireless5g2.pskKey.getValue(),s="psk";break;case"psk_sae":e=g.wireless5g2.pskKey.getValue(),s="psk_sae";break;case"wpa":e=g.wireless5g2.wpaKey.getValue(),s="wpa";break;case"wep":e=g.wireless5g2.wepKey1.getValue(),s="wep";break;default:e="",s="none"}return{enable:a,ssid:i,password:e,security:s}},syncMainModel:function(){var e,s=g.wireless5g2.getData("submit",!0),a=[];for(e in s)a.push(e);for(var i=0;i<a.length;i++){var n="wireless_5g_2_"+a[i],l=s[a[i]];s[n]=l,delete s[a[i]]}return s},dataChangeOn24g:function(e,s){e!==undefined?(n.wirelessAdv5g2ViewQs.wirelessQsAll.disable(),currentSsid=g.wireless5g2.ssid.getValue(),g.wireless5g2.ssid.setValue(e),g.wireless5g2.pskKey.setValue(s)):n.wirelessAdv5g2ViewQs.wirelessQsAll.enable()},disableQsAll:function(){n.wirelessAdv5g2ViewQs.wirelessQsAll.disable()},getHwMode:function(){return g.wireless5g2.hwmode.getValue()},setWpa3VersionTip:function(){var e=g.wireless5g2.encryption.getValue(),s=g.wireless5g2.pskVersion.getValue();"psk_sae"==e&&"sae_only"==s?g.wireless5g2.pskVersion.setTips(d.su.CHAR.WIRELESS_SETTINGS.VERSION_TIP):g.wireless5g2.pskVersion.setTips("")},set160MhzTips:function(){var e=g.wireless5g2.htmode.getValue(),s=g.wireless5g2.channel.getValue(),a="";(0<=[52,56,60,64,100,104,108,112,116,120,124,128,132,136,140,144].indexOf(s)||"160"==e)&&(a=d.su.CHAR.WIRELESS_SETTINGS.ENABLE_160_MHZ_NOTE_DFS),g.wireless5g2.channel.setTips(a)}}})}(jQuery),$.su.modelManager.define("wireless5g2",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption"},{name:"pskVersion",mapping:"psk_version"},{name:"pskCipher",mapping:"psk_cipher"},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wpaVersion",mapping:"wpa_version"},{name:"wpaCipher",mapping:"wpa_cipher"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"wepMode",mapping:"wep_mode"},{name:"wepFormat1",mapping:"wep_format1"},{name:"wepType1",mapping:"wep_type1"},{name:"wepKey1",mapping:"wep_key1",allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0},{name:"mimo",mapping:"mu_mimo"}],convert:function(e){var s=e.encryption,a=e.psk_cipher,i=e.hwmode,n=e.wpa_cipher,l=e.hwmode,r=e.htmode,t=e.channel,o=e.capability&&e.capability.channel_5g_2;if(o){switch(s){case"psk":"tkip"!=a||"n_5"!=i&&"ac_5"!=i&&"nac_5"!=i||(e.psk_cipher="auto");break;case"wpa":"tkip"!=n||"n_5"!=i&&"ac_5"!=i&&"nac_5"!=i||(e.wpa_cipher="auto")}switch(l){case"a_5":e.htmode="auto";break;case"n_5":case"an_5":"80"==r&&(e.htmode="auto")}switch(r){case"20":case"40":case"80":g(t,function(e,s){if(!e)return[];var a=[],i=(a[0]={"name":$.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length);if(!(s%20))for(var n=-1,l=0,r=0;r<=i;r++){var t={},o=parseInt(e[r]);if(n<0||n+4==o)l+=20;else{for(;l%s;)a.pop(),l-=20;if(isNaN(o))break;l=20}n=o,t.name=o,t.value=o,a.push(t)}return a}(o,parseInt(r)))||(e.channel="80");break;case"160":g(t,function(e){for(var s,a=[],i=(a[0]={"name":$.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},e.length),n=[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],l=0;l<=i;l++){var r={};s=parseInt(e[l]),-1<$.inArray(s,n)&&(r.name=s,r.value=s,a.push(r))}return a}(o,parseInt(r)))||(e.channel="80")}}return e;function g(e,s){for(var a=s.length,i=0;i<a;i++)if(e==s[i].value)return 1}},proxy:"wirelessModule5g2Proxy"}),$.su.define("wirelessModule5g2Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_5g_2"),sync:function(e){var s=e.operation,a=this,i=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){a.read.call(a,$.extend({},e,{success:function(e){e=$.extend(s,e);a.trigger("ev_load",[e]),i.call(a,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless5g2Control",{type:"model",fields:[{name:"editField"},{name:"totalField"},{name:"wpaPersonal5g2"},{name:"wpa3Personal5g2"},{name:"wpaEnterprise5g2"},{name:"wep5g2"},{name:"channelField"}]}),$.su.storeManager.define("hwmode5g2Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode5g2Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel5g2Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless5g2Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_5g_2"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(g){g.su.moduleManager.define("wirelessAdv6g",{services:["moduleManager","ajax","device"],stores:["encryption6GStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless5gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode6gStore","htmode6gStore","channel6gStore"],models:["wireless6g","wireless6gControl","regionWirelessCapabilityModel","quickSetupModel"],deps:["utils","wirelessSettings"],views:["wirelessAdv6gView","wirelessAdv6gViewBasic","wirelessAdv6gViewQs"],listeners:{"ev_on_launch":function(e,s,a,i,n,l,r){s.handleRegionInfo(),s.dfd=g.Deferred(),i.wireless6g.load({success:function(){s.dfd.resolve()}})},"ev_before_destroy":function(){}},init:function(n,i,l,e,s,r){this.listen({"models.wireless6g.enable":{"ev_value_change":function(e,s,a){"on"===s?(this.disableAll=!1,l.wireless6gControl.editField.show(),0!=r.device.getConfig().supportMUMIMO&&1==r.device.getConfig().support6GMUMIMO||(l.wireless6g.mimo.hide(),l.wireless6g.mimo.disable())):(this.disableAll=!0,l.wireless6gControl.editField.hide())}},"models.wireless6g.psc":{"ev_value_change":function(e,s,a){var i=l.wireless6g.htmode.getValue();n.resetChannel(i,s)}},"models.wireless6g.htmode":{"ev_value_change":function(e,s,a){null!==a&&n.resetChannel(s)}},"models.wireless6g":{"ev_loaded":function(e,s){r.ajax.request({proxy:"sysWireless6gProxy",data:{"operation":"read"},success:function(e){e&&l.wireless6g&&l.wireless6g.channel&&("on"==e.ENABLE?l.wireless6g.channel.disable():l.wireless6g.channel.enable(),l.wireless6g.hwmode.setValue("ax_5"),l.wireless6g.hwmode.record(),i.wirelessAdv6gViewBasic.hwmodeShow.setValue(g.su.CHAR.WIRELESS_SETTINGS.MODE_AX_5),i.wirelessAdv6gView.hwmodeShow.setValue(g.su.CHAR.WIRELESS_SETTINGS.MODE_AX_5))}}),n.resetChannel(s.htmode),this.syncWifiSharingData()},"ev_model_submit":function(e,s){this.syncWifiSharingData()},"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wireless6g.encryption":{"ev_value_change":function(e,s,a){switch(l.wireless6gControl.wpa3Personal6g.hide(),l.wireless6gControl.wpaEnterprise6g.hide(),l.wireless6gControl.wep6g.hide(),s){case"psk_sae":l.wireless6gControl.wpa3Personal6g.show(),l.wireless6g.pskCipher.hide(),l.wireless6g.pskVersion.setValue("sae_only"),l.wireless6g.pskVersion.record(),i.wirelessAdv6gView.pskVersionShow.setValue(g.su.CHAR.WIRELESS_SETTINGS.WPA3_SAE),l.wireless6g.pskKey.setVtype("wpa3_password");break;case"owe":l.wireless6g.pskVersion.setValue("owe_only")}n.setWpa3VersionTip()}}})}},function(l,n,r,t,o,s){return{dfd:null,SYS_WIRELESS_6g_URL:g.su.url("/admin/wireless?form=syspara_6g"),onDestroy:function(){var e=s.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",l.handleRegionInfo)},handleRegionInfo:function(){var e=r.regionWirelessCapabilityModel.channel5g.getValue();if(o.utils.isEmptyObject(e))r.wireless6gControl.totalField.hide();else{r.wireless6gControl.totalField.show();var s=r.regionWirelessCapabilityModel.htmode6g.getValue();if(s){for(var a=[],i=s.length,n=0;n<i;n++){var l={};switch(s[n]){case"40":l.name="20/40"+g.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"80":l.name="20/40/80"+g.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"160":l.name="20/40/80/160"+g.su.CHAR.WIRELESS_SETTINGS.MHZ;break;default:l.name=s[n]+g.su.CHAR.WIRELESS_SETTINGS.MHZ}l.value=s[n],a.push(l)}t.htmode6gStore.loadData(a)}}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var a=[];switch(s){case"auto":case"20":break;case"40":0<=e.indexOf("233")&&e.splice(e.indexOf("233"),1);break;case"80":case"160":0<=e.indexOf("225")&&e.splice(e.indexOf("225"),1),0<=e.indexOf("229")&&e.splice(e.indexOf("229"),1),0<=e.indexOf("233")&&e.splice(e.indexOf("233"),1)}for(var i=0;i<e.length;i++){var n={},l=parseInt(e[i]);n.name=l,n.value=l,a.push(n)}return a},channelDFSandPSC:function(e){var s=[];s[0]={"name":g.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"};for(var a=0;a<e.length;a++)e[a].value=parseInt(e[a].value),52!=e[a].value&&56!=e[a].value&&60!=e[a].value&&64!=e[a].value&&100!=e[a].value&&104!=e[a].value&&108!=e[a].value&&112!=e[a].value&&116!=e[a].value&&120!=e[a].value&&124!=e[a].value&&128!=e[a].value&&132!=e[a].value&&136!=e[a].value&&140!=e[a].value&&144!=e[a].value||(e[a].name+="(DFS)"),5!=e[a].value&&21!=e[a].value&&37!=e[a].value&&53!=e[a].value&&69!=e[a].value&&85!=e[a].value&&101!=e[a].value&&117!=e[a].value&&133!=e[a].value&&149!=e[a].value&&165!=e[a].value&&181!=e[a].value&&197!=e[a].value&&213!=e[a].value&&229!=e[a].value||(e[a].name+="(PSC)"),s.push(e[a]);return s},channelPSC:function(e){for(var s=[],a=(s[0]={"name":g.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},[5,21,37,53,69,85,101,117,133,149,165,181,197,213,229]),i=0;i<e.length;i++){var n=parseInt(e[i].value);0<=a.indexOf(n)&&s.push({"name":e[i].name+"(PSC)","value":parseInt(e[i].value)})}return s},resetChannel:function(e,s){var a=r.regionWirelessCapabilityModel.channel6g.getValue(),i=r.wireless6g.channel.getValue(),s=s||r.wireless6g.psc.getValue(),n={},n=l.getHtChannel(a,e);n="on"==s?l.channelPSC(n):l.channelDFSandPSC(n),t.channel6gStore.loadData(n),o.utils.valInObjArr(i,n)?r.wireless6g.channel.setValue(i):r.wireless6g.channel.setValue("auto")},setWepEncrpyVtype:function(){var e,s=r.wireless6g.wepFormat1.getValue(),a=r.wireless6g.wepType1.getValue();"asic"==s?"64"==a?e="asic_64":"128"==a&&(e="asic_128"):"hex"==s&&("64"==a?e="hex_64":"128"==a&&(e="hex_128")),r.wireless6g.wepKey1.setVtype(e)},beforeSubmit:function(){var e=r.wireless6g.server.getValue(),s=r.wireless6g.encryption.getValue(),a=r.wireless6g.enable.getValue();return r.wireless6g.disabled_all.setValue(this.disableAll?"on":"off"),"on"==a&&"wpa"==s?r.wireless6g.server.setValidator(function(){return o.utils.ipToInt(e)!=o.utils.ipToInt(o.wirelessSettings.getLanIP())||g.su.CHAR.ERROR["00000077"]}):"on"==a&&"wep"==s&&l.setWepEncrpyVtype(),r.wireless6g.validate()},syncQsData:function(){var e=r.wireless6g.getData();return!(!r.wireless6g.pskKey.validate()||!r.wireless6g.ssid.validate())&&(r.quickSetupModel.replaceData({wireless6gEnable:e.enable,wireless6gSsid:e.ssid,wireless6gEncryPassword:e.pskKey,wireless6gDisabledAll:"on"===e.enable?"off":"on",wireless6gregionEnable:"on"}),e.pskKey?r.quickSetupModel.replaceData({wireless6gPskKey:e.pskKey,wireless6gEncryption:"psk_sae",wireless6gPskVersion:"sae_only",wireless6gPskCipher:"auto"}):r.quickSetupModel.replaceData({wireless6gEncryption:"none"}),!0)},isQsDirty:function(){for(var e=r.wireless6g,s=[e.enable,e.ssid,e.pskKey],a=0,i=s.length;a<i;a++)if(s[a].isDirty())return!0},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,a=e.password,e=e.security,i=n[this.getEffectiveView()].wifisharing;i&&i.setValue({ssid:s,password:a,security:e})},getWifiInfo:function(){var e,s,a="on"===r.wireless6g.enable.getValue(),i=r.wireless6g.ssid.getValue();switch(r.wireless6g.encryption.getValue()){case"psk_sae":e=r.wireless6g.pskKey.getValue(),s="psk_sae";break;case"owe":e="",s="owe";break;default:e="",s="none"}return{enable:a,ssid:i,password:e,security:s}},syncMainModel:function(){var e,s=r.wireless6g.getData("submit",!0),a=[];for(e in s)a.push(e);for(var i=0;i<a.length;i++){var n="wireless_6g_"+a[i],l=s[a[i]];s[n]=l,delete s[a[i]]}return"owe"==s.wireless_6g_encryption?s["wireless_6g_psk_version"]="owe_only":"psk_sae"==s.wireless_6g_encryption&&(s["wireless_6g_psk_version"]="sae_only"),s},dataChangeOn24g:function(e,s){e!==undefined?(n.wirelessAdv6gViewQs.wirelessQsAll.disable(),currentSsid=r.wireless6g.ssid.getValue(),r.wireless6g.ssid.setValue(e),r.wireless6g.pskKey.setValue(s)):n.wirelessAdv6gViewQs.wirelessQsAll.enable()},disableQsAll:function(){n.wirelessAdv6gViewQs.wirelessQsAll.disable()},getHwMode:function(){return r.wireless6g.hwmode.getValue()},getWirelessEnable:function(){return r.wireless6g.enable.getValue()},setWpa3VersionTip:function(){var e=r.wireless6g.encryption.getValue(),s=r.wireless6g.pskVersion.getValue();"psk_sae"==e&&"sae_only"==s?r.wireless6g.pskVersion.setTips(g.su.CHAR.WIRELESS_SETTINGS.VERSION_TIP):r.wireless6g.pskVersion.setTips("")}}})}(jQuery),$.su.modelManager.define("wireless6g",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption"},{name:"pskVersion",mapping:"psk_version"},{name:"pskCipher",mapping:"psk_cipher"},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wpaVersion",mapping:"wpa_version"},{name:"wpaCipher",mapping:"wpa_cipher"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"wepMode",mapping:"wep_mode"},{name:"wepFormat1",mapping:"wep_format1"},{name:"wepType1",mapping:"wep_type1"},{name:"wepKey1",mapping:"wep_key1",allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0},{name:"psc",mapping:"psc"},{name:"mimo",mapping:"mu_mimo"}],convert:function(e){var s=e.encryption,a=e.psk_cipher,i=e.hwmode,n=e.wpa_cipher,l=e.hwmode,r=e.htmode,t=e.channel,o=e.capability&&e.capability.channel_6g;if(o){switch(s){case"psk":"tkip"!=a||"n_5"!=i&&"ac_5"!=i&&"nac_5"!=i||(e.psk_cipher="auto");break;case"wpa":"tkip"!=n||"n_5"!=i&&"ac_5"!=i&&"nac_5"!=i||(e.wpa_cipher="auto")}switch(l){case"a_5":e.htmode="auto";break;case"n_5":case"an_5":"80"==r&&(e.htmode="auto")}switch(r){case"auto":r="20";case"20":case"40":case"80":case"160":!function(e,s){for(var a=s.length,i=0;i<a;i++)if(e==s[i].value)return 1;return}(t,function(e,s){if(!e)return[];var a=[];switch(a[0]={"name":$.su.CHAR.WIRELESS_SETTINGS.AUTO,"value":"auto"},s){case"20":break;case"40":0<=e.indexOf("233")&&e.splice(e.indexOf("233"),1);break;case"80":case"160":0<=e.indexOf("225")&&e.splice(e.indexOf("225"),1),0<=e.indexOf("229")&&e.splice(e.indexOf("229"),1),0<=e.indexOf("233")&&e.splice(e.indexOf("233"),1)}for(var i=0;i<e.length;i++){var n={},l=parseInt(e[i]);n.name=l,n.value=l,a.push(n)}return a}(o,r))&&(e.channel="auto")}}return e},proxy:"wirelessModule6gProxy"}),$.su.define("wirelessModule6gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_6g"),sync:function(e){var s=e.operation,a=this,i=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){a.read.call(a,$.extend({},e,{success:function(e){e=$.extend(s,e);a.trigger("ev_load",[e]),i.call(a,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless6gControl",{type:"model",fields:[{name:"editField"},{name:"totalField"},{name:"wpa3Personal6g"},{name:"wpaEnterprise6g"},{name:"wep6g"}]}),$.su.storeManager.define("hwmode6gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode6gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel6gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless6gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_6g"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(S){S.su.moduleManager.define("wirelessAdvSmartConn",{services:["device","ajax","moduleManager"],models:["wirelessSmartConn","wirelessSmartConnView","wirelessSmartConnEdit","wireless24g","wireless5g1","wireless5g2"],stores:["transPowerStore","encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless24gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore"],deps:["wirelessSettings","utils"],views:["wirelessAdvSmartConnView","wirelessAdvSmartConnViewBasic"],listeners:{"ev_on_launch":function(e,s,a,i,n,l,r){s.isTriband=r.device.getIsTriband(),i.wirelessSmartConn.load(),i.wirelessSmartConnEdit.load()}},init:function(m,i,c,e,h,_){this.control({".index-common-save-btn":{"ev_will_auto_save":function(e,s,a){for(var i,n,l,r,t,o,g,w=c.wirelessSmartConnEdit.encryption.getValue(),p=!1,d=0,u=a.length;d<u;d++)-1<a[d].dataObj.name.indexOf("wireless")&&(p=!0);p&&("on"===c.wirelessSmartConn.smartEnable.getValue()?("wpa"==w?(i=c.wirelessSmartConnEdit.server.getValue(),c.wirelessSmartConnEdit.server.setValidator(function(){return h.utils.ipToInt(i)!=h.utils.ipToInt(h.wirelessSettings.getLanIP())||S.su.CHAR.ERROR["00000077"]})):"wep"==w&&m.setWepEncrpyVtype(),c.wirelessSmartConnEdit.validate()&&m.postWirelessSmartData()):(n=_.moduleManager.get("wirelessAdv24g"),l=_.moduleManager.get("wirelessAdv5g1"),w="/admin/wireless?form=wireless_2g&form=wireless_5g",m.isTriband&&(r=_.moduleManager.get("wirelessAdv5g2"),w="/admin/wireless?form=wireless_2g&form=wireless_5g&form=wireless_5g_2"),n.beforeSubmit()&&l.beforeSubmit()&&(!r||r.beforeSubmit())&&(t=n.syncMainModel(),o=l.syncMainModel(),g=r&&r.syncMainModel(),c.wirelessSmartConn.submit(),_.ajax.request({url:S.su.url(w),data:S.extend(!0,{operation:"write"},t,o,g),success:function(){var e,s=n.getWifiInfo(),a=l.getWifiInfo();m.isTriband&&(e=r.getWifiInfo()),s.enable||a.enable||m.isTriband&&e.enable?(h.wirelessSettings.loadWifiInfo(s,a,e),h.wirelessSettings.showWlanOnSmartOffSaveNote()):h.wirelessSettings.showWlanOffSaveNote(),n.syncWifiSharingData(),l.syncWifiSharingData(),r&&r.syncWifiSharingData(),m.showSmartOffNote(),m.updateGuestNetwork(),c.wireless24g.record(),c.wireless5g1.record(),c.wireless5g2.record()}}))))}}}),this.listen({"models.wirelessSmartConn":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wirelessSmartConn.smartEnable":{"ev_value_change":function(e,s,a){"on"===s?(h.wirelessSettings.hideDetailFreqConfig(),c.wirelessSmartConnView.editField.show(),i[this.getEffectiveView()].wifisharing.show()):(h.wirelessSettings.showDetailFreqConfig(),c.wirelessSmartConnView.editField.hide(),i[this.getEffectiveView()].wifisharing.hide())}},"models.wirelessSmartConnEdit.encryption":{"ev_value_change":function(e,s,a){switch(c.wirelessSmartConnView.pskEditField.hide(),c.wirelessSmartConnView.psk3EditField.hide(),c.wirelessSmartConnView.wpaEditField.hide(),c.wirelessSmartConnView.wepEditField.hide(),s){case"psk":c.wirelessSmartConnView.pskEditField.show(),c.wirelessSmartConnEdit.pskCipher.show();var i=c.wirelessSmartConnEdit.pskVersion.getValue();0<=S.inArray(i,["sae_transition","sae_only"])&&c.wirelessSmartConnEdit.pskVersion.setValue("auto"),c.wirelessSmartConnEdit.pskKey.setVtype("psk_password");break;case"psk_sae":c.wirelessSmartConnView.psk3EditField.show(),c.wirelessSmartConnEdit.pskCipher.hide();i=c.wirelessSmartConnEdit.pskVersion.getValue();S.inArray(i,["sae_transition","sae_only"])<0&&c.wirelessSmartConnEdit.pskVersion.setValue("sae_transition"),c.wirelessSmartConnEdit.pskKey.setVtype("wpa3_password");break;case"wpa":c.wirelessSmartConnView.wpaEditField.show();break;case"wep":c.wirelessSmartConnView.wepEditField.show()}}},"models.wirelessSmartConnEdit.pskVersion":{"ev_value_change":function(e,s,a){var i=c.wirelessSmartConnEdit.encryption.getValue();"psk"==i&&"rsn"==s?(c.wirelessSmartConnEdit.pskCipher.hideItems("auto"),"auto"==c.wirelessSmartConnEdit.pskCipher.getValue()&&c.wirelessSmartConnEdit.pskCipher.setValue("aes")):"psk"==i&&"rsn"!=s&&c.wirelessSmartConnEdit.pskCipher.showItems("auto")}},"models.wirelessSmartConnEdit.wpaVersion":{"ev_value_change":function(e,s,a){var i=c.wirelessSmartConnEdit.encryption.getValue();"wpa"==i&&"rsn"==s?(c.wirelessSmartConnEdit.wpaCipher.hideItems("auto"),"auto"==c.wirelessSmartConnEdit.wpaCipher.getValue()&&c.wirelessSmartConnEdit.wpaCipher.setValue("aes")):"wpa"==i&&"rsn"!=s&&c.wirelessSmartConnEdit.wpaCipher.showItems("auto")}},"models.wirelessSmartConnEdit":{"ev_loaded":function(){this.syncWifiSharingData()},"ev_will_auto_save":function(e,s){s.preventDefault()},"ev_model_submit":function(e,s){var a=this.getWifiInfo(),i=a.password;this.syncWifiSharingData(),this.updateGuestNetwork(),"on"===c.wirelessSmartConnEdit.enable.getValue()?h.wirelessSettings.showWlanOnSaveNote(a.ssid,""===i?S.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:i):h.wirelessSettings.showWlanOffSaveNote()}},"models.wireless24g":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wireless5g1":{"ev_will_auto_save":function(e,s){s.preventDefault()}},"models.wireless5g2":{"ev_will_auto_save":function(e,s){s.preventDefault()}}})}},function(i,n,l,e,r,t){return{isTriband:!0,setWepEncrpyVtype:function(){var e,s=l.wirelessSmartConnEdit.wepFormat1.getValue(),a=l.wirelessSmartConnEdit.wepType1.getValue();"asic"==s?"64"==a?e="asic_64":"128"==a&&(e="asic_128"):"hex"==s&&("64"==a?e="hex_64":"128"==a&&(e="hex_128")),l.wirelessSmartConnEdit.wepKey1.setVtype(e)},postWirelessSmartData:function(){l.wirelessSmartConn.submit(),i.isTriband?l.wirelessSmartConnEdit.submit({url:S.su.url("/admin/wireless?form=wireless_2g&form=wireless_5g&form=wireless_5g_2")}):l.wirelessSmartConnEdit.submit({url:S.su.url("/admin/wireless?form=wireless_2g&form=wireless_5g")})},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,a=e.password,e=e.security,i=n[this.getEffectiveView()].wifisharing;i&&i.setValue({ssid:s,password:a,security:e})},getWifiInfo:function(){var e,s,a=l.wirelessSmartConnEdit.ssid.getValue();switch(l.wirelessSmartConnEdit.encryption.getValue()){case"psk":e=l.wirelessSmartConnEdit.pskKey.getValue(),s="psk";break;case"psk_sae":e=l.wirelessSmartConnEdit.pskKey.getValue(),s="psk_sae";break;case"wpa":e=l.wirelessSmartConnEdit.wpaKey.getValue(),s="wpa";break;case"wep":e=l.wirelessSmartConnEdit.wepKey1.getValue(),s="wep";break;default:e="",s="none"}return{ssid:a,password:e,security:s}},showSmartOffNote:function(){var e,s=t.moduleManager.get("wirelessAdv24g"),a=t.moduleManager.get("wirelessAdv5g1"),s=s.getWifiInfo(),a=a.getWifiInfo();i.isTriband&&(e=t.moduleManager.get("wirelessAdv5g2").getWifiInfo()),s.enable||a.enable||i.isTriband&&e.enable?(r.wirelessSettings.loadWifiInfo(s,a,e),r.wirelessSettings.showWlanOnSmartOffSaveNote()):r.wirelessSettings.showWlanOffSaveNote()},updateGuestNetwork:function(){"basic"==t.moduleManager.get("wirelessSettings").getMode()&&t.moduleManager.get("guestNetworkModule").checkStatus()}}})}(jQuery),$.su.modelManager.define("wirelessSmartConn",{type:"model",fields:[{name:"smartEnable",mapping:"smart_enable"}],proxy:{url:$.su.url("/admin/wireless?form=smart_connect")}}),$.su.modelManager.define("wirelessSmartConnEdit",{type:"model",fields:[{name:"isTriband"},{name:"2gEnable",mapping:"wireless_2g_enable"},{name:"5gEnable",mapping:"wireless_5g_enable"},{name:"5g2Enable",mapping:"wireless_5g_2_enable"},{name:"wireless2gSsid",mapping:"wireless_2g_ssid"},{name:"wireless5gSsid",mapping:"wireless_5g_ssid"},{name:"wireless5g2Ssid",mapping:"wireless_5g_2_ssid"},{name:"wireless2gHidden",mapping:"wireless_2g_hidden"},{name:"wireless5gHidden",mapping:"wireless_5g_hidden"},{name:"wireless5g2Hidden",mapping:"wireless_5g_2_hidden"},{name:"wireless2gEncryption",mapping:"wireless_2g_encryption"},{name:"wireless5gEncryption",mapping:"wireless_5g_encryption"},{name:"wireless5g2Encryption",mapping:"wireless_5g_2_encryption"},{name:"wireless2gPskVersion",mapping:"wireless_2g_psk_version"},{name:"wireless5gPskVersion",mapping:"wireless_5g_psk_version"},{name:"wireless5g2PskVersion",mapping:"wireless_5g_2_psk_version"},{name:"wireless2gPskCipher",mapping:"wireless_2g_psk_cipher"},{name:"wireless5gPskCipher",mapping:"wireless_5g_psk_cipher"},{name:"wireless5g2PskCipher",mapping:"wireless_5g_2_psk_cipher"},{name:"wireless2gPskKey",mapping:"wireless_2g_psk_key"},{name:"wireless5gPskKey",mapping:"wireless_5g_psk_key"},{name:"wireless5g2PskKey",mapping:"wireless_5g_2_psk_key"},{name:"wireless2gWpaVersion",mapping:"wireless_2g_wpa_version"},{name:"wireless5gWpaVersion",mapping:"wireless_5g_wpa_version"},{name:"wireless5g2WpaVersion",mapping:"wireless_5g_2_wpa_version"},{name:"wireless2gWpaCipher",mapping:"wireless_2g_wpa_cipher"},{name:"wireless5gWpaCipher",mapping:"wireless_5g_wpa_cipher"},{name:"wireless5g2WpaCipher",mapping:"wireless_5g_2_wpa_cipher"},{name:"wireless2gServer",mapping:"wireless_2g_server"},{name:"wireless5gServer",mapping:"wireless_5g_server"},{name:"wireless5g2Server",mapping:"wireless_5g_2_server"},{name:"wireless2gPort",mapping:"wireless_2g_port"},{name:"wireless5gPort",mapping:"wireless_5g_port"},{name:"wireless5g2Port",mapping:"wireless_5g_2_port"},{name:"wireless2gWpaKey",mapping:"wireless_2g_wpa_key"},{name:"wireless5gWpaKey",mapping:"wireless_5g_wpa_key"},{name:"wireless5g2WpaKey",mapping:"wireless_5g_2_wpa_key"},{name:"wireless2gWepMode",mapping:"wireless_2g_wep_mode"},{name:"wireless5gWepMode",mapping:"wireless_5g_wep_mode"},{name:"wireless5g2WepMode",mapping:"wireless_5g_2_wep_mode"},{name:"wireless2gWepFormat1",mapping:"wireless_2g_wep_format1"},{name:"wireless5gWepFormat1",mapping:"wireless_5g_wep_format1"},{name:"wireless5g2WepFormat1",mapping:"wireless_5g_2_wep_format1"},{name:"wireless2gWepType1",mapping:"wireless_2g_wep_type1"},{name:"wireless5gWepType1",mapping:"wireless_5g_wep_type1"},{name:"wireless5g2WepType1",mapping:"wireless_5g_2_wep_type1"},{name:"wireless2gWepKey1",mapping:"wireless_2g_wep_key1"},{name:"wireless5gWepKey1",mapping:"wireless_5g_wep_key1"},{name:"wireless5g2WepKey1",mapping:"wireless_5g_2_wep_key1"},{name:"wireless2gTxpower",mapping:"wireless_2g_txpower"},{name:"wireless5gTxpower",mapping:"wireless_5g_txpower"},{name:"wireless5g2Txpower",mapping:"wireless_5g_2_txpower"},{name:"wireless_2g_hwmode"},{name:"wireless_5g_hwmode"},{name:"wireless_5g_2_hwmode"},{name:"enable"},{name:"disabled_all"},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption"},{name:"pskVersion",mapping:"psk_version"},{name:"pskCipher",mapping:"psk_cipher"},{name:"pskKey",mapping:"psk_key",maxLength:64,vtype:"psk_password",allowBlank:!1},{name:"wpaVersion",mapping:"wpa_version"},{name:"wpaCipher",mapping:"wpa_cipher"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"wepMode",mapping:"wep_mode"},{name:"wepFormat1",mapping:"wep_format1"},{name:"wepType1",mapping:"wep_type1"},{name:"wepKey1",mapping:"wep_key1"},{name:"txpower",mapping:"txpower"}],serialize:function(e){var s,a,i,n,l=$.su.serviceManager.get("device").getIsTriband(),r="on"===e.enable?"off":"on";for(n in e){var t=e[n];0<=n.indexOf("wireless_")||(s="wireless_2g_"+n,a="wireless_5g_"+n,i="wireless_5g_2_"+n,t!==undefined&&null!==t?(e[s]=t,e[a]=t,l&&(e[i]=t)):(delete e[s],delete e[a],delete e[i]),"disabled_all"===n&&(e[s]=r,e[a]=r,l&&(e[i]=r)),delete e[n])}return e["wireless_2g_hwmode"]=$.su.modelManager.get("wireless24g").hwmode.getValue()||"bgnax",e["wireless_5g_hwmode"]=$.su.modelManager.get("wireless5g1").hwmode.getValue()||"anacax_5",l&&(e["wireless_5g_2_hwmode"]=$.su.modelManager.get("wireless5g2").hwmode.getValue()||"anacax_5"),e},proxy:{url:$.su.url("/admin/wireless?form=wireless_2g")}}),$.su.modelManager.define("wirelessSmartConnView",{type:"model",fields:[{name:"editField"},{name:"pskEditField"},{name:"psk3EditField"},{name:"wpaEditField"},{name:"wepEditField"}]}),$.su.define("sysWirelessAdv2gAnd5gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_2g&form=wireless_5g"),writeFilter:function(e){return $.extend({operation:"write"},e)}}),$.su.define("sysWirelessAdv2gAnd5g2Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_2g&form=wireless_5g&form=wireless_5g_2"),writeFilter:function(e){return $.extend({operation:"write"},e)}});