<script>function doEscapeChar(a){for(var e="",t=0;t<a.length;t++)18==a.charCodeAt(t)?e+="\n":17==a.charCodeAt(t)?e+="\r":e+=a[t];return e}function tablePagesLteSms(a,e,t){var s,i=$(a),l=0,n=e,r=null==arguments[3]?7:arguments[3];if(param=[],i.next(".table-bottom-pages").remove(),!i.find("tr").hasClass("space-tr")&&0!=n){i.bind("repaginate",function(){if(i.find("tbody").empty(),$("#staticAll").prop("checked",!1),$("#staticAll").data("tpCheckbox").refresh(),!((l+=1)*e>=t+e)){$.act(ACT_SET,LTE_SMS_RECVMSGBOX,null,null,["PageNumber="+l]);var a=new Array,n=0,c="";smsInboxPagelist=$.act(ACT_GL,LTE_SMS_RECVMSGENTRY,null,null,["index","from","content","receivedTime","unread"]),$.exe()||($.each(smsInboxPagelist,function(){c=doEscapeChar(this.content),this.content=c,s=$.resizeStr(c,30),a.push([{text:'<div><input type="checkbox" id="staticCheckbox'+n+'"/><label></label></div>',width:"5%"},{text:1==this.unread?"<span class='table-grid-icon-lte unread-msg-icon-lte' id='msg_"+n+"' onClick='doMsgRead("+n+")'></span>":"<span class='table-grid-icon-lte read-msg-icon-lte' id='msg_"+n+"' onClick='doMsgRead("+n+")'></span>",width:"10%"},{text:""==this.from?" ":this.from,width:"15"},{text:$.htmlEncode(s),width:"35"},{text:this.receivedTime,width:"25%"},{text:"<span class='table-grid-icon edit-modify-icon' onClick='doMsgRead("+n+")'></span><span class='table-grid-icon edit-trash-icon' id='del_"+n+"' onclick='doMsgDel("+n+");'></span>",width:"10%"}]),n++}),$.initTableBody($("#tableSmsInbox"),a)),l-=1;var b=Math.floor((r-1)/2),m=Math.round((r-1)/2);if($("span[id$="+d+"]").show(),g.remove(),p.remove(),o>r+2){if(l>b+1){g.insertAfter($("#1-"+d));for(h=2;h<Math.min(l-b+1,o-r);h++)$("#"+h+"-"+d).hide()}if(l<o-m-2){p.insertBefore($("#"+o+"-"+d));for(var h=Math.max(l+m+2,r+2);h<o;h++)$("#"+h+"-"+d).hide()}}}});for(var c=t,o=Math.ceil(c/n),d=$.randomId("prev"),b=$.randomId("next"),g=$('<span id="left-'+d+'">...</span>'),p=$('<span id="right-'+d+'">...</span>'),m=$("<div class='table-bottom-pages'><span id='"+d+"' class='page'></span></div>"),h=1;h<=o;h++)$("<span id='"+h+"-"+d+"'>"+h+"</span>").on("click",{newPage:h-1},function(a){l=a.data.newPage,curPageNumGlobal=l+1,$(this).hasClass("click-page")||($(this).siblings("span").removeClass("click-page"),$(this).addClass("click-page"),i.trigger("repaginate"),l-1<0?$("#"+d).addClass("gray"):$("#"+d).removeClass("gray"),l+1>=o?$("#"+b).addClass("gray"):$("#"+b).removeClass("gray"))}).appendTo(m);var u=$("<span id='"+b+"' class='page right'></span>");if(m.append(u),m.insertAfter(i),0==o&&($("#"+d).addClass("gray"),$("#"+b).addClass("gray")),$("#"+d).on("click",function(){var a=$(this).siblings("span"),e=Number($(this).siblings("span.click-page").text())-1;curPageNumGlobal=(l=e-1)+1,l<0?curPageNumGlobal=1:(a.removeClass("click-page"),$("#"+e+"-"+d).addClass("click-page"),i.trigger("repaginate"),l-1<0&&$(this).addClass("gray"),$("#"+b).removeClass("gray"))}),$("#"+b).on("click",function(){var a=$(this).siblings("span"),e=Number($(this).siblings("span.click-page").text())+1;curPageNumGlobal=(l=e-1)+1,l>=o?curPageNumGlobal=o:(a.removeClass("click-page"),$("#"+e+"-"+d).addClass("click-page"),i.trigger("repaginate"),l+1>=o&&$(this).addClass("gray"),$("#"+d).removeClass("gray"))}),0==o){var f=new Array;$.initTableBody($("#tableSmsInbox"),f)}$("span#1-"+d).click()}}function doMsgDel(a){$.confirm(c_str.del_choosed,function(){$("#staticCheckbox"+a).parents("tr").first().remove(),$.act(ACT_DEL,LTE_SMS_RECVMSGENTRY,smsInboxPagelist[a].__stack,null),$.exe(function(a){a&&$.reload()}),$.reload()},function(){})}function doMsgRead(a){var e=$.act(ACT_GET,LTE_SMS_RECVMSGBOX,null,null);$.exe()||(param[0]=0,param[1]=curPageNumGlobal,param[2]=a,param[3]=smsInboxPagelist,param[4]=e.totalNumber,$.loadMain("lteSmsReadMsg.htm",param))}function clickSelStaticAll(){for(var a=$("#staticAll").prop("data-checked"),e=0;e<smsInboxPagelist.length;e++){var t=$("#staticCheckbox"+e);t.prop("data-checked")!=a&&(t.prop("checked",a),t.data("tpCheckbox").refresh())}}function delAllMsg(){for(var a=0;a<smsInboxPagelist.length;a++){var e=$("#staticCheckbox"+a);if(e.prop("data-checked")&&(e.parents("tr").first().remove(),$.act(ACT_DEL,LTE_SMS_RECVMSGENTRY,smsInboxPagelist[a].__stack,null),$.exe()))break}$.reload()}function clickStaticDel(){for(var a=0,e=0;e<smsInboxPagelist.length;e++)if($("#staticCheckbox"+e).prop("data-checked")){a=1;break}a&&$.confirm(c_str.del_choosed,function(){setTimeout(delAllMsg,200)},function(){})}function initSmsInboxTable(){$.act(ACT_SET,LTE_SMS_RECVMSGBOX,null,null,["PageNumber=0"]),$.exe(function(a){}),smsRecvBoxObj=$.act(ACT_GET,LTE_SMS_RECVMSGBOX,null,null,["totalNumber"]),$.exe(function(a){a||tablePagesLteSms($("#tableSmsInbox"),8,smsRecvBoxObj.totalNumber)})}function initTableInbox(){var a=[{text:'<div><input type="checkbox" id="staticAll" onClick="clickSelStaticAll();"/><label></label></div>',width:"5%"},{text:table_str.status,width:"10%"},{text:table_str.phoneNum,width:"15%"},{text:table_str.message,width:"35"},{text:table_str.received,width:"25%"},{text:table_str.modify,width:"10%"}];$.initTableHead($("#tableSmsInbox"),a),$("#tableSmsInbox").tpTable(initSmsInboxTable)}function init(){initTableInbox()}var smsInboxPagelist,smsRecvBoxObj,curPageNumGlobal,param</script>

<h3 id="t_et">Inbox</h3>
<div class="content-container">
    <form class="pure-form pure-form-aligned">
        <div class="table-op">
            <div class="table-btn">
                <span class="refresh-icon" id="staticRefresh"></span>
                <label class="T_refresh">Refresh</label>
                <span class="delete-icon" id="staticDel"></span>
                <label class="T_del">Delete</label>
            </div>
        </div>

        <table id="tableSmsInbox">
            <thead></thead>
            <tbody id="tableSmsInboxBody">
                <tr id="editSmsInbox" class="nd">
                    <td colspan="6">
                        <div id="outboxStaticPage"></div>
                    </td>
                </tr>
            </tbody>
        </table>
    </form>
</div>

<script>$("#staticDel").click(function(c){clickStaticDel()}),$("#staticRefresh").click(function(c){$.reload()}),$.tpInit(init)</script>
