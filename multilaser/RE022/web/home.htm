<html>
<head>
	<SCRIPT language=Javascript src="<% getInfo("lang");%>"></SCRIPT>
	<script>
		var timeout = 900000;	/* 15 min */
		var timeoutTimer;

		var version = '<% getInfo("lk_sw_version"); %>';
		var subversion = '<% getInfo("lk_sub_version"); %>';
		var compile = '<% getInfo("lk_compile_version"); %>';
		var bin_name = '<% getInfo("bin_name"); %>';

		function setTimeoutFn() {
			setTimeout(function () {
				alert(msg_request_fail);
				window.parent.postMessage('loadingOff', '*');
				window.parent.postMessage('boxNone', '*');
				location.reload();
			}, 3000);
		}

		timeoutTimer = setTimeout(timeoutFunc, timeout);
		function timeoutFunc() {
			document.forms[0].submit();
		}

		function resetTimeoutFunc() {
			clearTimeout(timeoutTimer);
			timeoutTimer = setTimeout(timeoutFunc, timeout);
		}

		/*
		* The Event listener for auto logout
		*/
		if (document.addEventListener) {                  // For all major browsers, except IE 8 and earlier
			document.addEventListener("click", eventListener);
			document.addEventListener("keypress", eventListener);
		} else if (document.attachEvent) {                  // For IE 8 and earlier versions
			document.attachEvent("onclick", eventListener);
			document.attachEvent("onkeypress", eventListener);
		}

		function eventListener(){
			resetTimeoutFunc();
		}
		function hideWaitDiv() {
			document.getElementById("waitdiv").style.display="none";
		}
		function showWaitDiv() {
			document.getElementById("waitdiv").style.display="";
		}
		(function () {
			function ajaxFn(open, url, data, Callback) {
				var ajax = new XMLHttpRequest();
				ajax.open(open, url);
				ajax.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				ajax.send(data);
				ajax.onreadystatechange = function () {
					Callback(ajax)
					if (ajax.readyState == 4 && ajax.status == 403) {
						alert(menu_timeout)
						window.parent.postMessage('loadingOff', '*');
						window.parent.postMessage('boxNone', '*');
						location.reload();
					}
					if (ajax.readyState == 4 && ajax.status == 404) {
						setTimeoutFn();
					}
				};
			}

			function enableTelnet(enable) {
				ajaxFn('POST', '/boafrm/formTelnet ', 'enable=' + enable, function callback(ajax) {
					if (ajax.readyState == 4 && ajax.status == 200) {
						if (enable) {
							alert(menu_telnet_start);
						} else {
							alert(menu_telnet_close);
						}
						location.href = "";
					}
				});
			}

			window.addEventListener("hashchange", function () {
				node = window.location.hash.split("/");
				if (node[0] !== "#") {
					return;
				}
				if (node[1] === "subversion") {
					alert(versionStr + ": " + version + "\n" + subversionStr + ": " + subversion + "\n" + compileStr + ": " + compile + "\n" + binStr + ": " + bin_name)
				}

				if (node[1] === "telnet") {
					var enable = typeof node[2] === "undefined" ? "off" : node[2];
					enableTelnet(enable === "on" ? 1 : 0);
				}
			});
		})();
	</script>
</head>
<body>
	<form action=/boafrm/formLogout method=POST name="logout" style="display: none;"></form>
	<div style="width: 1100px;margin: auto;" class="title-div">
		<div style="width: 100%;height: 142px;" class="title-class">
			<iframe name="title" id="title" src="title.html" align="middle" scrolling="no" frameborder="0" width="100%" height="100%"></iframe>
		</div>
		<div style="width: 100%;height: 40px;margin-bottom: 10px;" class="top_menu_div">
			<div style="width: 18%;float: left;"><iframe id="sub_menu" name="sub_menu" src="sub_menu_setup.htm" align="middle" scrolling="no" frameborder="0" width="100%" height="770"></iframe></div>
			<div style="width: 82%; float: right">
				<iframe name="top_menu" src="top_menu.htm" align="middle" scrolling="no" frameborder="0" width="100%" height="50"></iframe>
				<div style="width: 100%;" class="sub_content_class"><iframe id="content" name="content" src="wizard.htm" align="middle" scrolling="AUTO" frameborder="0" width="100%" height="720"></iframe></div>
			</div>
		</div>
	</div>
	<div id="waitdiv" style="position:fixed;top:0px;left:0px;width: 100%;height: 100%;background:rgba(0,0,0,0.2);display: none;">
		<div style="width: 200px;height: 200px;margin: auto;margin-top: 300px">
			<img src="./load.gif" width="200" height="200">
		</div>
	</div>
</body>
</html>
