<html>
<! Copyright (c) Realtek Semiconductor Corp., 2003. All Rights Reserved. ->
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8">
    <% getIndex("no-cache"); %>
    <title>Parent Control Settings</title>
    <script type="text/javascript" src="util_gw.js"> </script>
    <SCRIPT language=Javascript src="<% getInfo("lang");%>"></SCRIPT>
    <% getInfo("include_css"); %>
    <style>
    .on {display:on}
    .off {display:none}
    #tableParent td {
        word-break: break-word;
    }
    #tableParent a {
        cursor:pointer;
    }
    </style>
    <SCRIPT>
    parent.hideWaitDiv();
    var num = 0
    var delNum = 0
    var list = []
    function deleteClick()
    {
        delNum = 0 ;
        var index;
        for(i=0 ; i < num ; i++){
            index=i+1;
            if(document.formMacGroupEdit.elements['select'+index].checked)
                delNum ++ ;
        }
        if(delNum == 0){
            alert(urlfilter_select_to_delete);
            return false;
        }else if ( !confirm(urlfilter_delete_confirm) ) {
            return false;
        }else {
            parent.showWaitDiv();
            return true;
        }
    }

    function deleteAllClick()
    {
        if ( !confirm(urlfilter_delete_all_confirm) ) {
            return false;
        }
        else {
            parent.showWaitDiv();
            return true;
        }
    }
    function disableDelButton()
    {
        disableButton(document.formMacGroupEdit.deleteSelect);
        disableButton(document.formMacGroupEdit.deleteAll);
    }
    var macs=[]
    function editClick(index) {
        document.formMacGroupAdd.index.value = list[index].index;
        document.formMacGroupAdd.groupname.value = list[index].groupname;
        for(var i=0;i<8;i++){
            document.formMacGroupAdd.elements['mac'+i].value = '';
        }
        if(list[index].mac){
            macs=list[index].mac.split(',');
            for(var i=0; i<macs.length && i<8; i++){
                document.formMacGroupAdd.elements['mac'+i].value = macs[i];
            }
        }
    }
    function addSaveClick() {
        //name
        if(!document.formMacGroupAdd.groupname.value.trim()){
            alert(parent_blocking_group_name_null);
            document.formMacGroupAdd.groupname.focus();
            return false;
        }
        //mac
        var macNum = 0;
        if (document.formMacGroupAdd.elements['mac0'].value.trim()) {
            // add for "All MAC Address field can't reject 00:00:00:00:00:00/ff:ff:ff:ff:ff:ff MAC Address" issue
            with (document.formMacGroupAdd) {
                if (!checkMacAddr(mac0, macfilter_macaddr_invalid)) {
                    return false;
                } else {
                    macNum++
                }
            }
        }
        if (document.formMacGroupAdd.elements['mac1'].value.trim()) {
            // add for "All MAC Address field can't reject 00:00:00:00:00:00/ff:ff:ff:ff:ff:ff MAC Address" issue
            with (document.formMacGroupAdd) {
                if (!checkMacAddr(mac1, macfilter_macaddr_invalid)) {
                    return false;
                } else {
                    macNum++
                }
            }
        }
        if (document.formMacGroupAdd.elements['mac2'].value.trim()) {
            // add for "All MAC Address field can't reject 00:00:00:00:00:00/ff:ff:ff:ff:ff:ff MAC Address" issue
            with (document.formMacGroupAdd) {
                if (!checkMacAddr(mac2, macfilter_macaddr_invalid)) {
                    return false;
                } else {
                    macNum++
                }
            }
        }
        if (document.formMacGroupAdd.elements['mac3'].value.trim()) {
            // add for "All MAC Address field can't reject 00:00:00:00:00:00/ff:ff:ff:ff:ff:ff MAC Address" issue
            with (document.formMacGroupAdd) {
                if (!checkMacAddr(mac3, macfilter_macaddr_invalid)) {
                    return false;
                } else {
                    macNum++
                }
            }
        }
        if (document.formMacGroupAdd.elements['mac4'].value.trim()) {
            // add for "All MAC Address field can't reject 00:00:00:00:00:00/ff:ff:ff:ff:ff:ff MAC Address" issue
            with (document.formMacGroupAdd) {
                if (!checkMacAddr(mac4, macfilter_macaddr_invalid)) {
                    return false;
                } else {
                    macNum++
                }
            }
        }
        if (document.formMacGroupAdd.elements['mac5'].value.trim()) {
            // add for "All MAC Address field can't reject 00:00:00:00:00:00/ff:ff:ff:ff:ff:ff MAC Address" issue
            with (document.formMacGroupAdd) {
                if (!checkMacAddr(mac5, macfilter_macaddr_invalid)) {
                    return false;
                } else {
                    macNum++
                }
            }
        }
        if (document.formMacGroupAdd.elements['mac6'].value.trim()) {
            // add for "All MAC Address field can't reject 00:00:00:00:00:00/ff:ff:ff:ff:ff:ff MAC Address" issue
            with (document.formMacGroupAdd) {
                if (!checkMacAddr(mac6, macfilter_macaddr_invalid)) {
                    return false;
                } else {
                    macNum++
                }
            }
        }
        if (document.formMacGroupAdd.elements['mac7'].value.trim()) {
            // add for "All MAC Address field can't reject 00:00:00:00:00:00/ff:ff:ff:ff:ff:ff MAC Address" issue
            with (document.formMacGroupAdd) {
                if (!checkMacAddr(mac7, macfilter_macaddr_invalid)) {
                    return false;
                } else {
                    macNum++
                }
            }
        }
        if(macNum == 0){
            alert(parent_blocking_mac_null)
            document.formMacGroupAdd.elements['mac0'].focus();
            return false;
        }
        var MacArr = []
        for (var k = 0; k < macNum; k++) {
            var macEleVal = document.formMacGroupAdd.elements['mac' + k].value.replace(new RegExp(":","gm"),"").replace(new RegExp("-","gm"),"")
            if (MacArr.indexOf(macEleVal) != -1) {
                alert(mac_group_same_macaddr)
                return false
            }
            MacArr.push(macEleVal)
        }
        for(var j=0;j<8;j++){
            document.formMacGroupAdd.elements['mac'+j].value = document.formMacGroupAdd.elements['mac'+j].value.replace(new RegExp(":","gm"),"").replace(new RegExp("-","gm"),"")
        }
        parent.showWaitDiv();
        return true;
    }
    </SCRIPT>
</head>
<body>
<blockquote>
    <h2><script>dw(macgroup_header)</script></h2>
    <font size=2>
        <script>dw(macgroup_header_explain)</script>
    </font>
    <hr size=1 noshade align=top>
    <form action=/boafrm/formMacGroupAdd method=POST name="formMacGroupAdd">
        <INPUT type=hidden name=index value=''>
        <table border=0 width="500" cellspacing=4>
            <tr>
                <td width="30%">
                    <font size=2>
                        <b><script>dw(parent_group_name)</script>:</b>
                    </font>
                </td>
                <td width="70%">
                    <font size=2>
                        <input type="text" name="groupname" size="33" maxlength="21" value="">
                    </font>
                </td>
            </tr>
            <tr>
                <td width="30%">
                    <font size=2>
                        <b><script>dw(parent_mac_address)</script>:</b>
                    </font>
                </td>
                <td width="70%">
                    <font size=2>
                        <input type="text" name="mac0" size="33" value="">
                    </font>
                </td>
            </tr>
            <script>
                for(var i=1;i<8;i++){
                    document.write('<tr><td width="30%"></td><td width="70%"><font size=2>');
                    document.write('<input type="text" name="mac'+i+'" size="33" value=""');
                    document.write('</font></td></tr>');
                }
            </script>
        </table>
        <input type="hidden" value="/macgroup.htm" name="submit-url">
        <p>
            <input type="submit" value="Save" name="save" onClick="return addSaveClick()">
            <script>document.formMacGroupAdd.save.value = parent_save;</script>
        </p>
    </form>
    <form action=/boafrm/formMacGroupEdit method=POST name="formMacGroupEdit">
        <table border="1" width=750 style="border-color: gray;" id="tableParent">
            <tr><td colspan="9" align=center><font size=2><b><script>dw(parent_group_table)</script></b></font></td></tr>
            <tr class="tbl_head">
                <td align=center><font size=2><b><script>dw(parent_group_name)</script></b></font></td>
                <td align=center><font size=2><b><script>dw(parent_mac_address)</script></b></font></td>
                <td align=center style="width: 65px"><font size=2><b><script>dw(portfw_operation)</script></b></font></td>
                <td align=center style="width: 70px"><font size=2><b><script>dw(portfw_select)</script></b></font></td>
            </tr>
            <script>
                var string_json = '<% getInfo("macgroup_list"); %>';
                list = JSON.parse(string_json);
                //list = [{"index":1,"groupname":"Children","mac":"F8:C3:9E:F3:EC:9B,F8:C3:9E:F3:EC:9C,F8:C3:9E:F3:EC:9D"},{"index":2,"groupname":"TV","mac":"F8:C3:9E:F3:EC:9E,F8:C3:9E:F3:EC:9F,F8:C3:9E:F3:EC:9A"}]
                num = list.length
                if ( num > 0 ){
                    for(var i=0;i<num;i++){
                        document.write('<tr class="tbl_body">');
                        document.write('<td align=center>'+list[i].groupname+'</td>');
                        document.write('<td align=center>'+list[i].mac+'</td>');
                        document.write('<td align=center>');
                        document.write('<a style="text-decoration:underline" onClick="editClick('+i+')">'+parent_edit+'</a>');
                        document.write('</td>');
                        document.write('<td align=center>');
                        document.write('<input type="checkbox" name="select'+(i+1)+'" value="ON">');
                        document.write('</td>');
                        document.write('</tr>');
                    }
                }
            </script>
        </table>
        <br>
        <input type="submit" value="Delete Selected" name="deleteSelect" onClick="return deleteClick()">
        <script>document.formMacGroupEdit.deleteSelect.value = parent_delete_selected;</script>&nbsp;&nbsp;
        <input type="submit" value="Delete All" name="deleteAll" onClick="return deleteAllClick()">
        <script>document.formMacGroupEdit.deleteAll.value = parent_delete_all;</script>&nbsp;&nbsp;
        <input type="hidden" value="/macgroup.htm" name="submit-url">
        <script>
            if ( num == 0 )
                disableDelButton();
        </script>
    </form>
</blockquote>
</body>

</html>