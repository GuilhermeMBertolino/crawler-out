var showLanguage=[],lang_select="",initData={},masterMode="",token="",languages={auto:"自动检测",en:"English",cn:"简体中文",ct:"繁體中文",ru:"русский",vn:"Tiếng Việt",vi:"Tiếng Việt",jp:"日本語",kr:"한국어",es:"El español",pt:"Português",de:"Deutsch",th:"ภาษาไทย",fr:"Français"};function autoText(a){var e="Auto";return"ct"==a?e="自動偵測":"cn"==a?e="自动检测":"ru"==a?e="Авто":"vn"!=a&&"vi"!=a||(e="Tự động"),e}function changeLanguage(){var a=kr.get("language"),e="0",a=("auto"==a&&(a=getAuto(),e="1"),getLanguage(a),processText(),"1"==initData.showAutoLang&&(kr.elm("language").options[0].innerHTML=autoText(a)),0<=location.href.indexOf("wan_ie.html")&&linkType(),{topicurl:"setLanguageCfg",token:token,lang:a,langAutoFlag:e});kr.request({type:"POST",url:"/cgi-bin/cstecgi.cgi",data:a,success:function(a){getHelpUrl()}})}function getHelpUrl(){kr.request({type:"POST",url:"/cgi-bin/cstecgi.cgi",data:{topicurl:"getInitCfg"},success:function(a){initData=a}})}function getAuto(){var a=(navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage).toLowerCase(),e=initData.showLanguage,t=!1;if("zh-tw"==a||"zh-hk"==a)a="ct";else if("zh-cn"==a||"zh"==a||"zh-sg"==a)a="cn";else if("en"==a||"en-us"==a||"en-gb"==a)a="en";else if("ja"==a)a="jp";else if("be"==a||"ru"==a||"ru-md"==a||"ru-ru"==a)a="ru";else if("vi"==a||"vn"==a||"vi-vn"==a){for(var n=0;n<e.length;n++)if("vn"===e[n]){t=!0;break}a=t?"vn":"vi"}return a}window,kr.request({type:"POST",url:"/cgi-bin/cstecgi.cgi",async:!1,data:{topicurl:"getInitCfg"},success:function(a){showLanguage=(initData=a).showLanguage.split(","),token=initData.token;var e=initData.defaultLang,t=!1;"1"==initData.showAutoLang&&(showLanguage.splice(0,0,"auto"),"1"==initData.langAutoFlag&&(e=getAuto(),t=!0),languages.auto=autoText(e)),lang_select='<select id="language" onchange="changeLanguage()">';for(var n=0;n<showLanguage.length;n++)for(var g in languages)showLanguage[n]==g&&(lang_select+="auto"==g&&t||g==e&&!t?'<option value="'+g+'" selected>'+languages[g]+"</option>":'<option value="'+g+'">'+languages[g]+"</option>");lang_select+="</select>",masterMode=a.masterMode,getLanguage(e)}});