<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="proma" content="no-cache"><meta http-equiv="cache-control" content="no cache"><meta http-equiv="expires" content="0"><title></title><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><link rel="stylesheet" href="/static/css/main.css"><link rel="stylesheet" href="/static/css/common.css"><link rel="stylesheet" href="/static/css/advance_menu.css"><link rel="stylesheet" href="/static/css/loading.css"></head><style>.cabe-table{border:2px #eee solid}</style><body><div id="app"></div><script type="text/x-template" id="main"><div>
  <!--子菜单-->
  <adv-child-menu childType="mesh"></adv-child-menu>
  <br><br>
  <div class="advance-box">
    <div><x-help :text="lang_t('mesh.help_factory')"></x-help></div>
		<br><br>
	  <div class="fun-box">
		  <table class="table" style="border-collapse:separate; border-spacing:0px 10px;">
			  <tr>
				  <td><p>{{lang_t('mesh.help_factory')}}</p></td>
			  </tr>
        <tr>
          <td>
            <button type="button" class="btn" @click="handleSubmit" :disabled="len==0&&pairMode==0">{{ lang_t('mesh.lift_bound_main') }}</button>
          </td>
        </tr>
	    </table>
      <div style="margin-top: 8px;padding-left: 8px;" v-if="globalConfig.masterMode == '1'">
        <b>{{ lang_t('mesh.bound_list') }}</b>
        <table class="t_table3 table-bordered table-striped">
          <thead>
            <tr>
              <th>{{ lang_t('mesh.id') }}</th>
              <th>{{ lang_t('rule.mac') }}</th>
              <th>{{lang_t('mesh.lift_bound')}}</th>
            </tr>
          </thead>
          <tbody>
            <tr v-for="(list,index) in devices">
              <td>{{index+1}}</td>
              <td>{{list.mac}}</td>
              <td>
                <button type="button" class="btn btn-delete" @click="handleSubmit('slave',list.ip,list.mac)" >{{lang_t('mesh.lift')}}</button>
                <!-- <span v-else>{{ lang_t('mesh.no_device') }}</span> -->
              </td>
            </tr>
            <tr v-show="len==0">
              <td align="center" colspan="12">{{ lang_t('common.no_data') }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div></script><script src="/plugin/vue.js"></script><script src="/plugin/jquery-3.2.1.min.js"></script><script src="/static/js/config.js"></script><script src="/static/js/layout.js"></script><script src="/static/js/common.js"></script><script src="/static/js/topicurl.js"></script><script>var cs_main={template:"#main",data:function(){return{globalConfig:globalConfig,lang:$.lang,lang_t:lang_t,devices:[],mac:"",len:0,pairMode:"0"}},computed:{mesh_Mode:function(){return"2"==this.pairMode?this.lang_t("mesh.main_device"):"1"==this.pairMode?this.lang_t("mesh.slave_device"):this.lang_t("mesh.no_device")}},created:function(){var a=this;uiPost.getPairCfg(function(e){if(a.mac=e.def_pair_mac,a.pairMode=e.def_pair_mode,e.slave_list){var i=[];a.len=e.slave_list.length;for(var t=0;t<a.len;t++)0!=e.slave_list[t].def_pair_mode&&i.push(e.slave_list[t]);a.devices=i}})},methods:{handleSubmit:function(i,e,t){var a=null,n={},l=this.lang_t("mesh.lift_main_msg");if(i&&e&&t)l=this.lang_t("mesh.lift_msg"),n.ip=e,n.mac=t,n.type=i;else if(a=60,"2"==this.pairMode){for(var s=[],o=0;o<this.devices.length;o++)s.push(this.devices[o].ip);n.ip=s.join(","),n.type="all"}else n.type="slave";Cstool.Msg({content:l,type:"confirm",ok:function(){return uiPost.clearPairCfg(n,function(e){e.wtime&&"0"!=e.wtime&&(a=e.wtime),null==a?location.href=location.href:Cstool.Count(a,"js",function(){location.href="slave"==i?location.href:"/login.html"})}),!1}})}}}</script><script src="/static/js/main.js"></script></body></html>