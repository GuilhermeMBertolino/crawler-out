<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="proma" content="no-cache"><meta http-equiv="cache-control" content="no cache"><meta http-equiv="expires" content="0"><title></title><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><link rel="stylesheet" href="/static/css/main.css"><link rel="stylesheet" href="/static/css/common.css"><link rel="stylesheet" href="/static/css/advance_menu.css"><style>input[type=password],input[type=text]{width:240px;height:25px;padding:0 5px;outline:0}select:disabled{cursor:not-allowed;background-color:#eee;border-color:#ddd}</style></head><body><div id="app"></div><script type="text/x-template" id="main"><div>
  <!--子菜单-->
  <adv-child-menu childType="wifi"></adv-child-menu>
  <div class="advance-box">
  	<x-help :text="lang_t('wifi.help')"></x-help>
	<br><br>
	<div class="fun-box">
	  <table class="table">
	    <tr>
		  <td class="btn-tab-m">
		    <a @click="wifiChange('0')" :class="['btn-tab',wifiActive == '0' ? 'btn-tab-active' : '']">2.4GHz</a>
		    <a @click="wifiChange('1')" :class="['btn-tab',wifiActive == '1' ? 'btn-tab-active' : '']">5GHz</a>
		  </td>
	    </tr>       
	  </table>
	  <br>
	  <table class="table">
	    <!-- <tbody>
		<tr>
		  <td class="fun-left">{{ lang_t('wifi.state') }}</td>
		  <td>
			<x-switch v-model="wifiOff" @change="wifiState" :disabled="powerDis"></x-switch>
		  </td>
		</tr>
	    </tbody> -->
		<tr><td colspan="2">&nbsp;</td></tr>
	    <tbody class="table">
		<tr>
		  <td class="fun-left">{{ lang_t('wifi.ssid') }}</td>
		  <td>
			<input type="text" v-model="ssid" maxlength="32" v-verify="fromRule" data-name="ssid"/>
			<x-checkbox v-model="hssid" :disabled="hssidclass">{{ lang_t('wifi.hide') }}</x-checkbox>
		  </td>
		</tr>
		<tr>
		  <td class="fun-left">{{ lang_t('wifi.pass_state') }}</td>
		  <td>
			<x-switch v-model="ispass" :disabled="hssidclass"></x-switch>
		  </td>
		</tr>
		<tr v-show="ispass">
		  <td class="fun-left">{{ lang_t('wifi.pass') }}</td>
		  <td>
			<input type="password" class="input input-err" v-model="key" maxlength="63" v-pass v-verify="fromRule" data-name="key">
		  </td>
		</tr>
	    </tbody> 
	    <tbody>
		<tr>
		  <td class="fun-left">{{ lang_t('wifi.country') }}</td>
		  <td>
			<select v-model="countryCode" @change="countryChange">
			  <option v-for="country in countryList" :value="country.value">{{ country.name }}</option>
			</select>
		  </td>
		</tr>
		<tr v-show="false">
		  <td class="fun-left">{{ lang_t('wifi.band') }}</td>
		  <td>
			<select v-model="band" v-show="wifiActive == '0'" @change="autoChange('band','2.4')">
			  <option value="1">802.11b</option>
			  <option value="4">802.11g</option>
			  <option value="6">802.11n</option>
			  <option value="9">802.11b/g/n</option>
			</select>
			<select v-model="band5g" v-show="wifiActive == '1'" @change="autoChange('band')">
			  <option value="2">802.11a</option>
			  <option value="8">802.11a/n</option>
			  <option value="14">802.11a/n/ac</option>
			</select>
		  </td>
		</tr>
		<tr>
		  <td class="fun-left">{{ lang_t('wifi.bandwidth') }}</td>
		  <td>
			<select v-model="bw" v-show="wifiActive == '0'">
			  <option value="0" v-if="band == '6' || band == '9'" v-show="!globalConfig.certificatSoftware||(globalConfig.certificatSoftware&&countryCode!='IA')">{{ lang_t('wifi.auto') }}</option>
			  <option value="1">20M</option>
			  <option value="2" v-if="band == '6' || band == '9'">40M</option>
			</select>
			<select v-model="bw5g" v-show="wifiActive == '1'" @change="autoChange">
			  <option v-for="bw in bw5gOption" :value="bw.value">{{ bw.name }}</option>
			</select>
		  </td>
		</tr>
		<tr>
		  <td class="fun-left">{{ lang_t('wifi.channel') }}</td>
		  <td>
			<select v-model="channel" v-show="wifiActive == '0'" :disabled="channel_enable">
			  <option value="0">{{ lang_t('wifi.auto') }}</option>
			  <option v-for="v in channel2gOption" :key="v" :value="v">{{ v }}</option>
			</select>
			<select v-model="channel5g" v-show="wifiActive == '1'" :disabled="channel_enable">
			  <option value="0">{{ lang_t('wifi.auto') }}</option>
			  <option v-for="_channel in channel5gOption" :value="_channel">{{ _channel }}</option>
			</select>
		  </td>
		</tr>
		<tr><td colspan="2"></td></tr>
		</tbody>
		<tbody >
		<tr>
		  <td class="fun-left"></td>
		  <td>
			<button type="button" id="applyBtn" class="btn" @click="applyFun">{{ lang_t('common.apply') }}</button>
		  </td>
		</tr>
	    </tbody>
	  </table>
    </div>
  </div>
</div></script><script src="/plugin/vue.js"></script><script src="/plugin/jquery-3.2.1.min.js"></script><script src="/static/js/config.js"></script><script src="/static/js/layout.js"></script><script src="/static/js/common.js"></script><script src="/static/js/topicurl.js"></script><script>var cs_main={template:"#main",data:function(){return{globalConfig:globalConfig,lang:$.lang,lang_t:lang_t,wifiActive:"0",wifiOff:!1,wifiOff2:!1,wifiOff5:!1,hssid:!1,wifiDualband:"0",wifiSchEnabled:!1,ssid:"",key:"",countryCode:"CN",band:"9",band5g:"14",bw:"0",bw5g:"0",channel:"0",channel5g:"0",list:"",hssidclass:!1,powerDis:!1,channel_enable:!1,ispass:!1}},computed:{fromRule:function(){var n=this;return{ssid:function(i,t){var a=cs.ssid(i);0==a?t(n.lang_t("wifi.msg1")):4==a?t(n.lang_t("wifi.msg18")):1==a?t(n.lang_t("wifi.msg20")):2==a?t(n.lang_t("wifi.msg3")):t()},key:function(i,t){var a=cs.string(i,"pass");n.ispass?(""==i&&t(n.lang_t("wifi.pass")+n.lang_t("wifi.msg6")),1==a?t(n.lang_t("wifi.msg5")):i.length<8||63<i.length?t(n.lang_t("wifi.msg4")):t()):t()}}},countryList:function(){var i=[];if(this.list){var t=this.list.split(",");for(var a in t)"CN"==t[a]?i.push({name:this.lang_t("wifi.china"),value:"CN"}):"US"==t[a]?i.push({name:this.lang_t("wifi.usa"),value:"US"}):"EU"==t[a]?i.push({name:this.lang_t("wifi.europe"),value:"EU"}):"IA"==t[a]?i.push({name:this.lang_t("wifi.indonesia"),value:"IA"}):"TN"==t[a]?i.push({name:this.lang_t("wifi.tunisia"),value:"TN"}):"TW"==t[a]?i.push({name:this.lang_t("wifi.taiwan"),value:"TW"}):"VN"==t[a]?i.push({name:this.lang_t("wifi.vietnam"),value:"VN"}):"MY"==t[a]?i.push({name:this.lang_t("wifi.malaysia"),value:"MY"}):"RU"==t[a]?i.push({name:this.lang_t("wifi.russia"),value:"RU"}):"TH"==t[a]?i.push({name:this.lang_t("wifi.thailand"),value:"TH"}):"BR"==t[a]?i.push({name:this.lang_t("wifi.brazil"),value:"BR"}):"OT"==t[a]&&i.push({name:this.lang_t("wifi.other"),value:"OT"})}return i},bw5gOption:function(){var i=[{value:"1",name:"20M"},{value:"2",name:"40M"},{value:"3",name:"80M"}];if(globalConfig.certificatSoftware)return[i[0]];var t=[],a=this.band5g;return"2"==a?(t.push(i[0]),this.bw5g="1"):t=("8"==a&&i.splice(2,1),i),t},channel2gOption:function(){var i=this.countryCode,t=[],a=1,n=13;for("US"===i&&(n=11),"TN"===i&&(n=11),"TW"===i&&(n=11),globalConfig.certificatSoftware&&"IA"===i&&"2"==this.bw&&(a=3,n=11);a<=n;a++)t.push(a);return t},channel5gOption:function(){var i=this.countryCode,t=["149","153","157","161"],a=["36","40","44","48"],n=["52","56","60","64","100","104","108","112","116","120","124","128","132","136","140"];globalConfig.certificatSoftware||"2"==this.band5g||"1"!=this.bw5g||t.push("165"),n=a.concat(n,t);var s=[];switch(i){case"CN":case"US":s=a.concat(t);break;case"EU":s=a;break;case"OT":s=n;break;case"IA":s=globalConfig.certificatSoftware&&"1"==this.wifiActive?a.concat(t):t;break;case"TN":s=a;break;case"TW":s=a.concat(t);break;case"VN":s=["36","40","44","48","52","56","60","64"].concat(t);break;case"MY":case"RU":case"TH":s=a.concat(t);break;case"BR":s=n}return~$.inArray(this.channel5g,s)||(this.channel5g="0"),s}},created:function(){"wisp"==this.globalConfig.opmode||"rpt"==this.globalConfig.opmode?this.channel_enable=!0:this.channel_enable=!1;var i=location.hash;this.wifiActive=""!=i?i.slice(i.length-1):cs.local(this.wifiActive),this.wifiInit(this.wifiActive)},methods:{wifiChange:function(i){this.wifiActive=i,this.wifiInit(i),location.hash="#wifi"+i},wifiInit:function(t){var a=this,i={};i.wifiIdx=t,uiPost.getWiFiBasicCfg(i,function(i){"0"==t?(a.bw=i.bw,a.band=i.band,a.channel=i.channel):"1"==t&&(a.bw5g=i.bw,a.band5g=i.band,a.channel5g=i.channel),a.wifiDualband=i.wifiDualband,a.hssid="0"!=i.hssid,a.ssid=i.ssid,a.key=i.key,a.ispass=""!=i.key,a.countryCode=i.countryCode,i.countryCodeList&&(a.list=i.countryCodeList)})},countryChange:function(){"0"==this.wifiActive?this.channel="0":"1"==this.wifiActive&&(this.channel5g="0")},autoChange:function(i,t){if("band"==i)if("2.4"==t)"1"!=this.band&&"4"!=this.band||(this.bw="1");else{var a=!1;for(var n in this.bw5gOption)if(this.bw5gOption[n].value==this.bw5g){a=!0;break}a||(this.bw5g="0")}},disabled:function(i,t){i?(this.hssidclass=!1,$('input[type="text"],input[type="password"]').attr("disabled",!1),$("button#applyBtn").attr("disabled",!1)):($('input[type="text"],input[type="password"]').attr("disabled",!0),$("button#applyBtn").attr("disabled",!0),this.hssidclass=!0),"1"==t?(this.powerDis=!0,i?$("button#applyBtn").attr("disabled",!1):$("button#applyBtn").attr("disabled",!0)):this.powerDis=!1},applyFun:function(){var a=this,t={addEffect:"0"};Cstool.Verify(this.fromRule,function(i){i&&("1"==a.wifiActive?(t.wifiIdx="1",t.bw=String(a.bw5g),t.band=String(a.band5g),t.channel=String(a.channel5g)):(t.wifiIdx="0",t.bw=String(a.bw),t.band=String(a.band),t.channel=String(a.channel)),t.hssid=a.hssid?"1":"0",t.ssid=a.ssid,a.ispass?t.key=a.key:t.key="",t.countryCode=a.countryCode,uiPost.setWiFiBasicCfg(t,function(i){var t=30;i.wtime&&"0"!=i.wtime?(t=i.wtime,Cstool.Count(t,"js",function(){cs.local(a.wifiActive,"href")})):cs.local(a.wifiActive,"href")}))})}}}</script><script src="/static/js/main.js"></script></body></html>