<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=1200,initial-scale=1"><meta name="apple-mobile-web-app-capable" content="yes"><meta http-equiv="proma" content="no-cache"><meta http-equiv="cache-control" content="no cache"><meta http-equiv="expires" content="0"><title></title><meta content="width=device-width,initial-scale=1,user-scalable=no" name="viewport"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="stylesheet" href="/static/css/phone/style.css"><style>.big-size{white-space:pre-wrap;word-wrap:break-word;word-break:break-all}</style></head><body><div id="app"></div><script type="text/x-template" id="main"><div>
  <div class="toper">
    <phone-back url="/phone/home.html" :title="lang_t('menu.wizard')"></phone-back>
  </div>
  <div class="nav">{{ wizardTitle }}</div>
	<br><br>
		<div class="dot" style="position: fixed;text-align: center;width: 100%;bottom: 20px;z-index: 5000" id="dot_id">
				<i v-for="dot in 6" :class="[dotIdx == dot-1 ? 'active' : '']"></i>
		</div>  
		<div style="position:fixed;text-align:center;width:100%;bottom:5%;padding:0 0 20px;">
			<div class="footer">
				<button class="btn" @click="operatFun('back')" style="width:45%;">{{ dotIdx == 0 ? lang_t('common.exit') : lang_t('common.back') }}</button>
				<button class="btn" @click="operatFun('next')" style="width:45%;margin-left:10%;">{{ dotIdx == 5 ? lang_t('common.done') : lang_t('common.next') }}</button>
			</div>
		</div>
	<div :style="{'height': mainHeight}">
		<div v-if="0">
			<div class="content">
			<div class="group">
				<div class="item-r select_input">
					<span class="right">
						<select v-model="server" >
						<option value="CN">{{ lang_t('wifi.china') }}</option>
						<option value="OT">{{ lang_t('wifi.other') }}</option>
						</select>
					</span>
				</div>
				<div class="item-sw">
				<p>{{ lang_t('wizard.server_set') }}:</p>
				</div>
			</div>
			</div>
		</div>
		<div v-show="dotIdx == 0">
			<div class="content">
			<div class="group">
				<div style="margin: 0 20px;">
				  <div style="white-space:pre-wrap;word-wrap:break-word;word-break:break-all;line-height: 20px;">
					<div>{{lang_t('mesh.mesh_warm',[globalConfig.productModel])}}<br>{{lang_t('mesh.mesh_warm_con',[globalConfig.slaveNum])}}</div>
				  </div>		
				  <div align="center" v-show = "meshStatus == '1'">
					<p>{{"Mesh"+lang_t('common.finish')}}<sapn >{{","+slaveMac}}</sapn>{{lang_t('mesh.mesh_finish')}}</p>
				  </div>
				  <div align="center" v-show= "meshStatus == '0'" >
					<p>{{"Mesh"+lang_t('mesh.mesh_fail')}}</p>
				  </div>
				</div>
			</div>
			</div>
		</div>
	 <div v-show="dotIdx == 1">
		<div class="content">
	  <div class="group">
		<div class="item-l">
		  {{ lang_t('time.time_zone') }}
		</div>
		<div class="item-r">
				<select v-model="tz" style="width: 220px;">
			<option value="UTC+12">(UTC-12:00) {{ lang_t('time.ntp25') }}</option>
			<option value="UTC+11">(UTC-11:00) {{ lang_t('time.ntp1') }}</option>
			<option value="UTC+10">(UTC-10:00) {{ lang_t('time.ntp2') }}</option>
			<option value="UTC+9">(UTC-09:00) {{ lang_t('time.ntp3') }}</option>
			<option value="UTC+8">(UTC-08:00) {{ lang_t('time.ntp4') }}</option>
			<option value="UTC+7">(UTC-07:00) {{ lang_t('time.ntp5') }}</option>
			<option value="UTC+6">(UTC-06:00) {{ lang_t('time.ntp6') }}</option>
			<option value="UTC+5">(UTC-05:00) {{ lang_t('time.ntp7') }}</option>
			<option value="UTC+4">(UTC-04:00) {{ lang_t('time.ntp8') }}</option>
			<option value="UTC+3">(UTC-03:00) {{ lang_t('time.ntp9') }}</option>
			<option value="UTC+2">(UTC-02:00) {{ lang_t('time.ntp10') }}</option> 
			<option value="UTC+1">(UTC-01:00) {{ lang_t('time.ntp11') }}</option>
			<option value="UTC+0">(UTC-00:00) {{ lang_t('time.ntp12') }}</option>
			<option value="UTC-1">(UTC+01:00) {{ lang_t('time.ntp13') }}</option>
			<option value="UTC-2">(UTC+02:00) {{ lang_t('time.ntp14') }}</option>
			<option value="UTC-3">(UTC+03:00) {{ lang_t('time.ntp15') }}</option>
			<option value="UTC-4">(UTC+04:00) {{ lang_t('time.ntp16') }}</option>
			<option value="UTC-5">(UTC+05:00) {{ lang_t('time.ntp17') }}</option>
			<option value="UTC-6">(UTC+06:00) {{ lang_t('time.ntp18') }}</option>
			<option value="UTC-7">(UTC+07:00) {{ lang_t('time.ntp19') }}</option>
			<option value="UTC-8">(UTC+08:00) {{ lang_t('time.ntp20') }}</option>
			<option value="UTC-9">(UTC+09:00) {{ lang_t('time.ntp21') }}</option>
			<option value="UTC-10">(UTC+10:00) {{ lang_t('time.ntp22') }}</option>
			<option value="UTC-11">(UTC+11:00) {{ lang_t('time.ntp23') }}</option>
			<option value="UTC-12">(UTC+12:00) {{ lang_t('time.ntp24') }}</option>
		  </select>
			</div>
		</div>
		</div>
	 </div>
	 <div v-show="dotIdx == 2">
	 <div class="content">
		<div>
			<div class="group">
		  <div class="item-l">{{ lang_t('wan.proto') }}</div>
		  <div class="item-r">
				<select v-model="proto">
					<option value="0" v-if="globalConfig.wanTypeList_STATIC">{{ lang_t('wan.static_ip') }}</option>
					<option value="1" v-if="globalConfig.wanTypeList_DHCP">{{ lang_t('wan.dynamic_ip') }}</option>
					<option value="3" v-if="globalConfig.wanTypeList_PPPOE">{{ lang_t('wan.pppoe') }}</option>
					<option value="4" v-if="globalConfig.wanTypeList_PPTP">PPTP</option>
					<option value="6" v-if="globalConfig.wanTypeList_L2TP">L2TP</option>
				</select>
			</div>
			</div>
		<div class="group" v-if="globalConfig.modelType != '4g' && globalConfig.opmode != 'wisp'">
		  <div class="item-link">
		  	<a class="link" @click="discover">{{ lang_t('wan.auto_detect') }}</a>
		  </div>
	  	</div>	
	    <div v-show="proto == '0'">
		  <div class="group">
			<div class="item-l">{{ lang_t('wan.ip') }}</div>
			<div class="item-r">
			  <input type="text" v-model="staticIp" :maxlength="15">
			</div>
		  </div>
		  <div class="group">
			<div class="item-l">{{ lang_t('wan.mask') }}</div>
			<div class="item-r">
			  <input type="text" v-model="staticMask" :maxlength="15">
			</div>
		  </div>
		  <div class="group">
			<div class="item-l">{{ lang_t('wan.gateway') }}</div>
			<div class="item-r">
			  <input type="text" v-model="staticGw" :maxlength="15">
			</div>
		  </div>
	    </div>
	    <div v-show="proto == '1'"></div>
	    <div v-show="proto == '3'">
		  <div class="group">
			<div class="item-l">{{ lang_t('wan.user') }}</div>
			<div class="item-r">
			  <input type="text" v-model="pppoeUser" :maxlength="32">
			</div>
		  </div>
		  <div class="group">
			<div class="item-l">{{ lang_t('wan.pass') }}</div>
			<div class="item-r">
			  <input type="text" v-model="pppoePass" v-pass :maxlength="32">
			</div>
		  </div>
		</div>
	    <div v-show="proto == '4'">
		  <!--<div class="group">
			<div class="item-l">{{ lang_t('wan.address_mode') }}</div>
			<div class="item-r">
			  <select v-model="pptpMode">
				<option value="0">{{ lang_t('wan.dynamic') }}</option>
				<option value="1">{{ lang_t('wan.static') }}</option>
			  </select>
			</div>
		  </div>-->
		  <!--<div v-show="pptpMode == 1">
			<div class="group">
			  <div class="item-l">{{ lang_t('wan.ip') }}</div>
			  <div class="item-r">
				<input type="text" v-model="pptpIp" maxlength="15">
			  </div>
			</div>
			<div class="group">
			  <div class="item-l">{{ lang_t('wan.mask') }}</div>
			  <div class="item-r">
				<input type="text" v-model="pptpMask" maxlength="15">
			  </div>
			</div>
			<div class="group">
			  <div class="item-l">{{ lang_t('wan.gateway') }}</div>
			  <div class="item-r">
				<input type="text" v-model="pptpGw" maxlength="15">
			  </div>
			</div>
		  </div>-->
		  <div class="group">
			<div class="item-l">{{ lang_t('wan.server_address') }}</div>
			<div class="item-r">
			  <input type="text" v-model="pptpServer" :maxlength="32">
			</div>
		  </div>
		  <div class="group">
			<div class="item-l">{{ lang_t('wan.user') }}</div>
			<div class="item-r">
			  <input type="text" v-model="pptpUser" :maxlength="32">
			</div>
		  </div>
		  <div class="group">
			<div class="item-l">{{ lang_t('wan.pass') }}</div>
			<div class="item-r">
			  <input type="text" v-model="pptpPass" v-pass :maxlength="32">
			</div>
		  </div>
		</div>
	    <div v-show="proto == '6'">
	      <!--<div class="group">
			<div class="item-l">{{ lang_t('wan.address_mode') }}</div>
			<div class="item-r">
			  <select v-model="l2tpMode">
				<option value="0">{{ lang_t('wan.dynamic') }}</option>
				<option value="1">{{ lang_t('wan.static') }}</option>
			  </select>
			</div>
		  </div>-->
		  <!--<div v-show="l2tpMode == '1'">
			<div class="group">
			  <div class="item-l">{{ lang_t('wan.ip') }}</div>
			  <div class="item-r">
				<input type="text" v-model="l2tpIp" maxlength="15">
			  </div>
			</div>
			<div class="group">
			  <div class="item-l">{{ lang_t('wan.mask') }}</div>
			  <div class="item-r">
				<input type="text" v-model="l2tpMask" maxlength="15">
			  </div>
			</div>
			<div class="group">
			  <div class="item-l">{{ lang_t('wan.gateway') }}</div>
			  <div class="item-r">
				<input type="text" v-model="l2tpGw" maxlength="15">
			  </div>
		    </div>
		  </div>-->
		  <div class="group">
			<div class="item-l">{{ lang_t('wan.server_address') }}</div>
			<div class="item-r">
			  <input type="text" v-model="l2tpServer" :maxlength="32">
			</div>
		  </div>
		  <div class="group">
			<div class="item-l">{{ lang_t('wan.user') }}</div>
			<div class="item-r">
			  <input type="text" v-model="l2tpUser" :maxlength="32">
			</div>
		  </div>
		  <div class="group">
			<div class="item-l">{{ lang_t('wan.pass') }}</div>
			<div class="item-r">
			  <input type="text" v-model="l2tpPass" v-pass :maxlength="32">
			</div>
		  </div>
	    </div>
	    <div v-show="proto=='0'">
	   	  <div class="group">
			<div class="item-l">{{ lang_t('wan.pri_dns') }}</div>
			<div class="item-r">
			  <input type="text" v-model="priDns" :maxlength="15">
			</div>
		  </div>
		  <div class="group">
			<div class="item-l">{{ lang_t('wan.sec_dns') }}</div>
			<div class="item-r">
			  <input type="text" v-model="secDns" :maxlength="15">
			</div>
		  </div>
	    </div>
		<div v-show="proto == '4'">
		  <div class="group">
		    <div class="item-l">&nbsp</div>
			<div class="item-r">
			  <div style="font-size:12px;padding-right:10px;">
				<x-checkbox v-model="pptpMppe">MPPE</x-checkbox>
				<x-checkbox v-model="pptpMppc">MPPC</x-checkbox>
			  </div>
			</div>
		  </div>
		</div>
	  </div>
    </div>
  </div>  

	<!--<div v-show="dotIdx == 3">
		<div class="content">
			<div class="group">
				<div class="item-sw"><b>{{ lang_t('iptv.state') }}</b></div>
				<div class="item-r">
					<x-switch v-model="iptvEnabled"></x-switch>
				</div>
			</div>
			<div class="group" v-show="iptvEnabled">
				<div class="item-l">{{ lang_t('iptv.mode') }}</div>
				<div class="item-r">
					<select v-model="iptvVer" @change="iptvVerChange">
						<option v-for="(i,v) in iptvmodeOption" :value="i.value" :key="v">{{ i.option }}</option>
					</select>
				</div>
			</div>
			<div class="group iptv-dis" v-show="iptvEnabled">
				<div class="item-l">{{ lang_t('iptv_bak.wan_stb') }}</div>
				<div class="item-r">
					<select v-model="iptvVal.wanStrategy">
						<option v-for="(o,v) in strategyOption" :value="o.v" :key="v">{{ o.n }}</option>
					</select>
				</div>
			</div>
			<div class="group iptv-dis" v-show="iptvEnabled">
				<div class="item-l">{{ lang_t('iptv_bak.vlan_enable') }}</div>
				<div class="item-r">
					<select v-model="iptvVal.vlanEnabled">
						<option value="0">{{ lang_t('common.off') }}</option>
						<option value="1">{{ lang_t('common.on') }}</option>
					</select>
				</div>
			</div>
			<div class="group iptv-dis" v-show="iptvEnabled && iptvVal.vlanEnabled == '1'">
				<div class="item-l">VLAN Internet</div>
				<div class="item-r">
					VID
					<input type="text" v-model="iptvVal.vlanVidCpu" style="width: 40px;" maxlength="4">
					PRIO
					<input type="text" v-model="iptvVal.vlanPriCpu" style="width: 30px;" maxlength="1">
				</div>
			</div>
			<div class="group iptv-dis" v-show="iptvEnabled && iptvVal.vlanEnabled == '1' && (iptvVal.wanStrategy == '1' || iptvVal.wanStrategy == '6'|| iptvVal.wanStrategy == '7')">
				<div class="item-l">VLAN {{iptvVer=="0"?"CPU":"IPTV"}} (LAN1)</div>
				<div class="item-r">
					VID
					<input type="text" v-model="iptvVal.vlanVidLan1" style="width: 40px;" maxlength="4">
					PRIO
					<input type="text" v-model="iptvVal.vlanPriLan1" style="width: 30px;" maxlength="1">
				</div>
			</div>
			<div class="group iptv-dis" v-show="iptvEnabled && iptvVal.vlanEnabled == '1' && (iptvVal.wanStrategy == '2' || iptvVal.wanStrategy == '6' || iptvVal.wanStrategy == '7')">
				<div class="item-l">VLAN {{iptvVer=="0"?"CPU":"IPTV"}} (LAN2)</div>
				<div class="item-r">
					VID
					<input type="text" v-model="iptvVal.vlanVidLan2" style="width: 40px;" maxlength="4">
					PRIO
					<input type="text" v-model="iptvVal.vlanPriLan2" style="width: 30px;" maxlength="1">
				</div>
			</div>
			<div class="group iptv-dis" v-show="iptvEnabled && iptvVal.vlanEnabled == '1' && (iptvVal.wanStrategy == '3' || iptvVal.wanStrategy == '5' || iptvVal.wanStrategy == '7')">
				<div class="item-l">VLAN {{iptvVer=="0"?"CPU":"IPTV"}} (LAN3)</div>
				<div class="item-r">
					VID
					<input type="text" v-model="iptvVal.vlanVidLan3" style="width: 40px;" maxlength="4">
					PRIO
					<input type="text" v-model="iptvVal.vlanPriLan3" style="width: 30px;" maxlength="1">
				</div>
			</div>
			<div class="group iptv-dis" v-show="iptvEnabled && iptvVal.vlanEnabled == '1' && (iptvVal.wanStrategy == '4' || iptvVal.wanStrategy == '5')">
				<div class="item-l">VLAN {{iptvVer=="0"?"CPU":"IPTV"}} (LAN4)</div>
				<div class="item-r">
					VID
					<input type="text" v-model="iptvVal.vlanVidLan4" style="width: 40px;" maxlength="4">
					PRIO
					<input type="text" v-model="iptvVal.vlanPriLan4" style="width: 30px;" maxlength="1">
				</div>
			</div>
		</div>
	</div>-->
		<div v-show="dotIdx == 3">
			<div class="content">
				<div class="group" v-if="wifiDualband != '0'">
					<!--<div class="item-sw"><b>{{ lang_t('wifi.merge') }}<b></div>
						<div class="item-r">
						<x-switch v-model="merge"></x-switch>
						</div>
					</div>
					<div class="space"></div>
					<div class="group" v-if="!globalConfig.meshPairSupport">
						<div class="item-sw"><b><span>2.4GHz </span>{{ lang_t('wifi.state') }}</b></div>
						<div class="item-r">
						<x-switch v-model="wifi2g" :disabled="wifiSchEnabled2g" @change="abledFun"></x-switch>
						</div>
					</div>-->
					<div class="group">
						<div class="item-l"><b>{{ lang_t('wifi.wireless') }} 2.4GHz </b></div>
						<div class="item-r"></div>
					</div>
					<div class="group">
						<div class="item-l">{{ lang_t('wifi.ssid') }}:</div>
						<div class="item-r">
						<input type="text" class="right" v-model="ssid2g" :maxlength="32" :disabled="ssid_2g">
						</div>
					</div>
					<div class="group">
					<div class="item-l">{{ lang_t('wifi.pass') }}</div>
						<div class="item-r">
						<input type="text"  class="right" v-model="password2g" v-pass :maxlength="63" :disabled="pass_2g">
						</div>
					</div>
					<!--<div class="group">
						<div class="item-l">{{ lang_t('wifi.hide_ssid') }}</div>
						<div class="item-r">
						<x-switch v-model="hide2g" :disabled="hide2gdis" @change="hideChange"></x-switch>
						</div>
					</div>-->
					<div v-show="wifiDualband != '0'">
						<div class="space"></div>
							<!--<div class="group" v-if="!globalConfig.meshPairSupport">
								<div class="item-l">
									<b>{{ lang_t('wifi.state') }} 5GHz:</b>
								</div>
								<div class="item-r">
									<x-switch v-model="wifi5g" :disabled="wifiSchEnabled5g" @change="abledFun"></x-switch>
								</div>
							</div>-->
							<div class="group">
								<div class="item-l"><b>{{ lang_t('wifi.wireless') }} 5GHz </b></div>
								<div class="item-r"></div>
							</div>
							<div class="group">
							<div class="item-l">{{ lang_t('wifi.ssid') }}:</div>
							<div class="item-r">
								<input class="right" v-model="ssid5g" :maxlength="32" :disabled="ssid_5g">
							</div>
							</div>
							<div class="group">
							<div class="item-l">{{ lang_t('wifi.pass') }}:</div>
							<div class="item-r">
								<input class="right" v-model="password5g" type="text" v-pass :maxlength="63" :disabled="pass_5g">
							</div>
							</div>
							<!--<div class="group">
							<div class="item-l">{{ lang_t('wifi.hide_ssid') }}:</div>
							<div class="item-r">
								<x-switch v-model="hide5g" :disabled="hide5gdis" @change="hideChange"></x-switch>
							</div>
							</div>-->
						</div>
					</div>
					<!--<div v-show="!merge && wifiDualband == '2'">
						<div class="space"></div>
							<div class="group" v-if="!globalConfig.meshPairSupport">
							<div class="item-l"><b>{{ lang_t('wifi.state') }} 5GHz (2):</b></div>
							<div class="item-r">
								<x-switch v-model="wifi5g2" :disabled="wifiSchEnabled5g2" @change="abledFun"></x-switch>
							</div>
							</div>
							<div class="group">
							<div class="item-l">{{ lang_t('wifi.ssid') }}:</div>
							<div class="item-r">
								<input class="right" v-model="ssid5g2" :maxlength="32" :disabled="ssid_5g2">
							</div>
							</div>
							<div class="group">
							<div class="item-l">{{ lang_t('wifi.pass') }}:</div>
							<div class="item-r">
								<input class="right" v-model="password5g2" type="text" v-pass :maxlength="63" :disabled="pass_5g2">
							</div>
							</div>
							<div class="group">
								<div class="item-l">{{ lang_t('wifi.hide_ssid') }}:</div>
								<div class="item-r">
									<div style="float:right;margin:-20% -45% 0 0;">
									<x-checkbox v-model="hide5g2" :disabled="hide5g2dis"></x-checkbox>
									</div>
								</div>
							</div>
						</div>
					</div>-->
				</div>
			</div>
		<div v-show="dotIdx == 4">
			<div class="content">
				<div class="group">
					<div class="item-l">{{ lang_t('wizard.login_pass') }}</div>
					<div class="item-r">
					<input type="text" v-model="loginpass" :maxlength="32" v-pass :readonly="useWifi">
					</div>
				</div>
				<div class="group">
					<div class="item-sw">{{ lang_t('wizard.use_wifi2g_pass') }}</div>
					<div class="item-r">
					<x-switch v-model="useWifi" @change="changeUseWifi" :disabled="hssidclass2g"></x-switch>
					</div>
				</div>
			</div>
		</div>  
		<div v-show="dotIdx == 5">
			<div class="content">
				<div class="group">
					<div class="item-l2">{{ lang_t('wan.proto') }}</div>
					<div class="item-r" style="color:#f60">{{ wanMode }}</div>
				</div>
				<div class="space"></div>
				<div class="group">
					<div class="item-l2"><b> 2.4GHz {{ lang_t('wifi.wireless') }}<b></div>
					<!--<div class="item-r">{{ wifi2g ? lang_t('common.on') : lang_t('common.off') }}</div>-->
				</div>
				<div class="group">
					<div class="item-l2">{{ lang_t('wifi.ssid') }}</div>
					<div class="item-r">{{ ssid2g }}&nbsp;</div>
				</div>
				<div class="group">
					<div class="item-l2">{{ lang_t('wifi.pass') }}</div>
					<div class="item-r big-size" style="width: 75%;text-align:right;">{{ password2g }}&nbsp;</div>
				</div>
				<div v-if="wifiDualband != '0'">
					<br>&nbsp;&nbsp;
					<div class="group">
					<div class="item-l2"><b>5GHz {{ lang_t('wifi.wireless') }}</b></div>
					<!--<div class="item-r">{{merge ? (wifi2g? lang_t('common.on') : lang_t('common.off')): (wifi5g ? lang_t('common.on') : lang_t('common.off'))}}</div>-->
					</div>
					<div class="group">
					<div class="item-l2">{{ lang_t('wifi.ssid') }}</div>
					<div class="item-r">{{merge ?ssid2g: ssid5g }}&nbsp;</div>
					</div>
					<div class="group">
					<div class="item-l2">{{ lang_t('wifi.pass') }}</div>
					<div class="item-r big-size" style="width: 75%;text-align:right;">{{ password5g }}&nbsp;</div>
					</div>
				</div>
				<div>
					<br>&nbsp;&nbsp;
					<div class="space"></div>
					<div class="group">
						<div class="item-l2">{{ lang_t('wizard.login_pass') }}</div>
						<div class="item-r" style="word-break:break-all;width: 75%;text-align:right;">{{ loginpass }}&nbsp;</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div></script><script src="/plugin/vue.js"></script><script src="/plugin/jquery-3.2.1.min.js"></script><script src="/static/js/config.js"></script><script src="/static/js/phone_layout.js"></script><script src="/static/js/common.js"></script><script src="/static/js/topicurl.js"></script><script>var cs_main={template:"#main",data:function(){return{globalConfig:globalConfig,lang:$.lang,lang_t:lang_t,proto:"0",pppoeUser:"",pppoePass:"",staticIp:"",staticMask:"",staticGw:"",pptpServer:"",pptpUser:"",pptpPass:"",pptpMppe:!1,pptpMppc:!1,l2tpServer:"",l2tpUser:"",l2tpPass:"",cloneMac:"",priDns:"",secDns:"",tempWanData:{},dotIdx:0,tz:"",merge:!1,wifi2g:!1,wifi5g:!1,hide2g:!1,hide5g:!1,hide2gdis:!1,hide5gdis:!1,ssid2g:"",ssid5g:"",password2g:"",password5g:"",wifiDualband:"0",ssid_2g:!1,ssid_5g:!1,pass_2g:!1,pass_5g:!1,showMacData:!1,loginpass:"",useWifi:!1,dataCfg:{},mainHeight:"500px",wifiSchEnabled2g:!1,wifiSchEnabled5g:!1,hssidclass2g:!1,dddd:"true",meshStart:"",meshState:"99",slaveMac:"",meshResultFlag:"",meshEnabled:""}},computed:{wizardTitle:function(){switch(this.dotIdx){case 0:return this.lang_t("menu.mesh_set");case 1:return this.lang_t("wizard.timezone");case 2:return this.lang_t("wizard.internet");case 3:return this.lang_t("wizard.wireless");case 4:return this.lang_t("wizard.change_pwd");case 5:return this.lang_t("wizard.summary")}},meshStatus:function(){var t=this;return"1"==t.meshState&&"1"==t.meshEnabled&&"2"==t.meshResultFlag?1:"0"==t.meshState&&"1"==t.meshEnabled&&"2"==t.meshResultFlag?0:void 0},wanMode:function(){var t="";switch(this.proto){case"0":t=this.lang_t("wan.static_ip");break;case"1":t=this.lang_t("wan.dynamic_ip");break;case"3":t=this.lang_t("wan.pppoe");break;case"4":t="PPTP";break;case"6":t="L2TP"}return t}},created:function(){var s=this;s.getMeshInfo(),uiPost.getWizardCfg(function(t){s.dataCfg=t,s.wifiSchEnabled2g="1"==t.wifiSchEnabled2g,s.wifiSchEnabled5g="1"==t.wifiSchEnabled5g,s.defaultMac=t.defaultMac,s.tz=t.tz,s.proto=t.proto,s.pppoeUser=t.pppoeUser,s.pppoePass=t.pppoePass,"0"==t.pptpDomainFlag?s.pptpServer=t.pptpServerIp:s.pptpServer=t.pptpServerDomain,s.pptpUser=t.pptpUser,s.pptpPass=t.pptpPass,s.pptpMppe="1"==t.pptpMppe,s.pptpMppc="1"==t.pptpMppc,"0"==t.l2tpDomainFlag?s.l2tpServer=t.l2tpServerIp:s.l2tpServer=t.l2tpServerDomain,s.l2tpUser=t.l2tpUser,s.l2tpPass=t.l2tpPass,s.staticIp=t.staticIp,s.staticMask=t.staticMask,s.staticGw=t.staticGw,"0"==t.proto&&(s.priDns=t.priDns,s.secDns=t.secDns),"0"==t.clone?s.cloneMac=t.defaultMac:s.cloneMac=t.cloneMac,"0"==t.clone?s.macDisabled=!0:s.macDisabled=!1,s.wifiDualband=t.wifiDualband,s.ssid2g=t.ssid,s.hide2g="1"==t.hssid,s.password2g=t.key,s.ssid5g=t.ssid5g,s.hide5g="1"==t.hssid5g,s.password5g=t.key5g,t.lanIp==location.hostname?s.showMacData=!0:s.showMacData=!1})},mounted:function(){var t=document.getElementById("dot_id"),s=$(window).width(),i=(s-s/4-50)/2;t.style.left=i+"px",this.mainHeight=window.innerHeight-$(".btn-header-back").height()-$("#dot_id").height()-100+"px";var e,r,n=this;$("body,html").on("touchstart",function(t){e=t.originalEvent.changedTouches[0].pageX}),$("body,html").on("touchend",function(t){if(r=t.originalEvent.changedTouches[0].pageX,e<r)150<r-e&&0!=n.dotIdx&&n.dotIdx--;else if(150<e-r&&5!=n.dotIdx&&0!=n.rulesVeriy(n.dotIdx)){if(3==n.dotIdx&&0==n.wifiPassVeriy())return!1;n.dotIdx++}})},methods:{wifiPassVeriy:function(){var t=this,s=null;return t.hssidclass2g=!1,""!=t.password2g&&""!=t.password5g||(Cstool.Mark({content:t.lang_t("wifi.msg14"),cancel:function(){t.dotIdx++}}),s=!1),(32<t.password2g.length||!1===s)&&(t.hssidclass2g=!0,t.useWifi=!1),s},getMeshInfo:function(t){var s=this,i=setInterval(function(){uiPost.getWiFiMeshConfig(function(t){"1"==t.meshStart&&(s.meshResultFlag="1",Cstool.Mark({type:"load",time:"setting",content:"Mesh "+s.lang_t("mesh.meshconecting")}),s.count_time(),clearInterval(i))})},3e3)},count_time:function(){var s=this,i=setInterval(function(){uiPost.getWiFiMeshConfig(function(t){s.meshStart=t.meshStart,s.meshEnabled=t.meshEnabled,s.meshState=t.meshState,s.slaveMac=t.slaveMac,"1"==t.meshEnd&&(s.meshResultFlag="2",Cstool.Mark({type:"load",time:"finish"}),clearInterval(i))})},3e3)},discover:function(){var s=this;uiPost.discoverWan(function(t){Cstool.Mark({type:"load",time:3,content:s.lang_t("firmware.newcloudUpdateing"),success:function(){"-1"==t.discoverProto?Cstool.Mark({content:s.lang_t("wan.Tips1"),l_text:s.lang_t("common.back")}):s.proto=String(t.discoverProto)}})})},hideChange:function(t){t&&(globalConfig.meshBhBss||globalConfig.meshPairSupport||globalConfig.meshAcManageSupport)&&Cstool.Mark({content:lang_t("wifi.hssid_info"),l_text:lang_t("common.ok")})},rulesVeriy:function(t){if(2==t){if("0"==this.proto){var s=location.host.split(".")[2],i=this.staticIp.split(".")[2];if(0==(e=cs.ip(this.staticIp)))return this.errorAlert(this.lang_t("network.ip")+this.lang_t("network.msg1")),!1;if(1==e)return this.errorAlert(this.lang_t("network.ip")+this.lang_t("network.msg2")),!1;if(2==e||3==e||4==e)return this.errorAlert(this.lang_t("network.ip")+this.lang_t("network.msg6")),!1;if(i==s)return this.errorAlert(this.lang_t("network.ip")+this.lang_t("rule.msg58")),!1;if(!this.staticMask)return this.errorAlert(this.lang_t("network.mask")+this.lang_t("network.msg1")),!1;if(1==(e=cs.mask(this.staticMask)))return this.errorAlert(this.lang_t("network.msg7")),!1;if(0==(e=cs.ip(this.staticGw)))return this.errorAlert(this.lang_t("wan.gateway")+this.lang_t("network.msg1")),!1;if(1==e)return this.errorAlert(this.lang_t("wan.gateway")+this.lang_t("network.msg2")),!1;if(2==e||3==e||4==e)return this.errorAlert(this.lang_t("wan.gateway")+this.lang_t("network.msg6")),!1;if(!cs.ip_subnet(this.staticGw,this.staticMask,this.staticIp))return this.errorAlert(this.lang_t("wan.msg6")),!1;if(!this.priDns)return this.errorAlert(this.lang_t("vpn.pri_dns")+this.lang_t("vpn.msg1")),!1;if(99!=(e=cs.ip(this.priDns)))return this.errorAlert(this.lang_t("vpn.pri_dns")+this.lang_t("vpn.msg6")),!1;if(""!=this.secDns&&99!=(e=cs.ip(this.secDns)))return this.errorAlert(this.lang_t("vpn.sec_dns")+this.lang_t("vpn.msg6")),!1}if("3"==this.proto){if(0==(e=cs.string(this.pppoeUser)))return this.errorAlert(this.lang_t("wan.msg12")),!1;if(1==e)return this.errorAlert(this.lang_t("wan.msg13")),!1;if(0==(e=cs.string(this.pppoePass)))return this.errorAlert(this.lang_t("wan.msg14")),!1;if(1==e)return this.errorAlert(this.lang_t("wan.msg15")),!1}if("4"==this.proto){var e=cs.string(this.pptpServer);if(!this.pptpServer)return this.errorAlert(this.lang_t("vpn.server")+this.lang_t("vpn.msg1")),!1;if(1==e||/@|#|\^|&|\*|\(|\)|\+|_|-|=|{|}|\[|\]|\|/.test(this.pptpServer))return this.errorAlert(this.lang_t("vpn.server")+this.lang_t("network.msg6")),!1;if(0==(e=cs.string(this.pptpUser)))return this.errorAlert(this.lang_t("wan.msg12")),!1;if(1==e)return this.errorAlert(this.lang_t("wan.msg13")),!1;if(0==(e=cs.string(this.pptpPass)))return this.errorAlert(this.lang_t("wan.msg14")),!1;if(1==e)return this.errorAlert(this.lang_t("wan.msg15")),!1}if("6"==this.proto){e=cs.string(this.l2tpServer);if(!this.l2tpServer)return this.errorAlert(this.lang_t("vpn.server")+this.lang_t("vpn.msg1")),!1;if(1==e||/@|#|\^|&|\*|\(|\)|\+|_|-|=|{|}|\[|\]|\|/.test(this.l2tpServer))return this.errorAlert(this.lang_t("vpn.server")+this.lang_t("network.msg6")),!1;if(0==(e=cs.string(this.l2tpUser)))return this.errorAlert(this.lang_t("wan.msg12")),!1;if(1==e)return this.errorAlert(this.lang_t("wan.msg13")),!1;if(0==(e=cs.string(this.l2tpPass)))return this.errorAlert(this.lang_t("wan.msg14")),!1;if(1==e)return this.errorAlert(this.lang_t("wan.msg15")),!1}}else if(3==t){if(0==(e=cs.ssid(this.ssid2g)))return this.errorAlert(this.lang_t("wifi.msg1")),!1;if(4==e)return this.errorAlert(this.lang_t("wifi.msg18")),!1;if(1==e)return this.errorAlert(this.lang_t("wifi.msg2")),!1;if(2==e)return this.errorAlert(this.lang_t("wifi.msg3")),!1;if(""!=this.password2g){if(1==(e=cs.string(this.password2g,"pass")))return this.errorAlert(this.lang_t("wifi.msg5")),!1;if(this.password2g.length<8||63<this.password2g.length)return this.errorAlert(this.lang_t("wifi.msg4")),!1}if(!this.merge){var r="5GHz";if(0==(e=cs.ssid(this.ssid5g)))return this.errorAlert(r+this.lang_t("wifi.msg1")),!1;if(4==e)return this.errorAlert(this.lang_t("wifi.msg18")),!1;if(1==e)return this.errorAlert(r+this.lang_t("wifi.msg2")),!1;if(2==e)return this.errorAlert(r+this.lang_t("wifi.msg3")),!1;if(""!=this.password5g){if(1==(e=cs.string(this.password5g,"pass")))return this.errorAlert(r+this.lang_t("wifi.msg5")),!1;if(this.password5g.length<8||63<this.password5g.length)return this.errorAlert(r+this.lang_t("wifi.msg4")),!1}}}else if(4==t){if(0==(e=cs.string(this.loginpass)))return this.errorAlert(this.lang_t("login.msg1")),!1;if(1==e)return this.errorAlert(this.lang_t("wizard.msg1")),!1}},errorAlert:function(t){Cstool.Mark({content:t,l_text:this.lang_t("common.back")})},applyFun:function(){var i=this,e={},t=this.dataCfg,s=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,r=s.test(this.pptpServer),n=s.test(this.l2tpServer);"0"==this.proto?(e.staticIp=this.staticIp,e.staticMask=this.staticMask,e.staticGw=this.staticGw,e.staticMtu=t.staticMtu,e.secDns=this.secDns):"1"==this.proto?e.dhcpMtu=t.dhcpMtu:"3"==i.proto?(e.pppoeUser=this.pppoeUser,e.pppoePass=this.pppoePass,e.pppoeMtu=t.pppoeMtu):"4"==i.proto?(e.pptpMode="0",e.pptpIp=t.pptpIp,e.pptpMask=t.pptpMask,e.pptpGw=t.pptpGw,r?(e.pptpDomainFlag="0",e.pptpServerIp=this.pptpServer):(e.pptpDomainFlag="1",e.pptpServerDomain=this.pptpServer),e.pptpUser=this.pptpUser,e.pptpPass=this.pptpPass,e.pptpMtu=t.pptpMtu,e.pptpMppe=this.pptpMppe?"1":"0",e.pptpMppc=this.pptpMppc?"1":"0"):"6"==this.proto&&(e.l2tpMode="0",e.l2tpIp=t.l2tpIp,e.l2tpMask=t.l2tpMask,e.l2tpGw=t.l2tpGw,n?(e.l2tpDomainFlag="0",e.l2tpServerIp=this.l2tpServer):(e.l2tpDomainFlag="1",e.l2tpServerDomain=this.l2tpServer),e.l2tpUser=this.l2tpUser,e.l2tpPass=this.l2tpPass,e.l2tpMtu=t.l2tpMtu),e.proto=this.proto,"0"==this.proto?(e.dnsMode="1",e.priDns=this.priDns,e.secDns=this.secDns):e.dnsMode="0",e.clone="0",e.cloneMac=i.cloneMac,e.ssid=this.ssid2g,e.key=this.password2g,e.hssid=this.hide2g?"1":"0",e.ssid5g=this.ssid5g,e.key5g=this.password5g,e.hssid5g=this.hide5g?"1":"0",e.tz=this.tz,e.loginpass=this.loginpass,e.wizard="1",uiPost.setWizardCfg(e,function(t){var s=80;t.wtime&&"0"!=t.wtime&&(s=Number(t.wtime)),Cstool.Mark({type:"load",time:s,content:i.lang_t("common.effective"),success:function(){"admin"==i.loginpass?location.href="/phone/home.html":uiPost.logout(e,function(t){setTimeout(function(){var t=location.href;location.href="http://"+t.split("/")[2]},500)})}})})},operatFun:function(t){if("back"==t)0==this.dotIdx?location.href="http://"+location.host+"/phone/home.html":this.dotIdx--;else if(5==this.dotIdx)this.applyFun();else if(0!=this.rulesVeriy(this.dotIdx)){if(3==this.dotIdx&&0==this.wifiPassVeriy())return!1;this.dotIdx++}setTimeout(function(){$("input[type='text'],input[type='password']").on("focus",function(){}),$("input[type='text'],input[type='password']").on("blur",function(){})})},changeUseWifi:function(t){this.loginpass=t?this.password2g:""},abledFun:function(){this.wifi2g?(this.ssid_2g=!1,this.pass_2g=!1,this.hide2gdis=!1):(this.ssid_2g=!0,this.pass_2g=!0,this.hide2gdis=!0),this.wifi5g?(this.ssid_5g=!1,this.pass_5g=!1,this.hide5gdis=!1):(this.ssid_5g=!0,this.pass_5g=!0,this.hide5gdis=!0)}}}</script><script src="/static/js/main.js"></script></body></html>