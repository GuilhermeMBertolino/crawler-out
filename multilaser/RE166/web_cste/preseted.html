<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="proma" content="no-cache"><meta http-equiv="cache-control" content="no cache"><meta http-equiv="expires" content="0"><title></title><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><link rel="stylesheet" href="/static/css/main.css"><link rel="stylesheet" href="/static/css/common.css"><style>body{margin:0;font-family:sans-serif;font-size:14px;background:#fafafa;color:#555}.btn{width:auto;min-width:220px;height:36px;color:#fff;border:0;cursor:pointer;outline:0;background:#2ea8dc}.btn:hover{background:#1c8ebe}table{font-size:16px}</style></head><body><div id="app"></div><script type="text/x-template" id="main"><div align="center">  
  <div style="padding-top:5%;">
	<div class="fun-box">
      <table class="table"> 
        <tbody> 
		<tr>
		  <td>{{ lang_t('preseted.step1') }}</td>
		</tr>
		<tr>
		  <td>
			<button type="button" class="btn" @click="submit_create">{{ lang_t('preseted.generate_reboot') }}</button>
		  </td>
		</tr>
		<tr>
		  <td><br>{{ lang_t('preseted.step2') }}</td>
		</tr>		
		<tr>
		  <td>
			<button type="button" class="btn" @click="submit_save">{{ lang_t('preseted.export') }}</button>
		  </td>
		</tr>
		<tr>
		  <td><br>{{ lang_t('preseted.step3') }}</td>
		</tr>
		<tr>
		  <td>
			<input type="file" id="f_upload" @change="filechange">
		  </td>
		</tr>
		<tr>
		  <td>
			<button type="button" class="btn" @click.prevent="submit_update">{{ lang_t('preseted.import') }}</button>
		  </td>
		</tr>
	    </tbody>
      </table>
    </div>
    <div style="display: none;">
      <form ref="save" class="form-horizontal" method="post" :action="saveAction"></form>
    </div>
  </div>
</div></script><script src="/plugin/vue.js"></script><script src="/plugin/jquery-3.2.1.min.js"></script><script src="/static/js/config.js"></script><script src="/static/js/layout.js"></script><script src="/static/js/common.js"></script><script src="/static/js/topicurl.js"></script><script>var cs_main={template:"#main",data:function(){return{globalConfig:globalConfig,lang:$.lang,lang_t:lang_t,lanIp:"",saveAction:"/cgi-bin/cstecgi.cgi?action=savecfg&saveSystemSetting",filename:"",importAction:"/cgi-bin/cstecgi.cgi?action=upload&setting/setUploadSetting"}},created:function(){var n=this;uiPost.SystemSettings(function(t){n.lanIp=t.lanIp,""!=t.exportAction&&(n.saveAction=t.exportAction+"&preset=1"),t.importAction&&(n.importAction=t.importAction)})},methods:{submit_create:function(){var i;uiPost.createPreseted(function(t){var n=t.lan_ip;i=null!=t.wtime&&""!=t.wtime?t.wtime:120,Cstool.Count(i,"js",function(){location.href="http://"+n+"/login.html"})})},submit_save:function(t){this.$refs.save.submit()},filechange:function(){var t=document.getElementById("f_upload");if(t.files[0].name.indexOf(".dat")<0)return Cstool.Msg({content:this.lang_t("config.msg2")}),t.value="",!1},submit_update:function(){var n=this;if(""==$("#f_upload").val())return Cstool.Msg({content:this.lang_t("config.msg1")}),!1;var t=document.getElementById("f_upload").files[0];if(1<t.size/1048576)return Cstool.Msg({content:this.lang_t("config.msg3")}),!1;upload.fileUpload({data:t,url:this.importAction+"&"+globalConfig.token+"&preset=1",success:function(t){if("1"==t.settingERR){Cstool.Count(60,"js",function(){location.href="/login.html"})}else if(""!=t.settingERR)return Cstool.Msg({content:n.lang_t('config["'+t.settingERR+'"]')}),!1},error:function(t){if(""!=t.settingERR)return Cstool.Msg({content:n.lang_t('config["'+t.settingERR+'"]')}),!1}})}}}</script><script src="/static/js/main.js"></script></body></html>